"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function r(o,i,a){function s(n,e){if(!i[n]){if(!o[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(_)return _(n,!0);throw new Error("Cannot find module '"+n+"'")}e=i[n]={exports:{}};o[n][0].call(e.exports,function(e){var t=o[n][1][e];return s(t||e)},e,e.exports,r,o,i,a)}return i[n].exports}for(var _="function"==typeof require&&require,e=0;e<a.length;e++)s(a[e]);return s}({1:[function(yt,e,vt){!function(k){Object.defineProperty(vt,"__esModule",{value:!0}),yt("@tencent/thumbplayer-plugin-super-player-plugins");var p=yt("tslib"),f=yt("@tencent/thumbplayer-core"),E=yt("@tencent/thumbplayer-h5"),h=yt("@tencent/thumbplayer-plugin-live-poll"),B=yt("@tencent/thumbplayer-plugin-ui-loading"),d=yt("@tencent/thumbplayer-tvk"),V=yt("@tencent/thumbplayer-plugin-utils");function K(n){var r;return n&&n.__esModule?n:(r=Object.create(null),n&&Object.keys(n).forEach(function(e){var t;"default"!==e&&(t=Object.getOwnPropertyDescriptor(n,e),Object.defineProperty(r,e,t.get?t:{enumerable:!0,get:function(){return n[e]}}))}),r.default=n,Object.freeze(r))}function U(e){return e?$:J}var r,F=K(f),Y=K(E),Q=K(d),H="CreativePlayerPlugin",q=(f.uaTool.mobile,"3.2.3"),W=["e.news.qq.com"],j=W.includes(window.location.hostname),A="error-page",G={REPORT_LOG:"error-page:report-log"},z={error:"txp-ui-error",errorMsg:"txp-ui-error-msg",errorHandler:"txp-ui-error-handler",errorRefresh:"txp-ui-error-refresh",errorCode:"txp-ui-error-code",background:"txp-ui-error-background",clientBtn:"txp-ui-error-client-btn",browserTip:"txp-ui-error-browser"},X=function(){return(X=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},g=(vt.HOTPOINT_EVENTS=void 0,(Z=vt.HOTPOINT_EVENTS||(vt.HOTPOINT_EVENTS={})).HOT_MOUSE_OVER="ctrl:hotpoint-mouseover",Z.HOT_MOUSE_MOVE="ctrl:hotpoint-mousemove",Z.HOT_MOUSE_OUT="ctrl:hotpoint-mouseout","ctrlbar"),n=X(X({FULLSCREEN_CHANGE:"windowFullscreenChange",FULLSCREEN_ERROR:"fullscreenError",FAKE_FULLSCREEN_CHANGE:"browserFullscreenChange",CLICK_PIPBTN:"ctrl:click-pipbtn",CLICK_NEXTBTN:"ctrl:click-nextbtn",CLICK_PLAYBTN:"ctrl:click-playbtn",CLICK_REPLAY:"ctrl:click-replay",SET_LANGUAGE:"ctrl:set-language",SET_LEVEL:"ctrl:set-level",SET_AUDIO:"ctrl:set-audio",SET_PLAYRATE:"ctrl:set-playrate",SET_VOLUME:"ctrl:set-volume",TOGGLE_OVERLAY:"ctrl:toggle-overlay",MOUSE_DONW:"ctrl:progress-mousedown",MOUSE_DOWN:"ctrl:progress-mousedown",MOUSE_MOVE:"ctrl:progress-mousemove",MOUSE_UP:"ctrl:progress-mouseup",SHOW:"ctrl:show",HIDE:"ctrl:hide"},vt.HOTPOINT_EVENTS),{TEST_EVENT:"ctrl:inner-test-event",RESIZE:"ctrl:resize",SHOW_LEVELS:"ctrl:show-levels",HOVER_PROGRESS:"ctrl:hover-progress"}),J=".plugin_ctrl_txp_bottom",$=".plugin_ctrl_mobile_txp_bottom",Z=".plugin_ctrl_txp_shadow",ee=".plugin_ctrl_txp_gradient_bottom",te="_mod_thumbplayer_container_",ne="plugin_ctrl--large",re="plugin_ctrl_fake_fullscreen",e=(vt.CTRL_SIZE=void 0,(e=vt.CTRL_SIZE||(vt.CTRL_SIZE={})).LARGE="large",e.NORMAL="normal",vt.PlayBtnStatus=void 0,(e=vt.PlayBtnStatus||(vt.PlayBtnStatus={})).PAUSE="pause",e.PLAY="play",e.REPLAY="replay",e.STOP="stop",'<svg class="reporting-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"\nxmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" fill="#fff">\n<path\n  d="M784 902.4c9.6 19.2 6.4 41.6-12.8 54.4-19.2 9.6-41.6 3.2-51.2-12.8-9.6-19.2-6.4-41.6 12.8-54.4 16-12.8 38.4-8 51.2 12.8z m-233.6 81.6c0 22.4-16 38.4-38.4 38.4s-38.4-16-38.4-38.4V960c0-22.4 19.2-38.4 41.6-38.4 19.2 0 35.2 16 38.4 38.4v25.6h-3.2z m-240-43.2c-9.6 19.2-35.2 25.6-54.4 16-19.2-9.6-25.6-35.2-16-51.2l28.8-51.2c9.6-19.2 35.2-25.6 54.4-16s25.6 35.2 12.8 54.4l-25.6 48zM121.6 784c-19.2 9.6-41.6 3.2-54.4-16-9.6-19.2-6.4-41.6 12.8-54.4l76.8-44.8c19.2-9.6 41.6-3.2 54.4 16 9.6 19.2 3.2 41.6-16 54.4L121.6 784zM38.4 552c-22.4 0-38.4-16-38.4-38.4s16-38.4 38.4-38.4H160c22.4 0 38.4 19.2 38.4 38.4 0 22.4-16 38.4-38.4 38.4H38.4z m44.8-241.6c-19.2-9.6-25.6-35.2-16-51.2 9.6-19.2 35.2-25.6 54.4-16L256 320c19.2 9.6 25.6 35.2 16 54.4s-35.2 25.6-54.4 16l-134.4-80z m160-185.6l92.8 160c9.6 19.2 35.2 25.6 54.4 12.8s25.6-35.2 12.8-54.4l-92.8-160c-12.8-19.2-35.2-22.4-54.4-12.8-16 12.8-22.4 33.6-12.8 54.4z m230.4-84.8c0-22.4 16-38.4 38.4-38.4s38.4 19.2 38.4 38.4V224c0 22.4-19.2 38.4-38.4 38.4-22.4 0-38.4-19.2-38.4-38.4V40z m240 43.2c9.6-19.2 35.2-25.6 54.4-16 19.2 9.6 25.6 35.2 16 51.2l-92.8 160c-9.6 19.2-35.2 25.6-54.4 16-19.2-9.6-25.6-35.2-12.8-54.4l89.6-156.8z m188.8 160l-160 92.8c-19.2 9.6-25.6 35.2-16 54.4 12.8 19.2 35.2 25.6 54.4 12.8l160-92.8c19.2-9.6 25.6-35.2 12.8-54.4-9.6-16-32-25.6-51.2-12.8z m83.2 228.8c22.4 0 38.4 16 38.4 38.4s-16 38.4-38.4 38.4H800c-22.4 0-38.4-19.2-38.4-38.4 0-22.4 19.2-38.4 38.4-38.4h185.6z"\n  />\n</svg>'),oe='<div class="txp_info_icon txp_none">\n  <svg\n  viewBox="0 0 1024 1024"\n  version="1.1"\n  xmlns="http://www.w3.org/2000/svg"\n  >\n  <path\n    d="M512 958.016C266.08 958.016 65.984 757.952 65.984 512 65.984 266.08 266.08 65.984 512 65.984c245.952 0 446.016 200.064 446.016 446.016C958.016 757.952 757.952 958.016 512 958.016zM512 129.984C301.344 129.984 129.984 301.344 129.984 512c0 210.624 171.36 382.016 382.016 382.016 210.624 0 382.016-171.36 382.016-382.016C894.016 301.344 722.624 129.984 512 129.984z"\n  ></path>\n  <path\n    d="M512 304m-48 0a1.5 1.5 0 1 0 96 0 1.5 1.5 0 1 0-96 0Z"\n  ></path>\n  <path\n    d="M512 768c-17.664 0-32-14.304-32-32l0-288c0-17.664 14.336-32 32-32s32 14.336 32 32l0 288C544 753.696 529.664 768 512 768z"\n  ></path>\n  </svg>\n</div>\n',m="info-panel",ie={CLICK_UPLOAD:"contextmenu:click-upload"},ae="show_info_panel",y="poster",se="txp_none",_e="ctrl_hide",le="ctrl_resize",v="tips",b="context-menu",ce="thumbplayer-watermark-cover",ue="ui-watermark",de=(vt.WatermarkError=void 0,(vt.WatermarkError||(vt.WatermarkError={})).ActionWatermarkRequestFailed="001","//vm.gtimg.cn/thumbplayer/plugins/thumbplayer-plugin-super-player-plugins/".concat("1.4.173","/index.min.js")),pe=[v,A,y,g,m,ue,b],fe={AUTO:0,H264:1,H265:2},i=(vt.HEVC_LV_VALUE=void 0,(t=vt.HEVC_LV_VALUE||(vt.HEVC_LV_VALUE={}))[t.AUTO=void 0]="AUTO",t[t.NOT_SPT=0]="NOT_SPT",t[t.SD=11]="SD",t[t.HD=16]="HD",t[t.SHD=21]="SHD",t[t.FHD=26]="FHD",t[t.UHD=28]="UHD",t[t.UHD_ONLY=31]="UHD_ONLY",vt.SUPER_END_STATE=void 0,(vt.SUPER_END_STATE||(vt.SUPER_END_STATE={})).PREVIEW="preview",vt.SUPER_DATA_KEY=void 0,(t=vt.SUPER_DATA_KEY||(vt.SUPER_DATA_KEY={})).vodCGIUsed="super:cgiUsed",t.getinfoAdInfo="getinfoAdInfo",t.hlsAdRanges="hlsAdRanges",{ENV_CACHE:"__thumbplayer_env_cache",RENDER_STATS_INFO:"__thumbplayer_render_stats_info",DEGRADE_CODEC_TIME:"__thumbplayer_degradecodec_time",DYNAMIC_CONFIG:"__thumbplayer_dynamic_config"}),t=g,Ee=b,he=Object.freeze({__proto__:null,PLAY_CODEC:fe,get HEVC_LV_VALUE(){return vt.HEVC_LV_VALUE},get SUPER_END_STATE(){return vt.SUPER_END_STATE},get SUPER_DATA_KEY(){return vt.SUPER_DATA_KEY},LOCAL_STORAGE_KEY:i,ctrlbarPluginName:t,contextMenuPluginName:Ee,adGlobalName:H,adVersion:q,adScriptMaxLoadTime:1e4,skipAdDomainWhiteList:W,isInDomainWhiteList:j,CTRL_EVENTS:n,get CTRL_SIZE(){return vt.CTRL_SIZE},CtrlbarPluginName:g,DEFAULT_SHOW_QUERY:ae,ErrorPagePluginEvents:G,ErrorPagePluginName:A,get HOTPOINT_EVENTS(){return vt.HOTPOINT_EVENTS},INFO_SVG_DOM_STR:oe,InfoPanelEvents:ie,InfoPanelPluginName:m,MaxRequestRetry:3,get PlayBtnStatus(){return vt.PlayBtnStatus},PosterPluginName:y,REPORTING_SVG_ICON:e,RequestTimeout:5e3,TipsPluginName:v,UIContextMenuPluginName:b,WaterMarkCoverClassName:ce,get WatermarkError(){return vt.WatermarkError},WatermarkPluginName:ue,bodyOverflowClassName:re,classNameOnCtrlHide:_e,classNameOnCtrlResize:le,containerClassName:te,dataRoleMap:z,defaultErrorText:"åºéå¦",defaultShowTime:3,getRootClassName:U,gradientClassName:ee,hideClass:se,largeSizeClassName:ne,mobileRootClassName:$,pcRootClassName:J,shadowClassName:Z,PLUGINS_URL:de,LAZY_PLUGINS:pe}),Ae=(vt.SUPER_EVENTS=void 0,(o=vt.SUPER_EVENTS||(vt.SUPER_EVENTS={})).DEGRADE_CODEC="degradeCodec",o.PREVIEW_START="previewStart",o.PREVIEW_END="previewEnd",o.GET_VIDEO_MARK_ALL_OVER="getVideoMarkAllOver",o.ENTER_HLS_AD="enterHlsAd",o.EXIT_HLS_AD="exitHlsAd",Object.freeze({__proto__:null,get SUPER_EVENTS(){return vt.SUPER_EVENTS}})),o=["PLAY_EVENT","VIDEO_STATE","KERNEL_NAME","PLAY_MODE","END_STATE","EvtEmitter","kernelEvtBus","PAUSE_TYPE","commonTool","uaTool","Logger","cookieTool","lsTool","urlTool","domTool","netTool","videoTool","stringTool","VIDEO_CODEC","AUDIO_CODEC","CONTAINER_FORMAT"],ge=["H5_PLAY_EVENT","COMMON_DATA_KEY","DATA_EVENTS","DRM_TYPE","DRM_VALUE","H5_EXT_EVENT","AdPluginName","FullScreenMode","Plugin"],me=["PLAY_CODEC","CTRL_EVENTS","SUPER_END_STATE","SUPER_EVENTS","ctrlbarPluginName","contextMenuPluginName"],ye=["TVK_EVENTS","TVK_EVENT_DETAILS"];(s=r=r||{})[s.enabled=0]="enabled",s[s.disabled=1]="disabled";var ve,a={MidRoll:"ZC",HlsAd:"PHLS",BeforePlay:E.AD_TYPE.PRE,BeforePlayCodeName:"LD",AfterPlay:E.AD_TYPE.POST,AfterPlayCodeName:"HT"},s=(ve=ve||{},ve[ve.HLS_AD=2]="HLS_AD",f.urlTool.getUrlParamByKey(location.href,"debugvideomark"),["playrate","definition","audiotrack","language","PlayBtn","NextBtn","Progress","CtrlShow","PictureInPicture"]),be=((M={})[a.AfterPlay]=s,M[a.BeforePlay]=s,M[a.MidRoll]=s,M[a.HlsAd]=["playrate","definition","audiotrack","language","CtrlShow"],M);_.prototype.destroy=function(){E.getAdPlugin(this.player.config.instanceId)&&this.setAdPluginEvts(!1),this.setEvts(!1),this.player=null,this.corePlayer=null},_.prototype.setEvts=function(e){var t,n=this,r=(this.evtMap||(this.evtMap={player:((t={})[E.H5_PLAY_EVENT.AD_PLAYING]=this.onAdPlaying.bind(this),t[E.H5_PLAY_EVENT.AD_END]=this.onAdEnd.bind(this),t[E.H5_PLAY_EVENT.AD_AUTOPLAY_BLOCKED]=this.onAdAutoplayBlocked.bind(this),t[E.H5_PLAY_EVENT.VIDEO_TIMEUPDATE]=this.onVideoTimeUpdate.bind(this),t[E.H5_PLAY_EVENT.AD_PAUSE]=this.onAdPaused.bind(this),t[E.H5_PLAY_EVENT.AD_RESUME]=this.onAdResume.bind(this),t),adPlugin:{enterCountdownCompleteEvt:this.onWillPlayMidRollAd.bind(this),enterCountdownEvt:this.onEnterMidRollAdCountdown.bind(this)},msg:((t={})[E.H5_EXT_EVENT.GETINFO_OVER]=this.onVideoReqInfoEnd.bind(this),t)}),e?this.player.on:this.player.off),o=(Object.keys(this.evtMap.player).forEach(function(e){r.apply(n.player,[e,n.evtMap.player[e]])}),e?this.player.on:this.player.off);Object.keys(this.evtMap.msg).forEach(function(e){o.apply(n.player.pluginMsg,[e,n.evtMap.msg[e]])})},_.prototype.setAdPluginEvts=function(e){var t=this,n=E.getAdPlugin(this.player.config.instanceId),r=e?n.on:n.off;Object.keys(this.evtMap.adPlugin).forEach(function(e){r.apply(n,[e,t.evtMap.adPlugin[e]])})},_.prototype.onAdPlaying=function(e){var t,n=this;(t={})[a.BeforePlay]=function(){return n.setCtrlBarState(r.disabled,a.BeforePlay)},t[a.MidRoll]=function(){return n.setCtrlBarState(r.disabled,a.MidRoll)},t[a.AfterPlay]=function(){return n.setCtrlBarState(r.disabled,a.AfterPlay)},null!=(e=t[null==(t=e.data)?void 0:t.adType])&&e.apply(this),null!=(t=this.player.loadingPlugin)&&t.hide()},_.prototype.onAdPaused=function(){var e=this.player.ctrlbarPlugin;e&&!f.uaTool.mobile&&(e.show(!0),e.setCompDisable("PlayBtn",!1))},_.prototype.onAdResume=function(e){var e=e.data.adtype,t=[a.AfterPlayCodeName,a.MidRoll,a.BeforePlayCodeName],n=this.player.ctrlbarPlugin;n&&!f.uaTool.mobile&&t.includes(e)&&n.setCompDisable("PlayBtn")},_.prototype.onAdEnd=function(e){var t,n=this;(t={})[a.BeforePlay]=function(){return n.setCtrlBarState(r.enabled,a.BeforePlay)},t[a.MidRoll]=function(){n.setCtrlBarState(r.enabled,a.MidRoll),n.player.play()},t[a.AfterPlay]=function(){return n.setCtrlBarState(r.enabled,a.AfterPlay)},null!=(e=t[null==(t=e.data)?void 0:t.adType])&&e.apply(this)},_.prototype.onAdAutoplayBlocked=function(e){e.data.adType===a.BeforePlay&&(null!=(e=this.player.loadingPlugin)&&e.hide(),e=this.player.ctrlbarPlugin)&&(e.show(!0),e.setCompDisable("PlayBtn",!1),e.setCompDisable(["PictureInPicture","playrate"],!0))},_.prototype.onWillPlayMidRollAd=function(){this.player.pause(),E.getAdPlugin(this.player.config.instanceId).playAd({adType:a.MidRoll})},_.prototype.onEnterMidRollAdCountdown=function(){this.setCtrlBarState(r.disabled,a.MidRoll)},_.prototype.prepareMidRollAdRequestParam=function(){var e=this.player.getCommonKv(E.COMMON_DATA_KEY.vid),t=E.getAdPlugin(this.player.config.instanceId).getAdParams({vid:e,coverId:this.player.getCommonKv(E.COMMON_DATA_KEY.cid),adType:a.MidRoll}),n=(t.adparam&&(t=t.adparam),this.player.getCommonKv(vt.SUPER_DATA_KEY.getinfoAdInfo)),n=(null!=n&&n.adsid&&(t.session_id=n.adsid),{pr:1,otype:"json",idlist:e,strAdParam:f.urlTool.convertUrlParam(p.__assign(p.__assign({},t),{anchor:"1"})),vuid:f.cookieTool.get("vuserid")||f.cookieTool.get("vqq_vuserid")}),e=this.player.getCommonKv(vt.SUPER_DATA_KEY.hlsAdRanges);return 0<(null==e?void 0:e.length)&&(n.adsegments=JSON.stringify({ad_segments:e.map(function(e){return{start_time:e.start,duration:e.end-e.start}})})),n},_.prototype.setCtrlBarState=function(e,t){var n=this.player.plugins[g];n&&(n.setCompDisable(be[t],!!e),n.setHotKeysDisable(!!e))},_.prototype.onVideoReqInfoEnd=function(e){var e=e.data,t=((null==e?void 0:e.parseData)||{}).vitem;null!=e&&e.error||(t&&t.ad?(e=function(e){var t=[];if(null!=e&&e.adpinfo){var n=null;try{n=JSON.parse(e.adpinfo)}catch(e){}null!=(e=null==n?void 0:n.plugin_info)&&e.forEach(function(e){+e.optype===ve.HLS_AD&&t.push({start:e.ad_offset_time,end:e.ad_offset_time+e.ad_dura})})}return t}(t.ad),this.player.setCommonKv(vt.SUPER_DATA_KEY.hlsAdRanges,e),this.player.setCommonKv(vt.SUPER_DATA_KEY.getinfoAdInfo,t.ad),this.logger.log("hlsAdRanges from getinfo is ",e)):this.player.setCommonKv(vt.SUPER_DATA_KEY.hlsAdRanges,null))},_.prototype.onVideoTimeUpdate=function(e){e=(e.data||{}).playtime;e<=0||this.checkWhetherEnterOrExitHlsAd(e)},_.prototype.checkWhetherEnterOrExitHlsAd=function(t){var e=this.player.getCommonKv(vt.SUPER_DATA_KEY.hlsAdRanges);!e||e.length<=0?this.exitHlsAd():(e=e.find(function(e){return e.start<=t&&t<=e.end}),!this.isHlsAdPlaying&&e?this.enterHlsAd(t,e):this.isHlsAdPlaying&&!e&&this.exitHlsAd())},_.prototype.enterHlsAd=function(e,t){this.isHlsAdPlaying||(this.logger.log("enter hlsAd, playtime=".concat(e,", range="),t),this.isHlsAdPlaying=!0,this.player.emit(vt.SUPER_EVENTS.ENTER_HLS_AD,{hlsAdRange:t}))},_.prototype.exitHlsAd=function(){this.isHlsAdPlaying&&(this.logger.log("exit hlsAd...."),this.isHlsAdPlaying=!1,this.player.emit(vt.SUPER_EVENTS.EXIT_HLS_AD))};var Te=_;function _(e,t){var n=this;this.player=e,this.corePlayer=t,this.isHlsAdPlaying=!1,this.logger=new f.Logger(this.player.config.instanceId,"AdLogic"),this.setEvts(!0),this.player.pluginMsg.once("pluginsetup:".concat(E.AdPluginName),function(){n.setAdPluginEvts(!0)})}l.prototype.destroy=function(){this.setEvts(!1),this.player=null},l.prototype.showDefaultPoster=function(){function e(){o===E.PLAY_MODE.VOD&&a&&t.showPoster(a)}var t=this,n=this.player.config,r=n.videoId,o=n.type,i=n.lazyInitPlugins,n=n.videoInitConfig,a=r;n&&("string"==typeof n?a=n:(r=n.vid)&&(a=r));i?this.player.pluginMsg.once("pluginsetup:".concat(y),function(){e()}):e()},l.prototype.showPoster=function(e){var t=this.player.config,n=t.poster,r=t.disablePoster,t=t.type,o=this.player.getPlugin(y);!r&&o&&(null!=n&&n.src?o.show(n.src):t===E.PLAY_MODE.VOD?e&&"string"==typeof e&&o.showByVid(p.__assign(p.__assign({},n),{vid:e})):o.show("https://puui.qpic.cn/vupload/0/20171225_1514277750947.jpeg/0"))},l.prototype.setEvts=function(e){var t,n=this,r=(this.evtMap||(this.evtMap=((t={})[E.H5_PLAY_EVENT.AD_AUTOPLAY_BLOCKED]=this.onAdAutoplayBlocked.bind(this),t[E.H5_PLAY_EVENT.AD_PLAYING]=this.onAdPlaying.bind(this),t[E.H5_PLAY_EVENT.PLAY_SESSION_END]=this.onPlaySessionEnd.bind(this),t)),e?this.player.on:this.player.off);Object.keys(this.evtMap).forEach(function(e){r.apply(n.player,[e,n.evtMap[e]])})},l.prototype.onAdAutoplayBlocked=function(e){e.data.adType===E.AD_TYPE.PRE&&this.showPoster(this.player.vid)},l.prototype.onAdPlaying=function(e){e.data.adType===E.AD_TYPE.POST&&(this.hasPostAdInPlaySession=!0)},l.prototype.waitSessionStart=function(){var r=this;return new Promise(function(t){function n(){return t(!0)}r.player.once(E.H5_PLAY_EVENT.PLAY_SESSION_START,n),setTimeout(function(){var e;null!=(e=r.player)&&e.off(E.H5_PLAY_EVENT.PLAY_SESSION_START,n),t(!1)},De)})},l.prototype.onPlaySessionEnd=function(e){var r=e.data;return p.__awaiter(this,void 0,void 0,function(){var t,n;return p.__generator(this,function(e){switch(e.label){case 0:return(t=r.curFlowNodeName,n=r.endState,this.hasPostAdInPlaySession)?(this.hasPostAdInPlaySession=!1,this.showPoster(this.player.vid),[2]):Pe.test(t)&&n!==E.END_STATE.NORMAL?[4,this.waitSessionStart()]:[3,2];case 1:e.sent()||this.showPoster(this.player.vid),e.label=2;case 2:return[2]}})})};var Ce=l;function l(e){this.player=e,this.hasPostAdInPlaySession=!1,this.setEvts(!0),this.showDefaultPoster()}var Ie,Pe=/AdFlowNode/i,De=400;function Oe(e,t,n){if(t&&n)for(var r=[{checker:function(){return e===f.PLAY_MODE.LIVE&&"load"===t},msg:"live mode does not support load()"},{checker:function(){return e===f.PLAY_MODE.LIVE&&"play"===t&&n.vid},msg:"vid is not supported in live mode"},{checker:function(){return e===f.PLAY_MODE.VOD&&n.cnlid},msg:"cnlid is not supported in vod mode"},{checker:function(){return n.vid&&!/^\w{11}$/.test(n.vid)},msg:"vid is illegal"}],o=0,i=r.length;o<i;o++)if(r[o].checker())throw new Error(r[o].msg)}function we(e,t){var n;return(t=void 0!==t&&t)?(t=(t=e).split(" "),n=t[0],t=t[1],[n,t]):3<=(null==(n=null==e?void 0:e.match(/(.*);\((.*)\)/))?void 0:n.length)?[n[1],n[2]]:[null!=e?e:"",""]}function Me(){var e="npm";try{e="npm"}catch(e){}var t="";try{t="1.12.4"}catch(e){}var n="";try{n="1669176278378"}catch(e){}var r=!1;try{r="1"===k.env.__LOCAL_DEV__}catch(e){}return{CHANNEL:e,VERSION:t,BUILD_TIME:n,LOCAL_DEV:r}}(s=Ie=Ie||{}).debugSuper="__debugSuper",s.logLevel="__logLevel",s.downloadKit="__downloadKit";c.prototype.destroy=function(){this.setPreviewListener(!1),this.player=null},c.prototype.setPreviewListener=function(e){e=(e?this.player.on:this.player.off).bind(this.player);e(E.H5_PLAY_EVENT.PLAY_SESSION_START,this.onVideoSessionStart),e(E.H5_PLAY_EVENT.VIDEO_REQ_INFO_END,this.onVideoReqInfoEnd),e(E.H5_PLAY_EVENT.VIDEO_PLAYING,this.onVideoPlaying),e(E.H5_PLAY_EVENT.VIDEO_TIMEUPDATE,this.onVideoTimeUpdate),e(E.H5_PLAY_EVENT.VIDEO_PAUSE,this.onVideoPause),e(E.H5_PLAY_EVENT.PLAY_SESSION_END,this.onPlaySessionEnd)},c.prototype.checkPreviewOverOnVodMode=function(e){var t=this;return!(this.previewDuration===u||e<this.previewDuration||this.isPreviewEnd||(f.uaTool.mobile?setTimeout(function(){t.player.corePlayer.stop(vt.SUPER_END_STATE.PREVIEW)}):(this.player.pause(),this.disableCtrlAction()),0))},c.prototype.checkPreviewOverOnLiveMode=function(){var e=this;return!(this.previewDuration===u||this.previewStartTimeOnLive<=0||this.isPreviewEnd||+new Date-this.previewStartTimeOnLive<=1e3*this.previewDuration||(setTimeout(function(){e.player.corePlayer.stop(vt.SUPER_END_STATE.PREVIEW)}),0))},c.prototype.setCtrlPlayBtnStatus=function(e){var t=null==(t=null==(t=this.ctrlPlugin)?void 0:t.instances)?void 0:t.PlayBtn;t&&(t.el.dataset.status=e)},c.prototype.setCtrlMaxPercent=function(e){void 0===e&&(e=1);var t=null==(t=null==(t=this.ctrlPlugin)?void 0:t.instances)?void 0:t.Progress;t&&(t.maxPercent=e)},c.prototype.disableCtrlAction=function(){this.ctrlPlugin&&(this.lastHotKeysDisabled=this.ctrlPlugin.getIsHotKeysDisabled(),this.lastCtrlShowDisabled=this.ctrlShow.shadowClickDisabled,this.ctrlShow.shadowClickDisabled=!0,this.ctrlPlugin.setHotKeysDisable(!0))},c.prototype.restoreCtrlBarAction=function(){this.ctrlPlugin&&(this.ctrlPlugin.setHotKeysDisable(this.lastHotKeysDisabled),this.ctrlShow.shadowClickDisabled=this.lastCtrlShowDisabled)},c.prototype.showTips=function(){var e,t,n;[/^http(s?):\/\/v\.qq(\.com)\/x\/(cover|page)\//.test(location.href),f.uaTool.browser.qqlive].some(function(e){return e})||(t=f.commonTool.formatPlayTime(this.previewDuration),n=function(e,t,n){if(!e)return"";t="0"!==t?"_".concat(t):"";var r=e.substr(0,1),o=e.substr(e.length-2,1),i=e.substr(e.length-1,1),r="".concat("//v.qq.com/page","/").concat(r,"/").concat(o,"/").concat(i,"/").concat(e).concat(t,".html");return n&&(r+="?start=".concat(n)),r}(this.player.vid,"0"),null!=(e=this.player.tipsPlugin)&&e.show({text:"å¯è¯ç ".concat(t,'ï¼å»è¾è®¯è§é¢è§çå®æ´ç <a target="_blank;" href="').concat(n,'">ç«å³åå¾</a>'),time:-1}))},Object.defineProperty(c.prototype,"isVod",{get:function(){return this.player.config.type===E.PLAY_MODE.VOD},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"ctrlShow",{get:function(){var e;return null==(e=null==(e=this.ctrlPlugin)?void 0:e.instances)?void 0:e.CtrlShow},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"ctrlPlugin",{get:function(){return this.player.plugins[g]},enumerable:!1,configurable:!0});var xe=c;function c(e){var n=this;this.player=e,this.previewDuration=u,this.isPreviewEnd=!1,this.lastHotKeysDisabled=!1,this.lastCtrlShowDisabled=!1,this.previewStartTimeOnLive=0,this.onVideoSessionStart=function(){n.ctrlPlugin&&n.isVod&&(n.ctrlPlugin.duration=void 0)},this.onVideoReqInfoEnd=function(e){var e=e.data,t=e.code,e=e.data;t!==E.ErrorCode.SUC||(e=(t=(null==e?void 0:e.parseData)||{}).preview,t=t.duration,Number.isNaN(e))||e<=0||(n.previewDuration=e,n.isVod?(n.showTips(),n.ctrlPlugin&&(n.player.ctrlbarPlugin.duration=f.uaTool.mobile?n.previewDuration:t,f.uaTool.mobile||n.setCtrlMaxPercent(e/t))):n.showTips(),n.player.emit(vt.SUPER_EVENTS.PREVIEW_START,{previewDuration:e}))},this.onVideoPlaying=function(e){e.data.isFirst&&(n.previewStartTimeOnLive=+new Date),n.isPreviewEnd&&(n.isPreviewEnd=!1,n.ctrlPlugin)&&n.restoreCtrlBarAction()},this.onVideoTimeUpdate=function(e){e=e.data.playtime;(n.isVod?n.checkPreviewOverOnVodMode(e):n.checkPreviewOverOnLiveMode())&&(n.isPreviewEnd=!0,n.player.emit(vt.SUPER_EVENTS.PREVIEW_END,{previewDuration:n.previewDuration}))},this.onPlaySessionEnd=function(){var e;n.previewDuration!==u&&null!=(e=n.player.tipsPlugin)&&e.hide(),n.previewDuration=u,n.previewStartTimeOnLive=0,n.ctrlPlugin&&(n.setCtrlMaxPercent(1),n.restoreCtrlBarAction())},this.onVideoPause=function(){n.isPreviewEnd&&n.setCtrlPlayBtnStatus(vt.PlayBtnStatus.REPLAY)},this.setPreviewListener(!0)}var Re,u=0,Se=["//vd6.l.qq.com/proxyhttp","//vi.l.qq.com/proxyhttp"],Le={retryCount:3};(M=Re=Re||{}).onlyvinfo="onlyvinfo",M.onlyad="onlyad",M.vinfoad="vinfoad";var T,Ne,C,I,ke="70015001",Be="70015003",s=((s=T=T||{}).SD="sd",s.HD="hd",s.SHD="shd",s.FHD="fhd",s.UHD="uhd",s.DOLBY="dolby",s.HDR10="hdr10",s.SFR_HDR="sfr_hdr",(M=Ne=Ne||{})[M.mp4=1]="mp4",M[M.hls=3]="hls",(s=C=C||{}).IGNORE="ignore",s.CONTINUE="continue",s.OUT_OF_TIMES="outOfTimes",(M=I=I||{})[M.UNKNOWN=0]="UNKNOWN",M[M.FRAME_DROP=1]="FRAME_DROP",M[M.WASM_RENDER=2]="WASM_RENDER",M[M.WASM_SPT_ERR=3]="WASM_SPT_ERR",M[M.ORG_SPT_ERR=4]="ORG_SPT_ERR",M[M.USER=5]="USER",P.prototype.destroy=function(){this.player=null,this.config=null},P.prototype.onSessionStart=function(){this.retryTimesInSession=0,this.retryTimes=0},P.prototype.onRetrySucc=function(){this.retryTimes=0},P.prototype.check=function(e){return null},P.prototype.getRetryContinueResult=function(e,t){var n=e.playtime,e=e.error,r=t||{},o=r.degradeCodecExpireTime,o=void 0===o?0:o,r=r.degradeReason,r=void 0===r?I.UNKNOWN:r,n={videoReqInfoParam:{},videoLoadParam:{startTime:n,kernelName:void 0}};return t&&this.canDegradeCodecDefn()&&(n.videoReqInfoParam.hevclv=vt.HEVC_LV_VALUE.NOT_SPT),this.logger.log("retry ".concat(C.CONTINUE," on ").concat(this.checkEvt,",\n    retryTimes=").concat(this.retryTimes,", retryTimesInSession=").concat(this.retryTimesInSession,",\n    playParam=").concat(f.jsonTool.safelyStringify(n),",\n    error=").concat(null==e?void 0:e.code)),{flag:C.CONTINUE,error:e,updatePlayParam:n,retryTimes:this.retryTimes,retryTimesInSession:this.retryTimesInSession,degradeCodecExpireTime:o,degradeReason:r}},P.prototype.canDegradeCodecDefn=function(e){return e=e||this.player.getCommonKv(E.COMMON_DATA_KEY.currentDefn),-1!==[T.SD,T.HD,T.SHD,T.FHD].indexOf(e)},P);function P(e){this.checkEvt=null,this.retryTimes=0,this.retryTimesInSession=0,this.player=e,this.config=e.config,this.logger=new f.Logger(this.config.instanceId,"RetryChecker")}Ve=s,p.__extends(D,Ve),D.prototype.check=function(e){var t,n=e.data.videoInfo.error;return this.retryTimes>=this.config.maxRetryGetinfoTimes||(t=this.player.config.type===f.PLAY_MODE.LIVE?this.config.maxRetryGetinfoTimesInLiveSession:this.config.maxRetryGetinfoTimesInVodSession,this.retryTimesInSession>=t)?{flag:C.OUT_OF_TIMES,error:n,retryTimes:this.retryTimes,retryTimesInSession:this.retryTimesInSession}:this.checkWasmErrorCode(e)||this.checkSafariHlsKernelError(e)||this.checkOriginErrorCode(e)||this.checkNormalErrorCode(e)||{flag:C.IGNORE}},D.prototype.updateRetryTimes=function(){this.retryTimes+=1,this.retryTimesInSession+=1},D.prototype.checkNormalErrorCode=function(e){e=e.data.videoInfo;return this.updateRetryTimes(),this.getRetryContinueResult(e)},D.prototype.checkWasmErrorCode=function(e){var e=e.data.videoInfo,t=e.error.code;return this.config.enableDegradeOnLowPerformance&&"70060003"===t?(this.updateRetryTimes(),this.getRetryContinueResult(e,{degradeCodecExpireTime:0,degradeReason:I.WASM_SPT_ERR})):null},D.prototype.checkOriginErrorCode=function(e){var e=e.data.videoInfo,t=e.error;return e.config&&e.config.vcodec!==f.CODEC.H264&&this.config.enableDegradeOnLowPerformance&&(t.code===f.ERROR_CODE.MEDIA_ERR_DECODE||t.code===f.ERROR_CODE.MEDIA_ERR_SRC_NOT_SUPPORTED)?(this.updateRetryTimes(),this.getRetryContinueResult(e,{degradeCodecExpireTime:0,degradeReason:I.ORG_SPT_ERR})):null},D.prototype.checkSafariHlsKernelError=function(e){var e=e.data.videoInfo,t=e.playtime,n=e.error;return f.uaTool.browser.safari&&this.player.kernelName===f.KERNEL_NAME.HLS_JS&&(null==(e=e.config)?void 0:e.vcodec)===f.CODEC.H264&&n.code===f.ERROR_CODE.MEDIA_ERR_DECODE?(this.updateRetryTimes(),{flag:C.CONTINUE,error:n,updatePlayParam:{videoLoadParam:{startTime:t,kernelName:f.KERNEL_NAME.ORIGIN}},retryTimes:this.retryTimes,retryTimesInSession:this.retryTimesInSession}):null};var Ve,Ke=D;function D(){var e=null!==Ve&&Ve.apply(this,arguments)||this;return e.checkEvt=f.PLAY_EVENT.ERROR,e}Ue=s,p.__extends(Ye,Ue),Ye.prototype.check=function(e){e=e.data.videoInfo;if(this.config.enableDegradeOnLowPerformance&&this.player&&this.player.currentVideoInfo&&e.config.vcodec!==f.CODEC.H264&&this.player.kernelName!==f.KERNEL_NAME.WASM&&this.canDegradeCodecDefn()&&!(1<=this.retryTimesInSession)){var t=((null==(t=this.player.currentVideoInfo)?void 0:t.qualityInfo)||{}).intervalFrameDropped;if(this.intervalFrameDroppedArr.push(void 0===t?0:t),60<=this.intervalFrameDroppedArr.length){t=this.intervalFrameDroppedArr.reduce(function(e,t){return e+t})/60;if(this.intervalFrameDroppedArr.length=0,t>=this.config.maxFrameDropRate)return this.logger.log("dropframe rate ".concat(t," is more than ").concat(this.config.maxFrameDropRate)),this.retryTimesInSession+=1,this.getRetryContinueResult(e,{degradeCodecExpireTime:this.config.maxDegradeCodecExpireTime,degradeReason:I.FRAME_DROP})}}return{flag:C.IGNORE}};var Ue,Fe=Ye;function Ye(){var e=null!==Ue&&Ue.apply(this,arguments)||this;return e.checkEvt=f.PLAY_EVENT.TIME_UPDATE,e.intervalFrameDroppedArr=[],e}Qe=s,p.__extends(O,Qe),O.prototype.onSessionStart=function(){this.lowRenderFrameCount=0,this.renderTotalCount=0,Qe.prototype.onSessionStart.call(this)},O.prototype.check=function(e){var t=e.data.videoInfo,n=this.config.minRenderFrameRate<1&&0<this.config.minRenderFrameRate&&this.config.maxLowRenderFrameRate<1&&0<this.config.maxLowRenderFrameRate;if(this.config.enableDegradeOnLowPerformance&&n&&this.player.kernelName===f.KERNEL_NAME.WASM&&this.canDegradeCodecDefn()){n=(this.player.currentVideoInfo||{}).videoFrameRate;if(n&&!(n<0)&&!(1<=this.retryTimesInSession)){n=1e3/n*this.config.minRenderFrameRate,e=e.data.renderCostTime;if(this.lowRenderFrameTimeCostArr.push(e),e<n&&this.lowRenderFrameCount++,this.renderTotalCount++,1e3<=this.renderTotalCount){e=this.recordStats(),n=this.lowRenderFrameCount/this.renderTotalCount;if(this.renderTotalCount=0,this.lowRenderFrameCount=0,n>this.config.maxLowRenderFrameRate)return this.logger.log("low render frame rate ".concat(n," is more than ").concat(this.config.maxLowRenderFrameRate)),this.writeStats(e),this.retryTimesInSession+=1,this.getRetryContinueResult(t,{degradeCodecExpireTime:this.config.maxDegradeCodecExpireTime,degradeReason:I.WASM_RENDER})}}}return{flag:C.IGNORE}},O.prototype.recordStats=function(){var e={lowRenderFrameTimeCostArr:this.lowRenderFrameTimeCostArr.slice(-200),lowRenderFrameCount:this.lowRenderFrameCount,renderTotalCount:this.renderTotalCount,maxLowRenderFrameRate:this.config.maxLowRenderFrameRate,minRenderFrameRate:this.config.minRenderFrameRate};return this.lowRenderFrameTimeCostArr.length=0,e},O.prototype.writeStats=function(e){try{var t=JSON.stringify(e);f.lsTool.setData(i.RENDER_STATS_INFO,t)}catch(e){}};var Qe,He=O;function O(){var e=null!==Qe&&Qe.apply(this,arguments)||this;return e.checkEvt=f.PLAY_EVENT.VIDEO_FRAME_RENDER,e.lowRenderFrameCount=0,e.lowRenderFrameTimeCostArr=[],e.renderTotalCount=0,e}w.prototype.destroy=function(){this.setCheckEvents(!1),this.setPlayerEvents(!1),this.retryCheckers.forEach(function(e){return e.destroy()}),this.player=null,this.flowManager=null,this.retryCheckers=null},w.prototype.startRetry=function(e,t){var n=e.degradeCodecExpireTime,n=void 0===n?0:n,r=e.degradeReason,r=void 0===r?I.UNKNOWN:r;if(r===I.USER&&!this.canRetry())return!1;0<n&&(n=n,r=r,n=JSON.stringify({time:Date.now(),degradeExpireTime:n,degradeReason:r}),f.lsTool.setData(i.DEGRADE_CODEC_TIME,n));r=this.flowManager.flowNodeList.find(function(e){return"VideoFlowNode"===e.getName()});return!!r&&(r.retry(t,e),!0)},w.prototype.canRetry=function(){return!!this.player.vid},w.prototype.setCheckEvents=function(e){var t=this,n=(e=void 0===e?!0:e)?this.player.on:this.player.off;this.retryCheckers.map(function(e){return e.checkEvt}).forEach(function(e){n.call(t.player,e,t.checkerEvtHandler)})},w.prototype.setPlayerEvents=function(e){var t=this,n=e?this.player.on:this.player.off;Object.keys(this.evtMap).forEach(function(e){n.call(t.player,e,t.evtMap[e])})};var qe=w;function w(t,e){var r=this;this.player=t,this.flowManager=e,this.retryCheckers=[],this.onPlaySessionStartHandler=function(){r.retryCheckers.forEach(function(e){return e.onSessionStart()})},this.onVideoPlaying=function(e){e.data,r.retryCheckers.forEach(function(e){return e.onRetrySucc()})},this.checkerEvtHandler=function(e){var t,n;r.canRetry()&&(t=e.type,n=r.retryCheckers.find(function(e){return e.checkEvt===t}))&&(e=(n=n.check(e)).flag)!==C.IGNORE&&(e===C.CONTINUE?r.startRetry(n,!1):e===C.OUT_OF_TIMES&&r.startRetry(n,!0))},[Fe,He,Ke].forEach(function(e){r.retryCheckers.push(new e(t))}),this.evtMap=((e={})[E.H5_PLAY_EVENT.PLAY_SESSION_START]=this.onPlaySessionStartHandler,e[E.H5_PLAY_EVENT.VIDEO_PLAYING]=this.onVideoPlaying,e),this.setCheckEvents(!0),this.setPlayerEvents(!0)}function We(){var e=f.urlTool.getTopFrameUrl(),e=f.urlTool.getDomainOfURL(e);return["v.qq.com","film.qq.com"].includes(e)}var je=Me().VERSION,s=f.uaTool.mobile?"11001":(M=We(),f.uaTool.os.windows&&M?"10201":f.uaTool.os.windows&&!M?"70201":f.uaTool.os.mac&&M||(!f.uaTool.os.mac||M)&&M?"10901":"70901"),M=function(e){if("11001"===e){if(f.uaTool.os.iphone||f.uaTool.os.ipod)return"v3010";if(f.uaTool.os.ipad)return"v4010";if(f.uaTool.os.tablet)return"v6010";if(f.uaTool.os.android)return"v5010";if(f.uaTool.browser.IEMobile)return"v7010"}return{70201:"v1104",70901:"v1103"}[e]||"v1010"}(s),Ge={platform:s,sdtfrom:M},ze={enableDegradeOnLowPerformance:!0,maxDegradeCodecExpireTime:432e5,minRenderFrameRate:.8,maxLowRenderFrameRate:.3,maxFrameDropRate:.2,maxRetryGetinfoTimes:3,maxRetryGetinfoTimesInVodSession:10,maxRetryGetinfoTimesInLiveSession:30,enableTVK:!0},Xe={platform:"10201",sdtfrom:"10201"};function Je(e,t){void 0===e&&(e=E.PLAY_MODE.VOD);var n,r=t.removeComponents,r=void 0===r?[]:r,o=r.includes(y)||!!t.disablePoster,i=r.includes(g)||!!t.disableCtrlbar,a=r.includes(A)||!!t.disableErrorPage,s=r.includes(v)||!!t.disableTips,_=r.includes(B.UILoadingPlugin.pluginName)||!!t.disableLoading,l=r.includes(b)||!!t.disableCtxMenu,c=r.includes(ue)||!!t.disableWatermark,r=r.includes(m),u=((n={})[y]={isEnabled:!o,config:t.poster},n[g]={isEnabled:!i},n[A]={isEnabled:!a,config:{showOnError:!0}},n[v]={isEnabled:!s},n[B.UILoadingPlugin.pluginName]={isEnabled:!_},n[b]={isEnabled:!V.isMobile&&!l,config:{menus:[{role:"version",label:je||"1.3.0"}]}},n[m]={isEnabled:!r,config:{defaultInfo:!0}},n[h.LivepollPlugin.pluginName]={isEnabled:e===E.PLAY_MODE.LIVE,config:{livepid:null==(o=t.livepollConfig)?void 0:o.livepid}},n[ue]={isEnabled:!c},n),d=[];return Object.keys(u).forEach(function(e){var t=u[e],n=t.isEnabled,t=t.config;n&&d.push(t?[e,t]:e)}),d}function $e(e,t){var n=(null==(n=e.dynamicConfig)?void 0:n.enableP2PChannlType)||e.enableP2PChannlType||[],r=e.enableP2P,r=void 0!==r&&r,e=e.businessConfig,e=(void 0===e?{}:e).type,o=f.urlTool.getUrlParamByKey(location.href,Ie.downloadKit);return"0"!==o&&("1"===o||(r?!!r:-1!==["10901","10201"].indexOf(t)||-1!==n.indexOf(e)))}function Ze(e){var t,n=e.plugins,n=void 0===n?[]:n,r=e.mode,r=void 0===r?E.PLAY_MODE.VOD:r,o=e.businessConfig,o=void 0===o?{}:o,i=e.coreConfig,i=void 0===i?{}:i,a=e.pluginConfig,a=void 0===a?{}:a,s=e.dynamicConfig,s=void 0===s?{}:s,_=(e.type=null!=(_=e.type)?_:r,e.type),r=e.lazyInitPlugins,l=_===E.PLAY_MODE.VOD?Ge:Xe,l=p.__assign(p.__assign({},l),o),o=Je(_,e),o=p.__spreadArray(p.__spreadArray([],o,!0),n,!0),n=l.platform,i=p.__assign(p.__assign(p.__assign(p.__assign(p.__assign(p.__assign({},ze),{supportedPaidFormat:We()?[d.PAID_FORMAT.FHD,d.PAID_FORMAT.DOLBY,d.PAID_FORMAT.SFR_HDR,d.PAID_FORMAT.UHD]:[],logLevel:(t=+f.urlTool.getUrlParamByKey(location.href,Ie.logLevel),isNaN(t)?f.PLAYER_LOG_LEVEL.NONE:t),videoElementConfig:{playsinline:!0},maxVideoNodeCount:V.isMobile||_===E.PLAY_MODE.LIVE?1:2,enableP2P:$e(e,n)}),a),i),e),{businessConfig:l,plugins:o,offlineConfig:p.__assign({platform:n},e.offlineConfig),errorPageConfig:p.__assign({useBrowserTip:We(),useClientBtn:We()},e.errorPageConfig),ctrlConfig:p.__assign(p.__assign({disableNextBtn:!0,hidePopupOnClick:!0},a.ctrlConfig),e.ctrlConfig),infoPanelConfig:p.__assign({defaultInfo:!0},e.infoPanelConfig),vodQaReporterConfig:p.__assign(p.__assign({},null==e?void 0:e.vodQaReporterConfig),{paramsKey:p.__assign(p.__assign({},null==(t=a.vodQaReporterConfig)?void 0:t.paramsKey),null==(_=null==e?void 0:e.vodQaReporterConfig)?void 0:_.paramsKey)})}),c=[],l={superPlayerConfig:nt(i,tt()||s),lazyPlugins:c};return r&&(l.superPlayerConfig.plugins=l.superPlayerConfig.plugins.filter(function(e){var t="string"==typeof e?e:e[0];return!pe.includes(t)||(c.push(e),!1)})),l}function et(e){var t=e.adKernelName,t=void 0===t?f.KERNEL_NAME.DEMUX_2_FMP4:t,n=e.adInitConfig,r=e.useSingleVideoElement,o=!!f.KernelFactory.getKernelByName(f.KERNEL_NAME.DEMUX_2_FMP4);return p.__assign(p.__assign({},n),{playerData:p.__assign(p.__assign({},null==n?void 0:n.playerData),{playerVideoDom:(null!=r?!r:!f.uaTool.mobile)||null==(n=e.videoElements)?void 0:n[0]}),isUseDemuxKernel:o&&t===f.KERNEL_NAME.DEMUX_2_FMP4,opencache:o})}function tt(){var e=window.SUPER_PLAYER_DYNAMIC_CONFIG_ID;if(e)try{var t,n=f.lsTool.getData(i.DYNAMIC_CONFIG);return n?(t=JSON.parse(n)[e])&&t.app_config&&"{}"!==t.app_config&&""!==t.app_config?JSON.parse(t.app_config):null:null}catch(e){}return null}function nt(e,n){var r=e;return Object.keys(n).forEach(function(e){var t=r[e];"[object Object]"===Object.prototype.toString.call(t)?r[e]=p.__assign(p.__assign({},t),n[e]):r[e]=n[e]}),r}it.get=function(e){var t;return null==(t=at())?void 0:t[e]},it.set=function(e,t){var n=null!=(n=at())?n:{};n[e]=t,f.lsTool.setData(i.ENV_CACHE,JSON.stringify(n))},it.clear=function(){f.lsTool.setData(i.ENV_CACHE,"")};var rt,ot=it;function it(){}function at(){var e=f.lsTool.getData(i.ENV_CACHE);if(""!==e)try{var t=JSON.parse(e);if("[object Object]"===Object.prototype.toString.call(t))return t;ot.clear()}catch(e){}}function st(){return f.videoTool.supportAV1()?{spav1:15}:null}function _t(e,t,n,r){var o=e.type,i=e.enableTxHevc,a=e.supportedPaidFormat,n=n.defn;if(!f.videoTool.supportHevc()||f.uaTool.mobile)return i&&null!=(i=f.KernelFactory.kernelMap[f.KERNEL_NAME.WASM])&&i.isEnvSupport&&(i=f.uaTool.browser.chrome&&0<=f.commonTool.compareVersion(f.uaTool.browser.chrome.version,"92.0"),void 0===(s=ot.get(rt.enableHevc))&&(s=1),_=8<navigator.hardwareConcurrency,i)&&1===s&&_&&(void 0===n||-1!==[T.SD,T.HD].indexOf(n))?{hevclv:vt.HEVC_LV_VALUE.HD}:null;if(o!==f.PLAY_MODE.LIVE)return-1!==a.indexOf(d.PAID_FORMAT.UHD)&&(f.uaTool.browser.chrome||f.uaTool.browser.safari)?{hevclv:vt.HEVC_LV_VALUE.UHD}:{hevclv:vt.HEVC_LV_VALUE.FHD};var i=e,s=r,_=(_=t).livepid,n=void 0===(n=i.enableHevcRateOnPid)?0:n,i=void 0===(i=i.enableHevcPids)?[]:i;if(_&&-1!==i.indexOf(_)){i=null==s?void 0:s[d.COOKIE_NAME.VUSERID];if(!(n<=0||1<n)&&i)if(+i.slice(-2)/100<=n)return{hevclv:vt.HEVC_LV_VALUE.FHD}}return null}function lt(e,t,n,r,o){var i=e.preferCodec,a=t.playCodec,s={};if(a===fe.H264)return{};if(a===fe.H265)return{hevclv:vt.HEVC_LV_VALUE.FHD};if(o)return{};if(0===(null==i?void 0:i.length))return{};for(var _=!!i,l=i||[f.VIDEO_CODEC.AV1,f.VIDEO_CODEC.H265],c=((a={})[f.VIDEO_CODEC.AV1]=st,a[f.VIDEO_CODEC.H265]=function(){return _t(e,t,n,r)},a),u=0;u<l.length;u++){var d=c[l[u]],d=null==d?void 0:d();if(d&&(Object.assign(s,d),_))break}return s}function ct(t,n,r,o){return p.__awaiter(this,void 0,void 0,function(){return p.__generator(this,function(e){return t.type===E.PLAY_MODE.VOD?[2,function(s,_,l,c){var u;return p.__awaiter(this,void 0,void 0,function(){var r,o,i,a;return p.__generator(this,function(e){var t,n;return o=s.businessConfig,r=d.getUserCookies(),o={guid:l(E.COMMON_DATA_KEY.guid),platform:o.platform,sdtfrom:o.sdtfrom,appVer:l(E.COMMON_DATA_KEY.appVer)},(i=l(E.PersistedUserSettings.definition))&&(o.defn=i),i=_||{},f.uaTool.mobile||(o.sphls=2),o.spvvpay=1,o.spadseg=void 0!==(t=!0)&&t?3:2,(a=l(vt.SUPER_DATA_KEY.getinfoAdInfo))&&(o.adsid=a.adsid||"",o.adpinfo=a.adpinfo||""),o.dtype=(t=s,!f.uaTool.mobile||(n=t.businessConfig,t=t.enableP2PChannlType,n=(void 0===n?{}:n).type,-1!==(void 0===t?[]:t).indexOf(n))?Ne.hls:Ne.mp4),a=lt(s,i,o,r,c),Object.assign(o,a),(i=s.supportedPaidFormat)&&(a=d.getRequestParamForPaidFormat(i),Object.assign(o,a)),o.logintoken=0<Object.keys(r).length?f.jsonTool.safelyStringify(r):"",s.enableTVK&&(o.spm3u8tag=67,o.spmasterm3u8=3,f.uaTool.mobile||(o.sphls=2),null!=(u=s.tvkConfig))&&u.showUHDClientGuide&&null!=(u=s.supportedPaidFormat)&&u.includes(d.PAID_FORMAT.UHD)&&(!o.hevclv||o.hevclv<vt.HEVC_LV_VALUE.UHD)&&!f.videoTool.supportHevc()&&(o.hevclv=vt.HEVC_LV_VALUE.UHD_ONLY),[2,o]})})}(t,n,r,o)]:[2,function(o,i,a,s){return p.__awaiter(this,void 0,void 0,function(){var t,n,r;return p.__generator(this,function(e){return n=o.businessConfig,t=d.getUserCookies(),n={guid:a(E.COMMON_DATA_KEY.guid),platform:n.platform,sdtfrom:n.sdtfrom,appver:a(E.COMMON_DATA_KEY.appVer)},(r=a(E.PersistedUserSettings.definition))&&(n.defn=r),n.livepid=(r=i||{}).livepid||"",n.roomid=r.roomid||"",n.defnswitch=1,r=lt(o,r,n,t,s),Object.assign(n,r),Object.assign(n,{defauto:n.defnswitch,appVer:n.appver}),[2,n]})})}(t,n,r,o)]})})}(L=rt=rt||{}).drm="drm",L.hdr="hdr",L.enableHevc="enableHevc_20220822";ut=E.EvtEmitter,p.__extends(x,ut),x.prototype.request=function(i,a,s){return p.__awaiter(this,void 0,void 0,function(){var t,n,r,o;return p.__generator(this,function(e){switch(e.label){case 0:t=p.__assign(p.__assign({},s||{}),Le).retryCount,n={},i&&Object.assign(i,d.getUserCookies(((o={})[d.COOKIE_NAME.MAIN_LOGIN]="lt",o[d.COOKIE_NAME.OPENID]="opid",o[d.COOKIE_NAME.APPID]="appid",o[d.COOKIE_NAME.ACCESS_TOKEN]="atkn",o[d.COOKIE_NAME.VUSERID]="uid",o[d.COOKIE_NAME.VUSESSION]="tkn",o))),n.reqParams=this.getRequestParams(i,a),this.logger.log("proxyhttp reqParams(ad)",f.jsonTool.safelyStringify(i)),this.logger.log("proxyhttp reqParams(vinfo)",f.jsonTool.safelyStringify(a));try{this.pluginMsg.emit(E.H5_EXT_EVENT.PROXY_HTTP_START,n.reqParams)}catch(e){this.logger.warn("H5_EXT_EVENT.PROXY_HTTP_START err, ".concat(e))}o=0,e.label=1;case 1:if(!(o<t+1))return[3,7];e.label=2;case 2:return e.trys.push([2,4,,5]),n.reqPath=this.getRequestUrl(o),this.logger.log("proxyhttp request start, num=".concat(o,", url=").concat(n.reqPath)),[4,f.netTool.xhr({responseType:"text",timeout:8e3,withCredentials:!0,method:"post",url:n.reqPath,retryCount:0,body:JSON.stringify(n.reqParams)})];case 3:return r=e.sent(),n.resData=JSON.parse(r.data),n.xhrReqData=r.data,[3,5];case 4:return r=e.sent(),this.logger.log("proxyhttp(num=".concat(o,") request err:"),r),n.error=null,[3,5];case 5:if(this.destroyed)return[2,new Promise(function(){})];if(n.alreadyRetryCount=o,n.resData)return[3,7];e.label=6;case 6:return o++,[3,1];case 7:this.parseResponseData(n);try{this.pluginMsg.emit(E.H5_EXT_EVENT.PROXY_HTTP_END,n)}catch(e){this.logger.warn("H5_EXT_EVENT.PROXY_HTTP_END err, ".concat(e))}return[2,n]}})})},x.prototype.destroy=function(){this.destroyed=!0,this.logger=null},x.prototype.getRequestUrl=function(e){return this.playerConfig.proxyHttpPath||Se[e%Se.length]},x.prototype.getRequestParams=function(e,t){var t=t?f.urlTool.convertUrlParam(t):null,n=null,r=null,e=(null!=e&&e.adparam?(n=f.urlTool.convertUrlParam(e.adparam),r=JSON.stringify(e.sspAdParam)):n=e?f.urlTool.convertUrlParam(e):null,r?{sspAdParam:r,adparam:n}:{adparam:n});return n&&t?p.__assign({buid:Re.vinfoad,vinfoparam:t},e):n?p.__assign({buid:Re.onlyad},e):t?{buid:Re.onlyvinfo,vinfoparam:t}:void 0},x.prototype.parseResponseData=function(t){var e;if(t.resData)if(0!==t.resData.errCode)t.error={code:Be,message:"æ­æ¾åå°è¿åéè¯¯ç ï¼".concat(t.resData.errCode,")")};else{if(t.parseData={},t.resData.ad){this.logger.log("proxyhttp result(ad): ",null==(e=t.resData)?void 0:e.ad);try{t.parseData.ad=JSON.parse(t.resData.ad)}catch(e){this.logger.warn("can not parse ad data, res=".concat(t.resData.ad))}}if(t.resData.vinfo){this.logger.log("proxyhttp result(vinfo): ",null==(e=t.resData)?void 0:e.vinfo);try{t.parseData.vinfo=JSON.parse(t.resData.vinfo)}catch(e){this.logger.warn("can not parse vinfo data, res=".concat(t.resData.vinfo))}}}else t.error={code:ke}};var ut,dt=x;function x(e,t){var n=ut.call(this)||this;return n.playerConfig=e,n.pluginMsg=t,n.destroyed=!1,n.logger=new f.Logger(n.playerConfig.instanceId,"ProxyHttp"),n}pt=E.BaseFlowNode,p.__extends(R,pt),R.prototype.destroy=function(){pt.prototype.destroy.call(this),this.doRequestCallback=null},R.prototype.getName=function(){return"ProxyHttpFlowNode"},R.prototype.start=function(){return p.__awaiter(this,void 0,void 0,function(){var t=this;return p.__generator(this,function(e){switch(e.label){case 0:return(this.emit(E.FLOW_NODE_EVENT.START,{name:this.getName()}),this.isPreload=!1,this.loadDefer)?[4,this.loadDefer]:[3,2];case 1:return e.sent(),this.emit(E.FLOW_NODE_EVENT.END,{name:this.getName()}),[3,3];case 2:this.request().then(function(){t.emit(E.FLOW_NODE_EVENT.END,{name:t.getName()})}),e.label=3;case 3:return[2]}})})},R.prototype.pause=function(){},R.prototype.resume=function(){},R.prototype.preload=function(){var e=this;return this.emit(E.FLOW_NODE_EVENT.PRELOAD,{name:this.getName()}),this.isPreload=!0,this.loadDefer=this.request().then(function(){e.emit(E.FLOW_NODE_EVENT.PRELOAD_NEXT,{forcePreload:e.adType===E.AD_TYPE.PRE,name:e.getName()})}),this.loadDefer},R.prototype.request=function(){var t=this;return this.doRequestCallback().catch(function(e){t.emit(E.FLOW_NODE_EVENT.ABORT,p.__assign(p.__assign({},e),{name:t.getName()}))})};var pt,ft=R;function R(e,t,n){e=pt.call(this,e)||this;return e.doRequestCallback=t,e.adType=n,e}var Et,S,ht=Me(),L=f.logMethodCallDecoratorCreator("SuperPlayer"),L=(S=E.H5Player,p.__extends(N,S),Object.defineProperty(N.prototype,"vinfo",{get:function(){return this.currentVideoInfo},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"ctrlbarPlugin",{get:function(){return this.plugins[g]},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"tipsPlugin",{get:function(){return this.plugins[v]},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"loadingPlugin",{get:function(){return this.plugins[B.UILoadingPlugin.pluginName]},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"errorPagePlugin",{get:function(){return this.plugins[A]},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"posterPlugin",{get:function(){return this.plugins[y]},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"config",{get:function(){return this.corePlayer.config},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"previewDuration",{get:function(){return this.previewLogic.previewDuration},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"core",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"coreConfig",{get:function(){return this.config},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"getinfoPlugin",{get:function(){return this.videoReqInfoPlugin},enumerable:!1,configurable:!0}),N.prototype.log=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.logger).log.apply(e,t)},N.prototype.warn=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.logger).warn.apply(e,t)},Object.defineProperty(N.prototype,"videoSize",{get:function(){var e;return this.videoSizeFromGetInfo||(null==(e=this.corePlayer)?void 0:e.videoSize)||{width:0,height:0}},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"cnlid",{get:function(){return this.config.type===E.PLAY_MODE.LIVE?this.vid:""},enumerable:!1,configurable:!0}),N.prototype.degradeCodecRetry=function(e){return void 0===e&&(e=0),!!this.retryLogic&&this.retryLogic.startRetry({updatePlayParam:{videoReqInfoParam:{hevclv:vt.HEVC_LV_VALUE.NOT_SPT},videoLoadParam:{startTime:this.playtime,kernelName:void 0}},retryTimes:0,retryTimesInSession:0,degradeCodecExpireTime:e,degradeReason:I.USER},!1)},N.prototype.clearLocalstorage=function(t){return-1!==Object.keys(i).findIndex(function(e){return i[e]===t})&&(f.lsTool.delData(t),!0)},N.prototype.destroy=function(){var e;return null!=(e=this.adLogic)&&e.destroy(),(this.adLogic=null)!=(e=this.retryLogic)&&e.destroy(),(this.retryLogic=null)!=(e=this.previewLogic)&&e.destroy(),(this.previewLogic=null)!=(e=this.posterLogic)&&e.destroy(),(this.posterLogic=null)!=(e=this.proxyHttpRequestor)&&e.destroy(),(this.proxyHttpRequestor=null)!=(e=this.config)&&e.instanceId&&N._instances[this.config.instanceId]&&delete N._instances[this.config.instanceId],clearTimeout(this.mouseMoveTimerSuperPlayer),S.prototype.destroy.call(this)},N.prototype.play=function(l,c){var u,d;return p.__awaiter(this,void 0,void 0,function(){var t,n,r,o,i,a,s,_;return p.__generator(this,function(e){switch(e.label){case 0:return l?(this.clearBeforeReplay(),t=l,this.replayConfig=l,Oe(this.type,"play",t),"string"==typeof l&&(t=this.type===E.PLAY_MODE.LIVE?(n=null!=(u=this.currentPlayItem)&&u.cnlid?this.currentPlayItem:{},p.__assign(p.__assign({},n),{cnlid:l})):(n=null!=(u=this.currentPlayItem)&&u.vid?this.currentPlayItem:{},p.__assign(p.__assign({},n),{vid:l}))),null!=(d=this.loadingPlugin)&&d.show(),(i=null==(d=this.ctrlbarPlugin)?void 0:d.instances.CenterBtn)&&i.hideEl(i.playBtn),r=(i=t).vid,o=i.cnlid,i=i.livepid,a=this.isH5PlayParam(c)?c:{videoLoadParam:c},this.currentPlayItem=r||o||t,this.playtimeLimiter.clearAllConfig(),this.getinfoPlugin&&(r||o)?[4,ct((s=this).config,t,this.getCommonKv.bind(this),this.checkDegradeCodecFromLocal())]:[3,3]):[2,this.playByInitConfig()];case 1:return(s.buildinVideoReqInfoParam=e.sent(),this._destroyed)?[2]:(a.videoReqInfoParam=p.__assign(p.__assign({},this.buildinVideoReqInfoParam),a.videoReqInfoParam),[4,this.loadAdPlugin()]);case 2:return(e.sent(),this._destroyed)?[2]:(o?(a.videoReqInfoParam.cnlid=o,this.getPlugin(h.LivepollPlugin.pluginName).livepid=i,this.setCommonKv(E.COMMON_DATA_KEY.livepid,i)):r&&(a.videoReqInfoParam.vid=r),[2,S.prototype.play.call(this,r||o,a)]);case 3:return(_=t.levels)&&this.setLevelOptions(_,t.url),[2,S.prototype.play.call(this,t,a)]}})})},N.prototype.replay=function(){null!=(t=null==(t=this.loadParam)?void 0:t.videoLoadParam)&&delete t.startTime;var e,t=this.getCommonKv(E.COMMON_DATA_KEY.currentDefn);return this.vid&&t?this.play(this.replayConfig,p.__assign(p.__assign({},this.loadParam),{videoReqInfoParam:p.__assign(p.__assign({},null==(e=this.loadParam)?void 0:e.videoReqInfoParam),{defn:t})})):this.play(this.replayConfig,this.loadParam)},N.prototype.load=function(i,a){return p.__awaiter(this,void 0,void 0,function(){var t,n,r,o;return p.__generator(this,function(e){switch(e.label){case 0:return i?(this.clearBeforeReplay(),this.replayConfig=i,Oe(this.type,"load",i),t="string"==typeof i?i:null==i?void 0:i.vid,n=this.isH5PlayParam(a)?a:{videoLoadParam:a},this.currentPlayItem=t,this.playtimeLimiter.clearAllConfig(),this.getinfoPlugin&&t?[4,ct((r=this).config,i,this.getCommonKv.bind(this),this.checkDegradeCodecFromLocal())]:[3,3]):[2,S.prototype.load.call(this)];case 1:return(r.buildinVideoReqInfoParam=e.sent(),this._destroyed)?[2]:(n.videoReqInfoParam=p.__assign(p.__assign({},this.buildinVideoReqInfoParam),null==n?void 0:n.videoReqInfoParam),[4,this.loadAdPlugin()]);case 2:return e.sent(),this._destroyed?[2]:[2,S.prototype.load.call(this,t,n)];case 3:return(o=null==i?void 0:i.levels)&&this.setLevelOptions(o,null==i?void 0:i.url),[2,S.prototype.load.call(this,i,n)]}})})},N.prototype.preload=function(o,i,a){return p.__awaiter(this,void 0,void 0,function(){var t,n,r;return p.__generator(this,function(e){switch(e.label){case 0:return o?(Oe(this.type,"load",o),t="string"==typeof o?o:null==o?void 0:o.vid,n=this.isH5PlayParam(i)?i:{videoLoadParam:i},this.getinfoPlugin&&t?[4,ct(this.config,o,this.getCommonKv.bind(this),this.checkDegradeCodecFromLocal())]:[2]):[2];case 1:return(r=e.sent(),this._destroyed)?[2]:(n.videoReqInfoParam=p.__assign(p.__assign({},r),null==n?void 0:n.videoReqInfoParam),[2,S.prototype.preload.call(this,t,n,a)])}})})},N.prototype.seek=function(e){var t=e,e=(f.uaTool.mobile||this.previewDuration===u||(t=Math.min(e,this.previewDuration-1)),this.getCommonKv(vt.SUPER_DATA_KEY.hlsAdRanges));return e&&(e=f.commonTool.findDiscontinuityTimeRangeAtPlaytime(t,e))&&(t=e.start-1),S.prototype.seek.call(this,t)},N.prototype.setLevel=function(s,_){return void 0===_&&(_={}),p.__awaiter(this,void 0,void 0,function(){var t,n,r,o,i,a=this;return p.__generator(this,function(e){return"string"!=typeof s?[2,Promise.reject("setLevel received illegal parameter")]:this.getinfoPlugin&&this.vid?(this.state===E.VIDEO_STATE.PAUSE&&this.type===E.PLAY_MODE.VOD&&this.play(),t=this.getCommonKv(E.COMMON_DATA_KEY.currentDefn),_.userTrigger&&this.setCommonKv(E.PersistedUserSettings.definition,s),this.buildinVideoReqInfoParam.flowid=this.getCommonKv(E.COMMON_DATA_KEY.flowid),r=p.__assign(p.__assign({},this.buildinVideoReqInfoParam),{defn:s,logintoken:f.jsonTool.safelyStringify(d.getUserCookies())}),o=void 0,o=this.type===E.PLAY_MODE.LIVE?(n=p.__assign(p.__assign({},r),{defnswitch:_.userTrigger?0:1}),Object.assign(n,{defauto:n.defnswitch}),n):(n=p.__assign({fhdswitch:_.userTrigger?1:0},r),(r=this.getCommonKv(vt.SUPER_DATA_KEY.getinfoAdInfo))&&(n.adsid=r.adsid||"",n.adpinfo=r.adpinfo||""),n),r=[T.DOLBY,T.HDR10,T.SFR_HDR],i=_.setLevelMode,-1===r.indexOf(t)&&-1===r.indexOf(s)||(i=f.SET_LEVEL_MODE.HARD),[2,S.prototype.setLevel.call(this,o,{setLevelMode:i}).catch(function(e){a.log(e),a.ctrlbarPlugin&&(a.ctrlbarPlugin.level=t),a.setCommonKv(E.COMMON_DATA_KEY.currentDefn,t)})]):(r=this.getCommonKv(E.COMMON_DATA_KEY.currentDefnList),(o=null==r?void 0:r.find(function(e){return e.value===s}))?(!(i=o.url)&&this.defnIdToUrl&&(i=this.defnIdToUrl(s),o.url=i),i?(this.setCommonKv(E.COMMON_DATA_KEY.currentDefn,s),this.levelList=r,this.level=o.value,this.replayConfig.url=i,[2,S.prototype.setLevel.call(this,{url:i})]):[2,Promise.reject(new Error("definition must contains url"))]):[2,Promise.reject(new Error("no definition info"))])})})},N.prototype.getPlugin=function(e){return this.plugins[e]},N.prototype.closePayTipsCallback=function(e){var t=E.getAdPlugin(this.config.instanceId);"ad"===e&&"function"==typeof(null==t?void 0:t.resumeAd)&&t.resumeAd()},N.prototype.createPlugin=function(e,t){var n=(t=void 0===t?{}:t).pluginName;(void 0===n?e:n)===E.AdPluginName?S.prototype.createPlugin.call(this,e,p.__assign(p.__assign({},t),{requestProxyHttp:this.requestAdProxyHttp.bind(this)})):S.prototype.createPlugin.call(this,e,t)},N.prototype.setAdConfig=function(t){return this.waitAdPlugin().then(function(e){return e.setConf(t)})},N.prototype.resizeAd=function(){return this.waitAdPlugin().then(function(e){var t;return null==(t=e.resizeAd)?void 0:t.call(e)})},N.prototype.hideAdBeforeResize=function(){return this.waitAdPlugin().then(function(e){var t;return null==(t=e.hideAdBeforeResize)?void 0:t.call(e)})},N.prototype.getVVIPOffsetTime=function(e,t){var n=this.removedAdRange;if(null==n||!n.length)return e;if(t=void 0===t?!1:t)return this.getPlusAdOffsetTime(e);for(var r=0,o=0;o<n.length;o++){var i=n[o],a=i.start,i=i.end;if(e<a)break;if(e<i){r+=e-a;break}r+=i-a}return e-r},N.prototype.getPlusAdOffsetTime=function(e){return this.removedAdRange.reduce(function(e,t){var n=t.start,t=t.end;return n<=e&&(e+=t-n),e},e)},N.prototype.waitAdPlugin=function(){var t=this,e=E.getAdPlugin(null==(e=this.config)?void 0:e.instanceId);return e?Promise.resolve(e):new Promise(function(e){t.pluginMsg.on("pluginsetup:".concat(E.AdPluginName),function(){e(E.getAdPlugin(t.config.instanceId))})})},N.prototype.playByInitConfig=function(){var e=this.config,t=e.videoId,e=e.videoInitConfig,t=void 0===e?t:e;return!t||this.currentPlayItem?S.prototype.play.call(this):this.play(t)},N.prototype.nodeBeforePreAd=function(e){return e.vid?this.getProxyHttpFlowNode({reqInfo:e,adType:E.AD_TYPE.PRE}):S.prototype.nodeBeforePreAd.call(this,e)},N.prototype.nodeBeforePostAd=function(e){return e.vid?this.getProxyHttpFlowNode({reqInfo:e,adType:E.AD_TYPE.POST}):S.prototype.nodeBeforePostAd.call(this,e)},N.prototype.setupRemovedAdRange=function(){var _=this;this.on(E.H5_PLAY_EVENT.VIDEO_REQ_INFO_END,function(e){e=e.data;if(e.code===E.ErrorCode.SUC&&_.config.type!==E.PLAY_MODE.LIVE)try{var t=e.data,n=t.parseData,r=t.reqParams,o=n.vitem,i=o.purevid,a=o.dotinfo,s=void 0===a?"":a;i&&r.vid!==i&&s?_.removedAdRange=JSON.parse(s).dot_time.map(function(e){return{start:+e.start_time/1e3,end:+e.end_time/1e3}}):_.removedAdRange=null}catch(e){_.log("set ad range err,",e),_.removedAdRange=null}})},N.prototype.selectGetinfoModule=function(e){var t=e.type,t=void 0===t?E.PLAY_MODE.VOD:t,n=e.getinfoModule;return n||(t===E.PLAY_MODE.VOD?d.VodGetInfo:e.enableUnifiedGetinfoLive?d.UnifiedLiveGetInfo:d.LiveGetInfo)},N.prototype.initPlugins=function(){return p.__awaiter(this,void 0,void 0,function(){return p.__generator(this,function(e){switch(e.label){case 0:return this.config.lazyInitPlugins?(this.setCacheStatus(!0),this.setReplayType(0),[4,this.waitLoadStart()]):[3,3];case 1:return e.sent(),[4,this.loadPlayerPlugins()];case 2:e.sent(),e.label=3;case 3:return this.initAdPlugin(),this.initErrorPage(),this.initTipsPlugin(),this.initCtrlbarPlugin(),this.initLivepoll(),this.initLoadingPlugin(),this.clearCache(),[2]}})})},N.prototype.waitLoadStart=function(){var t=this;return new Promise(function(e){t.once(E.H5_PLAY_EVENT.VIDEO_LOAD_START,function(){return e()}),setTimeout(function(){e()},200)})},N.prototype.initAdPlugin=function(){var e=this,t=this.ctrlbarPlugin;t&&(t.on(n.FAKE_FULLSCREEN_CHANGE,function(){return e.resizeAd()}),t.on(n.FULLSCREEN_CHANGE,function(){e.hideAdBeforeResize();setTimeout(function(){e.resizeAd()},300)}))},N.prototype.reqExtInfoOnMobile=function(){return p.__awaiter(this,void 0,void 0,function(){var t,n;return p.__generator(this,function(e){switch(e.label){case 0:return(t=this.config,n=t.videoId,t=t.enableGetExtInfo,(void 0===t||t)&&f.uaTool.mobile&&"string"==typeof n)?(t=this.getCommonKv(E.COMMON_DATA_KEY.platform),[4,function(a){return p.__awaiter(this,void 0,void 0,function(){var t,n,r,o,i;return p.__generator(this,function(e){switch(e.label){case 0:return t=a.vid,n=a.platform,t={vid:t,platform:void 0===n?"11001":n,h5flag:1,otype:"json"},n="".concat("//h5vv6.video.qq.com/getextinfo","?").concat(f.urlTool.object2string(t,"&")),[4,f.netTool.jsonp(n)];case 1:return"o"!==(t=e.sent()).s?[2,null]:t.em&&0!=+t.em?[2,null]:(n=t.limit,r=t.td,o=t.preview,i=t.fs,[2,{duration:0==+n?+r:+o,payLimit:+n,fileSize:i}])}})})}({vid:n,platform:t})]):[2];case 1:return n=e.sent().duration,this.state===E.VIDEO_STATE.IDLE&&!this.played&&this.ctrlbarPlugin&&(this.ctrlbarPlugin.duration=n),[2]}})})},N.prototype.initLoadingPlugin=function(){var n=this;this.on(E.H5_PLAY_EVENT.VIDEO_SETLEVEL_START,function(){var e;return null==(e=n.loadingPlugin)?void 0:e.show()}),this.on(E.H5_PLAY_EVENT.VIDEO_SETLEVEL_END,function(){var e;return null==(e=n.loadingPlugin)?void 0:e.hide()}),this.pluginMsg.on(E.H5_EXT_EVENT.RETRY_PLAY,function(e){var t,e=e.data;null!=(t=n.loadingPlugin)&&t.show(),null!=(t=n.tipsPlugin)&&t.show(null!=e&&e.degradeReason?"æ­£å¨ç¼å²ä¸­...":"éæ°è¯·æ±è§é¢ä¿¡æ¯...")})},N.prototype.initLivepoll=function(){var t=this,e=this.plugins[h.LivepollPlugin.pluginName];e&&e.on(h.LIVE_EVENTS.statusChange,function(e){e.data.new===h.LIVE_STATUS.OVER&&null!=(e=t.errorPagePlugin)&&e.show({text:"ç´æ­å·²ç»æ",hideRefresh:!0})})},N.prototype.isUsingCustomGetInfo=function(){var e;return!(null==(e=this.config.getinfoConfig)||!e.path)},N.prototype.shouldUseProxyHttpForGetInfo=function(){var e,t=this.type===E.PLAY_MODE.VOD&&!this.isUsingCustomGetInfo();return this.type===E.PLAY_MODE.VOD&&this.setCommonKv(vt.SUPER_DATA_KEY.vodCGIUsed,t?"proxyhttp":null==(e=this.config.getinfoConfig)?void 0:e.path),t},N.prototype.initErrorPage=function(){var r=this;this.errorPagePlugin&&this.errorPagePlugin.on(G.REPORT_LOG,function(){r.offlineLog.report(!0,"error-page:click").then(function(e){var t,e=e||{},n=e.status,e=e.msg;null!=(t=r.tipsPlugin)&&t.show(n?"æ¥å¿ä¸æ¥æå":"æ¥å¿ä¸æ¥å¤±è´¥ ".concat(e))}).catch(function(e){var t;null!=(t=r.tipsPlugin)&&t.show("æ¥å¿ä¸æ¥å¤±è´¥ ".concat(null==e?void 0:e.message))})})},N.prototype.initTipsPlugin=function(){var o=this;this.tipsPlugin&&this.on(E.H5_PLAY_EVENT.VIDEO_SETLEVEL_END,function(e){var t,e=e.data,n=o.getCommonKv(E.COMMON_DATA_KEY.currentDefn),r=null==(r=null==(t=null==(t=null==(t=o.levelList)?void 0:t.find(function(e){return e.value===n}))?void 0:t.payload)?void 0:t.trim)?void 0:r.call(t);o.tipsPlugin.show(e.code!==E.ErrorCode.SUC?"".concat(e.message||"æ±æ­ï¼åæ¢æ¸æ°åº¦å¤±è´¥~"):"å·²ä¸ºæ¨åæ¢å°æ¸æ°åº¦[".concat(r,"]"))})},N.prototype.initCtrlbarPlugin=function(){var r,o=this;this.ctrlbarPlugin&&(this.ctrlbarPlugin.level=this.getCommonKv(E.COMMON_DATA_KEY.currentDefn),this.ctrlbarPlugin.audio=this.getCommonKv(E.COMMON_DATA_KEY.currentAudioTrack),this.ctrlbarPlugin.lang=this.getCommonKv(E.COMMON_DATA_KEY.currentSubtitle),this.pluginMsg.on(E.H5_EXT_EVENT.DATASET_UPDATE,function(e){var t,e=e.data,n=e.key,r=e.newVal,e=e.oldVal;if(r!==e)switch(n){case E.COMMON_DATA_KEY.currentAudioTrackList:o.ctrlbarPlugin.audioOpts=r;break;case E.COMMON_DATA_KEY.currentAudioTrack:o.ctrlbarPlugin.audio=r;break;case E.COMMON_DATA_KEY.currentDefn:o.ctrlbarPlugin.level=r,o.level=r;break;case E.COMMON_DATA_KEY.currentDefnList:!r||r.length<=1?o.ctrlbarPlugin.levelOpts=[]:(t=[].concat(r),o.ctrlbarPlugin.levelOpts=t,o.levelList=t)}}),this.ctrlbarPlugin.on(n.SET_LEVEL,function(e){var t,n;o.checkCanSetLevel()&&(n=(e=e.data).value,e=e.payload,null!=(t=o.tipsPlugin)&&t.show({text:"æ­£å¨ä¸ºæ¨åæ¢æ¸æ°åº¦[".concat(null==(t=null==e?void 0:e.trim)?void 0:t.call(e),"]"),time:-1}),o.setLevel(n,{userTrigger:!0}))}),r=function(){o.tipsPlugin.show("æ±æ­ï¼åæ¢æ¸æ°åº¦å¤±è´¥~"),o.ctrlbarPlugin.audio=o.currentVideoInfo.currentAudioTrack},this.ctrlbarPlugin.on(n.SET_AUDIO,function(e){var t,e=e.data,n=e.label,e=e.value;null!=(t=o.tipsPlugin)&&t.show({text:"æ­£å¨ä¸ºæ¨åæ¢é³è½¨[".concat(n,"]"),time:-1}),o.setAudioTrack(e).then(function(e){e.fail?r():o.tipsPlugin.show("å·²ä¸ºæ¨åæ¢å°é³è½¨[".concat(n,"]"))}).catch(function(){r()})}),this.on(f.PLAY_EVENT.SET_AUDIO_TRACK_OVER,function(e){o.setCommonKv(E.COMMON_DATA_KEY.currentAudioTrack,e.data.id)}),this.ctrlbarPlugin.on(n.TEST_EVENT,function(){var e;null!=(e=o.getPlugin(m))&&e.show()}),this.container.addEventListener("mousemove",function(){clearTimeout(o.mouseMoveTimerSuperPlayer),o.mouseMoveTimerSuperPlayer=setTimeout(o.hideMouseOnSuperPlayer.bind(o),5e3)}))},N.prototype.hideMouseOnSuperPlayer=function(){var e,t;this.ctrlbarPlugin&&(t=this.ctrlbarPlugin.instances.CtrlShow.isMouseHoverControl,this.config.autoHideMouse||null!=(e=this.ctrlbarPlugin.instances.Fullscreen)&&e.isFullScreen&&this.state===E.VIDEO_STATE.PLAYING?t&&(this.container.style.cursor="auto"):null!=(e=this.ctrlbarPlugin.instances.FakeFullscreen)&&e.isFullScreen&&this.state===E.VIDEO_STATE.PLAYING&&!t&&(this.container.style.cursor="none"))},N.prototype.setLevelOptions=function(e,t){var n=e.list,r=(null==(r=n.find(function(e){return e.default||e.url===t}))?void 0:r.value)||n[0].value;this.setCommonKv(E.COMMON_DATA_KEY.currentDefn,r),this.setCommonKv(E.COMMON_DATA_KEY.currentDefnList,n),this.levelList=n,this.level=r,this.defnIdToUrl=e.callback},N.prototype.isH5PlayParam=function(e){e=void 0===e?{}:e;return!!(e.videoReqInfoParam||e.videoLoadParam||e.adParam||e.playTimeLimit)},N.prototype.initInnerEvts=function(){var n=this;this.pluginMsg.on(E.H5_EXT_EVENT.GETINFO_OVER,function(e){var t,e=(e.data||{}).resData,e=((null==(e=null==e?void 0:e.vl)?void 0:e.vi)||[])[0];e&&(t=e.vw,e=e.vh,n.videoSizeFromGetInfo={width:t,height:e})}),f.uaTool.mobile&&this.on(E.H5_PLAY_EVENT.VIDEO_TIMEUPDATE,function(e){e=e.data;n.previewDuration!==u&&e.playtime>=n.previewDuration-10&&n.loadPostAd()})},N.prototype.writeGlobalCommonKvs=function(){this.setCommonKv(E.COMMON_DATA_KEY.appVer,"3.5.57"),this.setCommonKv(this.config.businessConfig),this.writeLoginCommonKV()},N.prototype.getDefnNameById=function(t){var e,n=null==(n=null==(n=this.getinfoCtx)?void 0:n.parseData)?void 0:n.definitionList.find(function(e){return e.name===t});return n?(e=void 0===(e=(n=we(n.cname,this.type===E.PLAY_MODE.LIVE))[0])?"":e,n=n[1],"".concat(void 0===n?"":n," ").concat(e).trim()):""},N.prototype.requestAdProxyHttp=function(a,s){var _;return p.__awaiter(this,void 0,void 0,function(){var t,n,r,o,i;return p.__generator(this,function(e){switch(e.label){case 0:if(t=new dt(this.config,this.pluginMsg),!(n=E.getAdPlugin(this.config.instanceId)))return[2];r=n.getAdParams(p.__assign(p.__assign(p.__assign({},this.curReqInfo.getAdParam(a)),s),{vid:this.curReqInfo.vid,adType:a})),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,t.request(r,null)];case 2:return o=e.sent(),[3,4];case 3:return i=e.sent(),this.warn("proxyhttp request err in catch, ".concat(i)),[3,4];case 4:return null!=(_=null==o?void 0:o.parseData)&&_.ad&&n.setAdInfo(o.parseData.ad),[2,o]}})})},N.prototype.requestProxyHttp=function(a,s){var _,l;return p.__awaiter(this,void 0,void 0,function(){var t,n,r,o,i;return p.__generator(this,function(e){switch(e.label){case 0:return null!=(_=this.proxyHttpRequestor)&&_.destroy(),this.proxyHttpRequestor=new dt(this.config,this.pluginMsg),"function"==typeof(null==(r=E.getAdPlugin(this.config.instanceId))?void 0:r.getAdParams)&&(t=r.getAdParams(p.__assign(p.__assign({},a.getAdParam(s)),{vid:a.vid,adType:s}))),"function"!=typeof(null==(_=this.videoReqInfoPlugin)?void 0:_.getReqParams)?[3,2]:[4,this.getinfoPlugin.getReqParams(a.vid,p.__assign(p.__assign({},a.videoReqInfoParam),{flowid:a.flowid}))];case 1:r=e.sent(),(n=r.reqParams).otype="ojson",e.label=2;case 2:return e.trys.push([2,4,,5]),[4,this.proxyHttpRequestor.request(t,n)];case 3:return o=e.sent(),[3,5];case 4:return i=e.sent(),this.warn("proxyhttp request err in catch, ".concat(i)),[3,5];case 5:return null!=o&&o.error?this.warn("proxyhttp request error data: ",JSON.stringify(o.error)):(null!=(_=null==o?void 0:o.parseData)&&_.vinfo?a.vinfoCache=Promise.resolve(o.parseData.vinfo):a.requestRawVod(),null!=(l=null==o?void 0:o.parseData)&&l.ad&&(a.adCache=o.parseData.ad)),[2]}})})},N.prototype.stop=function(e){var t;return null!=(t=this.proxyHttpRequestor)&&t.destroy(),this.videoSizeFromGetInfo=null,S.prototype.stop.call(this,e)},N.prototype.emit=function(e,t){return S.prototype.emit.call(this,e,t)},N.prototype.on=function(e,t,n){return S.prototype.on.call(this,e,t,n)},N.prototype.once=function(e,t){return S.prototype.once.call(this,e,t)},N.prototype.off=function(e,t){return S.prototype.off.call(this,e,t)},N.prototype.listeners=function(e){return S.prototype.listeners.call(this,e)},N.prototype.listenerCount=function(e){return S.prototype.listenerCount.call(this,e)},N.prototype.writeLoginCommonKV=function(){function e(e){return f.cookieTool.get(e)}var t,n=d.getUserCookies(),r=(this.setCommonKv(((r={})[E.COMMON_DATA_KEY.hc_main_login]=n[d.COOKIE_NAME.MAIN_LOGIN],r[E.COMMON_DATA_KEY.hc_vuserid]=n[d.COOKIE_NAME.VUSERID],r[E.COMMON_DATA_KEY.hc_openid]=n[d.COOKIE_NAME.OPENID],r[E.COMMON_DATA_KEY.hc_appid]=n[d.COOKIE_NAME.APPID],r[E.COMMON_DATA_KEY.hc_access_token]=n[d.COOKIE_NAME.ACCESS_TOKEN],r)),n[d.COOKIE_NAME.GUID]||f.cookieTool.get(d.COOKIE_NAME.GUID)),r=(r&&this.setCommonKv(E.COMMON_DATA_KEY.guid,r),"qq"===n[d.COOKIE_NAME.MAIN_LOGIN]),o=null==(o=e("luin")||e("uin"))?void 0:o.replace(/\D/g,"").replace(/^0+/,"");this.setCommonKv(((t={})[E.COMMON_DATA_KEY.loginid]=r?o:e("openid"),t[E.COMMON_DATA_KEY.loginex]=r?e("openid"):o,t));this.setCommonKv(E.COMMON_DATA_KEY.logintype,{qq:1,wx:2}[n[d.COOKIE_NAME.MAIN_LOGIN]]||0),this.setCommonKv(E.COMMON_DATA_KEY.hc_vuession,n[d.COOKIE_NAME.VUSESSION])},N.prototype.getProxyHttpFlowNode=function(e){var t=this,n=e.reqInfo,e=e.adType,r=e===E.AD_TYPE.PRE?function(){return n.vinfoCache||(t.shouldUseProxyHttpForGetInfo()?t.requestProxyHttp(n,E.AD_TYPE.PRE):t.requestAdProxyHttp(E.AD_TYPE.PRE))}:function(){return f.uaTool.mobile||t.previewLogic.previewDuration===u?t.requestAdProxyHttp(E.AD_TYPE.POST):Promise.resolve()};return new ft({flowid:n.flowid},r,e)},N.prototype.loadAdPlugin=function(){var e,t=this,n=this.config.enableCreativePlugin;return!(void 0===n||n)||ht.LOCAL_DEV||j?Promise.resolve():(e=et(this.config),Et?Et.then(function(){!E.getAdPlugin(t.config.instanceId)&&E.H5Player.getPlugin(E.AdPluginName)&&t.createPlugin(E.AdPluginName,e)}):(n=/^http(s?):\/\/(.*)\.(qq|woa|oa)\.com/.test(location.href)&&this.config.adVersion?this.config.adVersion:q,n="https://vm.gtimg.cn/thumbplayer/creative/".concat(n,"/creative-player-").concat(f.uaTool.mobile?"m":"v",".js"),Et=this.loadPlugin({url:n,globalName:H,pluginName:E.AdPluginName,timeout:1e4,config:e,crossOrigin:"anonymous"}).catch(function(e){t.log("adPlugin load fail. ".concat(null==e?void 0:e.message))})))},N.prototype.loadPlayerPlugins=function(o){return void 0===o&&(o=2),p.__awaiter(this,void 0,void 0,function(){var t,n,r;return p.__generator(this,function(e){switch(e.label){case 0:if(o<=0||!this.lazyPlugins.length)return[2];t=this.lazyPlugins.map(function(e){return"string"==typeof e?e:e[0]}),n=E.H5Player.getPlugins(t)||{},e.label=1;case 1:return e.trys.push([1,4,,5]),Object.keys(n).length===t.length?[3,3]:[4,f.domTool.loadScript(de,void 0,1e4)];case 2:e.sent(),e.label=3;case 3:return[2,this.createPlugins(this.lazyPlugins)];case 4:return r=e.sent(),this.log("super-player-plugins load fail. ".concat(null==r?void 0:r.message)),[3,5];case 5:return[4,this.loadPlayerPlugins(o-1)];case 6:return e.sent(),[2]}})})},N.prototype.clearBeforeReplay=function(){this.setCommonKv(vt.SUPER_DATA_KEY.hlsAdRanges,null),this.setCommonKv(vt.SUPER_DATA_KEY.getinfoAdInfo,null)},N.prototype.checkDegradeCodecFromLocal=function(){var e=this,t=function(){var e=NaN,t=NaN,n=I.UNKNOWN;try{var r=f.lsTool.getData(i.DEGRADE_CODEC_TIME),o=JSON.parse(r||"{}"),e=+o.time,t=+o.degradeExpireTime,n=o.degradeReason}catch(e){}return Number.isNaN(e)||Number.isNaN(t)||Date.now()>=e+t?{needDegrade:!1}:{needDegrade:!0,degradeReason:n}}(),n=t.needDegrade,r=t.degradeReason;return this.log("codec degrade cache",n,r),n&&this.once(E.H5_PLAY_EVENT.PLAY_SESSION_START,function(){e.pluginMsg.emit(E.H5_EXT_EVENT.DEGRADE_CODEC_PLAY,{degradeReason:r})}),n},N._instances={},p.__decorate([L,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",[]),p.__metadata("design:returntype",void 0)],N.prototype,"destroy",null),p.__decorate([L,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",[Object,Object]),p.__metadata("design:returntype",Promise)],N.prototype,"play",null),p.__decorate([L,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",[]),p.__metadata("design:returntype",void 0)],N.prototype,"replay",null),p.__decorate([L,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",[Object,Object]),p.__metadata("design:returntype",Promise)],N.prototype,"load",null),p.__decorate([L,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",[Object,Object,Number]),p.__metadata("design:returntype",Promise)],N.prototype,"preload",null),p.__decorate([L,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",[Number]),p.__metadata("design:returntype",void 0)],N.prototype,"seek",null),p.__decorate([L,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",[String,Object]),p.__metadata("design:returntype",Promise)],N.prototype,"setLevel",null),p.__decorate([L,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",[String]),p.__metadata("design:returntype",void 0)],N.prototype,"closePayTipsCallback",null),p.__decorate([L,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",[String,Object]),p.__metadata("design:returntype",void 0)],N.prototype,"createPlugin",null),p.__decorate([L,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",[Object]),p.__metadata("design:returntype",void 0)],N.prototype,"setAdConfig",null),p.__decorate([L,p.__metadata("design:type",Function),p.__metadata("design:paramtypes",[String]),p.__metadata("design:returntype",void 0)],N.prototype,"stop",null),N);function N(e){var n=this,t=Ze(e),r=t.superPlayerConfig,t=t.lazyPlugins,o=(f.ReferenceReport.getReporter().collectUsage(2,ht.CHANNEL,null==(o=e.businessConfig)?void 0:o.platform),(n=S.call(this,r)||this).type=E.PLAY_MODE.VOD,n.lazyPlugins=[],n.videoLoadParamModifier=function(e){var t;return n.config.keepOriginalStartTime?e:(t=null!=(t=n.getCommonKv(vt.SUPER_DATA_KEY.hlsAdRanges))?t:[],(t=f.commonTool.findDiscontinuityTimeRangeAtPlaytime(e.startTime,t))&&e.startTime?(t=t.start-1,n.log("start time modified due to hls ad, origin: ".concat(e.startTime,", new: ").concat(t)),p.__assign(p.__assign({},e),{startTime:t})):null!=(t=n.removedAdRange)&&t.length?p.__assign(p.__assign({},e),{startTime:n.getVVIPOffsetTime(e.startTime)}):e)},n.logger=new f.Logger(n.config.instanceId,"SuperPlayer"),n.log("new SuperPlayer(), input config=",f.jsonTool.safelyStringify(e)),e.mode),o=void 0===o?E.PLAY_MODE.VOD:o,i=e.type;return n.lazyPlugins=t,n.type=i||o,n.adLogic=new Te(n,n.corePlayer),n.previewLogic=new xe(n),n.posterLogic=new Ce(n),n.retryLogic=new qe(n,n.flowManager),n.writeGlobalCommonKvs(),n.initPlugins(),n.initInnerEvts(),n.reqExtInfoOnMobile(),n.setupRemovedAdRange(),"1"===f.urlTool.getUrlParamByKey(location.href,Ie.debugSuper)&&(N._instances[n.config.instanceId]=n),(e.videoId||e.adInitConfig)&&n.loadAdPlugin(),r.enableTVK&&d.enableTVK(n,r.tvkConfig),n}var At,gt=ht.BUILD_TIME,mt=ht.VERSION;window.SuperPlayer=L,At=L,p.__spreadArray(p.__spreadArray(p.__spreadArray(p.__spreadArray([],o,!0),ge,!0),me,!0),ye,!0).filter(function(e){return void 0===At[e]}).forEach(function(t){[Y,F,he,Ae,Q].forEach(function(e){null!=e&&e[t]&&(At[t]=e[t])})}),Object.defineProperty(vt,"PLAY_EVENT_EXT",{enumerable:!0,get:function(){return E.H5_EXT_EVENT}}),Object.defineProperty(vt,"PAID_FORMAT",{enumerable:!0,get:function(){return d.PAID_FORMAT}}),vt.BUILD_TIME=gt,vt.CTRL_EVENTS=n,vt.CtrlbarPluginName=g,vt.DEFAULT_SHOW_QUERY=ae,vt.ErrorPagePluginEvents=G,vt.ErrorPagePluginName=A,vt.INFO_SVG_DOM_STR=oe,vt.InfoPanelEvents=ie,vt.InfoPanelPluginName=m,vt.LAZY_PLUGINS=pe,vt.LOCAL_STORAGE_KEY=i,vt.MaxRequestRetry=3,vt.PLAY_CODEC=fe,vt.PLUGINS_URL=de,vt.PosterPluginName=y,vt.REPORTING_SVG_ICON=e,vt.RequestTimeout=5e3,vt.TipsPluginName=v,vt.UIContextMenuPluginName=b,vt.VERSION=mt,vt.WaterMarkCoverClassName=ce,vt.WatermarkPluginName=ue,vt.adGlobalName=H,vt.adScriptMaxLoadTime=1e4,vt.adVersion=q,vt.bodyOverflowClassName=re,vt.classNameOnCtrlHide=_e,vt.classNameOnCtrlResize=le,vt.containerClassName=te,vt.contextMenuPluginName=Ee,vt.ctrlbarPluginName=t,vt.dataRoleMap=z,vt.default=L,vt.defaultErrorText="åºéå¦",vt.defaultLiveBusinessConfig=Xe,vt.defaultShowTime=3,vt.defaultSuperConfig=ze,vt.defaultVodBusinessConfig=Ge,vt.defaultVodPlatform=s,vt.defautVodSdtfrom=M,vt.formatDefnName=we,vt.getAdInitConfig=et,vt.getBuiltInPlugins=Je,vt.getIsEnableP2P=$e,vt.getLocalDynamicConfig=tt,vt.getRootClassName=U,vt.getSuperConfig=Ze,vt.gradientClassName=ee,vt.hideClass=se,vt.isInDomainWhiteList=j,vt.largeSizeClassName=ne,vt.mergeDynamicConfig=nt,vt.mobileRootClassName=$,vt.pcRootClassName=J,vt.shadowClassName=Z,vt.skipAdDomainWhiteList=W,Object.keys(E).forEach(function(e){"default"===e||vt.hasOwnProperty(e)||Object.defineProperty(vt,e,{enumerable:!0,get:function(){return E[e]}})})}.call(this,yt("hXUCVB"))},{"@tencent/thumbplayer-core":2,"@tencent/thumbplayer-h5":3,"@tencent/thumbplayer-plugin-live-poll":7,"@tencent/thumbplayer-plugin-super-player-plugins":9,"@tencent/thumbplayer-plugin-ui-loading":12,"@tencent/thumbplayer-plugin-utils":13,"@tencent/thumbplayer-tvk":15,hXUCVB:17,tslib:24}],2:[function(require,module,exports){!function(e,t){"object"===(void 0===exports?"undefined":_typeof(exports))&&"object"===(void 0===module?"undefined":_typeof(module))?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"===(void 0===exports?"undefined":_typeof(exports))?exports.ThumbPlayerCore=t():e.ThumbPlayerCore=t()}(this,function(){return function(n){var r={};function o(e){var t;return(r[e]||(t=r[e]={i:e,l:!1,exports:{}},n[e].call(t.exports,t,t.exports,o),t.l=!0,t)).exports}return o.m=n,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===(void 0===t?"undefined":_typeof(t))&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s="./index.ts")}({"./exports.ts":function exportsTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _src_kernel_origin_multi_player__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./src/kernel-origin/multi-player */ "./src/kernel-origin/multi-player.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MultiPlayer", function() { return _src_kernel_origin_multi_player__WEBPACK_IMPORTED_MODULE_0__["default"]; });\n\n/* harmony import */ var _src_kernel_origin_org_player__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./src/kernel-origin/org-player */ "./src/kernel-origin/org-player.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OrgPlayer", function() { return _src_kernel_origin_org_player__WEBPACK_IMPORTED_MODULE_1__["default"]; });\n\n/* harmony import */ var _src_kernel_origin_org_videonode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./src/kernel-origin/org-videonode */ "./src/kernel-origin/org-videonode.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OrgVideoNode", function() { return _src_kernel_origin_org_videonode__WEBPACK_IMPORTED_MODULE_2__["default"]; });\n\n/* harmony import */ var _src_kernel_origin_org_preloader__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/kernel-origin/org-preloader */ "./src/kernel-origin/org-preloader.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OrgPreloader", function() { return _src_kernel_origin_org_preloader__WEBPACK_IMPORTED_MODULE_3__["default"]; });\n\n/* harmony import */ var _src_kernel_origin_default_config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./src/kernel-origin/default-config */ "./src/kernel-origin/default-config.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "originDefaultConfig", function() { return _src_kernel_origin_default_config__WEBPACK_IMPORTED_MODULE_4__["defaultOriginKernelConfig"]; });\n\n/* harmony import */ var _src_base_video_info__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./src/base/video-info */ "./src/base/video-info.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VideoInfo", function() { return _src_base_video_info__WEBPACK_IMPORTED_MODULE_5__["default"]; });\n\n/* harmony import */ var _src_base_base_videonode__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./src/base/base-videonode */ "./src/base/base-videonode.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BaseVideoNode", function() { return _src_base_base_videonode__WEBPACK_IMPORTED_MODULE_6__["default"]; });\n\n/* harmony import */ var _src_base_base_player__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./src/base/base-player */ "./src/base/base-player.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BasePlayer", function() { return _src_base_base_player__WEBPACK_IMPORTED_MODULE_7__["default"]; });\n\n/* harmony import */ var _src_base_base_live_player__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./src/base/base-live-player */ "./src/base/base-live-player.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BaseLivePlayer", function() { return _src_base_base_live_player__WEBPACK_IMPORTED_MODULE_8__["default"]; });\n\n/* harmony import */ var _src_base_default_player_config__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./src/base/default-player-config */ "./src/base/default-player-config.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "defaultPlayerConfig", function() { return _src_base_default_player_config__WEBPACK_IMPORTED_MODULE_9__["defaultPlayerConfig"]; });\n\n/* harmony import */ var _src_base_evt_bus__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./src/base/evt-bus */ "./src/base/evt-bus.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "kernelEvtBus", function() { return _src_base_evt_bus__WEBPACK_IMPORTED_MODULE_10__["kernelEvtBus"]; });\n\n/* harmony import */ var _src_libs_event_emitter__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./src/libs/event-emitter */ "./src/libs/event-emitter.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "EvtEmitter", function() { return _src_libs_event_emitter__WEBPACK_IMPORTED_MODULE_11__["default"]; });\n\n/* harmony import */ var _src_libs_simple_defer__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./src/libs/simple-defer */ "./src/libs/simple-defer.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SimpleDefer", function() { return _src_libs_simple_defer__WEBPACK_IMPORTED_MODULE_12__["default"]; });\n\n/* harmony import */ var _src_enums__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./src/enums */ "./src/enums.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SET_LEVEL_MODE", function() { return _src_enums__WEBPACK_IMPORTED_MODULE_13__["SET_LEVEL_MODE"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PLAY_MODE", function() { return _src_enums__WEBPACK_IMPORTED_MODULE_13__["PLAY_MODE"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CAN_PLAY_ALL", function() { return _src_enums__WEBPACK_IMPORTED_MODULE_13__["CAN_PLAY_ALL"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VIDEO_CONTAINER_CLASS", function() { return _src_enums__WEBPACK_IMPORTED_MODULE_13__["VIDEO_CONTAINER_CLASS"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "END_STATE", function() { return _src_enums__WEBPACK_IMPORTED_MODULE_13__["END_STATE"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VIDEO_READY_STATE", function() { return _src_enums__WEBPACK_IMPORTED_MODULE_13__["VIDEO_READY_STATE"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VIDEO_EVTS", function() { return _src_enums__WEBPACK_IMPORTED_MODULE_13__["VIDEO_EVTS"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VIDEO_STATE", function() { return _src_enums__WEBPACK_IMPORTED_MODULE_13__["VIDEO_STATE"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ERROR_CODE", function() { return _src_enums__WEBPACK_IMPORTED_MODULE_13__["ERROR_CODE"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VIDEO_ELEMENT_ERROR", function() { return _src_enums__WEBPACK_IMPORTED_MODULE_13__["VIDEO_ELEMENT_ERROR"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ERROR_MSG", function() { return _src_enums__WEBPACK_IMPORTED_MODULE_13__["ERROR_MSG"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PLAY_EVENT", function() { return _src_enums__WEBPACK_IMPORTED_MODULE_13__["PLAY_EVENT"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PRELOAD_EVENT", function() { return _src_enums__WEBPACK_IMPORTED_MODULE_13__["PRELOAD_EVENT"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VIDEO_NODE_EVENT", function() { return _src_enums__WEBPACK_IMPORTED_MODULE_13__["VIDEO_NODE_EVENT"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MSE_EVENTS", function() { return _src_enums__WEBPACK_IMPORTED_MODULE_13__["MSE_EVENTS"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PAUSE_TYPE", function() { return _src_enums__WEBPACK_IMPORTED_MODULE_13__["PAUSE_TYPE"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PLAYER_LOG_LEVEL", function() { return _src_enums__WEBPACK_IMPORTED_MODULE_13__["PLAYER_LOG_LEVEL"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PRELOAD_TYPE", function() { return _src_enums__WEBPACK_IMPORTED_MODULE_13__["PRELOAD_TYPE"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CODEC", function() { return _src_enums__WEBPACK_IMPORTED_MODULE_13__["CODEC"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VIDEO_CODEC", function() { return _src_enums__WEBPACK_IMPORTED_MODULE_13__["VIDEO_CODEC"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AUDIO_CODEC", function() { return _src_enums__WEBPACK_IMPORTED_MODULE_13__["AUDIO_CODEC"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CONTAINER_FORMAT", function() { return _src_enums__WEBPACK_IMPORTED_MODULE_13__["CONTAINER_FORMAT"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "HDR_CAPABILITY", function() { return _src_enums__WEBPACK_IMPORTED_MODULE_13__["HDR_CAPABILITY"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VIDEO_ELEMENT_STATE", function() { return _src_enums__WEBPACK_IMPORTED_MODULE_13__["VIDEO_ELEMENT_STATE"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CDN_PATH_PREFIX", function() { return _src_enums__WEBPACK_IMPORTED_MODULE_13__["CDN_PATH_PREFIX"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CACHE_SIZE_KEY", function() { return _src_enums__WEBPACK_IMPORTED_MODULE_13__["CACHE_SIZE_KEY"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DRM_TYPE", function() { return _src_enums__WEBPACK_IMPORTED_MODULE_13__["DRM_TYPE"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VIDEO_TYPE", function() { return _src_enums__WEBPACK_IMPORTED_MODULE_13__["VIDEO_TYPE"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KERNEL_NAME", function() { return _src_enums__WEBPACK_IMPORTED_MODULE_13__["KERNEL_NAME"]; });\n\n/* harmony import */ var _src_interfaces__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./src/interfaces */ "./src/interfaces/index.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AUDIO_TRACK_ERROR_MSG", function() { return _src_interfaces__WEBPACK_IMPORTED_MODULE_14__["AUDIO_TRACK_ERROR_MSG"]; });\n\n/* harmony import */ var _src_drm__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./src/drm */ "./src/drm/index.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DrmKeySystems", function() { return _src_drm__WEBPACK_IMPORTED_MODULE_15__["KeySystems"]; });\n\n/* harmony import */ var _src_util__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./src/util */ "./src/util/index.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "commonTool", function() { return _src_util__WEBPACK_IMPORTED_MODULE_16__["commonTool"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "uaTool", function() { return _src_util__WEBPACK_IMPORTED_MODULE_16__["uaTool"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "logTool", function() { return _src_util__WEBPACK_IMPORTED_MODULE_16__["logTool"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "logMethodCallDecoratorCreator", function() { return _src_util__WEBPACK_IMPORTED_MODULE_16__["logMethodCallDecoratorCreator"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "logMethodCallDecoratorCreater", function() { return _src_util__WEBPACK_IMPORTED_MODULE_16__["logMethodCallDecoratorCreater"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Logger", function() { return _src_util__WEBPACK_IMPORTED_MODULE_16__["Logger"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "enableConsoleOutput", function() { return _src_util__WEBPACK_IMPORTED_MODULE_16__["enableConsoleOutput"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LogMode", function() { return _src_util__WEBPACK_IMPORTED_MODULE_16__["LogMode"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "dumpLog", function() { return _src_util__WEBPACK_IMPORTED_MODULE_16__["dumpLog"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "cookieTool", function() { return _src_util__WEBPACK_IMPORTED_MODULE_16__["cookieTool"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "lsTool", function() { return _src_util__WEBPACK_IMPORTED_MODULE_16__["lsTool"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "urlTool", function() { return _src_util__WEBPACK_IMPORTED_MODULE_16__["urlTool"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "domTool", function() { return _src_util__WEBPACK_IMPORTED_MODULE_16__["domTool"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "netTool", function() { return _src_util__WEBPACK_IMPORTED_MODULE_16__["netTool"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "videoTool", function() { return _src_util__WEBPACK_IMPORTED_MODULE_16__["videoTool"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "stringTool", function() { return _src_util__WEBPACK_IMPORTED_MODULE_16__["stringTool"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "jsonTool", function() { return _src_util__WEBPACK_IMPORTED_MODULE_16__["jsonTool"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TaskLoop", function() { return _src_util__WEBPACK_IMPORTED_MODULE_16__["TaskLoop"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LoopMode", function() { return _src_util__WEBPACK_IMPORTED_MODULE_16__["LoopMode"]; });\n\n/* harmony import */ var _src_define_envs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./src/define-envs */ "./src/define-envs.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CHANNEL", function() { return _src_define_envs__WEBPACK_IMPORTED_MODULE_17__["CHANNEL"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BUILD_TIME", function() { return _src_define_envs__WEBPACK_IMPORTED_MODULE_17__["BUILD_TIME"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VERSION", function() { return _src_define_envs__WEBPACK_IMPORTED_MODULE_17__["VERSION"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LOCAL_DEV", function() { return _src_define_envs__WEBPACK_IMPORTED_MODULE_17__["LOCAL_DEV"]; });\n\n/* harmony import */ var _src_kernel_selector_kernel_factory__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./src/kernel-selector/kernel-factory */ "./src/kernel-selector/kernel-factory.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KernelFactory", function() { return _src_kernel_selector_kernel_factory__WEBPACK_IMPORTED_MODULE_18__["default"]; });\n\n/* harmony import */ var _src_kernel_proxy__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./src/kernel-proxy */ "./src/kernel-proxy.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KernelProxy", function() { return _src_kernel_proxy__WEBPACK_IMPORTED_MODULE_19__["default"]; });\n\n/* harmony import */ var _src_base_reference_report__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./src/base/reference-report */ "./src/base/reference-report.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ReferenceReport", function() { return _src_base_reference_report__WEBPACK_IMPORTED_MODULE_20__["default"]; });\n\n// åçæ­æ¾åæ ¸ç¸å³æ¨¡åå¯¼åº\n\n\n\n\n\n// æ­æ¾å¨å¬ç¨æ¨¡åï¼åºç±»ç­\n\n\n\n\n\n\n// å¶ä»æä¸¾ãå·¥å·æ¨¡å\n\n\n\n\n\n// èªå¸¦å·¥å·æ¹æ³\n\n// ç¼è¯æ³¨å¥çåé\n\n\n\n\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./exports.ts?')},"./index.ts":function indexTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _src_libs_polyfill__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./src/libs/polyfill */ "./src/libs/polyfill.ts");\n/* harmony import */ var _src_libs_polyfill__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_src_libs_polyfill__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./exports */ "./exports.ts");\n/* harmony import */ var _src_enums__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./src/enums */ "./src/enums.ts");\n/* harmony import */ var _src_kernel_origin_org_player__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/kernel-origin/org-player */ "./src/kernel-origin/org-player.ts");\n/* harmony import */ var _src_kernel_selector_kernel_factory__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./src/kernel-selector/kernel-factory */ "./src/kernel-selector/kernel-factory.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MultiPlayer", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["MultiPlayer"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OrgPlayer", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["OrgPlayer"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OrgVideoNode", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["OrgVideoNode"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OrgPreloader", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["OrgPreloader"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "originDefaultConfig", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["originDefaultConfig"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VideoInfo", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["VideoInfo"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BaseVideoNode", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["BaseVideoNode"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BasePlayer", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["BasePlayer"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BaseLivePlayer", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["BaseLivePlayer"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "defaultPlayerConfig", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["defaultPlayerConfig"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "kernelEvtBus", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["kernelEvtBus"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "EvtEmitter", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["EvtEmitter"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SimpleDefer", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["SimpleDefer"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SET_LEVEL_MODE", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["SET_LEVEL_MODE"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PLAY_MODE", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["PLAY_MODE"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CAN_PLAY_ALL", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["CAN_PLAY_ALL"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VIDEO_CONTAINER_CLASS", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["VIDEO_CONTAINER_CLASS"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "END_STATE", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["END_STATE"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VIDEO_READY_STATE", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["VIDEO_READY_STATE"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VIDEO_EVTS", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["VIDEO_EVTS"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VIDEO_STATE", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["VIDEO_STATE"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ERROR_CODE", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["ERROR_CODE"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VIDEO_ELEMENT_ERROR", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["VIDEO_ELEMENT_ERROR"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ERROR_MSG", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["ERROR_MSG"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PLAY_EVENT", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["PLAY_EVENT"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PRELOAD_EVENT", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["PRELOAD_EVENT"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VIDEO_NODE_EVENT", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["VIDEO_NODE_EVENT"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MSE_EVENTS", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["MSE_EVENTS"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PAUSE_TYPE", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["PAUSE_TYPE"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PLAYER_LOG_LEVEL", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["PLAYER_LOG_LEVEL"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PRELOAD_TYPE", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["PRELOAD_TYPE"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CODEC", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["CODEC"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VIDEO_CODEC", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["VIDEO_CODEC"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AUDIO_CODEC", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["AUDIO_CODEC"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CONTAINER_FORMAT", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["CONTAINER_FORMAT"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "HDR_CAPABILITY", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["HDR_CAPABILITY"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VIDEO_ELEMENT_STATE", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["VIDEO_ELEMENT_STATE"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CDN_PATH_PREFIX", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["CDN_PATH_PREFIX"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CACHE_SIZE_KEY", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["CACHE_SIZE_KEY"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DRM_TYPE", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["DRM_TYPE"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VIDEO_TYPE", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["VIDEO_TYPE"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KERNEL_NAME", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["KERNEL_NAME"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AUDIO_TRACK_ERROR_MSG", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["AUDIO_TRACK_ERROR_MSG"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DrmKeySystems", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["DrmKeySystems"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "commonTool", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["commonTool"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "uaTool", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["uaTool"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "logTool", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["logTool"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "logMethodCallDecoratorCreator", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["logMethodCallDecoratorCreator"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "logMethodCallDecoratorCreater", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["logMethodCallDecoratorCreater"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Logger", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["Logger"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "enableConsoleOutput", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["enableConsoleOutput"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LogMode", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["LogMode"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "dumpLog", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["dumpLog"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "cookieTool", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["cookieTool"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "lsTool", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["lsTool"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "urlTool", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["urlTool"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "domTool", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["domTool"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "netTool", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["netTool"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "videoTool", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["videoTool"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "stringTool", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["stringTool"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "jsonTool", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["jsonTool"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TaskLoop", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["TaskLoop"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LoopMode", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["LoopMode"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CHANNEL", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["CHANNEL"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BUILD_TIME", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["BUILD_TIME"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "VERSION", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["VERSION"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LOCAL_DEV", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["LOCAL_DEV"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KernelFactory", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["KernelFactory"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KernelProxy", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["KernelProxy"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ReferenceReport", function() { return _exports__WEBPACK_IMPORTED_MODULE_1__["ReferenceReport"]; });\n\n\n\n\n\n\n\n// æ­æ¾å¨èªå¸¦åçæ­æ¾åæ ¸\n_src_kernel_selector_kernel_factory__WEBPACK_IMPORTED_MODULE_4__["default"].registerKernel(_src_enums__WEBPACK_IMPORTED_MODULE_2__["KERNEL_NAME"].ORIGIN, _src_kernel_origin_org_player__WEBPACK_IMPORTED_MODULE_3__["default"]);\n// ä¸ºäºè®©åæ ¸cdnè½å¤æ­énpmåä½¿ç¨ï¼è¿ééè¦æè½½åæ ¸æéè¦çå¨å±åé\nwindow.ThumbPlayerCore = _exports__WEBPACK_IMPORTED_MODULE_1__;\n;\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./index.ts?')},"./node_modules/@tencent/ovb-event-emitter/lib/index.es.js":function node_modulesTencentOvbEventEmitterLibIndexEsJs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ReplayType", function() { return r; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return s; });\n/**\n * TVF-modules @tencent/ovb-event-emitter\n * v1.1.10\n * @author vfe 2022-04-14 16:01:57\n */\n\nfunction t(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{c(r.next(t))}catch(t){s(t)}}function a(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((r=r.apply(t,e||[])).next())}))}function e(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function n(t,e,n){if(n||2===arguments.length)for(var r,i=0,s=e.length;i<s;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}var r;!function(t){t[t.sync=1]="sync",t[t.async=0]="async"}(r||(r={}));var i=function(){function t(){this._hasPriority=!1,this._array=[]}return t.prototype.insert=function(t,e){if(void 0===e&&(e=!1),0!==t.priority&&(this._hasPriority=!0),!this._hasPriority)return e?(this._array.unshift(t),0):(this._array.push(t),this._array.length-1);var n=this._array.findIndex((function(n){return n.priority===t.priority?e:n.priority<t.priority}));return-1===n?(this._array.push(t),this._array.length-1):(this._array.splice(n,0,t),n)},t.prototype.clone=function(){return n([],this._array,!0)},t.prototype.getListener=function(t){return this._array[t]},t.prototype.getListeners=function(){return this._array.map((function(t){return t.listener}))},t.prototype.remove=function(t){var e=this._array.findIndex((function(e){return e.listener===t}));-1!==e&&(this._array[e].isRemove=!0,this._array.splice(e,1))},t.prototype.findIdx=function(t){return this._array.findIndex((function(e){return e.listener===t}))},t.prototype.size=function(){return this._array.length},t}(),s=function(){function s(t){void 0===t&&(t={}),this._events=Object.create(null),this._cacheEvents=Object.create(null);var e=t.maxListeners,n=void 0===e?10:e,i=t.replayType,s=void 0===i?r.sync:i,o=t.isCache,a=void 0!==o&&o;this._isCache=a,this._replayType=s,this._maxListeners=n}return s.prototype.setCacheStatus=function(t){this._isCache=t},s.prototype.setReplayType=function(t){this._replayType=t},s.prototype.getCacheStatus=function(){return this._isCache},s.prototype.clearCache=function(){this._isCache=!1,this._cacheEvents=Object.create(null)},s.prototype.setMaxListeners=function(t){return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return this._maxListeners},s.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return this._emit.apply(this,n([!1,t],e,!1))},s.prototype.asyncEmit=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return this._emit.apply(this,n([!0,t],e,!1))},s.prototype.addListener=function(t,e){return this._addListener(t,{listener:e,priority:0,isOnce:!1})},s.prototype.on=function(t,e,n){return void 0===n&&(n=0),this._addListener(t,{listener:e,priority:n,isOnce:!1})},s.prototype.listeners=function(t){var e=this._events[t];return e?e.getListeners():[]},s.prototype.prependListener=function(t,e){return this._addListener(t,{listener:e,priority:0,isOnce:!1},!0)},s.prototype.once=function(t,e,n){return void 0===n&&(n=0),this._addListener(t,{listener:e,priority:n,isOnce:!0})},s.prototype.removeListener=function(t,e){var n=this._events[t];return n?(n.remove(e),this):this},s.prototype.off=function(t,e){return this.removeListener(t,e)},s.prototype.removeAllListeners=function(t){return void 0===t?(this._events=Object.create(null),this):(this._events[t]&&delete this._events[t],this)},s.prototype.listenerCount=function(t){var e;return(null===(e=this._events[t])||void 0===e?void 0:e.size())||0},s.prototype.eventNames=function(){return Object.getOwnPropertyNames(this._events)},s.prototype._emit=function(n,r){var i=this;void 0===n&&(n=!1);for(var o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];var c=[{type:r,target:this,data:1===o.length?o[0]:o}],u=this._events[r],p={stopIndex:-1,onceCount:0,emitData:c};if(this._addCacheEvent(r,p,n),!u)return!!n&&Promise.resolve(!1);var h=Promise.resolve();return u.clone().some((function(r,o){return(r.isOnce||r.isRemove)&&(p.onceCount+=1),!r.isRemove&&(n?(h=h.then((function(){return t(i,void 0,void 0,(function(){return e(this,(function(t){switch(t.label){case 0:return p.stopIndex>=0||r.isRemove?[2]:(r.isOnce&&u.remove(r.listener),[4,r.listener.apply(this,c)]);case 1:return t.sent()===s.STOP_IMMEDIATE_PROPAGATION&&(p.stopIndex=Math.max(o-p.onceCount,0)),[2]}}))}))})),!1):(r.isOnce&&u.remove(r.listener),r.listener.apply(i,c)===s.STOP_IMMEDIATE_PROPAGATION&&(p.stopIndex=Math.max(o-p.onceCount,0),!0)))})),!n||h.then((function(){return!0}))},s.prototype._addCacheEvent=function(t,e,n){if(this._isCache){var r=n?Promise.resolve(e):e;this._cacheEvents[t]?this._cacheEvents[t].push(r):this._cacheEvents[t]=[r]}},s.prototype._replayCacheEvent=function(n,r,i){var o=this,a=this._cacheEvents[n];if(this._isCache&&a){var c=r.isOnce?1:0;a.some((function(u,p){return u instanceof Promise?(a[p]=u.then((function(a){return t(o,void 0,void 0,(function(){var t;return e(this,(function(e){switch(e.label){case 0:return a.stopIndex>=0&&i>a.stopIndex?[2,a]:[4,r.listener.apply(this,a.emitData)];case 1:return t=e.sent(),r.isOnce&&this.off(n,r.listener),t===s.STOP_IMMEDIATE_PROPAGATION?a.stopIndex=Math.max(i-c,0):a.stopIndex>=0&&i<=a.stopIndex&&(a.stopIndex=a.stopIndex-c+1),[2,a]}}))}))})),r.isOnce):(u.stopIndex>=0&&i>u.stopIndex||(r.isOnce&&o.off(n,r.listener),r.listener.apply(o,u.emitData)===s.STOP_IMMEDIATE_PROPAGATION?u.stopIndex=Math.max(i-c,0):u.stopIndex>=0&&i<=u.stopIndex&&(u.stopIndex=u.stopIndex-c+1)),r.isOnce)}))}},s.prototype._addListener=function(t,e,n){var s=this;void 0===n&&(n=!1),this._events[t]||(this._events[t]=new i);var o=this._events[t].insert(e,n);return this._maxListeners>0&&this._events[t].size()===this._maxListeners&&console.warn("Possible EventEmitter memory leak detected. ".concat(this._events[t].size()," ").concat(String(t)," listeners ")+"added. Use emitter.setMaxListeners() to increase limit"),this._replayType===r.async?setTimeout((function(){var n=s._events[t].findIdx(e.listener);-1!==n&&s._replayCacheEvent(t,e,n)})):this._replayCacheEvent(t,e,o),this},s.STOP_IMMEDIATE_PROPAGATION="EventEmitter.STOP_IMMEDIATE_PROPAGATION",s}();\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./node_modules/@tencent/ovb-event-emitter/lib/index.es.js?')},"./node_modules/@tencent/ovb-request/lib/index.es.js":function node_modulesTencentOvbRequestLibIndexEsJs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "JsonpAbortController", function() { return p; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RequestConfig", function() { return c; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "jsonp", function() { return h; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "request", function() { return v; });\n/* harmony import */ var _tencent_ovb_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tencent/ovb-utils */ "./node_modules/@tencent/ovb-request/node_modules/@tencent/ovb-utils/lib/index.es.js");\n/**\n * TVF-modules @tencent/ovb-request\n * v1.1.22\n * @author jimczjchen 2022-07-15 11:07:01\n */\n\nvar r=function(){return(r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function n(e,t,r,n){return new(r||(r=Promise))((function(o,i){function c(e){try{a(n.next(e))}catch(e){i(e)}}function u(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(c,u)}a((n=n.apply(e,t||[])).next())}))}function o(e,t){var r,n,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;c;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(o=c.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}var i=function(){function e(){this.interceptors=[]}return e.prototype.use=function(e,t){return this.interceptors.push({resolved:e,rejected:t}),this.interceptors.length-1},e.prototype.traverse=function(e,t){void 0===t&&(t=!1);var r=Promise.resolve(e);return(t?Array.prototype.reduceRight:Array.prototype.reduce).call(this.interceptors,(function(e,t){if(t){var n=t.resolved,o=t.rejected;r=r.then(n,o)}return e}),""),r},e.prototype.eject=function(e){this.interceptors[e]&&(this.interceptors[e]=null)},e}(),c={defaults:{timeout:0,method:"GET",mode:"cors",redirect:"follow",credentials:"same-origin"},headers:{common:{Accept:"application/json, text/plain, */*"},POST:{"Content-Type":"application/x-www-form-urlencoded"},PUT:{"Content-Type":"application/x-www-form-urlencoded"},PATCH:{"Content-Type":"application/x-www-form-urlencoded"}},baseURL:"",polyfillUrl:"https://vm.gtimg.cn/comps/script/fetch.min.js",interceptors:{request:new i,response:new i}},u=/^([a-z][a-z\\d+\\-.]*:)?\\/\\//i,a=Object.prototype.toString;function s(t){return n(this,void 0,void 0,(function(){var r;return o(this,(function(n){switch(n.label){case 0:if(window.fetch)return[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,Object(_tencent_ovb_utils__WEBPACK_IMPORTED_MODULE_0__["loadScript"])({src:t})];case 2:return n.sent(),[3,4];case 3:throw r=n.sent(),new Error("å è½½ polyfill "+t+" å¤±è´¥: "+r.message);case 4:return[2]}}))}))}function l(e){return["Accept","Content-Type"].forEach((function(t){return r=t,void((n=e.headers)&&Object.keys(n).forEach((function(e){e!==r&&e.toUpperCase()===r.toUpperCase()&&(n[r]=n[e],delete n[e])})));var r,n})),function(e){if("[object Object]"!==a.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}(e.body)&&(e.body=JSON.stringify(e.body),e.headers&&(e.headers["Content-Type"]="application/json;charset=utf-8")),e}var p=function(){function e(){this.element=null,this.isAborted=!1}return e.prototype.abort=function(){var e,t;if(this.element){var r=new Event("abort");null===(t=(e=this.element).onerror)||void 0===t||t.call(e,r),this.isAborted=!0,this.element=null}},e}(),f=function(){},d=1;function h(e,n){return void 0===n&&(n={}),new Promise((function(o,i){var c,u=n.name,a=n.query,s=void 0===a?{}:a,l=n.param,p=void 0===l?"callback":l,h=n.timeout,v=void 0===h?6e4:h,m=n.prefix,y=void 0===m?"jsonp_":m,w=n.controller,b=n.charset,T=u||""+y+d++,E=document.createElement("script"),g=v?setTimeout((function(){j(!0),i(new Error("jsonp timeout"))}),v):null,j=function(e){var t;void 0===e&&(e=!1),null===(t=E.parentNode)||void 0===t||t.removeChild(E),g&&clearTimeout(g),w&&(w.element=null),window[T]=e?f:null},O=Object(_tencent_ovb_utils__WEBPACK_IMPORTED_MODULE_0__["stringifyUrl"])({url:e,query:r(r({},s),(c={},c[p]=T,c))});E.src=O,b&&(E.charset=b),w&&(w.element=E),E.onerror=function(e){j(),i(e)},window[T]=function(e){j(),o(e)},document.body.appendChild(E)}))}function v(e){return n(this,void 0,void 0,(function(){var n,i,a,p,f,d,h,v,m,y,w,b,T,E,g,j,O;return o(this,(function(o){switch(o.label){case 0:return n=c.baseURL,i=c.defaults,a=c.interceptors,[4,s(c.polyfillUrl)];case 1:return o.sent(),(p=r(r({},i),e)).headers||(p.headers=function(e){void 0===e&&(e="GET");var t=c.headers[e]||{};return r(r({},c.headers.common),t)}(p.method)),l(p),[4,a.request.traverse(p,!0)];case 2:if((f=o.sent())instanceof Error)throw f;return f.url=function(e,t){return!e||u.test(t)?t:e.replace(/\\/+$/,"")+"/"+t.replace(/^\\/+/,"")}(n,f.url),d=f.url,h=f.timeout,v=f.params,m=f.method,y=["GET","DELETE","OPTIONS","HEAD"].includes(void 0===m?"GET":m)&&!!v,w=y?Object(_tencent_ovb_utils__WEBPACK_IMPORTED_MODULE_0__["stringifyUrl"])({url:d,query:v}):d,b=[],h&&!f.signal&&(g=new Promise((function(e){T=setTimeout((function(){e(new Error("timeout"))}),h)})),b.push(g),E=new AbortController,f.signal=E.signal),b.push(fetch(w,f).catch((function(e){return e}))),[4,Promise.race(b)];case 3:return j=o.sent(),T&&clearTimeout(T),[4,a.response.traverse(j)];case 4:if((O=o.sent())instanceof Error)throw null==E||E.abort(),O;return[2,O]}}))}))}\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./node_modules/@tencent/ovb-request/lib/index.es.js?')},"./node_modules/@tencent/ovb-request/node_modules/@tencent/ovb-utils/lib/index.es.js":function node_modulesTencentOvbRequestNode_modulesTencentOvbUtilsLibIndexEsJs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Cookies", function() { return t; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "REGEXP_DEFAULT_ON_TAG_ATTR", function() { return U; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addClass", function() { return q; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "compareVersions", function() { return T; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dateFormat", function() { return r; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "elementAttr", function() { return S; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "elementCss", function() { return E; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "elementHtml", function() { return C; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "elementText", function() { return j; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getBrowser", function() { return f; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getOS", function() { return c; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasClass", function() { return M; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hideElement", function() { return O; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "htmlXssFilter", function() { return z; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "insertStyle", function() { return y; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isMobile", function() { return p; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "loadCss", function() { return b; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "loadScript", function() { return x; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseUrl", function() { return h; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "removeClass", function() { return _; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "showElement", function() { return k; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "stringifyUrl", function() { return m; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "uaMatch", function() { return l; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "uuid", function() { return w; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "xssFilter", function() { return V; });\n/**\n * TVF-modules @tencent/ovb-utils\n * v1.1.7\n * @author jimczjchen 2022-07-15 11:26:29\n */\n\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nvar e=function(){return(e=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},t=function(){function t(){}return t.setDefault=function(n){t.defaultOptions=e(e({},t.defaultOptions),n)},t.getCookie=function(e){var n=void 0,i=document.cookie?document.cookie.split("; "):[],r={};return i.some((function(i){var o=i.split("="),a=o[0],s=o.slice(1),u=t.decode(a),d=t.parseValue(s.join("="));return u===e?(n=d,!0):(r[u]=d,!1)})),void 0===e?r:n},t.setCookie=function(e,n,i){return void 0===i&&(i={}),t.set(e,n,i)},t.clearCookie=function(e,n,i){void 0===n&&(n=""),void 0===i&&(i=""),t.setCookie(e,"",{domain:n,path:i,expires:-1})},t.clearAllCookies=function(e,n){void 0===e&&(e=""),void 0===n&&(n="");var i=document.cookie?document.cookie.split("; "):[],r={domain:e,path:n,expires:-1};i.forEach((function(e){var n=e.split("=")[0];t.set(n,"",r,!0)}))},t.set=function(n,i,r,o){void 0===o&&(o=!1);var a=e(e({},t.defaultOptions),r),s=a.domain,u=a.path,d=a.secure,l=a.expires,c=a.sameSite,f=new Date(Date.now()+24*l*60*60*1e3),p=[(o?n:t.encode(n))+"="+t.stringifyValue(i),"; expires="+f.toUTCString(),u?"; path="+u:"",s?"; domain="+s:"",c?"; SameSite="+c:"",d?"; Secure":""].join("");return document.cookie=p,p},t.encode=function(e){return t.raw?e:encodeURIComponent(e)},t.decode=function(e){return t.raw?e:decodeURIComponent(e)},t.stringifyValue=function(e){return t.encode(t.json?JSON.stringify(e):String(e))},t.parseValue=function(e){if(t.raw)return e;var n=e;0===n.indexOf(\'"\')&&(n=n.slice(1,-1).replace(/\\\\"/g,\'"\').replace(/\\\\\\\\/g,"\\\\"));try{return n=decodeURIComponent(n.replace(/\\+/g," ")),t.json?JSON.parse(n):n}catch(e){}},t.raw=!1,t.json=!1,t.defaultOptions={domain:"",path:"/",expires:365,secure:!0,sameSite:""},t}(),n=function(e,t){var n=""+e;return!n||n.length>=t?n:""+Array(t+1-n.length).join("0")+e},i=/\\[([^\\]]+)]|(Y|y){1,4}|M{1,4}|D{1,2}|d{1,2}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g;function r(e,t){void 0===t&&(t="yyyy-MM-DD HH:mm:ss");var r=new Date(e);if(isNaN(r.getTime()))return r.toString();var o=t,a=""+r.getFullYear(),s=a.slice(-2),u=r.getHours(),d=""+(u%12||12),l=""+(r.getMonth()+1),c=""+r.getDate(),f=""+r.getDay(),p=""+r.getMinutes(),v=""+r.getSeconds(),g=""+r.getMilliseconds(),h=15*Math.round(r.getTimezoneOffset()/15),m=Math.abs(h),w=n(Math.floor(m/60),2),y=n(m%60,2),x=h<=0?"+":"-",b=""+x+w+":"+y,S=""+x+w+y,M={YY:s,YYYY:a,yy:s,yyyy:a,M:l,MM:n(l,2),D:c,DD:n(c,2),d:f,dd:n(c,2),H:""+u,HH:n(u,2),h:n(d,1),hh:n(d,2),a:u<12?"am":"pm",A:u<12?"AM":"PM",m:p,mm:n(p,2),s:v,ss:n(v,2),SSS:n(g,3),Z:b,ZZ:S};return o.replace(i,(function(e,t){return t||M[e]||e}))}var o,a={android_1:/android[\\s/]([\\d.]+)/i,android_2:/android/i,android_3:/MIDP-/i,ipod_1:/iPod\\stouch;\\sCPU\\siPhone\\sos\\s([\\d_]+)/i,ipod_2:/iPod.*os\\s?([\\d_.]+)/i,iphone_1:/iPhone;\\sCPU\\siPhone\\sos\\s([\\d_]+)/i,iphone_2:/iPhone.*os\\s?([\\d_.]+)/i,ipad_1:/ipad;\\scpu\\sos\\s([\\d_]+)/i,ipad_2:/ipad([\\d]+)?/i,windows:/windows\\snt\\s([\\d.]+)/i,mac:/Macintosh.*mac\\sos\\sx\\s([\\d_.]+)/i,nintendo:/Nintendo Switch/i,tesla:/tesla/i,linux:/linux/i},s={weishi:/WEISHI_([\\d.]+)/i,toutiao:/TTWebView\\/([\\d.]+)/i,wechat:/MicroMessenger\\/([\\d.]+)/i,ipadqq:/IPadQQ\\/([\\d.]+)/i,mqq:/qq\\/([\\d.]+)/i,qzone:/QZONEJSSDK\\/([\\d.]+)/i,mqqbrowser:/mqqbrowser\\/([\\d.]+)/i,qqbrowser:/[^m]QQBrowser\\/([\\d.]+)/i,x5:/tbs\\/(\\d+)/i,uc:/UCBrowser\\/([\\d.]+)/i,safari:/Version\\/([\\d.]+)( Mobile\\S*)? Safari\\/([\\d.]+)/i,firefox:/Firefox\\/([\\d.]+)/i,opera:/OPR\\/([\\d.]+)/i,ie_1:/MSIE\\s([\\d.]+)/i,ie_2:/(trident\\/\\d\\.\\d)/i,ie_3:/(Edge)\\/\\d+\\.\\d+/i,weibo:/weibo__([\\d.]+)/i,qqnewsAd:/TADChid\\/([\\d.]+)/i,qqnews:/qqnews\\/([\\d.]+)/i,tenvideo_1:/QQLiveBrowser\\/([\\d.]+)/i,tenvideo_2:/QQLiveHDBrowser\\/([\\d.]+)/i,kuaibao:/qnreading\\/([\\d.]+)/i,liebao:/LieBaoFast\\/([\\d.]+)/i,douban:/com\\.douban\\.frodo\\/([\\d.]+)/i,miuibrowser:/MiuiBrowser/i,baidu:/baiduboxapp/i,browser360:/360browser/i,oppobrowser:/OppoBrowser/i,chrome_1:/CriOS\\/([\\d.]+)/i,chrome_2:/Chrome\\/([\\d.]+)/i,qqdownloader:/qqdownloader\\/([\\d.]+)/i,nintendo:/NintendoBrowser\\/([\\d.]+)/i,tesla:/QtCarBrowser/i},u={"4.0":"8","5.0":"9","6.0":"10","7.0":"11"},d=function(){function e(){}return e.uaMatch=function(t){var n,i=t||(null===(n=null===window||void 0===window?void 0:window.navigator)||void 0===n?void 0:n.userAgent),r={};return r.os=e.getOS(i),r.browser=e.getBrowser(i),r.isMobile=e.isMobile(i),r},e.isMobile=function(e){var t,n=e||(null===(t=null===window||void 0===window?void 0:window.navigator)||void 0===t?void 0:t.userAgent);return/(mobile)/i.test(n)},e.getOS=function(e){var t,n={name:"",version:""},i=e||(null===(t=null===window||void 0===window?void 0:window.navigator)||void 0===t?void 0:t.userAgent);return Object.keys(a).every((function(e){var t=a[e].exec(i);if(!t)return!0;var r=e.replace(/_\\d+/,"");return n[r]=!0,n.name=r,t[1]&&(n.version=t[1].replace(/_/g,".")),!1})),(n.iphone||n.ipad||n.ipod)&&(n.ios=!0),n},e.getBrowser=function(e){var t,n={},i=e||(null===(t=null===window||void 0===window?void 0:window.navigator)||void 0===t?void 0:t.userAgent);return Object.keys(s).forEach((function(e){var t,r=s[e].exec(i);if(r){var o=e.replace(/_\\d+/,"");n[o]||(n[o]={version:(null===(t=r[1])||void 0===t?void 0:t.replace(/_/g,"."))||""})}})),n.ie&&/trident/i.test(i)&&(n.ie.version=u[n.ie.version]||"11"),n},e}(),l=d.uaMatch,c=d.getOS,f=d.getBrowser,p=d.isMobile;function v(e){try{return decodeURIComponent(e.replace(/\\+/g," "))}catch(e){return null}}function g(e,t){var n=[null,void 0,"",NaN].includes(e);if(t.isSkipEmpty&&n)return null;var i=!t.isSkipEmpty&&n?"":e;try{return t.encode?encodeURIComponent(i):i}catch(e){return null}}function h(e){var t=e.split("#"),n=t[0],i=t[1],r=void 0===i?"":i,o=n.split("?"),a=o[0],s=o[1],u=void 0===s?"":s,d=v(r),l=Object.create(null);return u.split("&").forEach((function(e){var t=e.split("="),n=t[0],i=t[1],r=void 0===i?"":i,o=v(n),a=v(r);null===o||null===a||""===o&&""===a||l[o]||(l[o]=a)})),{url:a,query:l,hash:d}}function m(t,n){void 0===n&&(n={encode:!0,isSkipEmpty:!1});var i=t.url,r=t.query,o=void 0===r?{}:r,a=t.hash,s=i.split("#"),u=s[0],d=s[1],l=void 0===d?"":d,c=u.split("?")[0],f=[],p=g(a||l,n),v=e(e({},h(i).query),o);return Object.keys(v).forEach((function(e){var t=g(e,n),i=g(v[e],n);null!==t&&null!==i&&f.push(t+"="+i)})),c+(f.length?"?"+f.join("&"):"")+(p?"#"+p:"")}function w(){var e=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))}function y(e,t){var n;if(!t||!document.querySelectorAll("style[data-tag="+t+"]").length){var i=document.createElement("style");i.textContent=e.trim(),t&&(i.dataset.tag=t),null===(n=document.getElementsByTagName("head")[0])||void 0===n||n.appendChild(i)}}function x(t,n){return new Promise((function(i,r){if(n&&document.querySelectorAll("script[data-tag="+n+"]").length)return i();var o=document.createElement("script"),a=e({type:"text/javascript",charset:"utf-8"},t);Object.keys(a).forEach((function(e){return S(o,e,a[e])})),n&&(o.dataset.tag=n),o.onload=function(){return i()},o.onreadystatechange=function(){var e=o.readyState;["complete","loaded"].includes(e)&&(o.onreadystatechange=null,i())},o.onerror=r,document.body.appendChild(o)}))}function b(e,t){return new Promise((function(n,i){var r;if(t&&document.querySelectorAll("link[data-tag="+t+"]").length)return n();var o=document.createElement("link");t&&(o.dataset.tag=t),o.href=e,o.rel="stylesheet",o.type="text/css",o.onload=function(){return n()},o.onerror=i,null===(r=document.getElementsByTagName("head")[0])||void 0===r||r.appendChild(o)}))}function S(e,t,n){if(e)return void 0===n?e.getAttribute(t):e.setAttribute(t,n)}function M(e,t){return!!(null==e?void 0:e.className)&&-1!==e.getAttribute("class").split(" ").indexOf(t)}function q(e,t){if(e&&!M(e,t)){var n=(e.className+" "+t).trim();e.setAttribute("class",n)}}function _(e,t){if(e){var n=e.className.split(" "),i=n.indexOf(t);-1!==i&&(n.splice(i,1),e.className=n.join(" "))}}function E(e,t,n){if(e&&t)if("string"!=typeof t||void 0===n){if("string"==typeof t&&void 0===n)return(e.currentStyle?e.currentStyle:getComputedStyle(e,null))[t];"object"==typeof t&&Object.keys(t).forEach((function(n){return E(e,n,t[n])}))}else{var i=/width|height|left|right|top|bottom|padding|margin/i.test(t)&&"number"==typeof n;e.style[t]=i?n+"px":n}}function O(e){E(e,{display:"none"})}function k(e,t){void 0===t&&(t="block"),E(e,{display:t})}function j(e,t){if(e)return void 0===t?e.innerText:void(e.innerText=t)}function C(e,t){if(e)return void 0===t?e.innerHTML:void(e.innerHTML=t)}!function(e){e[e.equal=0]="equal",e[e.low=-1]="low",e[e.high=1]="high"}(o||(o={}));var A=/^v?(?:\\d+)(\\.(?:[x*]|\\d+)(\\.(?:[x*]|\\d+)(\\.(?:[x*]|\\d+))?(?:-[\\da-z-]+(?:\\.[\\da-z-]+)*)?(?:\\+[\\da-z-]+(?:\\.[\\da-z-]+)*)?)?)?$/i;function P(e){var t,n,i=e.replace(/^v/,"").replace(/\\+.*$/,""),r=(n="-",-1===(t=i).indexOf(n)?t.length:t.indexOf(n)),o=i.substring(0,r).split(".");return o.push(i.substring(r+1)),o}function N(e){return isNaN(Number(e))?e:Number(e)}function D(e){if("string"!=typeof e)throw new TypeError("Invalid argument expected string");if(!A.test(e))throw new Error("Invalid argument not valid semver (\'"+e+"\' received)")}function T(e,t){[e,t].forEach(D);for(var n=P(e),i=P(t),r=0;r<Math.max(n.length-1,i.length-1);r++){var a=parseInt(n[r]||"0",10),s=parseInt(i[r]||"0",10);if(a>s)return o.high;if(s>a)return o.low}var u=n[n.length-1],d=i[i.length-1];if(u&&d){var l=u.split(".").map(N),c=d.split(".").map(N);for(r=0;r<Math.max(l.length,c.length);r++){if(void 0===l[r]||"string"==typeof c[r]&&"number"==typeof l[r])return-1;if(void 0===c[r]||"string"==typeof l[r]&&"number"==typeof c[r])return 1;if(l[r]>c[r])return o.high;if(c[r]>l[r])return o.low}}else if(u||d)return u?o.low:o.high;return o.equal}var B=/</g,I=/>/g,H=/"/g,Q=/\'/g,R=/&/g,U=[/((j\\s*a\\s*v\\s*a|v\\s*b|l\\s*i\\s*v\\s*e)\\s*s\\s*c\\s*r\\s*i\\s*p\\s*t\\s*|m\\s*o\\s*c\\s*h\\s*a):/gi,/e\\s*x\\s*p\\s*r\\s*e\\s*s\\s*s\\s*i\\s*o\\s*n\\s*\\(.*/gi,/u\\s*r\\s*l\\s*\\(.*/gi];function V(e){return e?(""+e).replace(R,"&amp;").replace(B,"&lt;").replace(I,"&gt;").replace(H,"&quot;").replace(Q,"&#39;"):""}var Y={img:[{name:"src",blockRegexp:U},"title","alt","width","height"],iframe:[{name:"src",regexp:new RegExp("((https?:)?//([-a-z0-9]+)?.?qq.com)","i")},"frameborder","allowfullscreen","width","height","name"],p:["class","style"],br:["class","style"],span:["class","style"],vote:["class","style"],section:["class","style"],div:["class","style"]};function z(t,n){if(!t)return"";var i=""+t,r=function(t){void 0===t&&(t={});var n=e(e({},Y),t),i={},r={};return Object.keys(n).forEach((function(e){var t=n[e].map((function(t){return"string"==typeof t?t:(r[e+"_"+t.name]=t.regexp,r[e+"_"+t.name+"_block"]=t.blockRegexp,t.name)}));t.length&&(i[e]=new RegExp("\\\\s("+t.join("|")+")=((\'|\\").+?\\\\3|[^\\\\s]+)","ig"))})),{whiteHTMLMap:n,whiteAttrPattern:i,attrValuePattern:r}}(n),o=r.whiteHTMLMap,a=r.whiteAttrPattern,s=r.attrValuePattern,u=function(e){if("string"!=typeof e)throw new Error("Parse Error: 1st argument must be string!");var t=[];return e.split("<").forEach((function(e,n){t[n]=e.split(">")})),t}(i);return(u=u.filter((function(e){var t=e[0];if("string"!=typeof t||!t)return!1;var n=t.split(" ")[0],i=n&&"/"===n[0],r=(null==n?void 0:n.replace)?n.replace("/",""):"";if(!o[r])return!!i&&(e.shift(),e.unshift("br"),!0);if(!i){var u=t.match(a[n]);(null==u?void 0:u.length)?(u.forEach((function(e,t){var i=e.substr(1),r=null==i?void 0:i.split("=")[0],o=n+"_"+r,a=s[o],d=s[o+"_block"];!a||a.test(i)?(null==d?void 0:d.some((function(e){return e.test(i)})))&&(u[t]=""):u[t]=""})),e.shift(),e.unshift(n+u.join(""))):(e.shift(),e.unshift(n))}return!0}))).unshift([""]),function(e){var t;if(!(null===(t=null==e?void 0:e[0])||void 0===t?void 0:t.join))throw new Error("Merge Error: unvalid 1st argument!");return e.map((function(e){return e.join(">")})).join("<")}(u)}\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./node_modules/@tencent/ovb-request/node_modules/@tencent/ovb-utils/lib/index.es.js?')},"./node_modules/@tencent/ovb-utils/lib/index.es.js":function node_modulesTencentOvbUtilsLibIndexEsJs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Cookies", function() { return t; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "REGEXP_DEFAULT_ON_TAG_ATTR", function() { return U; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addClass", function() { return q; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "compareVersions", function() { return T; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dateFormat", function() { return r; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "elementAttr", function() { return S; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "elementCss", function() { return E; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "elementHtml", function() { return C; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "elementText", function() { return j; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getBrowser", function() { return f; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getOS", function() { return c; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasClass", function() { return M; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hideElement", function() { return O; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "htmlXssFilter", function() { return z; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "insertStyle", function() { return y; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isMobile", function() { return p; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "loadCss", function() { return b; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "loadScript", function() { return x; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseUrl", function() { return h; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "removeClass", function() { return _; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "showElement", function() { return k; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "stringifyUrl", function() { return m; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "uaMatch", function() { return l; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "uuid", function() { return w; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "xssFilter", function() { return V; });\n/**\n * TVF-modules @tencent/ovb-utils\n * v1.1.7\n * @author jimczjchen 2022-07-15 11:26:29\n */\n\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nvar e=function(){return(e=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},t=function(){function t(){}return t.setDefault=function(n){t.defaultOptions=e(e({},t.defaultOptions),n)},t.getCookie=function(e){var n=void 0,i=document.cookie?document.cookie.split("; "):[],r={};return i.some((function(i){var o=i.split("="),a=o[0],s=o.slice(1),u=t.decode(a),d=t.parseValue(s.join("="));return u===e?(n=d,!0):(r[u]=d,!1)})),void 0===e?r:n},t.setCookie=function(e,n,i){return void 0===i&&(i={}),t.set(e,n,i)},t.clearCookie=function(e,n,i){void 0===n&&(n=""),void 0===i&&(i=""),t.setCookie(e,"",{domain:n,path:i,expires:-1})},t.clearAllCookies=function(e,n){void 0===e&&(e=""),void 0===n&&(n="");var i=document.cookie?document.cookie.split("; "):[],r={domain:e,path:n,expires:-1};i.forEach((function(e){var n=e.split("=")[0];t.set(n,"",r,!0)}))},t.set=function(n,i,r,o){void 0===o&&(o=!1);var a=e(e({},t.defaultOptions),r),s=a.domain,u=a.path,d=a.secure,l=a.expires,c=a.sameSite,f=new Date(Date.now()+24*l*60*60*1e3),p=[(o?n:t.encode(n))+"="+t.stringifyValue(i),"; expires="+f.toUTCString(),u?"; path="+u:"",s?"; domain="+s:"",c?"; SameSite="+c:"",d?"; Secure":""].join("");return document.cookie=p,p},t.encode=function(e){return t.raw?e:encodeURIComponent(e)},t.decode=function(e){return t.raw?e:decodeURIComponent(e)},t.stringifyValue=function(e){return t.encode(t.json?JSON.stringify(e):String(e))},t.parseValue=function(e){if(t.raw)return e;var n=e;0===n.indexOf(\'"\')&&(n=n.slice(1,-1).replace(/\\\\"/g,\'"\').replace(/\\\\\\\\/g,"\\\\"));try{return n=decodeURIComponent(n.replace(/\\+/g," ")),t.json?JSON.parse(n):n}catch(e){}},t.raw=!1,t.json=!1,t.defaultOptions={domain:"",path:"/",expires:365,secure:!0,sameSite:""},t}(),n=function(e,t){var n=""+e;return!n||n.length>=t?n:""+Array(t+1-n.length).join("0")+e},i=/\\[([^\\]]+)]|(Y|y){1,4}|M{1,4}|D{1,2}|d{1,2}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g;function r(e,t){void 0===t&&(t="yyyy-MM-DD HH:mm:ss");var r=new Date(e);if(isNaN(r.getTime()))return r.toString();var o=t,a=""+r.getFullYear(),s=a.slice(-2),u=r.getHours(),d=""+(u%12||12),l=""+(r.getMonth()+1),c=""+r.getDate(),f=""+r.getDay(),p=""+r.getMinutes(),v=""+r.getSeconds(),g=""+r.getMilliseconds(),h=15*Math.round(r.getTimezoneOffset()/15),m=Math.abs(h),w=n(Math.floor(m/60),2),y=n(m%60,2),x=h<=0?"+":"-",b=""+x+w+":"+y,S=""+x+w+y,M={YY:s,YYYY:a,yy:s,yyyy:a,M:l,MM:n(l,2),D:c,DD:n(c,2),d:f,dd:n(c,2),H:""+u,HH:n(u,2),h:n(d,1),hh:n(d,2),a:u<12?"am":"pm",A:u<12?"AM":"PM",m:p,mm:n(p,2),s:v,ss:n(v,2),SSS:n(g,3),Z:b,ZZ:S};return o.replace(i,(function(e,t){return t||M[e]||e}))}var o,a={android_1:/android[\\s/]([\\d.]+)/i,android_2:/android/i,android_3:/MIDP-/i,ipod_1:/iPod\\stouch;\\sCPU\\siPhone\\sos\\s([\\d_]+)/i,ipod_2:/iPod.*os\\s?([\\d_.]+)/i,iphone_1:/iPhone;\\sCPU\\siPhone\\sos\\s([\\d_]+)/i,iphone_2:/iPhone.*os\\s?([\\d_.]+)/i,ipad_1:/ipad;\\scpu\\sos\\s([\\d_]+)/i,ipad_2:/ipad([\\d]+)?/i,windows:/windows\\snt\\s([\\d.]+)/i,mac:/Macintosh.*mac\\sos\\sx\\s([\\d_.]+)/i,nintendo:/Nintendo Switch/i,tesla:/tesla/i,linux:/linux/i},s={weishi:/WEISHI_([\\d.]+)/i,toutiao:/TTWebView\\/([\\d.]+)/i,wechat:/MicroMessenger\\/([\\d.]+)/i,ipadqq:/IPadQQ\\/([\\d.]+)/i,mqq:/qq\\/([\\d.]+)/i,qzone:/QZONEJSSDK\\/([\\d.]+)/i,mqqbrowser:/mqqbrowser\\/([\\d.]+)/i,qqbrowser:/[^m]QQBrowser\\/([\\d.]+)/i,x5:/tbs\\/(\\d+)/i,uc:/UCBrowser\\/([\\d.]+)/i,safari:/Version\\/([\\d.]+)( Mobile\\S*)? Safari\\/([\\d.]+)/i,firefox:/Firefox\\/([\\d.]+)/i,opera:/OPR\\/([\\d.]+)/i,ie_1:/MSIE\\s([\\d.]+)/i,ie_2:/(trident\\/\\d\\.\\d)/i,ie_3:/(Edge)\\/\\d+\\.\\d+/i,weibo:/weibo__([\\d.]+)/i,qqnewsAd:/TADChid\\/([\\d.]+)/i,qqnews:/qqnews\\/([\\d.]+)/i,tenvideo_1:/QQLiveBrowser\\/([\\d.]+)/i,tenvideo_2:/QQLiveHDBrowser\\/([\\d.]+)/i,kuaibao:/qnreading\\/([\\d.]+)/i,liebao:/LieBaoFast\\/([\\d.]+)/i,douban:/com\\.douban\\.frodo\\/([\\d.]+)/i,miuibrowser:/MiuiBrowser/i,baidu:/baiduboxapp/i,browser360:/360browser/i,oppobrowser:/OppoBrowser/i,chrome_1:/CriOS\\/([\\d.]+)/i,chrome_2:/Chrome\\/([\\d.]+)/i,qqdownloader:/qqdownloader\\/([\\d.]+)/i,nintendo:/NintendoBrowser\\/([\\d.]+)/i,tesla:/QtCarBrowser/i},u={"4.0":"8","5.0":"9","6.0":"10","7.0":"11"},d=function(){function e(){}return e.uaMatch=function(t){var n,i=t||(null===(n=null===window||void 0===window?void 0:window.navigator)||void 0===n?void 0:n.userAgent),r={};return r.os=e.getOS(i),r.browser=e.getBrowser(i),r.isMobile=e.isMobile(i),r},e.isMobile=function(e){var t,n=e||(null===(t=null===window||void 0===window?void 0:window.navigator)||void 0===t?void 0:t.userAgent);return/(mobile)/i.test(n)},e.getOS=function(e){var t,n={name:"",version:""},i=e||(null===(t=null===window||void 0===window?void 0:window.navigator)||void 0===t?void 0:t.userAgent);return Object.keys(a).every((function(e){var t=a[e].exec(i);if(!t)return!0;var r=e.replace(/_\\d+/,"");return n[r]=!0,n.name=r,t[1]&&(n.version=t[1].replace(/_/g,".")),!1})),(n.iphone||n.ipad||n.ipod)&&(n.ios=!0),n},e.getBrowser=function(e){var t,n={},i=e||(null===(t=null===window||void 0===window?void 0:window.navigator)||void 0===t?void 0:t.userAgent);return Object.keys(s).forEach((function(e){var t,r=s[e].exec(i);if(r){var o=e.replace(/_\\d+/,"");n[o]||(n[o]={version:(null===(t=r[1])||void 0===t?void 0:t.replace(/_/g,"."))||""})}})),n.ie&&/trident/i.test(i)&&(n.ie.version=u[n.ie.version]||"11"),n},e}(),l=d.uaMatch,c=d.getOS,f=d.getBrowser,p=d.isMobile;function v(e){try{return decodeURIComponent(e.replace(/\\+/g," "))}catch(e){return null}}function g(e,t){var n=[null,void 0,"",NaN].includes(e);if(t.isSkipEmpty&&n)return null;var i=!t.isSkipEmpty&&n?"":e;try{return t.encode?encodeURIComponent(i):i}catch(e){return null}}function h(e){var t=e.split("#"),n=t[0],i=t[1],r=void 0===i?"":i,o=n.split("?"),a=o[0],s=o[1],u=void 0===s?"":s,d=v(r),l=Object.create(null);return u.split("&").forEach((function(e){var t=e.split("="),n=t[0],i=t[1],r=void 0===i?"":i,o=v(n),a=v(r);null===o||null===a||""===o&&""===a||l[o]||(l[o]=a)})),{url:a,query:l,hash:d}}function m(t,n){void 0===n&&(n={encode:!0,isSkipEmpty:!1});var i=t.url,r=t.query,o=void 0===r?{}:r,a=t.hash,s=i.split("#"),u=s[0],d=s[1],l=void 0===d?"":d,c=u.split("?")[0],f=[],p=g(a||l,n),v=e(e({},h(i).query),o);return Object.keys(v).forEach((function(e){var t=g(e,n),i=g(v[e],n);null!==t&&null!==i&&f.push(t+"="+i)})),c+(f.length?"?"+f.join("&"):"")+(p?"#"+p:"")}function w(){var e=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))}function y(e,t){var n;if(!t||!document.querySelectorAll("style[data-tag="+t+"]").length){var i=document.createElement("style");i.textContent=e.trim(),t&&(i.dataset.tag=t),null===(n=document.getElementsByTagName("head")[0])||void 0===n||n.appendChild(i)}}function x(t,n){return new Promise((function(i,r){if(n&&document.querySelectorAll("script[data-tag="+n+"]").length)return i();var o=document.createElement("script"),a=e({type:"text/javascript",charset:"utf-8"},t);Object.keys(a).forEach((function(e){return S(o,e,a[e])})),n&&(o.dataset.tag=n),o.onload=function(){return i()},o.onreadystatechange=function(){var e=o.readyState;["complete","loaded"].includes(e)&&(o.onreadystatechange=null,i())},o.onerror=r,document.body.appendChild(o)}))}function b(e,t){return new Promise((function(n,i){var r;if(t&&document.querySelectorAll("link[data-tag="+t+"]").length)return n();var o=document.createElement("link");t&&(o.dataset.tag=t),o.href=e,o.rel="stylesheet",o.type="text/css",o.onload=function(){return n()},o.onerror=i,null===(r=document.getElementsByTagName("head")[0])||void 0===r||r.appendChild(o)}))}function S(e,t,n){if(e)return void 0===n?e.getAttribute(t):e.setAttribute(t,n)}function M(e,t){return!!(null==e?void 0:e.className)&&-1!==e.getAttribute("class").split(" ").indexOf(t)}function q(e,t){if(e&&!M(e,t)){var n=(e.className+" "+t).trim();e.setAttribute("class",n)}}function _(e,t){if(e){var n=e.className.split(" "),i=n.indexOf(t);-1!==i&&(n.splice(i,1),e.className=n.join(" "))}}function E(e,t,n){if(e&&t)if("string"!=typeof t||void 0===n){if("string"==typeof t&&void 0===n)return(e.currentStyle?e.currentStyle:getComputedStyle(e,null))[t];"object"==typeof t&&Object.keys(t).forEach((function(n){return E(e,n,t[n])}))}else{var i=/width|height|left|right|top|bottom|padding|margin/i.test(t)&&"number"==typeof n;e.style[t]=i?n+"px":n}}function O(e){E(e,{display:"none"})}function k(e,t){void 0===t&&(t="block"),E(e,{display:t})}function j(e,t){if(e)return void 0===t?e.innerText:void(e.innerText=t)}function C(e,t){if(e)return void 0===t?e.innerHTML:void(e.innerHTML=t)}!function(e){e[e.equal=0]="equal",e[e.low=-1]="low",e[e.high=1]="high"}(o||(o={}));var A=/^v?(?:\\d+)(\\.(?:[x*]|\\d+)(\\.(?:[x*]|\\d+)(\\.(?:[x*]|\\d+))?(?:-[\\da-z-]+(?:\\.[\\da-z-]+)*)?(?:\\+[\\da-z-]+(?:\\.[\\da-z-]+)*)?)?)?$/i;function P(e){var t,n,i=e.replace(/^v/,"").replace(/\\+.*$/,""),r=(n="-",-1===(t=i).indexOf(n)?t.length:t.indexOf(n)),o=i.substring(0,r).split(".");return o.push(i.substring(r+1)),o}function N(e){return isNaN(Number(e))?e:Number(e)}function D(e){if("string"!=typeof e)throw new TypeError("Invalid argument expected string");if(!A.test(e))throw new Error("Invalid argument not valid semver (\'"+e+"\' received)")}function T(e,t){[e,t].forEach(D);for(var n=P(e),i=P(t),r=0;r<Math.max(n.length-1,i.length-1);r++){var a=parseInt(n[r]||"0",10),s=parseInt(i[r]||"0",10);if(a>s)return o.high;if(s>a)return o.low}var u=n[n.length-1],d=i[i.length-1];if(u&&d){var l=u.split(".").map(N),c=d.split(".").map(N);for(r=0;r<Math.max(l.length,c.length);r++){if(void 0===l[r]||"string"==typeof c[r]&&"number"==typeof l[r])return-1;if(void 0===c[r]||"string"==typeof l[r]&&"number"==typeof c[r])return 1;if(l[r]>c[r])return o.high;if(c[r]>l[r])return o.low}}else if(u||d)return u?o.low:o.high;return o.equal}var B=/</g,I=/>/g,H=/"/g,Q=/\'/g,R=/&/g,U=[/((j\\s*a\\s*v\\s*a|v\\s*b|l\\s*i\\s*v\\s*e)\\s*s\\s*c\\s*r\\s*i\\s*p\\s*t\\s*|m\\s*o\\s*c\\s*h\\s*a):/gi,/e\\s*x\\s*p\\s*r\\s*e\\s*s\\s*s\\s*i\\s*o\\s*n\\s*\\(.*/gi,/u\\s*r\\s*l\\s*\\(.*/gi];function V(e){return e?(""+e).replace(R,"&amp;").replace(B,"&lt;").replace(I,"&gt;").replace(H,"&quot;").replace(Q,"&#39;"):""}var Y={img:[{name:"src",blockRegexp:U},"title","alt","width","height"],iframe:[{name:"src",regexp:new RegExp("((https?:)?//([-a-z0-9]+)?.?qq.com)","i")},"frameborder","allowfullscreen","width","height","name"],p:["class","style"],br:["class","style"],span:["class","style"],vote:["class","style"],section:["class","style"],div:["class","style"]};function z(t,n){if(!t)return"";var i=""+t,r=function(t){void 0===t&&(t={});var n=e(e({},Y),t),i={},r={};return Object.keys(n).forEach((function(e){var t=n[e].map((function(t){return"string"==typeof t?t:(r[e+"_"+t.name]=t.regexp,r[e+"_"+t.name+"_block"]=t.blockRegexp,t.name)}));t.length&&(i[e]=new RegExp("\\\\s("+t.join("|")+")=((\'|\\").+?\\\\3|[^\\\\s]+)","ig"))})),{whiteHTMLMap:n,whiteAttrPattern:i,attrValuePattern:r}}(n),o=r.whiteHTMLMap,a=r.whiteAttrPattern,s=r.attrValuePattern,u=function(e){if("string"!=typeof e)throw new Error("Parse Error: 1st argument must be string!");var t=[];return e.split("<").forEach((function(e,n){t[n]=e.split(">")})),t}(i);return(u=u.filter((function(e){var t=e[0];if("string"!=typeof t||!t)return!1;var n=t.split(" ")[0],i=n&&"/"===n[0],r=(null==n?void 0:n.replace)?n.replace("/",""):"";if(!o[r])return!!i&&(e.shift(),e.unshift("br"),!0);if(!i){var u=t.match(a[n]);(null==u?void 0:u.length)?(u.forEach((function(e,t){var i=e.substr(1),r=null==i?void 0:i.split("=")[0],o=n+"_"+r,a=s[o],d=s[o+"_block"];!a||a.test(i)?(null==d?void 0:d.some((function(e){return e.test(i)})))&&(u[t]=""):u[t]=""})),e.shift(),e.unshift(n+u.join(""))):(e.shift(),e.unshift(n))}return!0}))).unshift([""]),function(e){var t;if(!(null===(t=null==e?void 0:e[0])||void 0===t?void 0:t.join))throw new Error("Merge Error: unvalid 1st argument!");return e.map((function(e){return e.join(">")})).join("<")}(u)}\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./node_modules/@tencent/ovb-utils/lib/index.es.js?')},"./src/base/base-live-player.ts":function srcBaseBaseLivePlayerTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../enums */ "./src/enums.ts");\n/* harmony import */ var _base_player__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base-player */ "./src/base/base-player.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar BaseLivePlayer = /** @class */ (function (_super) {\n    __extends(BaseLivePlayer, _super);\n    function BaseLivePlayer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    BaseLivePlayer.prototype.playInner = function (startTime) {\n        var videoInfo = this._videoInfos[0];\n        this.setPlayEvents(this._curVideoNode, true);\n        this._curVideoNode.play(videoInfo);\n        this.emit(_enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_EVENT"].VIDEONODE_CHANGE, { videoInfo: videoInfo });\n    };\n    BaseLivePlayer.prototype.resumeInner = function () {\n        var _a;\n        if (!this._played) {\n            return;\n        }\n        if ((_a = this._curVideoNode) === null || _a === void 0 ? void 0 : _a.currentVideoInfo) {\n            this._curVideoNode.videoplay();\n        }\n    };\n    BaseLivePlayer.prototype.loadInner = function (value, extra) {\n        var ret = _super.prototype.loadInner.call(this, value, extra);\n        if (!ret) {\n            return false;\n        }\n        this.setCurVideoNode(this._vnList[0]);\n        // videoInfos ç± super.loadInner åå»ºï¼è¿éæ²¡æäº preloader æå¨ load\n        this._curVideoNode.load(this._videoInfos[0]);\n        return true;\n    };\n    BaseLivePlayer.prototype.appendAfter = function (videoInfo) {\n        // do nothing\n    };\n    BaseLivePlayer.prototype.checkAccuratePlaytime = function (videoElementTime, videoElementDuration) {\n        // do nothing\n    };\n    BaseLivePlayer.prototype.preparePreloader = function (isFirstLoad, videoInfo) {\n        // do nothing\n        return null;\n    };\n    BaseLivePlayer.prototype.getIdleVideoNode = function () {\n        return this._vnList[0];\n    };\n    BaseLivePlayer.prototype.setLevelInner = function (value) {\n        return this._curVideoNode.setLevel(value.setLevelMode);\n    };\n    BaseLivePlayer.prototype.playBlocked = function () {\n        _super.prototype.playBlocked.call(this);\n        this.pause();\n    };\n    Object.defineProperty(BaseLivePlayer.prototype, "supportPreload", {\n        // eslint-disable-next-line @typescript-eslint/class-literal-property-style\n        get: function () {\n            return false;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BaseLivePlayer.prototype, "supportPlaybackRate", {\n        // eslint-disable-next-line @typescript-eslint/class-literal-property-style\n        get: function () {\n            return false;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BaseLivePlayer.prototype, "nextVideoInfo", {\n        get: function () {\n            return this.currentVideoInfo;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return BaseLivePlayer;\n}(_base_player__WEBPACK_IMPORTED_MODULE_1__["default"]));\n/* harmony default export */ __webpack_exports__["default"] = (BaseLivePlayer);\n// ç¦ç¨ç´æ­ç¨ä¸å°çä¸äºæ¹æ³\n[\n    \'seek\', \'hasAppended\', \'hasPreloaded\', \'playNext\',\n    \'appendNext\', \'preloadNext\', \'clearAllPreload\', \'appendAfter\',\n    \'checkPlayNext\', \'playNextInner\', \'checkAutoPreloadNext\', \'clearAllPreloadInner\',\n].forEach(function (keyName) {\n    BaseLivePlayer.prototype[keyName] = function () {\n        console.warn("[thumbplayer] ".concat(keyName, "() is not support due to live stream"));\n    };\n});\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/base/base-live-player.ts?')},"./src/base/base-player.ts":function srcBaseBasePlayerTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../enums */ "./src/enums.ts");\n/* harmony import */ var _interfaces__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../interfaces */ "./src/interfaces/index.ts");\n/* harmony import */ var _kernel_origin_org_ios_videonode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../kernel-origin/org-ios-videonode */ "./src/kernel-origin/org-ios-videonode.ts");\n/* harmony import */ var _kernel_origin_org_videonode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../kernel-origin/org-videonode */ "./src/kernel-origin/org-videonode.ts");\n/* harmony import */ var _libs_detect_stream__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../libs/detect-stream */ "./src/libs/detect-stream.ts");\n/* harmony import */ var _libs_event_emitter__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../libs/event-emitter */ "./src/libs/event-emitter.ts");\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../util */ "./src/util/index.ts");\n/* harmony import */ var _play_helper__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./play-helper */ "./src/base/play-helper.ts");\n/* harmony import */ var _video_info__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./video-info */ "./src/base/video-info.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (undefined && undefined.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (undefined && undefined.__metadata) || function (k, v) {\n    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);\n};\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError("Generator is already executing.");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __spreadArray = (undefined && undefined.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\n\n\n\n\n\n\n\n\n\n// å¦æ VideoNode æåºè¿äºäºä»¶ï¼å ä¸ºè¿äºé¢ç¹ï¼æä»¥ä¸æå°\nvar IGNORE_EVT_TYPE = [\n    _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_NODE_EVENT"].TIME_UPDATE,\n    _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_NODE_EVENT"].VIDEO_BUFFER_CHANGE,\n    _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_NODE_EVENT"].VIDEO_FRAME_RENDER,\n];\n// å¦æ IVideoElement æåºè¿äºäºä»¶ï¼å ä¸ºè¿äºé¢ç¹ï¼æä»¥ä¸æå°\nvar IGNORE_VIDEO_EVT = [\n    _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_EVTS"].timeupdate,\n    _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_EVTS"].progress,\n    _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_EVTS"].frameRender,\n];\nvar logMethodCall = Object(_util__WEBPACK_IMPORTED_MODULE_6__["logMethodCallDecoratorCreator"])(\'BasePlayer\');\nvar BasePlayer = /** @class */ (function (_super) {\n    __extends(BasePlayer, _super);\n    function BasePlayer(opts) {\n        var _a, _b;\n        var _this = _super.call(this) || this;\n        _this._firstPlaying = false;\n        /** æ¯å¦å·æç¨æ·æå¿ï¼è·èªå¨æ­æ¾ç¸å³çä¸ä¸ªåè¯ï¼å·ä½googleãè¿ä¸ªåéå¨è§é¢é¦å¸§èµ·æ­ä»¥ååä¸ºtrueï¼åªædestroyä»¥åä¼éç½®ï¼ */\n        _this._hasUserGestures = false;\n        _this._volume = 1;\n        _this._playbackRate = 1;\n        /** æ­æ¾è¢«é»æ­¢çç¶æä¸­ */\n        _this._playBlocking = false;\n        /** æåä¸æ¬¡æ­æ¾çvideo infoï¼åè®¸å¨æ­æ¾å¨stopåå¤é¨ä¾ç¶å¯ä»¥è®¿é®currentVideoInfo */\n        _this.lastVideoInfo = null;\n        _this._logger = new _util__WEBPACK_IMPORTED_MODULE_6__["Logger"](opts.instanceId, \'BasePlayer\');\n        _this._config = opts;\n        _this._videoInfos = []; // å°ååè¡¨\n        _this._curUrlIdx = -1; // å½åçæ­æ¾å°åç´¢å¼\n        _this._curVideoNode = null;\n        _this._preloaders = [];\n        _this._vnList = [];\n        _this._eventMap = {\n            videonode: _this.videonodeEventHandler.bind(_this),\n            document: _this.visibilityChangeHandler.bind(_this),\n        };\n        _this._played = false;\n        _this.videoEvt2PlayerEvtMap = (_a = {},\n            _a[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_NODE_EVENT"].DURATION_CHANGE] = _enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_EVENT"].DURATION_CHANGE,\n            _a[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_NODE_EVENT"].VOLUME_CHANGE] = _enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_EVENT"].VOLUME_CHANGE,\n            _a[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_NODE_EVENT"].ERROR] = _enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_EVENT"].ERROR,\n            _a[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_NODE_EVENT"].METADATA_CHANGE] = _enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_EVENT"].METADATA_CHANGE,\n            _a[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_NODE_EVENT"].SETLEVEL_OVER] = _enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_EVENT"].SETLEVEL_OVER,\n            _a[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_NODE_EVENT"].SETLEVEL_START] = _enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_EVENT"].SETLEVEL_START,\n            _a[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_NODE_EVENT"].SET_LOADING] = _enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_EVENT"].SET_LOADING,\n            _a[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_NODE_EVENT"].STATE_CHANGE] = _enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_EVENT"].STATE_CHANGE,\n            _a[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_NODE_EVENT"].TIME_UPDATE] = _enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_EVENT"].TIME_UPDATE,\n            _a[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_NODE_EVENT"].VIDEO_BUFFER_CHANGE] = _enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_EVENT"].VIDEO_BUFFER_CHANGE,\n            _a[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_NODE_EVENT"].LOAD_PROGRESS] = _enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_EVENT"].LOAD_PROGRESS,\n            _a[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_NODE_EVENT"].FIRST_PLAYING] = _enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_EVENT"].VIDEONODE_FIRST_PLAYING,\n            _a[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_NODE_EVENT"].RATE_CHANGE] = _enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_EVENT"].RATE_CHANGE,\n            _a[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_NODE_EVENT"].RETRY] = _enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_EVENT"].RETRY_BACKURL,\n            _a[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_NODE_EVENT"].ELEMENT_EVTS] = _enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_EVENT"].ELEMENT_EVTS,\n            _a[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_NODE_EVENT"].PLAY_OVER] = _enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_EVENT"].STOPED,\n            _a[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_NODE_EVENT"].VIDEO_RESIZE] = _enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_EVENT"].VIDEO_RESIZE,\n            _a[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_NODE_EVENT"].VIDEO_FRAME_RENDER] = _enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_EVENT"].VIDEO_FRAME_RENDER,\n            _a[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_NODE_EVENT"].SET_AUDIO_TRACK_OVER] = _enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_EVENT"].SET_AUDIO_TRACK_OVER,\n            _a[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_NODE_EVENT"].SET_AUDIO_TRACK_START] = _enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_EVENT"].SET_AUDIO_TRACK_START,\n            _a);\n        _this.videoEvtHandlerMap = (_b = {},\n            _b[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_NODE_EVENT"].STATE_CHANGE] = _this.onVideoNodeStateChange.bind(_this),\n            _b[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_NODE_EVENT"].PLAY_PROMISE_CATCHED] = _this.onVideoNodePlayPromiseCatched.bind(_this),\n            _b[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_NODE_EVENT"].FIRST_PLAYING] = _this.onVideoNodeFirstPlaying.bind(_this),\n            _b[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_NODE_EVENT"].PLAY_OVER] = _this.onVideoNodePlayOver.bind(_this),\n            _b[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_NODE_EVENT"].ERROR] = _this.onVideoNodeError.bind(_this),\n            _b);\n        document.addEventListener(\'visibilitychange\', _this._eventMap.document);\n        if (!_this._config.createVideoNodeWhenLoad) {\n            _this.createVideoNodes(_this._config.maxVideoNodeCount);\n        }\n        return _this;\n    }\n    BasePlayer.prototype.decideSetLevelMode = function (forceSetLevelMode) {\n        if (this._vnList.length < 2) {\n            // å¦æå°äºä¸¤ä¸ªvideoæ ç­¾ï¼åªè½é»å±åæ¢æ¸æ°åº¦\n            return _enums__WEBPACK_IMPORTED_MODULE_0__["SET_LEVEL_MODE"].HARD;\n        }\n        if (forceSetLevelMode) {\n            return forceSetLevelMode;\n        }\n        return _enums__WEBPACK_IMPORTED_MODULE_0__["SET_LEVEL_MODE"].SOFT;\n    };\n    BasePlayer.prototype.createVideoNode = function (conf) {\n        return _util__WEBPACK_IMPORTED_MODULE_6__["uaTool"].os.ios ? new _kernel_origin_org_ios_videonode__WEBPACK_IMPORTED_MODULE_2__["OrgIOSVideoNode"](conf) : new _kernel_origin_org_videonode__WEBPACK_IMPORTED_MODULE_3__["default"](conf);\n    };\n    /**\n     * åå»ºVideoNodeåè¡¨ï¼æ¯ç§åæ ¸çåè¡¨é¿åº¦å¯è½ä¸ä¸æ ·ã\n     */\n    BasePlayer.prototype.createVideoNodes = function (count) {\n        for (var i = 0; i < count; i++) {\n            var vn = this.createVideoNode(this._config);\n            vn.idx = i;\n            // å¦ææcreateVideoNodeWhenLoadéç½®é¡¹ï¼VideoNodeæ¯å¨loadæ¥å£ä¸­åå»ºçï¼å æ­¤è¿éè¦åæ¬¡èµå¼ä¸æ¬¡volumeé¿åé³éä¸¢å¤±\n            vn.volume = this._volume;\n            vn.playbackRate = this._playbackRate;\n            if (vn.videoElement instanceof HTMLElement) {\n                vn.videoElement.dataset.idx = "".concat(i);\n            }\n            this._vnList.push(vn);\n        }\n    };\n    BasePlayer.prototype.createStream = function (conf) {\n        return null;\n    };\n    BasePlayer.prototype.setPlayEvents = function (vn, value) {\n        var _this = this;\n        if (!vn) {\n            return;\n        }\n        if (value) { // åç§»é¤ï¼ä¿è¯åªæä¸æ¬¡æ·»å \n            this.setPlayEvents(vn, false);\n        }\n        this._logger.log("set VideoNode evts, idx=".concat(vn.idx, "/value=").concat(value));\n        Object.keys(_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_NODE_EVENT"]).forEach(function (k) {\n            var foo = value ? vn.on : vn.off;\n            foo.apply(vn, [_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_NODE_EVENT"][k], _this._eventMap.videonode]);\n        });\n    };\n    /**\n     * videoNodeäºä»¶çå¬åè°\n     */\n    BasePlayer.prototype.videonodeEventHandler = function (e) {\n        this.logVideoNodeEvts(e);\n        // æ¯å¦éè¦å°videoNodeçäºä»¶è½¬åä¸ºplayerçäºä»¶ãé»è®¤éè¦è½¬åãä½æ§è¡æ¯ä¸ªå¯¹åºäºä»¶åè°æ¶ä¹ä¼è¿åæ¯å¦éè¦è½¬åã\n        var shouldDispatchPlayEvt = true;\n        // å¯¹videoNodeååºçäºä»¶çåé¨å¤ç\n        if (this.videoEvtHandlerMap[e.type]) {\n            shouldDispatchPlayEvt = this.videoEvtHandlerMap[e.type](e);\n        }\n        // å¦ææå¯¹åºçplayeräºä»¶ï¼è½¬åvideonodeäºä»¶\n        if (shouldDispatchPlayEvt && (e.type in this.videoEvt2PlayerEvtMap)) {\n            this.emit(this.videoEvt2PlayerEvtMap[e.type], e.data);\n        }\n    };\n    BasePlayer.prototype.onVideoNodeStateChange = function (e) {\n        if (e.data.new === _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].PAUSE && e.data.pauseType === _enums__WEBPACK_IMPORTED_MODULE_0__["PAUSE_TYPE"].INNER) {\n            this._logger.log(\'inner pause does not emit event.\');\n            return false;\n        }\n        if (e.data.new === _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].PLAYING) {\n            this._checkPlayBlocked = false;\n        }\n        // è®¾ç½®å±å¹å¸¸äº®\n        this.setKeepScreenAlive(e.data.new === _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].PLAYING);\n        return true;\n    };\n    BasePlayer.prototype.onVideoNodePlayPromiseCatched = function (e) {\n        if (this._checkPlayBlocked && e.data.isAutoPlayBlocked) {\n            this._checkPlayBlocked = false;\n            this.playBlocked();\n        }\n        return true;\n    };\n    BasePlayer.prototype.onVideoNodeFirstPlaying = function (e) {\n        if (!this._firstPlaying) {\n            // FIRST_PLAYINGæ è®ºæå¤å°ä¸ªvideonodeï¼é½åªå¯¹å¤è½¬åä¸æ¬¡\n            this.emit(_enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_EVENT"].FIRST_PLAYING, { videoInfo: this.currentVideoInfo });\n            this._firstPlaying = true;\n            this._hasUserGestures = true;\n        }\n        return true;\n    };\n    BasePlayer.prototype.onVideoNodePlayOver = function (e) {\n        if (!this._config.isPlayList && !this.nextVideoInfo) {\n            var videoInfo = this.currentVideoInfo;\n            // videonodeéé¢æ­£å¸¸ç»æï¼éè¦å¨playerè¿ä¸å±è°ç¨stopInneréç½®ä¸äºåéï¼ä½å¦ææ¯ä¸¤ä¸ªåºæ¯ä¸éè¦stopInner\n            // 1. å¦ææ­æ¾åè¡¨ä¸­è¿æä¸ä¸ä¸ªè§é¢ç­å¾æ­æ¾\n            // 2. å¦ææ¯çµæ´»çåè¡¨æ­æ¾åºæ¯ï¼isPlayList=trueï¼ï¼æ­æ¾å¨å¯è½è¿ä¼ç»§ç»­è¢«appendè§é¢æ­æ¾ï¼å æ­¤ä¸è½è¢«åæ­¢ï¼èæ¯ç­å¾ç¨æ·æ·»å è§é¢\n            this.stopInner(_enums__WEBPACK_IMPORTED_MODULE_0__["END_STATE"].NORMAL, true, videoInfo);\n            // å¨åæ­¢å½åæ­æ¾ä»¥åï¼ååºå½åæ®µæ­æ¾ç»æäºä»¶\n            this.emit(_enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_EVENT"].VIDEONODE_PLAY_OVER, { videoInfo: videoInfo });\n        }\n        else {\n            // å¨æ­æ¾ä¸ä¸æ®µä¹åï¼ååºå½åæ®µæ­æ¾ç»æ\n            this.emit(_enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_EVENT"].VIDEONODE_PLAY_OVER, { videoInfo: this.currentVideoInfo });\n            this.checkPlayNext();\n        }\n        return false;\n    };\n    BasePlayer.prototype.onVideoNodeError = function (e) {\n        var videoInfo = (e.data || {}).videoInfo;\n        this.detectSourceOnError(videoInfo);\n        this.stopInner(_enums__WEBPACK_IMPORTED_MODULE_0__["END_STATE"].ERROR, true, videoInfo);\n        // stopInnerç¬¬äºä¸ªåæ°ä¸ºtrueï¼ç´æ¥ååºerroråstopäºä»¶äºï¼ä¸éè¦æ´¾åäºä»¶\n        return false;\n    };\n    /**\n     * æå°VideoNodeäºä»¶å³é®ä¿¡æ¯ï¼ä½æé¤å¼ä¸äºé«é¢äºä»¶çæå°\n     */\n    BasePlayer.prototype.logVideoNodeEvts = function (e) {\n        var _a, _b;\n        // è¿æ»¤æé¢ç¹äº§çç VideoNode äºä»¶\n        if (IGNORE_EVT_TYPE.includes(e.type)) {\n            return;\n        }\n        // è¿æ»¤æé¢ç¹äº§çç IVideoElement äºä»¶\n        if (e.type === _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_NODE_EVENT"].ELEMENT_EVTS\n            && (IGNORE_VIDEO_EVT.includes(e.data.elementEvtType))) {\n            return;\n        }\n        var logData = e.data;\n        if (e.type === _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_NODE_EVENT"].STATE_CHANGE) {\n            logData = "[".concat(e.data.old, "->").concat(e.data.new, "]");\n        }\n        else if (e.type === _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_NODE_EVENT"].ELEMENT_EVTS) {\n            logData = "[elementEvtType=".concat(e.data.elementEvtType, "]");\n        }\n        this._logger.log("get VideoNode evt, type=".concat(e.type, "/uid=").concat((_b = (_a = this._curVideoNode) === null || _a === void 0 ? void 0 : _a.currentVideoInfo) === null || _b === void 0 ? void 0 : _b.uid, "/data="), logData);\n    };\n    BasePlayer.prototype.playBlocked = function () {\n        var _this = this;\n        this._playBlocking = true;\n        this._triggerAutoplayPromise = null;\n        setTimeout(function () {\n            // setTimeouté¿åå¨blockäºä»¶ççå¬åè°éé¢è°ç¨playçæ¶åè¿æ²¡æè°ç¨loadèæ­æ¾å¨ç¶æä¸ºstate\n            // (ä¿®å¤autoblockäºä»¶å¤ªæå¯¼è´éé³èªå¨æ­ä¸çæé®é¢)\n            _this.emit(_enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_EVENT"].AUTOPLAY_BLOCKED, { videoInfo: _this.currentVideoInfo });\n        }, 0);\n        this.setLoading(false);\n    };\n    /**\n     * å¨æ­æ¾å¨å±çloadingå¨ç»å±ç¤ºæ¶æºé»è¾\n     * @param show æ¯å¦æ¾ç¤ºloading\n     */\n    BasePlayer.prototype.setLoading = function (show) {\n        this.emit(_enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_EVENT"].SET_LOADING, { show: show });\n    };\n    /**\n     * è®¾ç½®å±å¹ä¿æå¸¸äº®ç¶æ\n     * @param isKeepAlive æ¯å¦ä¿æ\n     */\n    BasePlayer.prototype.setKeepScreenAlive = function (isKeepAlive) {\n        var _this = this;\n        var wakeLockFoo = window.navigator.wakeLock;\n        if (!wakeLockFoo) {\n            return;\n        }\n        if (isKeepAlive) {\n            if (this.screenWakeLock) {\n                // æ­£å¨éå®å¸¸äº®ç¶æä¸ï¼å°è¯è®¾ç½®å±å¹å¸¸äº®\n                return;\n            }\n            wakeLockFoo.request(\'screen\')\n                .then(function (lock) {\n                _this.screenWakeLock = lock;\n            })\n                .catch(function () {\n                // DOMException: Failed to execute \'request\' on \'WakeLock\': The requesting page is not visible\n            });\n        }\n        else {\n            if (!this.screenWakeLock) {\n                // æªå¨å¸¸äº®ç¶æä¸ï¼å°è¯è§£éå±å¹å¸¸äº®\n                return;\n            }\n            this.screenWakeLock.release();\n            this.screenWakeLock = null;\n        }\n    };\n    BasePlayer.prototype.visibilityChangeHandler = function () {\n        // å¨é¡µé¢ä¸å¯è§æ¶ï¼åºç°ç¶æåæ¢ï¼ç³è¯·å¸¸äº®å¯è½è¢«ç³»ç»æç»ãå æ­¤å¨é¡µé¢æ¢å¤å¯è§æ¶ï¼éæ°è®¾ç½®å±å¹å¸¸äº®ã\n        this.setKeepScreenAlive(this.state === _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].PLAYING);\n    };\n    BasePlayer.prototype.captureVideo = function (dx, dy, dw, dh, extra) {\n        var _a;\n        var video = this.currentVideoElement;\n        if (!video)\n            return;\n        if (video instanceof HTMLVideoElement) {\n            try {\n                var data = _util__WEBPACK_IMPORTED_MODULE_6__["videoTool"].captureVideo(video, { dx: dx, dy: dy, dw: dw, dh: dh });\n                return Promise.resolve(data);\n            }\n            catch (err) {\n                return Promise.reject(err);\n            }\n        }\n        return (_a = video.captureVideo) === null || _a === void 0 ? void 0 : _a.call(video, dx, dy, dw, dh);\n    };\n    BasePlayer.prototype.triggerAutoplay = function () {\n        var _this = this;\n        if (this._triggerAutoplayPromise) {\n            return this._triggerAutoplayPromise;\n        }\n        this._logger.log(\'triggerAutoplay(), start\');\n        var allPromise = [];\n        var len = this._vnList.length;\n        for (var i = 0; i < len; i++) {\n            var videoNodePromise = this._vnList[i].triggerAutoplay();\n            allPromise.push(videoNodePromise);\n        }\n        this._triggerAutoplayPromise = Promise.all(allPromise);\n        this._triggerAutoplayPromise.catch(function (e) {\n            _this._logger.log(\'play() triggerAutoplay catched: \', e);\n            _this.playBlocked();\n        });\n        return this._triggerAutoplayPromise;\n    };\n    Object.defineProperty(BasePlayer.prototype, "useWorker", {\n        get: function () {\n            return this._curVideoNode ? this._curVideoNode.useWorker : false;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BasePlayer.prototype, "videoElements", {\n        get: function () {\n            var _a;\n            return (_a = this._vnList) === null || _a === void 0 ? void 0 : _a.map(function (vn) { return vn.videoElement; });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BasePlayer.prototype, "currentVideoElement", {\n        get: function () {\n            return this._curVideoNode ? this._curVideoNode.videoElement : null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BasePlayer.prototype, "videoInfos", {\n        get: function () {\n            return this._videoInfos;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BasePlayer.prototype, "preloadVideoInfos", {\n        get: function () {\n            return this._preloaders.map(function (preloader) { return preloader.videoInfo; });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BasePlayer.prototype, "videoSize", {\n        get: function () {\n            return this._curVideoNode ? this._curVideoNode.videoSize : { width: 0, height: 0 };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BasePlayer.prototype, "videoBuffered", {\n        get: function () {\n            return this._curVideoNode ? this._curVideoNode.videoBuffered : [{ start: 0, end: 0 }];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BasePlayer.prototype, "currentVideoInfo", {\n        get: function () {\n            return this._curVideoNode ? this._curVideoNode.currentVideoInfo : this.lastVideoInfo;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BasePlayer.prototype, "nextVideoInfo", {\n        get: function () {\n            return this._videoInfos[this._curUrlIdx + 1];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BasePlayer.prototype, "currentVideoInfoIdx", {\n        get: function () {\n            return this._curVideoNode ? this._videoInfos.indexOf(this._curVideoNode.currentVideoInfo) : -1;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BasePlayer.prototype, "totalVideoInfoCount", {\n        get: function () {\n            return this._videoInfos.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BasePlayer.prototype, "config", {\n        get: function () {\n            return this._config;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    BasePlayer.prototype.resizeVideoElements = function (value) {\n        var videoElements = this.videoElements;\n        if (!value || !videoElements || videoElements.length <= 0) {\n            return;\n        }\n        videoElements.forEach(function (videoElement) {\n            _util__WEBPACK_IMPORTED_MODULE_6__["videoTool"].resizeElement(videoElement, value);\n        });\n        this.emit(_enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_EVENT"].RESIZE, value);\n    };\n    BasePlayer.prototype.resize = function (value) {\n        this.resizeVideoElements(value);\n    };\n    BasePlayer.prototype.hasAppended = function (value) {\n        // todo ? æ¯å¦å·²ç»appendæ¯ä¸æ¯åªéè¦å¤æ­æ­æ¾åè¡¨ä¸­æªæ­æ¾è¿çè§é¢å°±å¯ä»¥äºï¼\n        return !!this._videoInfos.find(function (e) { return Object(_play_helper__WEBPACK_IMPORTED_MODULE_7__["compareUrlConfig"])(e.config, value); });\n    };\n    BasePlayer.prototype.hasPreloaded = function (value) {\n        return !!this.preloadVideoInfos.find(function (e) { return Object(_play_helper__WEBPACK_IMPORTED_MODULE_7__["compareUrlConfig"])(e.config, value); });\n    };\n    BasePlayer.prototype.seek = function (time) {\n        var _a;\n        if (this.state === _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].IDLE) {\n            // æ­æ¾idleç¶æï¼å³ä½¿seekåå»ï¼ä¹æ²¡æ³è°ç¨play()ç»§ç»­æ­æ¾äºãè¿éå°±ç´æ¥returnæäºãæ³æ­æ¾ç»æäºseekåå»æ­ï¼é£ä¸å¦éæ°æ­æ¾å¹¶æå®ä½ç½®ï¼\n            return false;\n        }\n        if (time < 0) {\n            return false;\n        }\n        if (!((_a = this._curVideoNode) === null || _a === void 0 ? void 0 : _a.currentVideoInfo)) {\n            return false;\n        }\n        // éè¿æ¥å£è°ç¨çseeké½åºè¯¥è§ä¸ºç¨æ·è¡ä¸º\n        return this._curVideoNode.seek(time, true);\n    };\n    BasePlayer.prototype.pause = function (pauseType) {\n        if (!this._played) {\n            this._logger.warn(\'pause(), player has not been played\');\n            return;\n        }\n        this.pauseInner(pauseType || _enums__WEBPACK_IMPORTED_MODULE_0__["PAUSE_TYPE"].USER);\n    };\n    BasePlayer.prototype.pauseInner = function (type) {\n        if (type === void 0) { type = _enums__WEBPACK_IMPORTED_MODULE_0__["PAUSE_TYPE"].INNER; }\n        if (this.state === _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].PAUSE) {\n            return;\n        }\n        if (this._curVideoNode) {\n            this._curVideoNode.pauseInner(type);\n        }\n    };\n    Object.defineProperty(BasePlayer.prototype, "played", {\n        get: function () {\n            return this._played;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BasePlayer.prototype, "duration", {\n        get: function () {\n            return this._curVideoNode ? this._curVideoNode.duration : 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BasePlayer.prototype, "playtime", {\n        get: function () {\n            return this._curVideoNode ? this._curVideoNode.playtime : 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BasePlayer.prototype, "state", {\n        get: function () {\n            return this._curVideoNode ? this._curVideoNode.state : _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].IDLE;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BasePlayer.prototype, "playbackRate", {\n        get: function () {\n            return this._playbackRate;\n        },\n        set: function (value) {\n            this._playbackRate = value;\n            var len = this._vnList.length;\n            for (var i = 0; i < len; i++) {\n                this._vnList[i].playbackRate = value;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BasePlayer.prototype, "supportPlaybackRate", {\n        // eslint-disable-next-line @typescript-eslint/class-literal-property-style\n        get: function () {\n            return true;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BasePlayer.prototype, "supportPreload", {\n        // eslint-disable-next-line @typescript-eslint/class-literal-property-style\n        get: function () {\n            return true;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BasePlayer.prototype, "volume", {\n        get: function () {\n            return this._volume;\n        },\n        set: function (value) {\n            this._volume = value;\n            var len = this._vnList.length;\n            for (var i = 0; i < len; i++) {\n                this._vnList[i].volume = value;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    BasePlayer.prototype.log = function () {\n        var _a;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        (_a = this._logger) === null || _a === void 0 ? void 0 : _a.log.apply(_a, args);\n    };\n    BasePlayer.prototype.resumeInner = function () {\n        var _a;\n        if (!this._played) {\n            return;\n        }\n        // durationä¸º0çæåµå¯è½æ¯videoè®¾ç½®äºsrcå¹¶ä¸è°ç¨äºæ­æ¾ï¼ä½æ¯è¢«é»æ­¢æ­æ¾ï¼æ­¤æ¶durationæ¯0\n        // playtime < durationæ¯éå¶åªè½å¨è§é¢æªç»æè°ç¨ï¼å¨è§é¢ç»æè°ç¨playå¯è½ä¼ä»å¤´å¼å§æ­æ¾ï¼\n        if (((_a = this._curVideoNode) === null || _a === void 0 ? void 0 : _a.currentVideoInfo)\n            && (this._curVideoNode.duration === 0 || this._curVideoNode.playtime < this._curVideoNode.duration)) {\n            // this._curVideoNode.play();\n            this._curVideoNode.videoplay();\n        }\n    };\n    BasePlayer.prototype.appendNext = function (value) {\n        if (!this._config.isPlayList) {\n            this._logger.warn(\'appendNext() only supported when [isPlayList] is true\');\n            return;\n        }\n        if (!this._played) {\n            this._logger.warn(\'appendNext(), player has not been played\');\n            return;\n        }\n        var checkUrlConfigError = Object(_play_helper__WEBPACK_IMPORTED_MODULE_7__["checkUrlConfigVailed"])(value, this.kernelName);\n        if (checkUrlConfigError) {\n            this._logger.warn(\'appendNext(), urlconfig err=\', checkUrlConfigError);\n            return;\n        }\n        // æ­æ¾åè¡¨ä¸­å·²ç»å­å¨è¯¥è§é¢éç½®\n        var existVideoInfo = this._videoInfos.find(function (e) { return Object(_play_helper__WEBPACK_IMPORTED_MODULE_7__["compareUrlConfig"])(e.config, value); });\n        if (existVideoInfo) {\n            this._logger.warn("appendNext(), duplicate append! uid[".concat(existVideoInfo.uid, "]"));\n            return false;\n        }\n        // å¤æ­é¢å è½½åè¡¨ä¸­æ¯å¦æä¸æ ·çurlå°åï¼æ²¡æååå»ºæ°çIVideoInfo\n        var appendVideoInfo = this.preloadVideoInfos.find(function (e) { return Object(_play_helper__WEBPACK_IMPORTED_MODULE_7__["compareUrlConfig"])(e.config, value); });\n        if (!appendVideoInfo) {\n            appendVideoInfo = new _video_info__WEBPACK_IMPORTED_MODULE_8__["default"](value, this._config);\n        }\n        // é¤äºå³å°æ·»å çæ­æ¾æ°æ®ä¿çï¼å¶ä»çé¢å è½½å¨é¨æ¸çæ\n        this.clearAllPreloadInner(appendVideoInfo);\n        // è¦çå¼æ·»å å°å½åæ­æ¾å°åçä¸ä¸ä¸ª\n        this._videoInfos = this._videoInfos.slice(0, this._curUrlIdx + 1);\n        this._videoInfos = this._videoInfos.concat(appendVideoInfo);\n        this._logger.log(\'appendNext() succ, appendVideoInfo=\', appendVideoInfo);\n        this.emit(_enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_EVENT"].LIST_CHANGE);\n        // appendä»¥åå¯è½éè¦å¤æ­æ¯å¦é©¬ä¸æ­æ¾ä¸ä¸ä¸ªç­æä½\n        this.appendAfter(appendVideoInfo);\n        return true;\n    };\n    BasePlayer.prototype.preloadNext = function () {\n        var _this = this;\n        var confs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            confs[_i] = arguments[_i];\n        }\n        if (!this._config.isPlayList) {\n            this._logger.warn(\'preloadNext() only supported when [isPlayList] is true\');\n            return;\n        }\n        if (!this.supportPreload) {\n            this._logger.warn(\'preloadNext() fail, browser not support preload.\');\n            return;\n        }\n        if (!this._played) {\n            this._logger.warn(\'preloadNext() fail, player has not been played.\');\n            return;\n        }\n        var checkUrlConfigError = Object(_play_helper__WEBPACK_IMPORTED_MODULE_7__["checkUrlConfigVailed"])(confs, this.kernelName);\n        if (checkUrlConfigError) {\n            return;\n        }\n        var preloadVideoInfos = [];\n        confs.forEach(function (conf) {\n            var idx = _this._videoInfos.findIndex(function (value) { return Object(_play_helper__WEBPACK_IMPORTED_MODULE_7__["compareUrlConfig"])(value.config, conf); });\n            // å·²ç»æ­æ¾è¿äºï¼æ²¡å¿è¦é¢å è½½äº\n            if (idx !== -1 && idx <= _this._curUrlIdx) {\n                _this._logger.warn(\'preloadInner() fail, because this videoInfo has been played.\');\n                return;\n            }\n            // å¦æè·¨è¿ä¸ä¸ä¸ªè§é¢é¢å è½½ä¸ä¸ä¸ªï¼æèä¸ä¸ä¸ä¸ªè§é¢ï¼æ¯ä¸åè®¸ç\n            if (idx !== -1 && idx >= _this._curUrlIdx + 1 + 1) {\n                _this._logger.warn(\'preloadInner() fail, can not skip next to preload.\');\n                return;\n            }\n            // å¦æåè¡¨ä¸­æä¸ä¸ä¸ªæ­æ¾å°åï¼èé¢å è½½çåä¸æ¯ä¸ä¸ä¸ªï¼é£å°±æ²¡å¿è¦äºå§\n            if (_this.nextVideoInfo && !Object(_play_helper__WEBPACK_IMPORTED_MODULE_7__["compareUrlConfig"])(_this.nextVideoInfo.config, conf)) {\n                _this._logger.warn(\'preloadInner() fail, the next has been appended, you only can preload next.\');\n                return;\n            }\n            // å·²ç»å¨é¢å è½½åè¡¨ä¸­äº\n            var hasPreload = _this.preloadVideoInfos.findIndex(function (value) { return Object(_play_helper__WEBPACK_IMPORTED_MODULE_7__["compareUrlConfig"])(value.config, conf); }) !== -1;\n            if (hasPreload) {\n                _this._logger.warn(\'preloadInner() fail, the VideoInfo has been preloaded.\');\n                return;\n            }\n            if (_this.nextVideoInfo && Object(_play_helper__WEBPACK_IMPORTED_MODULE_7__["compareUrlConfig"])(conf, _this.nextVideoInfo.config)) {\n                // é¢å è½½çå°åä¸­å·²ç»ææ­æ¾åè¡¨ä¸­çä¸ä¸ä¸ªï¼å¯è½åappendNextå°æ­æ¾åè¡¨ä¸­äºï¼ç¨åæè°ç¨preloadNextæ¥å£é¢å è½½ï¼\n                preloadVideoInfos.push(_this.nextVideoInfo);\n            }\n            else {\n                // å¦ååå»ºä¸ä¸ªæ°çè§é¢ä¿¡æ¯ï¼å¼å§é¢å è½½\n                preloadVideoInfos.push(new _video_info__WEBPACK_IMPORTED_MODULE_8__["default"](conf, _this._config));\n            }\n        });\n        this.preloadInner.apply(this, __spreadArray([false, { startTime: 0, kernelName: this.kernelName }], preloadVideoInfos, false));\n    };\n    BasePlayer.prototype.preloadInner = function (isFirstLoad, extra) {\n        var preloadVideoInfos = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            preloadVideoInfos[_i - 2] = arguments[_i];\n        }\n        /* const checkInvail = (preLoadVideoInfo: IVideoInfo) => {\n          if (!preLoadVideoInfo || !preLoadVideoInfo.uid) {\n            return false;\n          }\n          // å·²ç»æ­æ¾è¿äºï¼æ²¡å¿è¦é¢å è½½äº\n          const idx = this._videoInfos.indexOf(preLoadVideoInfo);\n          if (idx !== -1 && idx <= this._curUrlIdx) {\n            this._logger.warn(\'preloadInner() fail, because this videoInfo has been played.\');\n            return false;\n          }\n    \n          // å¦æè·¨è¿ä¸ä¸ä¸ªè§é¢é¢å è½½ä¸ä¸ä¸ªï¼æèä¸ä¸ä¸ä¸ªè§é¢ï¼æ¯ä¸åè®¸ç\n          if(idx !== -1 && idx >= this._curUrlIdx + 1 + 1) {\n            return false;\n          }\n    \n          return true;\n        }; */\n        var preloaders = [];\n        var len = preloadVideoInfos.length;\n        if (len <= 0) {\n            return;\n        }\n        for (var i = 0; i < len; i++) {\n            if (!preloadVideoInfos[i]) {\n                continue;\n            }\n            this.clearPreloader(preloadVideoInfos[i]);\n            var preloader = this.preparePreloader(isFirstLoad, preloadVideoInfos[i]);\n            if (preloader) {\n                // è®¾ç½®é¢å è½½çä¾èµ\n                preloadVideoInfos[i].setDependVideoInfo(this.currentVideoInfo);\n                preloader.load(isFirstLoad, this, preloadVideoInfos[i], extra);\n                preloaders.push(preloader);\n            }\n            else {\n                // å·²ç»æ¾ä¸å°ç©ºé²çIVideoNodeäºï¼é£åªè½å¿½ç¥é¢å è½½äº\n            }\n        }\n        this._preloaders = this._preloaders.concat(preloaders);\n        this._logger.log(\'preload(), preloader\\\'s length: \', this._preloaders.length);\n        // æåæååºäºä»¶ï¼é¿åå¤é¨çå¬é¢å è½½å¼å§äºä»¶ä»¥åé©¬ä¸æä½é¢å è½½åè¡¨ã\n        if (preloaders.length > 0) {\n            this.emit(_enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_EVENT"].PRELOAD_START, { preloadVideoInfos: preloaders.map(function (preloader) { return preloader.videoInfo; }) });\n        }\n    };\n    BasePlayer.prototype.checkPlayNext = function () {\n        var _a;\n        if (!this._played) {\n            return;\n        }\n        this._logger.log("checkPlayNext(), curUrlIdx=".concat(this._curUrlIdx, "/urlLength=").concat(this._videoInfos.length, "/")\n            + "nextStartTime: ".concat((_a = this.nextVideoInfo) === null || _a === void 0 ? void 0 : _a.playtime));\n        if (this.nextVideoInfo) {\n            this.playNextInner();\n        }\n        else { // listæ­æ¾å®æ¯\n            this._logger.log(\'playlist over>>>, total len: \', this._videoInfos.length);\n        }\n    };\n    BasePlayer.prototype.playNext = function (opts) {\n        if (!this._played) {\n            this._logger.warn(\'playNext(), player has not been played\');\n            return;\n        }\n        this.playNextInner({ isInterrupt: true });\n    };\n    BasePlayer.prototype.playNextInner = function (opts) {\n        var isInterrupt = (opts || {}).isInterrupt;\n        this._logger.log("playNextInner(), curUrlIdx=".concat(this._curUrlIdx, "/")\n            + "urlLength=".concat(this._videoInfos.length, "/isInterrupt=").concat(isInterrupt));\n        var isMinTime = Math.abs(this.playtime - this.duration) <= this._config.interruptPlayNextMinTime;\n        if (isInterrupt && isMinTime && this.state === _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].PLAYING) {\n            // æ¶é´å¤ªç­ï¼é©¬ä¸ä¼è·³æ®µäºèä¸éè¦ææ­ï¼æä»¥è¿éå äºä¸ä¸ªå¤æ­\n            this._logger.log(\'playNextInner(), playNext right now! return!\');\n            return;\n        }\n        if (this._curUrlIdx + 1 >= this._videoInfos.length) {\n            this._logger.warn(\'There is no next VideoInfo.\');\n            return;\n        }\n        this._curUrlIdx += 1;\n        this.setPlayEvents(this._curVideoNode, false);\n        // ææ­å¼åæ¢è¦ååæ­¢å½åçæ­æ¾\n        if (isInterrupt) {\n            this._curVideoNode.pauseInner();\n        }\n        // è¿ä¸ªæ¶åthis._videoInfos[this._curUrlIdx]çå¼åthis.currentVideoNodeæ¯ä¸ä¸æ ·çã\n        var videoInfo = this._videoInfos[this._curUrlIdx];\n        // é¤äºå³å°æ­æ¾çè§é¢æ°æ®ä¿çï¼å¶ä»çå¨é¨æ¸çæ\n        this.clearAllPreloadInner(videoInfo);\n        if (isInterrupt) {\n            // å¦ææ¯ææ­å¼åæ¢ï¼æ´¾åå½åæ®µæ­æ¾ç»æãäºä»¶ç»æååå¼å§æ­ä¸ä¸ä¸ª\n            this.emit(_enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_EVENT"].VIDEONODE_PLAY_OVER, { videoInfo: this.currentVideoInfo });\n        }\n        this.playInner();\n    };\n    BasePlayer.prototype.play = function (value, extra) {\n        return __awaiter(this, void 0, void 0, function () {\n            var tryPlayFirstVideoNode, triggerResolve;\n            var _this = this;\n            return __generator(this, function (_a) {\n                if (this.state === _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].IDLE && !value) {\n                    // idleç¶æï¼æ²¡æåæ°æ¶åç´æ¥return\n                    this._logger.warn(\'play(), no urlConfig when idle state\');\n                    return [2 /*return*/];\n                }\n                tryPlayFirstVideoNode = function () {\n                    if (!_this._played && _this._curUrlIdx === -1) {\n                        var firsetVideoInfo = _this._videoInfos[0];\n                        var preloadCheck = (!_this.supportPreload || _this.findPreloadIdxByVideoInfo(firsetVideoInfo) !== 1);\n                        if (firsetVideoInfo && preloadCheck) {\n                            _this._played = true;\n                            _this._curUrlIdx = 0;\n                            _this.playInner();\n                        }\n                    }\n                };\n                triggerResolve = function () {\n                    _this._logger.log(\'triggerAutoplay(), over\');\n                    if (!value) {\n                        // æ²¡æä»»ä½åæ°\n                        if (!_this._played) {\n                            // æ²¡å¼æ­ï¼ä¹éè¦æ¾ç¤ºä¸loadingï¼å¯è½æ¯è°ç¨äºloadæ¥å£ï¼ä½è¿æ²¡æé¢å è½½å®ï¼\n                            _this.setLoading(true);\n                            // åççææ²¡æå¼æ­\n                            tryPlayFirstVideoNode();\n                        }\n                        else if (_this._playBlocking || _util__WEBPACK_IMPORTED_MODULE_6__["videoTool"].cannotDetectAutoPlayBlock()) {\n                            // åççæ¯å¦è¢«èªå¨æ­æ¾é»æ­¢ï¼æèæ ¹æ¬å°±æ æ³æ£æµå°èªå¨æ­æ¾è¢«æ¦æªï¼\n                            _this._playBlocking = false;\n                            // safariæ­æ¾è¢«é»æ­¢åï¼åæ¬¡è°ç¨playæ¥å£ä¼åèµ°triggerAuthplayï¼åèµ°å°resumeInnerï¼ä½æ¯é©¬ä¸è°ç¨æ æï¼åå æªç¥ï¼ï¼\n                            // setTimeoutå¤§æ³å¯è§£å³ãchromeç­æ²¡æè¿ä¸ªé®é¢ï¼å æ­¤è¿éå¹²èå»¶è¿ä¸ä¸ªå¾ªç¯åæ§è¡ã\n                            setTimeout(function () {\n                                var _a, _b;\n                                if (((_b = (_a = _this._curVideoNode) === null || _a === void 0 ? void 0 : _a.videoBuffered) === null || _b === void 0 ? void 0 : _b.length) <= 0) {\n                                    // å¯è½æ¯æäºæµè§å¨è¢«èªå¨æ­æ¾é»æ­¢åï¼æ ¹æ¬æ²¡æå è½½æ°æ®åæ´¾åloadStartäºä»¶ï¼è°ç¨video.load()æ¥å£ï¼ãç¹å»æ¢å¤\n                                    // æ­æ¾éè¦ç»§ç»­å è½½æ°æ®æè½çå°ç»é¢ï¼æ­¤æ¶ä¸ºé»å±ç¶æï¼å æ­¤å½æ²¡æbufferæ°æ®æ¶ï¼éè¦å±ç¤ºå è½½loading\n                                    _this.setLoading(true);\n                                }\n                                _this.resumeInner();\n                            }, 0);\n                        }\n                        else if ([_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].PAUSE, _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].CANPLAY, _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].SEEKED].indexOf(_this.state) !== -1) {\n                            // åççæ¯å¦æåäº || seeked || å¯ä»¥å¼æ­\n                            _this.resumeInner();\n                        }\n                        else {\n                            _this._logger.log(\'play() has been called, but cannot do nothing.\');\n                        }\n                    }\n                    else {\n                        // åªè¦æåæ°ï¼å°±éæ°å¼å§æ­æ¾\n                        var ret = _this.loadInner(value, extra);\n                        if (ret) {\n                            // playæ¥å£éè¦å è½½çè¯ï¼é£ä¹åæ¾ç¤ºloading\n                            _this.setLoading(true);\n                            tryPlayFirstVideoNode();\n                        }\n                    }\n                };\n                this._checkPlayBlocked = true;\n                // å¦ævideoæ ç­¾åªæä¸ä¸ªï¼é£æ­æ¾å¨ä¸ä¼ä¸»å¨è°ç¨triggerAutoplayãå½èªå¨æ­æ¾è¢«é»æ­¢æ¶ï¼å¤é¨æ¶å°äºä»¶åèªè¡å¤çã\n                // å¦å¤ï¼å½æé¦å¸§ç»é¢æ¾ç¤ºä»¥åï¼è¯´ææåæ­æ¾ï¼é£ä¹æ²¡å¿è¦åè°ç¨triggerAutoplayäºã\n                // å æ­¤ï¼æ­æ¾å¨ä¸»å¨è°ç¨triggerAutoplayå®éä¸åªæä¸¤ç§æåµï¼\n                // 1. ä¸ºäºè§£å³åè¡¨æ­æ¾æ¶ï¼éç¬¬ä¸ä¸ªvideoæ ç­¾è·å¾æå¿çé®é¢ã\n                // 2. ä¸ºäºè§£å³ç¨æ·å¨ç¹å»æé®ä»¥åï¼éè¦æç±»ä¼¼å¼æ­¥è¯·æ±æ­æ¾å°åï¼ç­å¾è¿åä»¥åæè°ç¨æ­æ¾å¨playæ¹æ³çæ¶å\n                if (this._vnList.length <= 1 || this._hasUserGestures) {\n                    this._logger.log(\'play(), skip triggerAutoplay().\');\n                    triggerResolve();\n                }\n                else {\n                    this.triggerAutoplay()\n                        .then(triggerResolve)\n                        .catch(function () {\n                        // å¦æå¨ç¹æ­æ¨¡å¼ä¸ï¼è°ç¨playæ¥å£çæ¶åèªå¨æ­æ¾è¢«é»æ­¢ï¼é£å°±é»è®¤ç»è°ç¨ä¸ä¸loadæ¹æ³ï¼æ­¤æ¶åºç¨æ¹åªéè¦å¨ç¹å»äºä»¶ä¸­ç©ºè°ç¨ä¸ä¸playæ¥å£\n                        if (_this._config.type === _enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_MODE"].VOD && value) {\n                            _this.loadInner(value, extra);\n                        }\n                    });\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    BasePlayer.prototype.load = function (value, extra) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                if (!value || (value instanceof Array && value.length <= 0)) {\n                    this.clearBeforeLoad();\n                    return [2 /*return*/];\n                }\n                this.loadInner(value, extra);\n                return [2 /*return*/];\n            });\n        });\n    };\n    BasePlayer.prototype.loadInner = function (value, extra) {\n        var _this = this;\n        // è°ç¨æ­æ¾å¨loadæ¹æ³ï¼å°±ä¸å®ä¼ååæ­¢ååçæ­æ¾\n        this.clearBeforeLoad();\n        var checkUrlConfigError = Object(_play_helper__WEBPACK_IMPORTED_MODULE_7__["checkUrlConfigVailed"])(value, this.kernelName);\n        if (checkUrlConfigError) {\n            this.emit(_enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_EVENT"].ERROR, { videoInfo: { error: checkUrlConfigError } });\n            return false;\n        }\n        if (this._config.createVideoNodeWhenLoad) {\n            this._vnList.forEach(function (videoNode) { return videoNode.destroy(); });\n            this._vnList.length = 0;\n            this.createVideoNodes(this._config.maxVideoNodeCount);\n        }\n        // ç¸å½äºéæ°å¼å§æ­æ¾ï¼éç¥å¤é¨éæ°æ­æ¾äºä»¶\n        this.emit(_enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_EVENT"].RESTART);\n        var _a = (extra || {}).startTime, startTime = _a === void 0 ? 0 : _a;\n        this._firstPlayTimeArg = Math.max(0, startTime);\n        this._videoInfos = [].concat(value).map(function (conf) { return new _video_info__WEBPACK_IMPORTED_MODULE_8__["default"](conf, _this._config); });\n        this.emit(_enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_EVENT"].LIST_CHANGE);\n        // if (this.supportPreload) {\n        // ç¬¬ä¸ä¸ªè§é¢ä¸ç®¡æ¯å¦æ¯æé¢å è½½ï¼é½å¯ä»¥è°ç¨loadæ¥å£\n        var firstVideoInfo = this._videoInfos[0];\n        this.preloadInner(true, __assign(__assign({}, extra), { startTime: startTime, kernelName: this.kernelName }), firstVideoInfo);\n        // }\n        return true;\n    };\n    /**\n     * å¨è§é¢å è½½åæ¸ç\n     */\n    BasePlayer.prototype.clearBeforeLoad = function () {\n        var _a;\n        // å¨éæ°loadæ¶æ¸çæævideoæ ç­¾ï¼å½éç½®é¡¹clearVideoAfterStopä¸ºfalseæ¶ï¼å¨stopæ¶å¯è½å¹¶æªæ¸çvideoæ ç­¾ï¼\n        (_a = this._vnList) === null || _a === void 0 ? void 0 : _a.forEach(function (videoNode) {\n            _util__WEBPACK_IMPORTED_MODULE_6__["videoTool"].clear(videoNode.videoElement);\n        });\n        this.stopInner(this._played ? _enums__WEBPACK_IMPORTED_MODULE_0__["END_STATE"].INTERRUPT : _enums__WEBPACK_IMPORTED_MODULE_0__["END_STATE"].NORMAL, this._played, // å¦æå½åæ­£å¨æ­æ¾ï¼è¿éè¦æ´¾åstopäºä»¶åºå»\n        this._played ? this.currentVideoInfo : null);\n    };\n    /**\n     * æ£æ¥æ¯å¦éè¦èªå¨é¢å è½½ä¸ä¸ä¸ª\n     * @param leftTime ç¦»è§é¢æ­æ¾çç»ææ¶é´\n     */\n    BasePlayer.prototype.checkAutoPreloadNext = function (leftTime) {\n        var autoPreloadLeftTime = this.currentVideoInfo.config.autoPreloadLeftTime;\n        if (autoPreloadLeftTime <= 0) {\n            return;\n        }\n        // å¦ææå®çæ¶é´å¤§äºç­äºæ¶é¿ï¼é£ä¹åªè¦å½åè§é¢æ¶é´å¤§äº0å°±ä¼å°è¯é¢å è½½ä¸ä¸ä¸ª\n        if ((autoPreloadLeftTime >= this.currentVideoInfo.duration && this.currentVideoInfo.playtime > 0)\n            || autoPreloadLeftTime >= leftTime) {\n            // å¼å§é¢å è½½ä¸ä¸ä¸ª\n            if (this.nextVideoInfo && this.preloadVideoInfos.indexOf(this.nextVideoInfo) === -1) {\n                this.preloadInner(false, { startTime: 0, kernelName: this.kernelName }, this.nextVideoInfo);\n            }\n        }\n    };\n    BasePlayer.prototype.clearAllPreload = function () {\n        this.clearAllPreloadInner();\n    };\n    /**\n     * åé¨å®ç°çæ¸çææé¢å è½½\n     * @param exceptVideoInfo ä¿ççé¢å è½½è§é¢\n     */\n    BasePlayer.prototype.clearAllPreloadInner = function (exceptVideoInfo) {\n        var _this = this;\n        if (!this._preloaders || this._preloaders.length <= 0) {\n            return;\n        }\n        var removePreloaders = this._preloaders.filter(function (preloader) { return preloader.videoInfo !== exceptVideoInfo; });\n        // ä¸ä¸ªä¸ä¸ªæ¸çé¢å è½½åè¡¨ä¸­çè§é¢æ°æ®\n        removePreloaders.forEach(function (removePreloader) {\n            _this.clearPreloader(removePreloader.videoInfo);\n        });\n    };\n    BasePlayer.prototype.findPreloadIdxByVideoInfo = function (videoInfo) {\n        if (!videoInfo) {\n            return -1;\n        }\n        return this._preloaders.findIndex(function (preloader) { return preloader.videoInfo === videoInfo; });\n    };\n    /**\n     * åé¨å®ç°çæ¸çåä¸ªè§é¢çé¢å è½½, ä¼ä»é¢å è½½çæ°ç»å é¤é¢å è½½å°å\n     */\n    BasePlayer.prototype.clearPreloader = function (videoInfo, keepLoadedData) {\n        if (!this._preloaders || this._preloaders.length <= 0) {\n            return;\n        }\n        if (!videoInfo) {\n            return;\n        }\n        var idx = this.findPreloadIdxByVideoInfo(videoInfo);\n        if (idx === -1) {\n            // æ ¹æ¬æ²¡æé¢å è½½è¿\n            return;\n        }\n        if (idx !== -1) {\n            var preloader = this._preloaders.splice(idx, 1)[0];\n            preloader.clear(keepLoadedData);\n        }\n    };\n    BasePlayer.prototype.stop = function (endState) {\n        if (endState === void 0) { endState = _enums__WEBPACK_IMPORTED_MODULE_0__["END_STATE"].INTERRUPT; }\n        if (this.state === _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].IDLE) {\n            return;\n        }\n        this.stopInner(endState, true);\n    };\n    BasePlayer.prototype.stopInner = function (endState, dispatchEvt, videoInfo) {\n        var _a;\n        if (endState === void 0) { endState = _enums__WEBPACK_IMPORTED_MODULE_0__["END_STATE"].NORMAL; }\n        if (dispatchEvt === void 0) { dispatchEvt = false; }\n        if (videoInfo === void 0) { videoInfo = null; }\n        // è¦åæ¸æé¢å è½½ï¼å¦åä¸é¢stopæ¯ä¸ªvideonodeçæ¶åå¯è½è¿ä¼æ¶å°videonodeçäºä»¶ï¼ä¾å¦endäºä»¶ï¼ç¶åè¿ä¸ªendäºä»¶\n        // ä¼è§¦åå°è¯æ­æ¾ä¸ä¸ä¸ªè§é¢ï¼æ­¤æ¶å¦æé¢å è½½ä¿¡æ¯è¿å¨ï¼å¯è½ä¼ä½¿ç¨æªæ¸é¤çé¢å è½½ç»§ç»­æ­æ¾ã\n        if (((_a = this._config) === null || _a === void 0 ? void 0 : _a.type) === _enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_MODE"].VOD) {\n            this.clearAllPreloadInner();\n        }\n        // å­ä¸ä¸videoInfosæ°ç»ï¼é©¬ä¸ç½®ç©ºthis._videoInfosãè¿éä¸ºäºé¿åå¨åè¡¨æ­æ¾æ¶ï¼å½åvideoNodeæ­æ¾æ¶å¤é¨åæ­¢äºæ­æ¾ï¼\n        // å½åvideoNodeä¼ååºendï¼idleäºä»¶ï¼ç¶åcheckPlayNextéé¢å°è¯æ­æ¾ä¸ä¸ä¸ªvideoNodeãè¿ä¸ç¬¦åå¤é¨åæ­¢æ­æ¾çé¢æã\n        // å æ­¤åç½®ç©ºvideoInfosï¼æ­¤æ¶this.nextVideoInfoä¸ºç©ºï¼å°±ä¸ä¼ç»§ç»­å°è¯æ­æ¾ä¸ä¸ä¸ªvideoNodeäº\n        var videoInfos = this._videoInfos;\n        this._videoInfos = [];\n        // ç¼å­ä¸ä¸last video info\n        this.lastVideoInfo = this.currentVideoInfo;\n        if (this._vnList) {\n            var len = this._vnList.length;\n            for (var i = 0; i < len; i++) {\n                // åéæ¯videonodeåç§»é¤videonodeä¸çäºä»¶ï¼ä¾¿äºéæ¯æ¶ä»è½çå¬å°videonodeååºçidleç­äºä»¶\n                this._vnList[i].stop();\n                this.setPlayEvents(this._vnList[i], false);\n            }\n        }\n        this._curUrlIdx = -1;\n        if (videoInfos) {\n            videoInfos.forEach(function (vi) {\n                vi.destroy();\n            });\n        }\n        this._firstPlaying = false;\n        this._played = false;\n        this._curVideoNode = null;\n        var error = videoInfo === null || videoInfo === void 0 ? void 0 : videoInfo.error;\n        var endStateValue = error ? _enums__WEBPACK_IMPORTED_MODULE_0__["END_STATE"].ERROR : endState;\n        this._logger.log("stopInner(), endState=".concat(endStateValue));\n        // æ´¾åstopåerroräºä»¶\n        if (!dispatchEvt) {\n            return;\n        }\n        this.emit(_enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_EVENT"].STOPED, {\n            videoInfo: videoInfo,\n            isUserStop: endState === _enums__WEBPACK_IMPORTED_MODULE_0__["END_STATE"].INTERRUPT,\n            endState: endStateValue,\n        });\n        if (error) {\n            this.emit(_enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_EVENT"].ERROR, { videoInfo: videoInfo });\n        }\n    };\n    BasePlayer.prototype.checkSetLevelError = function (url) {\n        if (!this._played) {\n            return \'æ­æ¾æªå¼å§\';\n        }\n        if (!url) {\n            return \'åæ¢çè§é¢å°åä¸ºç©º\';\n        }\n        if (!this.currentVideoInfo) {\n            return \'æ¾ä¸å°å½åæ­æ¾ä¿¡æ¯\';\n        }\n        if (this.currentVideoInfo.playtime <= 0) {\n            return \'æ­æ¾æªå¼å§\';\n        }\n        if (this._config.type === _enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_MODE"].VOD && this.currentVideoInfo.playtime + 1 >= this.currentVideoInfo.duration\n            && this.currentVideoInfo.duration !== Infinity) {\n            return \'æ­æ¾å³å°ç»æ\';\n        }\n        if (url === this.currentVideoInfo.loadingUrl) {\n            return \'åæ¢çè§é¢å°åæ²¡æåå\';\n        }\n        return null;\n    };\n    BasePlayer.prototype.setAudioTrack = function (id) {\n        return Promise.reject(_interfaces__WEBPACK_IMPORTED_MODULE_1__["AUDIO_TRACK_ERROR_MSG"].NOT_SUPPORT);\n    };\n    BasePlayer.prototype.getAudioTrackList = function () {\n        if (!this.currentVideoInfo)\n            return [];\n        return this.currentVideoInfo.audioTracks;\n    };\n    BasePlayer.prototype.getCurrentAudioTrack = function () {\n        if (!this.currentVideoInfo)\n            return NaN;\n        return this.currentVideoInfo.currentAudioTrack;\n    };\n    BasePlayer.prototype.setLevel = function (urlOrUrlConfig, backupUrls, extraConfig) {\n        var url;\n        if (typeof urlOrUrlConfig === \'string\') {\n            url = urlOrUrlConfig;\n        }\n        else {\n            url = urlOrUrlConfig.url;\n            backupUrls = urlOrUrlConfig.backupUrls;\n            extraConfig = urlOrUrlConfig;\n        }\n        var errMag = this.checkSetLevelError(url);\n        if (errMag) {\n            this._logger.warn("setLevel(), ".concat(errMag));\n            return Promise.reject(new Error(errMag));\n        }\n        this._urlBeforeSetLevel = { url: url, backupUrls: backupUrls };\n        this.currentVideoInfo.config.url = url;\n        if (backupUrls) {\n            this.currentVideoInfo.config.backupUrls = backupUrls;\n        }\n        if (extraConfig) {\n            Object.assign(this._urlBeforeSetLevel, extraConfig);\n            Object.assign(this.currentVideoInfo.config, extraConfig);\n        }\n        this.currentVideoInfo.reset();\n        return this.setLevelInner(this.currentVideoInfo.config);\n    };\n    BasePlayer.prototype.setCurVideoNode = function (vn, isForceSet) {\n        if (isForceSet === void 0) { isForceSet = false; }\n        if (this._curVideoNode === vn && !isForceSet) {\n            return;\n        }\n        if (this._curVideoNode) {\n            this._curVideoNode.onAccurateTimeupdate = null;\n            this.setPlayEvents(this._curVideoNode, false);\n        }\n        if (vn) {\n            this._curVideoNode = vn;\n            this._curVideoNode.onAccurateTimeupdate = this.checkAccuratePlaytime.bind(this);\n            this.setPlayEvents(this._curVideoNode, true);\n        }\n    };\n    /**\n    * å¨æ­æ¾éè¯¯æ¶ï¼ä½¿ç¨rangeè¯·æ±è·åå½åæ­æ¾çè§é¢çä¸æ®µæ°æ®ç¨äºæ¢æµè¿ç¨èµæº\n    */\n    BasePlayer.prototype.detectSourceOnError = function (videoInfo) {\n        var _this = this;\n        var _a = videoInfo || {}, loadingUrl = _a.loadingUrl, uid = _a.uid;\n        if (!loadingUrl) {\n            this._logger.error(\'detectSourceOnError, url=null\');\n            return;\n        }\n        Object(_libs_detect_stream__WEBPACK_IMPORTED_MODULE_4__["detectStream"])(loadingUrl)\n            .then(function (data) {\n            _this._logger.error("detectSourceOnError=".concat(_util__WEBPACK_IMPORTED_MODULE_6__["jsonTool"].safelyStringify(__assign({ uid: uid }, data))));\n        })\n            .catch(function (e) {\n            _this._logger.error(\'detectSourceOnError err\', e === null || e === void 0 ? void 0 : e.message);\n        });\n    };\n    BasePlayer.prototype.destroy = function () {\n        this.stopInner();\n        if (this._vnList) {\n            var len = this._vnList.length;\n            for (var i = 0; i < len; i++) {\n                this._vnList[i].destroy();\n            }\n        }\n        if (this._preloaders) {\n            this._preloaders.forEach(function (preloader) {\n                preloader.clear();\n            });\n            this._preloaders = null;\n        }\n        document.removeEventListener(\'visibilitychange\', this._eventMap.document);\n        this.removeAllListeners();\n        this.setKeepScreenAlive(false);\n        this._videoInfos = null;\n        this._curVideoNode = null;\n        this._vnList = null;\n        this._eventMap = null;\n        this.lastVideoInfo = null;\n    };\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", []),\n        __metadata("design:returntype", void 0)\n    ], BasePlayer.prototype, "playBlocked", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", [Object]),\n        __metadata("design:returntype", void 0)\n    ], BasePlayer.prototype, "resizeVideoElements", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", [Number]),\n        __metadata("design:returntype", void 0)\n    ], BasePlayer.prototype, "seek", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", []),\n        __metadata("design:returntype", void 0)\n    ], BasePlayer.prototype, "resumeInner", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", [Object]),\n        __metadata("design:returntype", void 0)\n    ], BasePlayer.prototype, "appendNext", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", [Object]),\n        __metadata("design:returntype", void 0)\n    ], BasePlayer.prototype, "preloadNext", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", [Boolean, Object, Object]),\n        __metadata("design:returntype", void 0)\n    ], BasePlayer.prototype, "preloadInner", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", []),\n        __metadata("design:returntype", void 0)\n    ], BasePlayer.prototype, "checkPlayNext", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", [Object]),\n        __metadata("design:returntype", void 0)\n    ], BasePlayer.prototype, "playNext", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", [Object]),\n        __metadata("design:returntype", void 0)\n    ], BasePlayer.prototype, "playNextInner", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", [Object, Object]),\n        __metadata("design:returntype", Promise)\n    ], BasePlayer.prototype, "play", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", [Object, Object]),\n        __metadata("design:returntype", Promise)\n    ], BasePlayer.prototype, "load", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", [String]),\n        __metadata("design:returntype", void 0)\n    ], BasePlayer.prototype, "stop", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", [String, Object, Object]),\n        __metadata("design:returntype", void 0)\n    ], BasePlayer.prototype, "stopInner", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", [Object]),\n        __metadata("design:returntype", Promise)\n    ], BasePlayer.prototype, "setAudioTrack", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", [Object, Array, Object]),\n        __metadata("design:returntype", Promise)\n    ], BasePlayer.prototype, "setLevel", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", []),\n        __metadata("design:returntype", void 0)\n    ], BasePlayer.prototype, "destroy", null);\n    return BasePlayer;\n}(_libs_event_emitter__WEBPACK_IMPORTED_MODULE_5__["default"]));\n/* harmony default export */ __webpack_exports__["default"] = (BasePlayer);\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/base/base-player.ts?')},"./src/base/base-videonode.ts":function srcBaseBaseVideonodeTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _drm__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../drm */ "./src/drm/index.ts");\n/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../enums */ "./src/enums.ts");\n/* harmony import */ var _interfaces_iaudio_track__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../interfaces/iaudio-track */ "./src/interfaces/iaudio-track.ts");\n/* harmony import */ var _libs_autoplay_policy__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../libs/autoplay-policy */ "./src/libs/autoplay-policy.ts");\n/* harmony import */ var _libs_event_emitter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../libs/event-emitter */ "./src/libs/event-emitter.ts");\n/* harmony import */ var _libs_simple_defer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../libs/simple-defer */ "./src/libs/simple-defer.ts");\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../util */ "./src/util/index.ts");\n/* harmony import */ var _check_health__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./check-health */ "./src/base/check-health.ts");\n/* harmony import */ var _performance_monitor__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./performance-monitor */ "./src/base/performance-monitor.ts");\n/* harmony import */ var _state_mgr__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./state-mgr */ "./src/base/state-mgr.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (undefined && undefined.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (undefined && undefined.__metadata) || function (k, v) {\n    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);\n};\n\n\n\n\n\n\n\n\n\n\nvar IGNORE_EVT_TYPE = [_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_EVTS"].timeupdate, _enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_EVTS"].progress, _enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_EVTS"].frameRender];\nvar logMethodCall = Object(_util__WEBPACK_IMPORTED_MODULE_6__["logMethodCallDecoratorCreator"])(\'BaseVideoNode\');\nvar BaseVideoNode = /** @class */ (function (_super) {\n    __extends(BaseVideoNode, _super);\n    function BaseVideoNode(config) {\n        var _a;\n        var _this = _super.call(this) || this;\n        _this._played = false;\n        _this._evtBlocking = false;\n        _this._pauseCloseToEndStateCheckTimeoutId = 0;\n        /** seekæä½çç®æ æ­æ¾ç¹ */\n        _this._targetSeekTime = -1;\n        /** å¤é¨ä¼ å¥çstartTimeï¼èµ·æ­åç½®0 */\n        _this._userStartTime = 0;\n        /** æ¯å¦æ¯ç¨æ·seek */\n        _this._isUserSeek = false;\n        _this.isUserSwitchAudioTrack = false;\n        _this._setLoadingDelayTimeoutId = 0;\n        /** é¦æ¬¡ç¼å²è¶æ¶çè®¡æ¶å¨id */\n        _this.loadTimeoutId = 0;\n        _this.levelSwitchTargetPlaytime = -1;\n        /** åæ¢æ¸æ°åº¦æ¹å¼ */\n        _this.setLevelMode = _enums__WEBPACK_IMPORTED_MODULE_1__["SET_LEVEL_MODE"].SOFT;\n        /** æ¯å¦å­å¨å¤æé³è½¨ */\n        _this.altAudio = false;\n        _this._logger = new _util__WEBPACK_IMPORTED_MODULE_6__["Logger"](config.instanceId, \'BaseVideoNode\');\n        _this._config = config;\n        _this.stateMgr = new _state_mgr__WEBPACK_IMPORTED_MODULE_9__["StateMgr"](_this);\n        _this.checkPlayHealth = new _check_health__WEBPACK_IMPORTED_MODULE_7__["CheckHealth"](_this);\n        _this.setHealthEvents();\n        _this.mainTaskLoop = new _util__WEBPACK_IMPORTED_MODULE_6__["TaskLoop"](_this.mainLoopInProcess.bind(_this), _util__WEBPACK_IMPORTED_MODULE_6__["LoopMode"].RAF);\n        var container = _this._config.container;\n        _this._video = _this.findFreeVideoElement();\n        _this._autoPlayPolicy = new _libs_autoplay_policy__WEBPACK_IMPORTED_MODULE_3__["default"](_this._video, { instanceId: config.instanceId });\n        _this._state = _enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_STATE"].IDLE;\n        _this._playbackRate = 1;\n        _this._idx = 0;\n        _this._videoInfo = null;\n        _this._pauseType = void 0;\n        _this._videoEventMap = (_a = {},\n            _a[_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_EVTS"].loadstart] = _this.onVideoEventLoadStart.bind(_this),\n            _a[_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_EVTS"].timeupdate] = _this.onVideoEventTimeUpdate.bind(_this),\n            _a[_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_EVTS"].durationchange] = _this.onVideoEventDurationChange.bind(_this),\n            _a[_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_EVTS"].volumechange] = _this.onVideoEventVolumeChange.bind(_this),\n            _a[_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_EVTS"].canplay] = _this.onVideoEventCanplay.bind(_this),\n            _a[_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_EVTS"].playing] = _this.onVideoEventPlaying.bind(_this),\n            _a[_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_EVTS"].pause] = _this.onVideoEventPause.bind(_this),\n            _a[_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_EVTS"].waiting] = _this.onVideoEventWaiting.bind(_this),\n            _a[_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_EVTS"].seeking] = _this.onVideoEventSeeking.bind(_this),\n            _a[_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_EVTS"].seeked] = _this.onVideoEventSeeked.bind(_this),\n            _a[_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_EVTS"].loadeddata] = _this.onVideoEventLoadeddata.bind(_this),\n            _a[_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_EVTS"].loadedmetadata] = _this.onVideoEventLoadedmetadata.bind(_this),\n            _a[_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_EVTS"].ended] = _this.onVideoEventEnded.bind(_this),\n            _a[_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_EVTS"].error] = _this.onVideoEventError.bind(_this),\n            _a[_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_EVTS"].progress] = _this.onVideoEventProgress.bind(_this),\n            _a[_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_EVTS"].ratechange] = _this.onVideoEventRateChange.bind(_this),\n            _a[_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_EVTS"].resize] = _this.onVideoEventResize.bind(_this),\n            _a);\n        _this._drm = new _drm__WEBPACK_IMPORTED_MODULE_0__["default"](_this._video, config.drmConfig, _this._logger);\n        _this._drm.on(\'error\', _this.onDrmError.bind(_this));\n        _this._eventMap = {\n            video: _this.onVideoEvents.bind(_this),\n        };\n        _this._eventAddedMap = {};\n        _this._videoElementContainer = _util__WEBPACK_IMPORTED_MODULE_6__["domTool"].getElementFromConfig(container).querySelector(".".concat(_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_CONTAINER_CLASS"]));\n        _util__WEBPACK_IMPORTED_MODULE_6__["videoTool"].appendElement(_this._video, _this._videoElementContainer);\n        _this.addVideoElementResizeObserver();\n        _this.performanceMonitor = new _performance_monitor__WEBPACK_IMPORTED_MODULE_8__["PerformanceMonitor"](_this._video);\n        return _this;\n    }\n    BaseVideoNode.prototype.setLevel = function (mode) {\n        if (mode === void 0) { mode = _enums__WEBPACK_IMPORTED_MODULE_1__["SET_LEVEL_MODE"].HARD; }\n        if (!this.checkCanSetLevel()) {\n            return Promise.reject(new Error(\'setLevel can\\\'t start\'));\n        }\n        this._logger.log(\'setLevel(), succ exec: \', this._videoInfo);\n        var levelSwitchTargetPlaytime = this._videoInfo.playtime;\n        this.load(this._videoInfo, { startTime: levelSwitchTargetPlaytime });\n        this.play();\n        var defer = new _libs_simple_defer__WEBPACK_IMPORTED_MODULE_5__["default"]();\n        this._levelSwitchingDefer = defer;\n        this.levelSwitchTargetPlaytime = levelSwitchTargetPlaytime;\n        this.setLoading(true);\n        this.emit(_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_NODE_EVENT"].SETLEVEL_START, { videoInfo: this._videoInfo, mode: mode });\n        return defer.promise;\n    };\n    BaseVideoNode.prototype.setAudioTrack = function (id) {\n        if (!this.checkCanSetAudioTrack()) {\n            return Promise.reject(_interfaces_iaudio_track__WEBPACK_IMPORTED_MODULE_2__["AUDIO_TRACK_ERROR_MSG"].STATE_INVALID);\n        }\n        // baseä¸æ¯æåæ¢é³è½¨\n        return Promise.reject(_interfaces_iaudio_track__WEBPACK_IMPORTED_MODULE_2__["AUDIO_TRACK_ERROR_MSG"].NOT_SUPPORT);\n    };\n    /**\n     * å½åæ­æ¾çèµæºæ¯å¦æ¯DRMå å¯ç\n     */\n    BaseVideoNode.prototype.isCurrentContentDRMEncrypted = function () {\n        // æ²¡ææ­æ¾åå®¹çè¯é»è®¤æ¯ä¸å å¯ç\n        if (this._state === _enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_STATE"].IDLE) {\n            return false;\n        }\n        return this._drm.hasStarted();\n    };\n    /**\n     * æ¯å¦æ­£å¨åæ¢æ¸æ°åº¦\n     */\n    BaseVideoNode.prototype.getLevelSwitching = function () {\n        return !!this._levelSwitchingDefer;\n    };\n    /** æ¯å¦å­å¨å¤æé³è½¨ */\n    BaseVideoNode.prototype.hasAltAudio = function () {\n        return this.altAudio;\n    };\n    /**\n     * æ£æ¥åæ¢æ¸æ°åº¦æ¯å¦ç»æ\n     * @param evtName äºä»¶åï¼åæ¢æ¸æ°åº¦å®æå¯è½å¨å¤ä¸ªäºä»¶ä¸­æ£æ¥ã\n     * @returns void\n     */\n    BaseVideoNode.prototype.checkSetLevelOver = function (evtName) {\n        if (!this.getLevelSwitching()) {\n            return;\n        }\n        var succInPlaying = false;\n        var succInSeeked = false;\n        var succInTimeupdate = false;\n        if (this._config.type === _enums__WEBPACK_IMPORTED_MODULE_1__["PLAY_MODE"].LIVE) {\n            // ç´æ­å¼æ­ä»¥åå°±ç´æ¥å¤æ­åæ¢æ¸æ°åº¦æå\n            succInPlaying = evtName === _enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_EVTS"].playing;\n            succInTimeupdate = evtName === _enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_EVTS"].timeupdate;\n        }\n        else {\n            // æ¯æ#tçæ¶ååæ¢æ¸æ°åº¦æ¯ç´æ¥å¨urlå¸¦ä¸äºç®æ ä½ç½®ï¼å¼æ­å³å°è¾¾ç®æ æ­æ¾ä½ç½®\n            succInPlaying = evtName === _enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_EVTS"].playing\n                && _util__WEBPACK_IMPORTED_MODULE_6__["videoTool"].supportMediaFragmentsURISpec(this._config.enableMediaFragmentsURI);\n            // ä¸æ¯æ#tæ åçæµè§å¨ç¯å¢ä¸ï¼åæ¢å°ä¸ä¸ä¸ªæ¸æ°åº¦äºè¿éè¦è°ç¨seekæä½æè½å°è¾¾æ­æ¾ç®æ ä½ç½®ï¼å æ­¤å¨seekedç¶ææ£æµ\n            succInSeeked = evtName === _enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_EVTS"].seeked\n                && !_util__WEBPACK_IMPORTED_MODULE_6__["videoTool"].supportMediaFragmentsURISpec(this._config.enableMediaFragmentsURI);\n            // timeupdateä¸­æ¯ååºçæ£æµï¼ä¸ä¸ä¸ªæ¸æ°åº¦çæ¶é´è¶è¿äºåæ¢æ¶è®°å½çæ¶é´ååæ¢æå\n            succInTimeupdate = evtName === _enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_EVTS"].timeupdate\n                && this._video.currentTime - this.levelSwitchTargetPlaytime >= 0.3;\n        }\n        if (succInPlaying || succInSeeked || succInTimeupdate) {\n            this._logger.log(\'setLevelOver(), reason: \'\n                + "succOnPlaying=".concat(succInPlaying, "/succOnSeeked=").concat(succInSeeked, "/succOnTimeupdate=").concat(succInTimeupdate));\n            this.setLevelOver();\n        }\n    };\n    BaseVideoNode.prototype.onAudioTrackSwitched = function (id, fail) {\n        if (fail === void 0) { fail = false; }\n        if (this.audioTrackSwitchingDefer) {\n            this.audioTrackSwitchingDefer.resolve({ userTrigger: this.isUserSwitchAudioTrack, id: id, fail: fail });\n            this.audioTrackSwitchingDefer = null;\n            this.emit(_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_NODE_EVENT"].SET_AUDIO_TRACK_OVER, {\n                videoInfo: this._videoInfo,\n                id: id,\n                fail: fail,\n                userTrigger: this.isUserSwitchAudioTrack,\n            });\n        }\n    };\n    /**\n     * æ£æ¥æ¯å¦å¯ä»¥åæ¢é³è½¨\n     *\n     * @protected\n     * @returns {boolean}\n     */\n    BaseVideoNode.prototype.checkCanSetAudioTrack = function () {\n        if (!this.altAudio) {\n            this._logger.warn(\'setAudioTrack(), current content does not contain alternative audio track\');\n            return false;\n        }\n        if (!this._played) {\n            this._logger.warn(\'setAudioTrack(), can only be invoked after content plays\');\n            return false;\n        }\n        if (this.audioTrackSwitchingDefer) {\n            this._logger.warn(\'setAudioTrack(), in progress\');\n            return false;\n        }\n        return true;\n    };\n    BaseVideoNode.prototype.setLevelOver = function () {\n        if (!this._levelSwitchingDefer) {\n            return;\n        }\n        this._levelSwitchingDefer.resolve();\n        this._levelSwitchingDefer = null;\n        this.levelSwitchTargetPlaytime = -1;\n        this.setLoading(false);\n        this.stateMgr.onSetLevelOver();\n        this.emit(_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_NODE_EVENT"].SETLEVEL_OVER, { videoInfo: this._videoInfo });\n    };\n    BaseVideoNode.prototype.checkCanSetLevel = function () {\n        if (!this._played) {\n            this._logger.warn(\'setLevel(), play is not triggered.\');\n            return false;\n        }\n        if (this.getLevelSwitching()) {\n            this._logger.warn(\'setLevel(), in progress.\');\n            return false;\n        }\n        if (!this._videoInfo || this._videoInfo.playtime <= 0) {\n            this._logger.warn(\'setLevel(), setLevel can\\\'t start.\');\n            return false;\n        }\n        if (this._config.type === _enums__WEBPACK_IMPORTED_MODULE_1__["PLAY_MODE"].VOD && this._videoInfo.playtime + 1 >= this._videoInfo.duration) {\n            this._logger.warn(\'setLevel(), video is about to end.\');\n            return false;\n        }\n        return true;\n    };\n    /**\n     * æ£æ¥æ¯å¦å¯ä»¥åæ¢æ¸æ°åº¦ã\n     * @param time åæ¢æ¶é´\n     * @returns æ¯å¦å¯æ§è¡åæ¢å¨ä½\n     */\n    BaseVideoNode.prototype.checkCanSeek = function (time, isUser) {\n        if (isUser === void 0) { isUser = false; }\n        if (!this._videoInfo) {\n            this._logger.log("seek(), return because null videoInfo, time=".concat(time, "/idx=").concat(this.idx));\n            return false;\n        }\n        if (this._video.duration <= 0) {\n            this._logger.log(\'seek(), cannot seek when the duration is 0\');\n            return false;\n        }\n        if (time - this._videoInfo.duration >= 1) {\n            // seekç®æ å¤ªå¤§\n            this._logger.log("seek(), return because too large time, uid=".concat(this._videoInfo.uid, "/idx=").concat(this.idx, "/time=").concat(time)\n                + "/duration=".concat(this._videoInfo.duration));\n            return false;\n        }\n        if (typeof this.setLevelMode !== \'undefined\'\n            && this.setLevelMode !== _enums__WEBPACK_IMPORTED_MODULE_1__["SET_LEVEL_MODE"].SMOOTH\n            && this.getLevelSwitching()\n            && isUser) {\n            // éå¹³æ»åæ¢æ¶ï¼âå¤é¨âä¸è½seekï¼åé¨æ¯å¯ä»¥seekçï¼ä¾å¦æäºæµè§å¨åæ¸æ°åº¦çæ¶åï¼ä¸ä¸ä¸ªæ¸æ°åº¦éè¦seekå°ç®æ æ¶é´ç¹ï¼ã\n            // å ä¸ºå è½½ä¸ä¸ä¸ªæ¸æ°åº¦å äº#tåæ°ï¼å¦æå½åæ¸æ°åº¦è¿è¡seekæä½ï¼é£ä¹ä¸ä¸ä¸ªæ¸æ°åº¦å è½½okä»¥åè·ä¸ä¸ä¸ªæ¸æ°åº¦seekåçæ¶é´å°±æ æ³å¯¹é½\n            this._logger.log(\'seek(), cannot seek when hard/soft level switching\');\n            return false;\n        }\n        return true;\n    };\n    /**\n     * ä»configä¼ å¥çvideoæ ç­¾æ°ç»æ¥æ¾æªä½¿ç¨çvideoæ ç­¾ï¼æ¯å¦å¨ææ¡£æµä¸­ï¼\n     */\n    BaseVideoNode.prototype.findFreeVideoElement = function () {\n        var videoElements = this._config.videoElements;\n        var freeVideoElement = null;\n        for (var i = 0; i < videoElements.length; i++) {\n            var el = videoElements[i];\n            if (typeof el.dataset.used === \'undefined\' || el.dataset.used === _enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_ELEMENT_STATE"].FREE) {\n                freeVideoElement = videoElements[i];\n                break;\n            }\n        }\n        if (!freeVideoElement) {\n            throw new Error(\'Unable to find free video element!\');\n        }\n        freeVideoElement.dataset.used = _enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_ELEMENT_STATE"].USED;\n        return freeVideoElement;\n    };\n    /**\n     * è®¾ç½®æ­æ¾ä¸»å¾ªç¯æ¯å¦å¯ç¨ãç¨äºæ¯å¸§æ£æ¥æ­æ¾è¿åº¦ãçæ§ç¼å²ç¶æä¸æ¯å¦å¡æ­»ç­ã\n     */\n    BaseVideoNode.prototype.setMainLoopEnable = function (value) {\n        if (value) {\n            this.mainTaskLoop.start();\n        }\n        else {\n            this.mainTaskLoop.stop();\n        }\n    };\n    /**\n     * ä¸»å¾ªç¯æ§è¡å½æ°\n     */\n    BaseVideoNode.prototype.mainLoopInProcess = function () {\n        this.updateAccuratePlaytime();\n        this.checkPlayHealth.loop();\n    };\n    /**\n     * å¨playingç¶æä¸æ´æ°æ´ç²¾ç¡®çæ­æ¾æ¶é´ï¼æ®évideoäºä»¶çæ¶é´ä»ç²¾ç¡®å°0.2~0.3ç§ï¼æ­¤å½æ°ä¸­ç²¾ç¡®å°16.7æ¯«ç±³ï¼\n     */\n    BaseVideoNode.prototype.updateAccuratePlaytime = function () {\n        var _a;\n        /**\n         * è¿éæ3ä¸ªæ¡ä»¶\n         * 1. æ­æ¾å¨è¦å¤äºplayingç¶æï¼æä»¬è®¤ä¸ºæ¯å¨âæ­æ¾ä¸­â\n         * 2. videoçdurationè¦ä¸ºæ­£ï¼å¼å®¹wasmåæ ¸æ²¡æready stateçæåµï¼\n         * 3. videoçready stateå°äº4ï¼å¼å®¹ä¸å­å¨ready stateçcaseï¼ä¸è½ä½¿ç¨ !== 4)\n         *\n         * ä¸æ»¡è¶³ä»»æcaseï¼è·³è¿æ£æ¥\n         */\n        if (this._state !== _enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_STATE"].PLAYING\n            || this._video.duration <= 0\n            || this._video.readyState < _enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_READY_STATE"].HAVE_ENOUGH_DATA) {\n            return;\n        }\n        // å¦æå¤é¨æä¼ å¥åè°å½æ°ç¨äºæ­æ¾æ¶é´ç²åº¦æ´å°çäºå¡æ§è¡ï¼å¨æ­¤è°ç¨å¤é¨åè°\n        (_a = this.onAccurateTimeupdate) === null || _a === void 0 ? void 0 : _a.call(this, this._video.currentTime, this._video.duration);\n        // æ´æ°æ´ç²¾ç¡®çæ¶é´\n        this.updatePlaytime(this._video.currentTime, true);\n    };\n    BaseVideoNode.prototype.setCheckLoadTimeoutEnable = function (value) {\n        var _this = this;\n        if (value) {\n            if (this._config.maxPreloadTimeout <= 0) {\n                return;\n            }\n            this.loadTimeoutId = window.setTimeout(function () {\n                _this.errorHandler({\n                    code: _enums__WEBPACK_IMPORTED_MODULE_1__["ERROR_CODE"].ORG_LOAD_TIMEOUT,\n                    message: _enums__WEBPACK_IMPORTED_MODULE_1__["ERROR_MSG"].PRELOAD_VIDEO_TIMEOUT,\n                });\n            }, this._config.maxPreloadTimeout);\n        }\n        else {\n            if (this.loadTimeoutId > 0) {\n                clearTimeout(this.loadTimeoutId);\n                this.loadTimeoutId = 0;\n            }\n        }\n    };\n    BaseVideoNode.prototype.setEndInner = function () {\n        if (this._state !== _enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_STATE"].END && this._state !== _enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_STATE"].IDLE) {\n            this._logger.log("setEndInner(), idx=".concat(this._idx, "/uid=").concat(this._videoInfo.uid, "/playtime=").concat(this._videoInfo.playtime)\n                + "/duration=".concat(this._videoInfo.duration, "}"));\n            // è¿éä¸è½ç´æ¥åæ­¢ï¼è°ç¨videoNodeçstopï¼ï¼å ä¸ºå¨åè¡¨æ­æ¾æ¶ï¼å³ä½¿å½åè§é¢åæ­¢ï¼ä¹å¯è½ä¼appendå°åè¿æ¥ç»§ç»­æ­æ¾ï¼éè¦å¤ç¨ä¸äºåéã\n            // ï¼åèä»£ç ä½ç½®â æ¥çè§£ï¼\n            this.stateMgr.setEnded(); // æ¬æ®µæ­æ¾ç»æ\n            this.emit(_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_NODE_EVENT"].PLAY_OVER, {\n                isUserStop: false,\n                endState: _enums__WEBPACK_IMPORTED_MODULE_1__["END_STATE"].NORMAL,\n                videoInfo: this._videoInfo,\n            });\n        }\n    };\n    BaseVideoNode.prototype.stopInner = function (keepState, videoInfo) {\n        var _a;\n        if (!this._video || !this._videoInfo) {\n            return;\n        }\n        this.setMainLoopEnable(false);\n        this.setCheckLoadTimeoutEnable(false);\n        // åæä¹åç´æ¥éç½®seekæ è®°\n        this._isUserSeek = false;\n        this._logger.log("stopInner(), uid/state/idx: ".concat((_a = this._videoInfo) === null || _a === void 0 ? void 0 : _a.uid, "/").concat(this.state, "/").concat(this.idx));\n        this.setVideoEvents(false);\n        if (this._config.clearVideoAfterStop) {\n            // è°ç¨videoTool.clearæ¥å£æ¸é¤videoæ ç­¾ç»é¢\n            _util__WEBPACK_IMPORTED_MODULE_6__["videoTool"].clear(this._video);\n        }\n        else {\n            // å¦æä¿çç»é¢ï¼æ­æ¾ç»æä»æåï¼ç­ä¸ä¸æ¬¡loadæ¶æä¼æ¸ç\n            this._video.pause();\n        }\n        if (this._config.createVideoNodeWhenLoad) {\n            // å¦æç¡®å®æ¯loadæ¶ä¼éæ°åå»ºæ°çVideoNodeï¼é£ä¹æ­¤VideoNodeå¨åæ­¢æ¶éè¦éæ¾videoæ ç­¾ã\n            this._video.dataset.used = _enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_ELEMENT_STATE"].FREE;\n        }\n        if (this._videoInfo) {\n            this._videoInfo.extraVars.isLoadstarted = false;\n            this._videoInfo = null;\n        }\n        if (this._pauseCloseToEndStateCheckTimeoutId > 0) {\n            window.clearTimeout(this._pauseCloseToEndStateCheckTimeoutId);\n            this._pauseCloseToEndStateCheckTimeoutId = 0;\n        }\n        if (this.state === _enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_STATE"].IDLE) {\n            // å½åè§é¢æ®µå·²ç»æ­æ¾ç»æï¼ç¶ææºè¢«éç½®ä¸ºidleãä½æ¯å¹¶æ²¡ææ¸é¤videoInfoç­åéãå¦æéæ­ï¼ä¼é»è®¤è°ç¨stopæ¹æ³ï¼å¯¼è´\n            // éå¤çendãidleç¶æååï¼ç±»ä¼¼end -> idle -> ï¼éæ­ï¼-> end -> idleãreturnè¯­å¥æé¤è¿ç§æåµã\n            // ï¼åèä»£ç ä½ç½®â ï¼\n            return;\n        }\n        if (!keepState) {\n            this.stateMgr.setEnded();\n            this._played = false;\n            // ä¸ä¿æç¶æçæ¶åï¼æä¼æ¸çæ­£å¨åæ¸æ°åº¦çåéã\n            // ï¼ä¾å¦åæ¢æ¸æ°åº¦æ¶åºéï¼ä¼éè¯å¤ä»½å°åï¼è°ç¨stopInnerä¼ å¥keepStateä¸ºtrueï¼æ­¤æ¶è¿å¨åæ¸æ°åº¦ï¼ä¸è½æ¸çæ­¤åéï¼\n            this._levelSwitchingDefer = null;\n            if (videoInfo === null || videoInfo === void 0 ? void 0 : videoInfo.error) {\n                this.emit(_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_NODE_EVENT"].ERROR, { videoInfo: videoInfo });\n            }\n        }\n    };\n    BaseVideoNode.prototype.onVideoEventPause = function () {\n        if (this._pauseType !== _enums__WEBPACK_IMPORTED_MODULE_1__["PAUSE_TYPE"].INNER) {\n            // è¿æ»¤ææ­æ¾å¨åé¨è°ç¨çpauseï¼ä¾å¦åæ¸æ°åº¦åç¨åºè°ç¨çpause\n            this.stateMgr.receiveVideoEvt(_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_EVTS"].pause);\n        }\n    };\n    BaseVideoNode.prototype.onVideoEventPlaying = function () {\n        this.setCheckLoadTimeoutEnable(false);\n        // èµ·æ­åè¦éç½®seekingæ è®°\n        this._isUserSeek = false;\n        // ç§»å¨ç«¯chromeæ­æ¾ç´æ­è²ä¼¼æ¶å°loadedmetadataäºä»¶æ¶åè¿å¯è½ä¸º0ï¼å æ­¤å¨è¿éåèµå¼ä¸æ¬¡ç»videoinfo\n        this.updateVideoSize();\n        if (_util__WEBPACK_IMPORTED_MODULE_6__["uaTool"].browser.x5) {\n            // å¦ææ¯åè°ç¨video.load()ï¼x5æµè§å¨å¨playingä¹åè·åå°çdurationä¸ç´æ¯0ï¼åæ¬å¨durationchangeäºä»¶éé¢\n            // æä»¥è¿éå¨playingçæ¶ååè·åä¸éäºï¼åºbugçuaï¼\n            // Mozilla/5.0 (Linux; Android 9; Redmi Note 7 Pro Build/PKQ1.181203.001; wv) AppleWebKit/537.36\n            // (KHTML, like Gecko) Version/4.0 Chrome/77.0.3865.120 MQQBrowser/6.2 TBS/045224\n            // Mobile Safari/537.36 MMWEBID/9567\n            // MicroMessenger/7.0.15.1680(0x27000F50) Process/tools WeChat/arm32 NetType/WIFI Language/zh_CN ABI/arm64\n            this.onVideoEventDurationChange();\n        }\n        if (!this._videoInfo.hasFirstPlaying) {\n            this.emit(_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_NODE_EVENT"].FIRST_PLAYING, { videoInfo: this._videoInfo });\n        }\n        this.stateMgr.receiveVideoEvt(_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_EVTS"].playing);\n        // å¨äºä»¶ä¸­videoInfoå¯è½å·²è¢«éæ¯ï¼æä»¥å¤æ­ä¸ä¸æ¯å¦å­å¨\n        if (this._videoInfo) {\n            // å¨firstPlayingäºä»¶ååºåãç¶æä¿®æ¹ä»¥åï¼åä¿®æ¹æ­¤åéãå ä¸ºå¤é¨å¤æ­é¦æ¬¡æ­æ¾å¯è½ä½¿ç¨ç!videoNode.hasFirstPlaying\n            this._videoInfo.hasFirstPlaying = true;\n        }\n        this._userStartTime = 0;\n        this.checkSetLevelOver(_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_EVTS"].playing);\n    };\n    BaseVideoNode.prototype.onVideoEventRateChange = function () {\n        this.emit(_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_NODE_EVENT"].RATE_CHANGE, { playbackRate: this.playbackRate, videoInfo: this._videoInfo });\n    };\n    BaseVideoNode.prototype.onVideoEventEnded = function () {\n        this._logger.log(\'setEndInner(), reason=endedEvt\');\n        this.setEndInner();\n    };\n    BaseVideoNode.prototype.onVideoEventSeeked = function () {\n        this.stateMgr.receiveVideoEvt(_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_EVTS"].seeked);\n        this.checkSetLevelOver(_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_EVTS"].seeked);\n        this.resumeAfterSeek();\n        // éç½®userSeekæ ç­¾\n        this._isUserSeek = false;\n    };\n    /**\n     * æå¨ä»¥åæ¢å¤æ­æ¾ææ¢å¤æ­æ¾ç¶æ\n     */\n    BaseVideoNode.prototype.resumeAfterSeek = function () {\n        if (!this._played || this._video.ended || !this._isUserSeek) {\n            // æªå¼æ­åï¼æ¯å¦åªæ¯é¢å è½½è§é¢ï¼or è§é¢å·²ç»æ­æ¾ç»æ or ä¸æ¯ç¨æ·çseekæä½ï¼ä¸éè¦å¨seekä»¥åæ¢å¤æ­æ¾\n            return;\n        }\n        // ç¶ææºå®ä¹ä¸­ç»ä¸è§å®æ è®ºä½ç§ç¶æä¸seekï¼seekæåä»¥ååä¸ºplayingç¶æ\n        if (this._video.paused) {\n            // å¦ææ¯æåç¶æä¸seekï¼ç»æä»¥åä¹æ¢å¤æ­æ¾\n            if (!this._config.remainPauseStateAfterSeek) {\n                // ä½è¿éé¤å¼ä¸ç§æåµï¼å¤é¨æå®è¦ä¿çæåç¶æï¼\n                this.videoplay();\n            }\n        }\n        else {\n            // å¦æä¸æ¯æåç¶æï¼æ­æ¾ç¶æä¸æå¨ï¼ï¼å¼ºè¡æ¢å¤å°playingç¶æ\n            // ï¼ä¸è¬æµè§å¨é½ä¼å¨seekedäºä»¶ä»¥åç´§è·canplayãplayingäºä»¶åºæ¥ï¼å°æ°æµè§å¨ä¿æseekedç¶æãä½å¼ºè¡è®¾ç½®playingç¶æä¹æ²¡å³ç³»ï¼å¦æåç»­\n            // åæ¥canplayãplayingç¶æé½ä¸ä¼è¦çå·²ç»å¼ºè¡è®¾ç½®çplayingç¶æï¼å ä¸ºä¸ç¬¦åç¶æè¡¨èè¢«è¿æ»¤ï¼\n            this.stateMgr.setPlaying();\n        }\n    };\n    BaseVideoNode.prototype.onVideoEventCanplay = function () {\n        this.setCheckLoadTimeoutEnable(false);\n        if (!this._videoInfo) {\n            return;\n        }\n        if (!this._videoInfo.qualityInfo.canplaytime) {\n            this._videoInfo.qualityInfo.canplaytime = _util__WEBPACK_IMPORTED_MODULE_6__["videoTool"].getBuffered(this._video);\n        }\n        this.stateMgr.receiveVideoEvt(_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_EVTS"].canplay);\n    };\n    BaseVideoNode.prototype.onVideoEventResize = function () {\n        this.updateVideoSize(true);\n    };\n    BaseVideoNode.prototype.onVideoEventDurationChange = function () {\n        if (this._video.duration > 0 && this._video.duration !== this._videoInfo.duration) {\n            this._videoInfo.duration = this._video.duration;\n            this._logger.log("onVideoEventDurationChange(), uid=".concat(this._videoInfo.uid, "/duration=").concat(this._videoInfo.duration, "/")\n                + "idx=".concat(this.idx));\n            this.emit(_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_NODE_EVENT"].DURATION_CHANGE, { videoInfo: this._videoInfo });\n        }\n    };\n    BaseVideoNode.prototype.onVideoEventVolumeChange = function () {\n        this.emit(_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_NODE_EVENT"].VOLUME_CHANGE, { volume: this.volume, videoInfo: this._videoInfo });\n    };\n    BaseVideoNode.prototype.onVideoEventTimeUpdate = function () {\n        var _a;\n        if (this._video.currentTime === 0) {\n            return;\n        }\n        this.updatePlaytime(this._video.currentTime);\n        this.checkSetLevelOver(_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_EVTS"].timeupdate);\n        /**\n         * é¨åæµè§å¨ä¸­ç´æ­ç¶æä¸åºç°bufferååªæåºcanplayäºä»¶ï¼ä¸æåºplayingäºä»¶\n         * å¯¼è´ç¶ææ­è½¬åºç°å¼å¸¸ï¼æä»¥æä»¬å¨timeupdateä¸­æ£æ¥ï¼å¦æå¤äºbufferingç¶æ\n         * å¼ºå¶æ­è½¬ä¸ºplayingï¼é¿åè¢«è¯å«ä¸ºå¡æ­»\n         */\n        if (this._state === _enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_STATE"].BUFFERING)\n            this.stateMgr.setPlaying();\n        var intervalFrameDropped = (_a = this.performanceMonitor) === null || _a === void 0 ? void 0 : _a.calcIntervalFrameDropped();\n        if (typeof intervalFrameDropped === \'number\' && this._videoInfo) {\n            this._videoInfo.qualityInfo.intervalFrameDropped = intervalFrameDropped;\n        }\n    };\n    BaseVideoNode.prototype.onVideoEventLoadStart = function () {\n        // to be override\n    };\n    BaseVideoNode.prototype.onVideoEventWaiting = function () {\n        this.stateMgr.receiveVideoEvt(_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_EVTS"].waiting);\n    };\n    BaseVideoNode.prototype.onVideoEventSeeking = function () {\n        this.stateMgr.receiveVideoEvt(_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_EVTS"].seeking);\n    };\n    BaseVideoNode.prototype.onVideoEventProgress = function () {\n        this.emit(_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_NODE_EVENT"].VIDEO_BUFFER_CHANGE, { videoInfo: this._videoInfo });\n    };\n    BaseVideoNode.prototype.onVideoEventLoadedmetadata = function (e) {\n        this.updateVideoSize();\n        this.emit(_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_NODE_EVENT"].METADATA_CHANGE, { videoInfo: this._videoInfo });\n    };\n    BaseVideoNode.prototype.updateVideoSize = function (isNativeEvt) {\n        if (isNativeEvt === void 0) { isNativeEvt = false; }\n        var vw = this._video.videoWidth;\n        var vh = this._video.videoHeight;\n        if (this._videoInfo && (this._videoInfo.videoWidth !== vw || this._videoInfo.videoHeight !== vh)) {\n            this._videoInfo.videoWidth = vw;\n            this._videoInfo.videoHeight = vh;\n            this.emit(_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_NODE_EVENT"].VIDEO_RESIZE, { videoInfo: this._videoInfo, isNative: isNativeEvt });\n            this.adjustmentVideoSizeIfSmallBorder();\n        }\n    };\n    /**\n     * çå¬videoåç´ çå°ºå¯¸ååã\n     */\n    BaseVideoNode.prototype.addVideoElementResizeObserver = function () {\n        var _this = this;\n        if (!window.ResizeObserver) {\n            return;\n        }\n        if (!(this._video instanceof HTMLVideoElement)) {\n            return;\n        }\n        this.videoResizeObserver = new ResizeObserver(function (entries) {\n            _this.adjustmentVideoSizeIfSmallBorder();\n        });\n        this.videoResizeObserver.observe(this._video);\n    };\n    /**\n     * ç§»é¤videoåç´ çå°ºå¯¸ååççå¬ã\n     */\n    BaseVideoNode.prototype.removeVideoElementResizeObserver = function () {\n        if (this.videoResizeObserver && this._video && this._video instanceof HTMLVideoElement) {\n            this.videoResizeObserver.disconnect();\n            this.videoResizeObserver.unobserve(this._video);\n            this.videoResizeObserver = null;\n        }\n    };\n    /**\n    * videoæ ç­¾é»è®¤æ ·å¼object-fit: containï¼è¿æ ·é«å®½æ¯ä¸å¹éæ¶åï¼ä¼è¢«æ·»å é»è¾¹ã\n    * è¿ä¸ªå½æ°ç¨äºå½è§é¢æ¾ç¤ºå°ºå¯¸åæ­æ¾å¨å°ºå¯¸æå¾å°çè¯¯å·®æ¶åï¼ä¾å¦åºç°äº10pxä»¥ä¸çé»è¾¹ï¼ï¼é£å°±ç´æ¥éºæ»¡videoç»é¢(object-fit: cover)é¿åé»è¾¹\n    * çäº§çã\n    * å¨è§é¢åå§å°ºå¯¸åçåååvideoåç´ å°ºå¯¸åçååä¸¤ç§æåµä¸ï¼éè¦è°ç¨æ­¤å½æ°æ£æ¥ã\n    */\n    BaseVideoNode.prototype.adjustmentVideoSizeIfSmallBorder = function () {\n        if (!(this._video instanceof HTMLVideoElement)) {\n            // TODOï¼265æ²¡ææ¹æ¡å¤çå°é»è¾¹\n            return;\n        }\n        if (!this._videoInfo) {\n            // è½ç¶VideoNodeçå¬äºvideoåç´ å°ºå¯¸ååï¼ä½æ¯å¯è½æ²¡æè¢«æ­æ¾ï¼æä»¥videoInfoæ¯ç©ºç\n            return;\n        }\n        if (this._config.minFillBlackBorder <= 0) {\n            return;\n        }\n        var videoElementSize = _util__WEBPACK_IMPORTED_MODULE_6__["domTool"].getDomSize(this._video);\n        var videoElementWidth = videoElementSize.width, videoElementHeight = videoElementSize.height;\n        // è¿æ¯åè®¾ä¸ºcontainæ¨¡å¼ï¼ç®åºæ¥çç»é¢å®½åº¦\n        var picWidth = this._videoInfo.videoWidth * (videoElementHeight / this._videoInfo.videoHeight);\n        // è¿æ¯åè®¾ä¸ºcontainæ¨¡å¼ï¼ç®åºæ¥çç»é¢é«åº¦\n        var picHeight = this._videoInfo.videoHeight * (videoElementWidth / this._videoInfo.videoWidth);\n        var minBorder = this._config.minFillBlackBorder;\n        if (picWidth < videoElementWidth && picWidth >= videoElementWidth - minBorder) {\n            // ç»é¢å®½åº¦å°äºå®¹å¨å®½åº¦å·¦å³åºç°äºé»è¾¹ï¼å¹¶ä¸å°äºéå¼\n            _util__WEBPACK_IMPORTED_MODULE_6__["videoTool"].setElementFitType(this._video, \'cover\');\n        }\n        else if (picHeight < videoElementHeight && picHeight >= videoElementHeight - minBorder) {\n            // ç»é¢é«åº¦å°äºå®¹å¨é«åº¦ä¸ä¸åºç°äºé»è¾¹ï¼å¹¶ä¸å°äºéå¼\n            _util__WEBPACK_IMPORTED_MODULE_6__["videoTool"].setElementFitType(this._video, \'cover\');\n        }\n        else {\n            // å®¹å¿é»è¾¹\n            _util__WEBPACK_IMPORTED_MODULE_6__["videoTool"].setElementFitType(this._video, \'contain\');\n        }\n    };\n    BaseVideoNode.prototype.onVideoEventLoadeddata = function () {\n        this.emit(_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_NODE_EVENT"].VIDEO_BUFFER_CHANGE, { videoInfo: this._videoInfo });\n    };\n    BaseVideoNode.prototype.onVideoEventError = function () {\n        this.errorHandler();\n    };\n    /**\n     * åºéæ¶çå¤çå½æ°\n     * @param errorData åå§éè¯¯æ°æ®\n     */\n    BaseVideoNode.prototype.errorHandler = function (errorData) {\n        var error = this.parseErrorData(errorData);\n        this._logger.log(\'errorHandler(), error: \', error);\n        // å¼å§æ§è¡éè¯\n        this.retryWhenError(error);\n    };\n    /**\n     * ä»åç§åæ ¸çåå§ä¿¡æ¯ä¸­è§£æåºçæ åçéè¯¯ä¿¡æ¯ã\n     * @param errorData åå§éè¯¯æ°æ®\n     * @returns å¤çè¿çéè¯¯ä¿¡æ¯\n     */\n    BaseVideoNode.prototype.parseErrorData = function (errorData) {\n        var _a, _b;\n        var _c;\n        var code;\n        var message;\n        if (errorData) {\n            (_a = errorData.code, code = _a === void 0 ? _enums__WEBPACK_IMPORTED_MODULE_1__["ERROR_CODE"].UNKNOWN_ERR : _a, _b = errorData.message, message = _b === void 0 ? _enums__WEBPACK_IMPORTED_MODULE_1__["ERROR_MSG"].UNKNOWN : _b);\n            if (code === _enums__WEBPACK_IMPORTED_MODULE_1__["ERROR_CODE"].UNKNOWN_ERR) {\n                this._logger.log(\'parseErrorData, unknown err. data=\', errorData);\n            }\n            return { code: code, message: message };\n        }\n        // å¶ä»éè¯¯åä¸ºvideoæ ç­¾èªå¸¦çéè¯¯ç ä¿¡æ¯\n        var videoElementError = _enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_ELEMENT_ERROR"][(_c = this.videoElement.error) === null || _c === void 0 ? void 0 : _c.code]\n            || { code: _enums__WEBPACK_IMPORTED_MODULE_1__["ERROR_CODE"].UNKNOWN_ERR, message: _enums__WEBPACK_IMPORTED_MODULE_1__["ERROR_MSG"].UNKNOWN };\n        code = videoElementError.code;\n        message = videoElementError.message;\n        if (code === _enums__WEBPACK_IMPORTED_MODULE_1__["ERROR_CODE"].UNKNOWN_ERR) {\n            this._logger.error(\'parseErrorData, unknown err. video err=\', this.videoElement.error);\n        }\n        return { code: code, message: message };\n    };\n    BaseVideoNode.prototype.retryWhenError = function (error) {\n        // éè¦åå­ä¸ä¸ï¼é¿åstopInner()æthis._videoInfoç½®ç©º\n        var nextVideoInfo = this._videoInfo;\n        var retryUrlRet = this.setRetryUrl(nextVideoInfo);\n        // æ ¹æ®urlä¸çè¿ææ¶é´æ³å¤æ­urlconfigæ¯å¦å¯ç¨\n        var expireTimeStamp = nextVideoInfo.config.expireTimeStamp;\n        var isUrlExpired = typeof expireTimeStamp === \'undefined\' ? false : (expireTimeStamp < +new Date());\n        // ä¸æ¯æç»éè¯¯ && urlconfigæ²¡æè¿æ && æä¸ä¸ä¸ªéæ°å°åï¼è¿å ä¸ªæ¡ä»¶æ»¡è¶³æ¶éè¯\n        if (!error.fatal && !isUrlExpired && retryUrlRet) {\n            var retryCount = nextVideoInfo.getRetryCount();\n            this._logger.log(\'retryOnError(), retryCount=\', retryCount);\n            this.emit(_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_NODE_EVENT"].RETRY, __assign({ error: error, retryCount: retryCount, videoInfo: nextVideoInfo }, retryUrlRet));\n            this.stopInner(true);\n            // éè¯çè¯å¼ºè¡è¿å¥bufferingç¶æ\n            this.stateMgr.setWaiting();\n            // ä¸ä¸å¥æ­è½¬çbufferingç¶æå¯è½ä¸æåï¼ä¾å¦æ¯seekingç¶æå¡æ­»å¯¼è´çéè¯ï¼ï¼æä»¥å¨åºééè¯æ¶å¼ºå¶æ¾ç¤ºloadingå¨ç»\n            if (this._state !== _enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_STATE"].BUFFERING) {\n                this.setLoading(true);\n            }\n            this.doRetry(nextVideoInfo);\n            return;\n        }\n        this._logger.log(\'retryOnError(), fatal.\');\n        // æ æ³æ§è¡éè¯ï¼æç»å¤±è´¥\n        this._videoInfo.error = error;\n        // å¦ææ­£å¨åæ¢æ¸æ°åº¦ï¼reject promiseï¼æåºå¼å¸¸\n        if (this._levelSwitchingDefer) {\n            this._levelSwitchingDefer.reject();\n        }\n        this.stopInner(false, this._videoInfo);\n    };\n    /**\n     * å¼å§éè¯\n     */\n    BaseVideoNode.prototype.doRetry = function (videoInfo) {\n        // éè¯çæ¶é´è·åï¼\n        // å¦ævideoç»å»ºæ¶é´å¤§äº0åæ¿videoç»ä»¶ä¸çæ¶é´ï¼åæ¿videoInfoçplaytimeååºãè¿æ¯å ä¸ºseekæä½æ¶åå¦æåºç°éè¯¯éè¯ï¼videoInfoä¸ç\n        // playtimeå¹¶æ²¡ææ´æ°ï¼ä½æ¯video.currentTimeå·²ç»è¢«è®¾ç½®è¿æ¥äºï¼video.currentTimeå°±æ¯éè¯åçå®èµ·æ­ç¹\n        var playtime = videoInfo.playtime;\n        var retryPlaytime = this._video.currentTime > 0 ? this._video.currentTime : playtime;\n        var startTime = this._played ? retryPlaytime : this._userStartTime;\n        var retryHandler = this._played ? this.play.bind(this) : this.load.bind(this);\n        // æ³¨æï¼è¿ä¸ªå°æ¹è¦æéè¯çæ¶é´å¤å¶åvideoInfoä¸ï¼é¿åè¿ç»­å¤±è´¥æ æ³è·åæ¶é´çé®é¢\n        videoInfo.playtime = startTime;\n        retryHandler(videoInfo, { startTime: startTime });\n    };\n    BaseVideoNode.prototype.onDrmError = function (event) {\n        var _a = event.data, code = _a.code, message = _a.message;\n        this._logger.log("onDrmError(), code=".concat(code, "/msg=").concat(message));\n        this._videoInfo.error = event.data;\n        this.stopInner(false, this._videoInfo);\n    };\n    BaseVideoNode.prototype.setHealthEvents = function () {\n        var _this = this;\n        var healthEvtHandler = function (e) {\n            _this._logger.warn("get health evt!!! evt=".concat(e.type, "/uid=").concat(_this._videoInfo.uid, "/state=").concat(_this._state));\n            _this.retryWhenError(e.data);\n        };\n        this.checkPlayHealth.on(_check_health__WEBPACK_IMPORTED_MODULE_7__["HEALTH_EVTS"].STATE_STUCK, healthEvtHandler);\n        this.checkPlayHealth.on(_check_health__WEBPACK_IMPORTED_MODULE_7__["HEALTH_EVTS"].PLAYTIME_STUCK, healthEvtHandler);\n    };\n    /**\n     * è®¾ç½®videoæ ç­¾çäºä»¶çå¬\n     */\n    BaseVideoNode.prototype.setVideoEvents = function (value) {\n        var _this = this;\n        var _a;\n        if (this._eventAddedMap.videoEventAdded === value) {\n            return;\n        }\n        this._logger.log("setVideoEvents(), idx=".concat(this._idx, "/value=").concat(value, "/uid=").concat((_a = this._videoInfo) === null || _a === void 0 ? void 0 : _a.uid));\n        this._eventAddedMap.videoEventAdded = value;\n        Object.keys(this._videoEventMap).forEach(function (key) {\n            if (value) {\n                _this._video.addEventListener(key, _this._eventMap.video);\n            }\n            else {\n                _this._video.removeEventListener(key, _this._eventMap.video);\n            }\n        });\n    };\n    BaseVideoNode.prototype.setLoading = function (value, delayShowTimeMS) {\n        var _this = this;\n        if (delayShowTimeMS === void 0) { delayShowTimeMS = 0; }\n        // æ¾ç¤ºæèéèloadingï¼é½åå»æä¹åçè®¡æ¶å¨\n        if (this._setLoadingDelayTimeoutId > 0) {\n            window.clearTimeout(this._setLoadingDelayTimeoutId);\n            this._setLoadingDelayTimeoutId = 0;\n        }\n        if (value) {\n            if (delayShowTimeMS > 0) {\n                this._setLoadingDelayTimeoutId = window.setTimeout(function () {\n                    _this.emit(_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_NODE_EVENT"].SET_LOADING, { show: true });\n                }, delayShowTimeMS);\n            }\n            else {\n                this.emit(_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_NODE_EVENT"].SET_LOADING, { show: true });\n            }\n        }\n        else {\n            this.emit(_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_NODE_EVENT"].SET_LOADING, { show: false });\n        }\n    };\n    /**\n     * å¯¹videoæ ç­¾çäºä»¶åå¤ç\n     * @param e\n     */\n    BaseVideoNode.prototype.onVideoEvents = function (e) {\n        var _this = this;\n        var _a;\n        // è¿äºæ¡ä»¶ä¸ï¼äºä»¶é½ä¸¢å¼ï¼evtBlockingä¼å¨èªå¨æ­æ¾è§¦ååè®¾ç½®ï¼èªå¨æ­æ¾è§¦åç»æåæ¢å¤ï¼\n        if (this.state === _enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_STATE"].IDLE || !this._videoInfo || this._evtBlocking) {\n            this._logger.log("videoevt discard, idx=".concat(this._idx, "/uid=").concat((_a = this._videoInfo) === null || _a === void 0 ? void 0 : _a.uid, "/evttype=").concat(e.type, "/")\n                + "state=".concat(this.state, "/evtBlocking=").concat(this._evtBlocking));\n            return;\n        }\n        if (!IGNORE_EVT_TYPE.includes(e.type)) {\n            this._logger.log("videoevt, uid=".concat(this._videoInfo.uid, "/idx=").concat(this.idx, "/type=").concat(e.type, "/")\n                + "time=".concat(this._video.currentTime, "/duration=").concat(this._video.duration));\n        }\n        // ç±äºç¶ææºä¼è¿æ»¤æå¾å¤äºä»¶ï¼å æ­¤é¢å¤å°videoæ ç­¾çææäºä»¶æåº\n        this.emit(_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_NODE_EVENT"].ELEMENT_EVTS, { videoInfo: this._videoInfo, elementEvtType: e.type });\n        var closeToEnd = Math.abs(this._videoInfo.duration - this._videoInfo.playtime) < 0.1\n            && this._videoInfo.duration > 0;\n        if (e.type === \'pause\' && closeToEnd) {\n            // æäºæµè§å¨ä¼å¨ç»æä¹åæåºpauseäºä»¶ï¼å¦æåå°ä¸å¨çæåºäºä»¶å¯è½ä¼å¯¼è´å¼ç¨æ¹è¯¯å¤ãå æ­¤åä¸ä¸ªå»¶è¿ï¼å¦æé©¬ä¸æ¶å°endedäºä»¶ï¼åä¸ä¼æ´¾åã\n            this._pauseCloseToEndStateCheckTimeoutId = window.setTimeout(function () {\n                if (_this._videoEventMap[e.type]) {\n                    _this._videoEventMap[e.type](e);\n                }\n            }, 0);\n        }\n        else {\n            if (e.type === \'ended\' && this._pauseCloseToEndStateCheckTimeoutId > 0) {\n                window.clearTimeout(this._pauseCloseToEndStateCheckTimeoutId);\n                this._pauseCloseToEndStateCheckTimeoutId = 0;\n            }\n            if (this._videoEventMap[e.type]) {\n                this._videoEventMap[e.type](e);\n            }\n        }\n    };\n    BaseVideoNode.prototype.createStream = function (conf) {\n        return null;\n    };\n    /**\n     * ç»IVideoInfoè®¾ç½®åå¤éè¯çå°å\n     * @param vinfo IVideoInfoå¯¹è±¡\n     * @returns è¿åè®¾ç½®éè¯å°åçç»æï¼å¶ä¸­åå«è®¾ç½®ååè®¾ç½®åçå°åãå¦æè®¾ç½®å¤±è´¥ï¼è¿ånullå¼\n     */\n    BaseVideoNode.prototype.setRetryUrl = function (vinfo) {\n        var loadingUrl = vinfo.loadingUrl;\n        var prevUrl = loadingUrl;\n        var hasNextBackup = vinfo.setNextBackUrl();\n        if (hasNextBackup) {\n            return { prevUrl: prevUrl, curUrl: vinfo.loadingUrl };\n        }\n        return null;\n    };\n    /**\n     * ç¬¬ä¸æ¬¡æ­æ¾æ¶ï¼æ­¤æ¶å¿é¡»æ¯ç¨æ·è§¦åï¼ï¼å¨jsçåä¸ä¸ªäºä»¶å¾ªç¯éç´æ¥è°ç¨ä¸æ¬¡videoæ ç­¾çplayæ¹æ³ã\n     */\n    BaseVideoNode.prototype.triggerAutoplay = function () {\n        var _this = this;\n        // è§¦åèªå¨æ­æ¾æ¶åä¼è°ç¨videoçplayåpauseæ¹æ³ï¼è¿æ¶åçè°ç¨ååºçäºä»¶éè¦ä¸¢å¼\n        this._evtBlocking = true;\n        return this._autoPlayPolicy.userTrigger()\n            .then(function () { return _this._evtBlocking = false; })\n            .catch(function (e) {\n            _this._evtBlocking = false;\n            // æåºéè¯¯è®©è°ç¨æ¹catch\n            throw e;\n        });\n    };\n    Object.defineProperty(BaseVideoNode.prototype, "useWorker", {\n        // eslint-disable-next-line @typescript-eslint/class-literal-property-style\n        get: function () {\n            return false;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BaseVideoNode.prototype, "idx", {\n        get: function () {\n            return this._idx;\n        },\n        set: function (value) {\n            this._idx = value;\n            this._video.dataset.idx = "".concat(value);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BaseVideoNode.prototype, "videoElement", {\n        get: function () {\n            return this._video;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BaseVideoNode.prototype, "videoSize", {\n        get: function () {\n            return { width: this._video.videoWidth, height: this._video.videoHeight };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BaseVideoNode.prototype, "videoBuffered", {\n        get: function () {\n            return _util__WEBPACK_IMPORTED_MODULE_6__["videoTool"].getBuffered(this._video);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BaseVideoNode.prototype, "config", {\n        get: function () {\n            return this._config;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BaseVideoNode.prototype, "playbackRate", {\n        get: function () {\n            return this._video.playbackRate;\n        },\n        set: function (value) {\n            this._playbackRate = value;\n            // chrome: "NotSupportedError" DOMException\n            try {\n                this._video.playbackRate = value;\n            }\n            catch (e) {\n                this._logger.warn("set playbackRate: ".concat(e === null || e === void 0 ? void 0 : e.message));\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    BaseVideoNode.prototype.videoplay = function () {\n        var _this = this;\n        var _a;\n        this._logger.log("videoplay(), uid=".concat((_a = this._videoInfo) === null || _a === void 0 ? void 0 : _a.uid, "/state=").concat(this.state, "/idx=").concat(this.idx));\n        var playPromise = this._video.play();\n        if (playPromise) {\n            playPromise.catch(function (e) {\n                _this._logger.warn("".concat(_this.idx, " play() catch: ").concat(e.name, ", ").concat(e.message));\n                var isAutoPlayBlocked = _util__WEBPACK_IMPORTED_MODULE_6__["videoTool"].isAutoPlayBlockedMessage(e.message);\n                if (isAutoPlayBlocked) {\n                    // èªå¨æ­æ¾è¢«é»æ­¢ä¸å®æ æ³èµ·æ­ï¼å¯è½ç¨æ·å¨ç­å¾ç¶æï¼æ­¤æ¶è¦å»æloadingå¨ç»\n                    _this.setLoading(false);\n                }\n                _this.emit(_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_NODE_EVENT"].PLAY_PROMISE_CATCHED, { videoInfo: _this._videoInfo, isAutoPlayBlocked: isAutoPlayBlocked });\n            });\n        }\n        else {\n            // å¼å®¹ IEï¼play è¿å undefined çæåµä¸ï¼ç´æ¥è¿åä¸ä¸ª resolve ç Promise\n            playPromise = Promise.resolve();\n        }\n        this._video.playbackRate = this._playbackRate;\n        return playPromise;\n    };\n    Object.defineProperty(BaseVideoNode.prototype, "currentVideoInfo", {\n        get: function () {\n            return this._videoInfo;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    BaseVideoNode.prototype.pause = function () {\n        if (!this._played) {\n            this._logger.warn(\'pause(), VideoNode has not been played\');\n            return;\n        }\n        if (!this.stateMgr.validCallState(_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_STATE"].PAUSE)) {\n            this._logger.log("call pause in invaild state ".concat(this._state));\n            return;\n        }\n        this.pauseInner(_enums__WEBPACK_IMPORTED_MODULE_1__["PAUSE_TYPE"].USER);\n    };\n    BaseVideoNode.prototype.pauseInner = function (type) {\n        var _a;\n        if (type === void 0) { type = _enums__WEBPACK_IMPORTED_MODULE_1__["PAUSE_TYPE"].INNER; }\n        this._logger.log("pause(), uid=".concat((_a = this._videoInfo) === null || _a === void 0 ? void 0 : _a.uid, "/state=").concat(this.state, "/idx=").concat(this.idx, "/type=").concat(type));\n        this._pauseType = type;\n        this._video.pause();\n    };\n    BaseVideoNode.prototype.resume = function () {\n        throw new Error(\'not implements\');\n    };\n    Object.defineProperty(BaseVideoNode.prototype, "supportPlaybackRate", {\n        get: function () {\n            // x5çmseä¸æ¯æåé\n            return !_util__WEBPACK_IMPORTED_MODULE_6__["uaTool"].browser.x5;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BaseVideoNode.prototype, "duration", {\n        /**\n         * æ­æ¾æ¶é¿\n         */\n        get: function () {\n            var value = this._videoInfo ? this._videoInfo.duration : 0;\n            // æ²¡æèµå¼srcçæ¶åHTMLVIDEOELEMENT.durationå¯è½è¿åNaN\n            return Number.isNaN(value) ? 0 : value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BaseVideoNode.prototype, "volume", {\n        get: function () {\n            if (this._video.muted) {\n                return 0;\n            }\n            return this._video.volume;\n        },\n        set: function (value) {\n            if (value < 0 || value > 1) {\n                this._logger.warn(\'The volume value range is [0,1]\');\n                return;\n            }\n            this._video.volume = value;\n            this._video.muted = value <= 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BaseVideoNode.prototype, "playtime", {\n        /**\n         * æ­æ¾è¿åº¦ï¼ä¸ä¸å®æ¯videoæ ç­¾çcurrentTimeï¼å¦ææ¯ä¸é´æ­æ­æ¾ï¼videoæ ç­¾æ¶é´ä¸æ­å¢é¿ï¼ä½æ¯è¿ä¸ªå±æ§åªæ¯åä¸ªæ­æ¾æ®µä¸çåç§»æ­æ¾æ¶é´ï¼\n         */\n        get: function () {\n            return this._videoInfo ? this._videoInfo.playtime : 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BaseVideoNode.prototype, "state", {\n        get: function () {\n            return this._state;\n        },\n        set: function (value) {\n            var _a;\n            if (this._state === value) {\n                return;\n            }\n            var oldState = this._state;\n            this._state = value;\n            if (this._videoInfo) {\n                this._videoInfo.state = this._state;\n            }\n            this._logger.log("set state(), uid=".concat((_a = this._videoInfo) === null || _a === void 0 ? void 0 : _a.uid, "/idx=").concat(this._idx, "/old=").concat(oldState, "/new=").concat(value));\n            var evtData = {\n                videoInfo: this._videoInfo,\n                new: value,\n                old: oldState,\n            };\n            // ä»¥ä¸ç¶æéè¦å¢å ç¹æ®å­æ®µæ´¾ååºå»\n            if (value === _enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_STATE"].PAUSE) {\n                evtData.pauseType = this._pauseType || _enums__WEBPACK_IMPORTED_MODULE_1__["PAUSE_TYPE"].SYS; // æ¢ä¸æ¯ç¨åºè§¦åä¹ä¸æ¯ç¨æ·è§¦åï¼é£å°±æ¯ç³»ç»è«åå¶å¦è§¦åï¼\n                this._pauseType = void 0;\n            }\n            else if (value === _enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_STATE"].SEEKING) {\n                evtData.seekingTime = this._targetSeekTime;\n                evtData.isUserSeek = this._isUserSeek;\n                this._targetSeekTime = -1;\n            }\n            else if (value === _enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_STATE"].SEEKED) {\n                evtData.isUserSeek = this._isUserSeek;\n            }\n            this.setLoadingOnStateChange();\n            this.emit(_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_NODE_EVENT"].STATE_CHANGE, evtData);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    BaseVideoNode.prototype.stop = function () {\n        this.stopInner();\n    };\n    BaseVideoNode.prototype.updatePlaytime = function (value, silentEvt) {\n        if (silentEvt === void 0) { silentEvt = false; }\n        if (!this._videoInfo) {\n            return;\n        }\n        var _a = this.performanceMonitor.report(), averageDecodeTimeInMs = _a.averageDecodeTimeInMs, totalVideoFrames = _a.totalVideoFrames, droppedVideoFrames = _a.droppedVideoFrames, frameDroppedInPercentage = _a.frameDroppedInPercentage;\n        this._videoInfo.qualityInfo.droppedVideoFrames = droppedVideoFrames;\n        this._videoInfo.qualityInfo.totalVideoFrames = totalVideoFrames;\n        this._videoInfo.qualityInfo.averageDecodeTimeInMs = averageDecodeTimeInMs;\n        this._videoInfo.qualityInfo.frameDroppedInPercentage = frameDroppedInPercentage;\n        if (this._videoInfo.playtime !== value) {\n            this._videoInfo.playtime = value;\n        }\n        if (!silentEvt) {\n            this.emit(_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_NODE_EVENT"].TIME_UPDATE, { videoInfo: this._videoInfo });\n        }\n    };\n    BaseVideoNode.prototype.destroy = function () {\n        var _a, _b, _c, _d;\n        this.stopInner();\n        if (this._video) {\n            if (this._eventMap) {\n                this.setVideoEvents(false);\n                this._eventMap = null;\n            }\n            _util__WEBPACK_IMPORTED_MODULE_6__["videoTool"].clear(this._video);\n            _util__WEBPACK_IMPORTED_MODULE_6__["videoTool"].removeElement(this._video, this._videoElementContainer);\n            this._video.dataset.used = _enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_ELEMENT_STATE"].FREE;\n        }\n        (_a = this._autoPlayPolicy) === null || _a === void 0 ? void 0 : _a.destroy();\n        (_b = this.stateMgr) === null || _b === void 0 ? void 0 : _b.destroy();\n        this.removeAllListeners();\n        this.removeVideoElementResizeObserver();\n        (_c = this._drm) === null || _c === void 0 ? void 0 : _c.destroy();\n        this._autoPlayPolicy = null;\n        this._video = null;\n        this._videoInfo = null;\n        this._videoElementContainer = null;\n        this._played = false;\n        this._config = null;\n        (_d = this.checkPlayHealth) === null || _d === void 0 ? void 0 : _d.destroy();\n        this.mainTaskLoop.destroy();\n        this.performanceMonitor.stop();\n        this._logger.log(\'VideoNode has been destroyed!\');\n    };\n    /**\n     * å½ç¶æååæ¶è®¾ç½®loadingå¨ç»æ¯å¦å±ç¤º\n     */\n    BaseVideoNode.prototype.setLoadingOnStateChange = function () {\n        // æªå¼æ­ä¹åçç¶æååï¼é½ä¸æ¾ç¤ºloading\n        if (!this._played) {\n            this.setLoading(false);\n            return;\n        }\n        // è¿äºç¶æä¸ï¼æ¾ç¤ºloadingå¨ç»\n        if ([_enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_STATE"].BUFFERING, _enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_STATE"].SEEKING].includes(this._state)) {\n            var delayTimeMS = 500;\n            // åä¸ºseekingãbufferingç­ç¶æï¼æ¾ç¤ºloadingå¨ç»ï¼ä½æ¯å»¶è¿ä¸å®æ¶é´å±ç¤ºï¼é¿ååºç°loadingå¨ç»å¾å¿«åºç°åæ¶å¤±\n            this.setLoading(true, delayTimeMS);\n            return;\n        }\n        // ä¸é¢é»è¾å¤æ­ä½æ¶å»æloadingå¨ç»\n        if (\n        // ç´æ­åªæcanplayç¶ææå»æloadingå¨ç»\n        // !![æ³¨æ]ç´æ­æ¶canplayä¸å»æloadingå¨ç»çåå æ¯ï¼\n        // å½æäºæµè§å¨ï¼wechat-iosï¼ä¸æ¯æèªå¨æ­æ¾æ¶è°ç¨loadæ¥å£æ æ³å è½½æ°æ®ï¼BaseVideoNodeä¼å¼ºè¡æ´¾åä¸ä¸ªcanplayç¶æåºå»ï¼ç¶åç­å¾ç¨æ·ç¹\n        // å»ãç¨æ·ç¹å»æ­æ¾ä»¥åè°ç¨playï¼æ­¤æ¶æçæ­£å¼å§å è½½æ°æ®å¹¶æ­æ¾ãæ­¤ç§åºæ¯å¦æcanplayç¶æå»æäºloadingå¨ç»ï¼playä»¥åå°±ä¼æè¾é¿æ¶é´çé»\n        // å±èæ²¡æloadingï¼ä½éªè¾å·®ãå æ­¤ï¼ç´æ­å¨canplayçæ¶åä¸å»æloadingå¨ç»ï¼èæ¯å¨autoplayBlock/playingä¸¤ç§æåµä¸å»æãè¿æ ·å¯ä»¥ä¿\n        // è¯ä½éªã\n        (this._config.type === _enums__WEBPACK_IMPORTED_MODULE_1__["PLAY_MODE"].LIVE && _enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_STATE"].CANPLAY !== this._state)\n            // ç¹æ­é¤äºä¸é¢çbufferingåseekingç¶æï¼é½ä¸æ¾ç¤º\n            || this._config.type === _enums__WEBPACK_IMPORTED_MODULE_1__["PLAY_MODE"].VOD) {\n            this.setLoading(false);\n        }\n    };\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", [String]),\n        __metadata("design:returntype", Promise)\n    ], BaseVideoNode.prototype, "setLevel", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", [Object]),\n        __metadata("design:returntype", Promise)\n    ], BaseVideoNode.prototype, "setAudioTrack", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", [Boolean]),\n        __metadata("design:returntype", void 0)\n    ], BaseVideoNode.prototype, "setCheckLoadTimeoutEnable", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", []),\n        __metadata("design:returntype", void 0)\n    ], BaseVideoNode.prototype, "setEndInner", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", [Boolean, Object]),\n        __metadata("design:returntype", void 0)\n    ], BaseVideoNode.prototype, "stopInner", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", [Object]),\n        __metadata("design:returntype", void 0)\n    ], BaseVideoNode.prototype, "retryWhenError", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", []),\n        __metadata("design:returntype", void 0)\n    ], BaseVideoNode.prototype, "pause", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", [String]),\n        __metadata("design:returntype", void 0)\n    ], BaseVideoNode.prototype, "pauseInner", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", []),\n        __metadata("design:returntype", void 0)\n    ], BaseVideoNode.prototype, "stop", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", []),\n        __metadata("design:returntype", void 0)\n    ], BaseVideoNode.prototype, "destroy", null);\n    return BaseVideoNode;\n}(_libs_event_emitter__WEBPACK_IMPORTED_MODULE_4__["default"]));\n/* harmony default export */ __webpack_exports__["default"] = (BaseVideoNode);\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/base/base-videonode.ts?')},"./src/base/check-health.ts":function srcBaseCheckHealthTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CheckHealth", function() { return CheckHealth; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HEALTH_EVTS", function() { return HEALTH_EVTS; });\n/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../enums */ "./src/enums.ts");\n/* harmony import */ var _libs_event_emitter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../libs/event-emitter */ "./src/libs/event-emitter.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar CheckHealth = /** @class */ (function (_super) {\n    __extends(CheckHealth, _super);\n    function CheckHealth(vn) {\n        var _this = _super.call(this) || this;\n        /** è®°å½å½åç¶æçå¼å§æ¶é´æ³ */\n        _this.stateStartTimeStamp = 0;\n        /** ä¸ä¸å¸§çæ­æ¾æ¶é´ç¹ */\n        _this.preFramePlaytime = 0;\n        /** å·²ç»å¨playtimeæ ååæ¶åæ»çå¸§æ° */\n        _this.playtimeStalledFrameCount = 0;\n        _this.videoNode = vn;\n        _this.setVideoNodeEvts(true);\n        return _this;\n    }\n    /**\n     * å¾ªç¯è°ç¨æ­¤å½æ°æ¥æ£æ¥æ­æ¾å¥åº·æåµ\n     */\n    CheckHealth.prototype.loop = function () {\n        var curTimeStamp = +new Date();\n        // æ£æ¥ç¶æåååæ£æ¥æ¶é´ååçé»è¾æ¯åå¼çãå®éä¸è¿ä¸¤ä¸ªé»è¾æ¯ç±»ä¼¼çï¼é½æ¯å¨æä¸ªç¶æä¸æ­æ¾è¿åº¦é¿æ¶é´åæ»ãä½æ¯åå¼çåå æ¯å¨ç´æ­çåºæ¯ä¸\n        // åç°hls.jsåæ ¸ä¼åçå¨seekingç¶æå¹¶ä¸ä¸æ­seekï¼æ­¤æ¶æ­æ¾è¿åº¦æ¯ä¸æ­ååç\n        // å æ­¤æ æ³å°æ¯ä¸ªç¶æçåæ»é»è¾åºäºæ­æ¾è¿åº¦åæ»æ¥ç¼åï¼èæ¯ç¶æåæ»ç¨ä¸ä¸ªå½æ°ï¼æ­æ¾è¿åº¦åæ»ç¨ä¸ä¸ªå½æ°ã\n        this.checkStateStalled(curTimeStamp);\n        this.checkPlaytimeStalled();\n    };\n    CheckHealth.prototype.destroy = function () {\n        this.setVideoNodeEvts(false);\n        this.removeAllListeners();\n        this.stateStartTimeStamp = 0;\n        this.videoNode = null;\n        this.videoNodeEvtMap = null;\n        this.preFramePlaytime = 0;\n        this.playtimeStalledFrameCount = 0;\n    };\n    CheckHealth.prototype.setVideoNodeEvts = function (value) {\n        var _a;\n        var _this = this;\n        if (!this.videoNodeEvtMap) {\n            this.videoNodeEvtMap = (_a = {},\n                _a[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_NODE_EVENT"].STATE_CHANGE] = this.videoNodeStateChange.bind(this),\n                _a);\n        }\n        Object.keys(this.videoNodeEvtMap).forEach(function (key) {\n            if (value) {\n                _this.videoNode.on(key, _this.videoNodeEvtMap[key]);\n            }\n            else {\n                _this.videoNode.off(key, _this.videoNodeEvtMap[key]);\n            }\n        });\n    };\n    CheckHealth.prototype.videoNodeStateChange = function (e) {\n        // è®¾ç½®æ¯ä¸ªç¶ææ­è½¬æ¶çèµ·å§æ¶é´æ³\n        this.stateStartTimeStamp = +new Date();\n    };\n    /**\n     * æ£æ¥æ¯å¦å¨æäºç¶æä¸é¿æ¶é´åæ»\n     */\n    CheckHealth.prototype.checkStateStalled = function (curTimeStamp) {\n        var _a = this.videoNode, config = _a.config, state = _a.state;\n        if ([_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].BUFFERING, _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].SEEKING].indexOf(state) === -1) {\n            // åªæ£æ¥è¿äºç¶æçåæ»\n            return;\n        }\n        if (this.stateStartTimeStamp <= 0 || config.maxStateStalledTime <= 0) {\n            return;\n        }\n        if (curTimeStamp - this.stateStartTimeStamp > config.maxStateStalledTime) {\n            // éè¯åæå½åç¶æçå¼å§æ¶é´æ³éç½®ãå ä¸ºéè¯è¿ç¨ä¸­ç¶æå¯è½æ ååï¼ä¾å¦ä¸ç´æ¯bufferingç¶æï¼ï¼éç½®åå¯é¿åéå¤çéè¯ã\n            this.stateStartTimeStamp = 0;\n            this.emit(HEALTH_EVTS.STATE_STUCK, {\n                code: _enums__WEBPACK_IMPORTED_MODULE_0__["ERROR_CODE"].STATE_STUCK,\n                message: _enums__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].PLAY_STUCK,\n                state: state,\n            });\n        }\n    };\n    /**\n   * æ£æ¥å¨playingç¶æä¸playtimeæ¯å¦é¿æ¶é´åæ»\n   */\n    CheckHealth.prototype.checkPlaytimeStalled = function () {\n        var _a = this.videoNode, config = _a.config, state = _a.state, videoElement = _a.videoElement;\n        if (state !== _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].PLAYING\n            || videoElement.duration <= 0\n            // currentTime <= 0æ¡ä»¶æèªèæ­æ¾å¨ï¼è¯´æå¦ä¸ï¼\n            // æäºæµè§å¨å¨ç´æ­æ¶ä¸ä¼ååºtimeupdateäºä»¶ï¼ä¸ä¼æ´æ°currentTimeçå¼ï¼è¿éè¦é¿åä¸º0çæåµ\n            || videoElement.currentTime <= 0\n            || config.maxPlaytimeStalledTime <= 0) {\n            return;\n        }\n        if (this.preFramePlaytime > 0) {\n            if (this.preFramePlaytime !== videoElement.currentTime) {\n                // åªè¦æ­æ¾è¿åº¦æååï¼å°±éç½®åæ»çå¸§æ°\n                this.playtimeStalledFrameCount = 0;\n            }\n            else {\n                // å¦åå¼å§æ£æ¥åæ»çæ¶é¿\n                this.playtimeStalledFrameCount++;\n                if (this.playtimeStalledFrameCount * 16.7 > config.maxPlaytimeStalledTime) {\n                    this.playtimeStalledFrameCount = 0;\n                    this.emit(HEALTH_EVTS.PLAYTIME_STUCK, {\n                        code: _enums__WEBPACK_IMPORTED_MODULE_0__["ERROR_CODE"].ORG_PLAY_STUCK_ERR,\n                        message: _enums__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].PLAY_STUCK,\n                        state: state,\n                    });\n                }\n            }\n        }\n        this.preFramePlaytime = videoElement.currentTime;\n    };\n    return CheckHealth;\n}(_libs_event_emitter__WEBPACK_IMPORTED_MODULE_1__["default"]));\n\nvar HEALTH_EVTS;\n(function (HEALTH_EVTS) {\n    HEALTH_EVTS["STATE_STUCK"] = "state-stuck";\n    HEALTH_EVTS["PLAYTIME_STUCK"] = "playtime-stuck";\n})(HEALTH_EVTS || (HEALTH_EVTS = {}));\n;\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/base/check-health.ts?')},"./src/base/config-helper.ts":function srcBaseConfigHelperTs(module,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"createConfig\", function() { return createConfig; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"convertVideoElementConfig\", function() { return convertVideoElementConfig; });\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util */ \"./src/util/index.ts\");\n/* harmony import */ var _default_player_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./default-player-config */ \"./src/base/default-player-config.ts\");\nvar __assign = (undefined && undefined.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n\n\n/**\n * æ ¹æ®ç¨æ·ä¼ å¥çéç½®é¡¹çææ­æ¾å¨åé¨ä½¿ç¨çéç½®é¡¹\n */\nfunction createConfig(userConfig) {\n    var _a, _b, _c;\n    return __assign(__assign(__assign({ instanceId: _util__WEBPACK_IMPORTED_MODULE_0__[\"commonTool\"].createGUID() }, _default_player_config__WEBPACK_IMPORTED_MODULE_1__[\"defaultPlayerConfig\"]), userConfig), { \n        // originåæ ¸éç½®ä¸çmaxVideoNodeCountå·²åºå¼ï¼æä»¥åè¯»æ­æ¾å¨configä¸çmaxVideoNodeCount\n        maxVideoNodeCount: (_c = (_a = userConfig.maxVideoNodeCount) !== null && _a !== void 0 ? _a : (_b = userConfig.originKernelConfig) === null || _b === void 0 ? void 0 : _b.maxVideoNodeCount) !== null && _c !== void 0 ? _c : _default_player_config__WEBPACK_IMPORTED_MODULE_1__[\"defaultPlayerConfig\"].maxVideoNodeCount });\n}\n/**\n * æ ¹æ®ç¨æ·ä¼ å¥çvideoæ ç­¾éç½®é¡¹ï¼è½¬æ¢ä¸ºçævideoæ ç­¾å±æ§åæ ·å¼çéç½®\n * @param videoConfig ç¨æ·videoæ ç­¾éç½®é¡¹\n * @returns attrOptsä¸ºçæçattributeå±æ§ï¼cssOptsä¸ºçæçæ ·å¼å±æ§\n */\nfunction convertVideoElementConfig(videoConfig) {\n    var presetStyleMap = {\n        position: 'absolute',\n        width: '100%',\n        height: '100%',\n        top: 0,\n        left: 0,\n        objectFit: 'contain',\n    };\n    var vaildStyleKeys = Object.keys(presetStyleMap);\n    var presetAttrMap = {\n        playsinline: { playsinline: 'isiPhoneShowPlaysinline', 'webkit-playsinline': 'isiPhoneShowPlaysinline' },\n        airplay: { airplay: 'allow', 'x-webkit-airplay': 'allow' },\n        crossorigin: { crossOrigin: 'anonymous' },\n        'h5-page': { 'x5-video-player-type': 'h5-page' },\n    };\n    var presetAttrOpts = {\n        playsinline: true,\n        'h5-page': true,\n    };\n    Object.keys(videoConfig).forEach(function (key) {\n        if (vaildStyleKeys.indexOf(key) === -1) {\n            // ä¸æ¯csså±æ§ï¼æå å¥\n            presetAttrOpts[key] = videoConfig[key];\n        }\n    });\n    var attrOpts = Object.keys(presetAttrOpts).reduce(function (res, key) {\n        if (presetAttrMap[key] && typeof presetAttrOpts[key] === 'boolean') {\n            // å¦æç¨æ·ä¼ å¥çkeyæ¯é¢è®¾éçæä¸ä¸ªï¼å¹¶ä¸ä¸ºtrueï¼æä»¬ä¸æ·»å ç¨æ·çkeyèæ¯å±å¼é¢è®¾åçå±æ§\n            res = __assign(__assign({}, res), (presetAttrOpts[key] ? presetAttrMap[key] : {}));\n        }\n        else {\n            // ç¨æ·ä¼ å¥äºé¢è®¾åæ°å¤çå¼ï¼ç´æ¥èµå¼ä¸åæ£æ¥\n            res[key] = presetAttrOpts[key];\n        }\n        return res;\n    }, {});\n    var cssOpts = vaildStyleKeys.reduce(function (res, key) {\n        var _a;\n        res[key] = (_a = videoConfig[key]) !== null && _a !== void 0 ? _a : presetStyleMap[key];\n        return res;\n    }, {});\n    return {\n        attrOpts: attrOpts,\n        cssOpts: cssOpts,\n    };\n}\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/base/config-helper.ts?")},"./src/base/default-player-config.ts":function srcBaseDefaultPlayerConfigTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defaultPlayerConfig", function() { return defaultPlayerConfig; });\n/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../enums */ "./src/enums.ts");\n\nvar defaultPlayerConfig = {\n    /** æ¯ç¹æ­æ¨¡å¼è¿æ¯ç´æ­æ¨¡å¼ */\n    type: _enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_MODE"].VOD,\n    /**\n     * å¦ææ¯ææ­å¼åæ¢ï¼å¨è§é¢æ­æ¾æ¥è¿ç»ææ¶ï¼æ¯ä¸éè¦é©¬ä¸è·³è½¬çãä¾å¦ç¦»æ­æ¾ç»æåªæ1säºï¼é£ä¹ææ­å¼åæ¢å°±æ²¡å¿è¦äºã\n     * <br>ãæ³¨ãï¼ä»ç¹æ­æ­æ¾æ¶åææ\n     */\n    interruptPlayNextMinTime: 1,\n    /**\n     * å¯¹å¤ä»½çå°ååè¡¨çæå¤§éè¯å¼ï¼è½®è¯¢å¤ç¨å°ååè¡¨æ¶ï¼ä¸ç®¡åè¡¨å¤ç¨å°åæ°ç®æå¤å°ï¼åªéè¦æ­¤æå¤§å¼\n     */\n    backupUrlsMaxRetryCount: 5,\n    /** é¢å è½½çæå¤§è¶æ¶æ¶é´ */\n    maxPreloadTimeout: 30000,\n    /**\n     * @deprecated\n     */\n    maxBufferingTimeout: 30000,\n    /** æäºç¶æå¯åççæå¤§æ¶é´ï¼ä¾å¦ç¼å²ç¶æãåä½æ¯«ç§ */\n    maxStateStalledTime: 30000,\n    /** å¨playingç¶æä¸ï¼playtimeæå¤§åæ»æ¶é´ */\n    maxPlaytimeStalledTime: 10000,\n    /**\n     * æ¯å¦æ¯åè¡¨æ­æ¾\n     * <br>æ³¨æï¼\n     * <br>æ­æ¾å¨çåè¡¨æ­æ¾åä¸¤ç§åºæ¯ï¼\n     * <br>1. playæ¥å£ä¼ å¥UrlConfigæ°ç»çåè¡¨æ­æ¾ï¼æ­æ¾ä»¥åæ æ³å¹²æ¶ä»»ä½æ¼æ¥æ­æ¾é»è¾\n     * <br>2. ä¾èµpreloadNextãappendNextæ¥å£ççµæ´»çåè¡¨æ­æ¾åºæ¯ãæ­¤æ¶éè¦ä¼ å¥æ­¤åæ°ï¼æ­æ¾å¨åæ°¸è¿å¨å·²æ­æ¾ç¶æï¼playedä¸ºtrueï¼ï¼è¦æ³ç»æ\n     * æ­æ¾ï¼éè¦æå¨è°ç¨stopæ¥å£\n     */\n    isPlayList: false,\n    preloadType: _enums__WEBPACK_IMPORTED_MODULE_0__["PRELOAD_TYPE"].AUTO_LOAD,\n    /**\n     * é»è®¤åå»ºçæå¤§VideoNodeæ°éãæ­¤å¼ä¼å½±åå°å¯ä»¥åæ¶é¢å è½½çè§é¢æ°ï¼ä¾å¦å¦æéè¦åæ¶é¢å è½½3ä¸ªè§é¢ï¼è¿ä¸ªå¼å°±éè¦æå®ä¸º3+1\n     */\n    maxVideoNodeCount: 1,\n    /**\n     * videoæ¸²æçè§é¢ç»é¢åæ­æ¾å¨é«å®½æ¯ä¸å¹éæ¶åï¼åè®¸çé»è¾¹æå°å¼ãå¦æå°äºç­äºæå°å¼ï¼æ­æ¾å¨ä¼å¼ºå¶å°è§é¢ç»é¢ä¼å¡«åé»è¾¹ã\n     * æ³¨æï¼å¦æä¼ å¥å¼å°äºç­äº0ï¼åæ­æ¾å¨ä¸ä¼å¡«åã\n     */\n    minFillBlackBorder: 10,\n    minFragmentCountForSmoothLevelSwitching: 3,\n};\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/base/default-player-config.ts?')},"./src/base/evt-bus.ts":function srcBaseEvtBusTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "kernelEvtBus", function() { return kernelEvtBus; });\n/* harmony import */ var _libs_event_emitter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../libs/event-emitter */ "./src/libs/event-emitter.ts");\n\n/**\n * æä¾ç»kernelå¾å¤æ´¾åèªå®ä¹äºä»¶ï¼ä¾å¦hlsåæ ¸æ´¾åè·thls.jsç¸å³çäºä»¶åºå»ã\n */\nvar kernelEvtBus = new _libs_event_emitter__WEBPACK_IMPORTED_MODULE_0__["default"]();\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/base/evt-bus.ts?')},"./src/base/performance-monitor.ts":function srcBasePerformanceMonitorTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PerformanceMonitor", function() { return PerformanceMonitor; });\n/* harmony import */ var _util_index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/index */ "./src/util/index.ts");\n\n/** videoæ§è½çæ§æ¨¡å */\nvar PerformanceMonitor = /** @class */ (function () {\n    function PerformanceMonitor(video) {\n        var _this = this;\n        /** videoæ ç­¾è¿åçæ»å¸§æ° */\n        this.totalVideoFrames = 0;\n        /** videoæ ç­¾è¿åçä¸¢å¸§æ° */\n        this.droppedVideoFrames = 0;\n        /** RVFCè¿åçå¸§å¤çæ»èæ¶ */\n        this.totalDecodeTimeInMs = 0;\n        /** RVFCè¿åçæ¸²ææ»å¸§æ° */\n        this.presentedVideoFrames = 0;\n        this.preTotalVideoFrames = -1;\n        this.preDroppedVideoFrames = -1;\n        this.calcIntervalFrameDroppedTickCount = 0;\n        this.videoFrameCallback = function (now, meta) {\n            _this.totalDecodeTimeInMs += meta.processingDuration * 1000;\n            _this.presentedVideoFrames = meta.presentedFrames;\n            _this.video.requestVideoFrameCallback(_this.videoFrameCallback);\n        };\n        this.video = video;\n        this.setupRVFC();\n    }\n    /**\n     * å¨timeupdateä¸­å¾ªç¯è°ç¨è®¡ç®ç¬æ¶å¸§ç\n     */\n    PerformanceMonitor.prototype.calcIntervalFrameDropped = function () {\n        var TIMEUPDATE_TICK_COUNT = 5;\n        this.calcIntervalFrameDroppedTickCount++;\n        if (this.calcIntervalFrameDroppedTickCount < TIMEUPDATE_TICK_COUNT) {\n            // TIMEUPDATE_TICK_COUNTä¸ªtimeupdateäºä»¶ï¼è®¡ç®ä¸æ¬¡å¸§ç\n            return;\n        }\n        this.calcIntervalFrameDroppedTickCount = 0;\n        if (this.preVisiblityState !== document.visibilityState) {\n            // å½é¡µé¢å¯è§åçååæ¶ï¼éç½®åå§å¼ãä¾å¦ä»åå°åååå°æ¶ã\n            this.preTotalVideoFrames = -1;\n            this.preDroppedVideoFrames = -1;\n            this.preVisiblityState = document.visibilityState;\n        }\n        else if (this.preVisiblityState === \'visible\') {\n            var _a = _util_index__WEBPACK_IMPORTED_MODULE_0__["videoTool"].getVideoPlaybackQuality(this.video), totalVideoFrames = _a.totalVideoFrames, droppedVideoFrames = _a.droppedVideoFrames;\n            // åå§å¼çæ¶åï¼è®°å½å½åå¼\n            if (this.preTotalVideoFrames === -1) {\n                this.preTotalVideoFrames = totalVideoFrames;\n            }\n            if (this.preDroppedVideoFrames === -1) {\n                this.preDroppedVideoFrames = droppedVideoFrames;\n            }\n            // å¼å§è®¡ç®æ¯ä¸ªtimeupdataä¹é´å¸§ææ çå·®å¼\n            var diffTotalVideoFrames = totalVideoFrames - this.preTotalVideoFrames;\n            var diffDroppedVideoFrames = droppedVideoFrames - this.preDroppedVideoFrames;\n            this.preTotalVideoFrames = totalVideoFrames;\n            this.preDroppedVideoFrames = droppedVideoFrames;\n            if (diffTotalVideoFrames > 0) {\n                return diffDroppedVideoFrames / diffTotalVideoFrames;\n            }\n        }\n        return 0;\n    };\n    PerformanceMonitor.prototype.report = function () {\n        var _a = _util_index__WEBPACK_IMPORTED_MODULE_0__["videoTool"].getVideoPlaybackQuality(this.video), totalVideoFrames = _a.totalVideoFrames, droppedVideoFrames = _a.droppedVideoFrames;\n        this.totalVideoFrames = totalVideoFrames;\n        this.droppedVideoFrames = droppedVideoFrames;\n        var averageDecodeTimeInMs = this.totalDecodeTimeInMs / this.presentedVideoFrames;\n        if (isNaN(averageDecodeTimeInMs)) {\n            averageDecodeTimeInMs = -1;\n        }\n        var frameDroppedInPercentage = (this.droppedVideoFrames / this.totalVideoFrames) * 100;\n        if (isNaN(frameDroppedInPercentage)) {\n            frameDroppedInPercentage = -1;\n        }\n        return {\n            totalDecodeTimeInMs: this.totalDecodeTimeInMs,\n            droppedVideoFrames: this.droppedVideoFrames,\n            presentedVideoFrames: this.presentedVideoFrames,\n            totalVideoFrames: this.totalVideoFrames,\n            averageDecodeTimeInMs: averageDecodeTimeInMs,\n            frameDroppedInPercentage: frameDroppedInPercentage,\n        };\n    };\n    PerformanceMonitor.prototype.stop = function () {\n        this.setupRVFC(false);\n    };\n    PerformanceMonitor.prototype.setupRVFC = function (bind) {\n        if (bind === void 0) { bind = true; }\n        if (!_util_index__WEBPACK_IMPORTED_MODULE_0__["uaTool"].browser.safari // safariæ¯æRVFCæåç§å¥æªçé®é¢ï¼ææ¶ç¦ç¨\n            && this.video instanceof HTMLVideoElement\n            && \'requestVideoFrameCallback\' in HTMLVideoElement.prototype) {\n            if (bind)\n                this.videoFrameCallbackId = this.video.requestVideoFrameCallback(this.videoFrameCallback);\n            else\n                this.video.cancelVideoFrameCallback(this.videoFrameCallbackId);\n        }\n    };\n    return PerformanceMonitor;\n}());\n\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/base/performance-monitor.ts?')},"./src/base/play-helper.ts":function srcBasePlayHelperTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "compareUrlConfig", function() { return compareUrlConfig; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fileExtension2VideoType", function() { return fileExtension2VideoType; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "checkUrlConfigVailed", function() { return checkUrlConfigVailed; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getUrlConfigVideoType", function() { return getUrlConfigVideoType; });\n/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../enums */ "./src/enums.ts");\n/* harmony import */ var _kernel_selector_kernel_factory__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../kernel-selector/kernel-factory */ "./src/kernel-selector/kernel-factory.ts");\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util */ "./src/util/index.ts");\n\n\n\n/**\n * å¯¹æ¯ä¸¤ä¸ªUrlConfigæ¯å¦æ¯åä¸ä¸ªè§é¢èç¹\n */\nfunction compareUrlConfig(a, b) {\n    if (!a || !b) {\n        return false;\n    }\n    // å¦ææuidï¼åå¯¹æ¯uid\n    if (a.uid && b.uid && a.uid === b.uid) {\n        return true;\n    }\n    // ç¶åç´æ¥å¯¹æ¯UrlConfigå¯¹è±¡çå¼ç¨\n    if (a === b) {\n        return true;\n    }\n    return false;\n}\n/**\n * éè¿åç¼åå¤æ­VideoTypeï¼ç¨äºå¤æ­åæ ¸\n * @param extension æä»¶åç¼å\n * @returns è¿åå¯¹åºVIDEO_TYPE\n */\nfunction fileExtension2VideoType(extension) {\n    var lcExtension = extension === null || extension === void 0 ? void 0 : extension.toLocaleLowerCase();\n    // éè¿åç¼åå¤æ­VideoTypeï¼ç¨äºå¤æ­åæ ¸\n    switch (lcExtension) {\n        case \'m3u8\':\n        case \'m3u\':\n            return _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_TYPE"].HLS;\n        case \'mp4\':\n        case \'mov\':\n            return _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_TYPE"].MP4;\n        case \'flv\':\n        case \'f4v\':\n            return _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_TYPE"].FLV;\n        case \'avi\':\n            return _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_TYPE"].AVI;\n        case \'mpeg\':\n            return _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_TYPE"].MPEG;\n        case \'webm\':\n            return _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_TYPE"].WEBM;\n        case \'ogg\':\n            return _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_TYPE"].OGG;\n    }\n    return _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_TYPE"].OTHER;\n}\n/**\n * æ£æ¥UrlConfigä½ä¸ºåæ°æ¶æ¯å¦æ¯åæ³çãä¾å¦UrlConfigçurlåæ°ä¸ºç©ºï¼åä¼è¿åéè¯¯ã\n * @param value å°åä¿¡æ¯ï¼æåè¡¨ï¼\n * @param kernelName æ­æ¾åæ ¸åç§°\n * @returns å¦æä¸è½æ­æ¾è¿åéè¯¯ä¿¡æ¯ï¼å¦æå¯ä»¥æ­æ¾è¿åundefined\n */\nfunction checkUrlConfigVailed(value, kernelName) {\n    var _a;\n    if (!value) {\n        return { code: _enums__WEBPACK_IMPORTED_MODULE_0__["ERROR_CODE"].NULL_URL, message: _enums__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].NULL_URL, fatal: true };\n    }\n    // åæ¿å°ææå¯ä»¥æ¯æçè§é¢ç±»ååè¡¨\n    var canPlayTypes = (_a = _kernel_selector_kernel_factory__WEBPACK_IMPORTED_MODULE_1__["default"].getKernelByName(kernelName)) === null || _a === void 0 ? void 0 : _a.canPlayType;\n    var vailed = function (conf, vailedTypes) {\n        // åå¤æ­æ¯å¦æç©ºurl\n        var nullUrl = !conf.url;\n        if (nullUrl) {\n            return { code: _enums__WEBPACK_IMPORTED_MODULE_0__["ERROR_CODE"].NULL_URL, message: _enums__WEBPACK_IMPORTED_MODULE_0__["ERROR_MSG"].NULL_URL, fatal: true };\n        }\n        return;\n    };\n    if (value instanceof Array) {\n        // UrlConfigæ°ç»ä¸­åªè¦æä¸ä¸ªéä¸è¿éªè¯ï¼åè¿åé£ä¸ªéè¯¯ä¿¡æ¯ãå¦åè¿åvoid 0\n        for (var i = 0, len = value.length; i < len; i++) {\n            var error = vailed(value[i], canPlayTypes);\n            if (error) {\n                return error;\n            }\n        }\n        return;\n    }\n    return vailed(value, canPlayTypes);\n}\n/**\n * æ ¹æ®UrlConfigçå°åæ¿å°åç¼ï¼ç¶åå¤æ­è§é¢ç±»å\n * @returns è¿åè§é¢ç±»åçå­ç¬¦ä¸²ï¼ä¾å¦mp4ï¼æèhlsç­\n */\nfunction getUrlConfigVideoType(urlConfig) {\n    var url = (urlConfig || {}).url;\n    if (!url || url.startsWith(\'blob:\')) {\n        return _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_TYPE"].OTHER;\n    }\n    if (url.startsWith(\'webrtc:\')) {\n        return _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_TYPE"].WEBRTC;\n    }\n    var extension = _util__WEBPACK_IMPORTED_MODULE_2__["urlTool"].getFileExtension(url);\n    var videoType = fileExtension2VideoType(extension);\n    return videoType;\n}\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/base/play-helper.ts?')},"./src/base/reference-report.ts":function srcBaseReferenceReportTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _define_envs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../define-envs */ "./src/define-envs.ts");\n/* harmony import */ var _kernel_selector_kernel_factory__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../kernel-selector/kernel-factory */ "./src/kernel-selector/kernel-factory.ts");\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util */ "./src/util/index.ts");\nvar __assign = (undefined && undefined.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n\n\n\n/** å¼ç¨æ¹å¼æä¸¾ */\nvar CHANNEL_MAP;\n(function (CHANNEL_MAP) {\n    CHANNEL_MAP[CHANNEL_MAP["npm"] = 0] = "npm";\n    CHANNEL_MAP[CHANNEL_MAP["cdn"] = 1] = "cdn";\n})(CHANNEL_MAP || (CHANNEL_MAP = {}));\n/**\n * æ­æ¾å¨å¼ç¨ä¸æ¥ï¼ç¨äºåæ ¸ãH5PlayeråSuperå±çå¼ç¨ç»è®¡\n */\nvar ReferenceReport = /** @class */ (function () {\n    function ReferenceReport() {\n        // åªä¸æ¥ä¸æ¬¡\n        this.isCollected = false;\n        // ä¸æ¥ä½¿ç¨çattaä¿¡æ¯\n        this.attaid = \'05700050920\';\n        this.token = \'3619167286\';\n        this.timeout = 3000;\n    }\n    /**\n     * è·åå¼ç¨ä¸æ¥ReferenceReportå®ä¾\n     * @returns å¼ç¨ä¸æ¥ReferenceReportå®ä¾\n     */\n    ReferenceReport.getReporter = function () {\n        if (!this.reporter) {\n            this.reporter = new ReferenceReport();\n        }\n        return this.reporter;\n    };\n    /**\n     * å¼ç¨ä¸æ¥ï¼å¯¹å¤å±åªä¸æ¥ä¸æ¬¡ï¼åªæ¯åä¸åå¼ç¨äºä¸æ¥åºå\n     * @param from å¼ç¨æ¥æº\n     * @param channel å¼ç¨æ¹å¼\n     * @param platform å¹³å°å·\n     */\n    ReferenceReport.prototype.collectUsage = function (from, channel, platform) {\n        if (from === void 0) { from = 0; }\n        if (channel === void 0) { channel = _define_envs__WEBPACK_IMPORTED_MODULE_0__["CHANNEL"]; }\n        if (platform === void 0) { platform = \'\'; }\n        if (this.isCollected)\n            return;\n        this.isCollected = true;\n        // åURLç¸å³ä¿¡æ¯\n        var topUrl = _util__WEBPACK_IMPORTED_MODULE_2__["urlTool"].getTopFrameUrl();\n        var urlWithoutQuery = topUrl === null || topUrl === void 0 ? void 0 : topUrl.split(\'?\')[0];\n        var domain = _util__WEBPACK_IMPORTED_MODULE_2__["urlTool"].getDomainOfURL(topUrl);\n        var reportInfo = {\n            attaid: this.attaid,\n            token: this.token,\n            topUrl: "".concat(encodeURIComponent(topUrl)),\n            pageUrl: "".concat(encodeURIComponent(urlWithoutQuery)),\n            domain: "".concat(encodeURIComponent(domain)),\n            channel: "".concat(CHANNEL_MAP[channel] || 0),\n            from: "".concat(from),\n            version: _define_envs__WEBPACK_IMPORTED_MODULE_0__["VERSION"],\n            platform: platform,\n            kernel: Object.keys(_kernel_selector_kernel_factory__WEBPACK_IMPORTED_MODULE_1__["default"].kernelMap).join(\'$\'),\n            _dc: "".concat(Math.random()),\n        };\n        this.send(reportInfo);\n    };\n    /**\n     * åå§åæ¶ç»è®¡ä¿¡æ¯ï¼è¿ç§ä¸å¤ªéè¦çä¸æ¥å¨ä½å»¶è¿å°3Såï¼å ä¸ºåå§æ¶åè¯·æ±å¤ªå¤äº\n     */\n    ReferenceReport.prototype.send = function (args) {\n        setTimeout(function () {\n            var img = new Image();\n            // è¿éç¨attaçåå­æ®µæ¹éä¸æ¥æ¥å£\n            img.src = "https://h.trace.qq.com/kv?".concat(_util__WEBPACK_IMPORTED_MODULE_2__["urlTool"].object2string(__assign({}, args), \'&\'));\n        }, this.timeout);\n    };\n    return ReferenceReport;\n}());\n/* harmony default export */ __webpack_exports__["default"] = (ReferenceReport);\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/base/reference-report.ts?')},"./src/base/state-mgr.ts":function srcBaseStateMgrTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VALID_PREVIOUS_STATE_MAP", function() { return VALID_PREVIOUS_STATE_MAP; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VALID_STATE_IN_LEVEL_SWITCHING", function() { return VALID_STATE_IN_LEVEL_SWITCHING; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StateMgr", function() { return StateMgr; });\n/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../enums */ "./src/enums.ts");\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util */ "./src/util/index.ts");\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (undefined && undefined.__metadata) || function (k, v) {\n    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);\n};\nvar _a;\n\n\n/**\n * å½åç¶æçåç½®ç¶æè¡¨ï¼ä¾å¦loadStartä¸ä¸ä¸ªç¶æè¡¨ä¸º[idle]\n */\nvar VALID_PREVIOUS_STATE_MAP = (_a = {},\n    _a[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].LOAD_START] = [_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].IDLE],\n    _a[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].CANPLAY] = [_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].LOAD_START],\n    _a[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].PLAYING] = [_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].CANPLAY, _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].SEEKED, _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].PAUSE, _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].BUFFERING],\n    _a[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].BUFFERING] = [_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].PLAYING],\n    _a[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].PAUSE] = [_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].PLAYING, _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].BUFFERING],\n    _a[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].SEEKING] = [\n        _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].CANPLAY, _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].PLAYING, _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].PAUSE, _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].BUFFERING, _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].SEEKING,\n    ],\n    _a[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].SEEKED] = [_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].SEEKING],\n    _a[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].END] = [\n        _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].LOAD_START,\n        _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].CANPLAY,\n        _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].SEEKING,\n        _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].SEEKED,\n        _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].BUFFERING,\n        _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].PLAYING,\n        _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].PAUSE,\n    ],\n    _a[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].IDLE] = [_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].END],\n    _a);\n/**\n * åæ¸æ°åº¦æ¶çåæ³ç¶æãä¾å¦æ ç¼åæ¢æ¶ï¼å®éä¸æ¯å¯ä»¥è¿è¡pauseç­æä½çã\n */\nvar VALID_STATE_IN_LEVEL_SWITCHING = [\n    _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].PAUSE,\n    _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].PLAYING,\n    _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].END,\n    _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].IDLE,\n];\nvar logMethodCall = Object(_util__WEBPACK_IMPORTED_MODULE_1__["logMethodCallDecoratorCreator"])(\'StateMgr\');\n/**\n * VideoNodeçç¶ææºç®¡çï¼æ ¹æ®videoäºä»¶è½¬æ¢ä¸ºæ­æ¾ç¶ææºã[ç¶æå¾åè](document/state.png)\n */\nvar StateMgr = /** @class */ (function () {\n    function StateMgr(vn) {\n        var _a;\n        this.videoEvtHandler = (_a = {},\n            _a[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_EVTS"].canplay] = this.onCanplayEvt.bind(this),\n            _a[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_EVTS"].playing] = this.setPlaying.bind(this),\n            _a[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_EVTS"].waiting] = this.setWaiting.bind(this),\n            _a[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_EVTS"].pause] = this.onPauseEvt.bind(this),\n            _a[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_EVTS"].seeking] = this.onSeekingEvt.bind(this),\n            _a[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_EVTS"].seeked] = this.onSeekedEvt.bind(this),\n            _a);\n        this.videoNode = vn;\n        this.logger = new _util__WEBPACK_IMPORTED_MODULE_1__["Logger"](vn.config.instanceId, \'StateMgr\');\n    }\n    StateMgr.prototype.destroy = function () {\n        this.videoNode = null;\n    };\n    StateMgr.prototype.validCallState = function (tarState) {\n        var _a;\n        return (_a = VALID_PREVIOUS_STATE_MAP[tarState]) === null || _a === void 0 ? void 0 : _a.includes(this.videoNode.state);\n    };\n    StateMgr.prototype.setEnded = function () {\n        this.setVideoNodeState(_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].END);\n        // endç¶æä»¥åç´§è·idleç¶æï¼åå²åå å¯¼è´è¿ä¸¤ä¸ªç¶æç°å¨æ²¡æä»ä¹åºå«ï¼ä½éè¦å¼å®¹èçè°ç¨æ¹ï¼\n        this.setVideoNodeState(_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].IDLE);\n    };\n    StateMgr.prototype.setLoadStart = function () {\n        this.setVideoNodeState(_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].LOAD_START);\n    };\n    StateMgr.prototype.setCanplay = function () {\n        this.setVideoNodeState(_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].CANPLAY);\n    };\n    StateMgr.prototype.setWaiting = function () {\n        this.setVideoNodeState(_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].BUFFERING);\n    };\n    StateMgr.prototype.setPlaying = function () {\n        this.setVideoNodeState(_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].PLAYING);\n    };\n    StateMgr.prototype.onSetLevelOver = function () {\n        if (this.videoNode.state === _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].PAUSE) {\n            // å¨æåç¶æåæ¢æ¸æ°åº¦ï¼åæ¢æåä»¥åæ¯æ­æ¾ç¶æï¼å æ­¤éè¦ä¿®æ¹ä¸ºplayingç¶æ\n            this.setVideoNodeState(_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].PLAYING);\n        }\n    };\n    /**\n     * æ¶å°videoæ ç­¾äºä»¶ä»¥åè¿è¡å¤ç\n     * @param evtName videoæ ç­¾äºä»¶å\n     */\n    StateMgr.prototype.receiveVideoEvt = function (evtName) {\n        var _a, _b;\n        (_b = (_a = this.videoEvtHandler)[evtName]) === null || _b === void 0 ? void 0 : _b.call(_a);\n    };\n    /**\n     * è®¾ç½®VideoNodeçç¶æï¼æ­¤ç¶ææ¯æé¤éæ³ç¶æãå¼å®¹æ§å¤çä»¥åå®å¨å¤çå¥½çç¶æã\n     * @param state ç¶æå\n     */\n    StateMgr.prototype.setVideoNodeState = function (state) {\n        if (this.videoNode.getLevelSwitching() && !VALID_STATE_IN_LEVEL_SWITCHING.includes(state)) {\n            // åæ¢æ¸æ°åº¦æ¶è¿æ»¤ä¸é¨åç¶æ\n            this.logger.log("can not set state 2 ".concat(state, " when level switching"));\n            return;\n        }\n        if (!VALID_PREVIOUS_STATE_MAP[state].includes(this.videoNode.state)) {\n            // ä¸ä¸ä¸ªç¶æå¿é¡»ç¬¦ååç½®ç¶æè¡¨\n            this.logger.log("can not set state from ".concat(this.videoNode.state, " to ").concat(state));\n            return;\n        }\n        this.videoNode.state = state;\n    };\n    StateMgr.prototype.onCanplayEvt = function () {\n        // iosçwaitingä»¥åæ¯canplayåcanplaythroughï¼æ²¡æplayingäºä»¶ï¼è¿ééè¦å¤æ­ä»¥åé¢å¤å ä¸ä¸ªäºä»¶ã\n        // å¦å¤åç°safariæ­æ¾ç´æ­æ¶ï¼ä»éé³å°æ¢å¤é³éï¼videoçäºä»¶ååä¸ºplaying->waiting->canplayï¼æä»¥ä¼ä¸¢å¤±playingç¶æã\n        var applePlat = _util__WEBPACK_IMPORTED_MODULE_1__["uaTool"].os.ios || _util__WEBPACK_IMPORTED_MODULE_1__["uaTool"].browser.safari;\n        if (applePlat && this.isVideoElementPlaying() && this.videoNode.state === _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].BUFFERING) {\n            this.setVideoNodeState(_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].PLAYING);\n        }\n        else {\n            this.setVideoNodeState(_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].CANPLAY);\n        }\n    };\n    StateMgr.prototype.onPauseEvt = function () {\n        this.setVideoNodeState(_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].PAUSE);\n    };\n    StateMgr.prototype.onSeekingEvt = function () {\n        this.setVideoNodeState(_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].SEEKING);\n    };\n    StateMgr.prototype.onSeekedEvt = function () {\n        this.setVideoNodeState(_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].SEEKED);\n        var applePlat = _util__WEBPACK_IMPORTED_MODULE_1__["uaTool"].os.ios || _util__WEBPACK_IMPORTED_MODULE_1__["uaTool"].browser.safari;\n        if (applePlat && this.isVideoElementPlaying()) {\n            // æ­æ¾ä¸­seekï¼iosçseekedäºä»¶ä»¥åä¸æ¯playingç¶æãè¿ééè¦é¢å¤å¢å playingç¶æ\n            this.setVideoNodeState(_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].PLAYING);\n        }\n    };\n    /**\n     * videoæ ç­¾æ¯å¦å¨æ­æ¾ç¶æ\n     */\n    StateMgr.prototype.isVideoElementPlaying = function () {\n        return !this.videoNode.videoElement.paused && !this.videoNode.videoElement.ended;\n    };\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", []),\n        __metadata("design:returntype", void 0)\n    ], StateMgr.prototype, "destroy", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", [String]),\n        __metadata("design:returntype", void 0)\n    ], StateMgr.prototype, "validCallState", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", []),\n        __metadata("design:returntype", void 0)\n    ], StateMgr.prototype, "setEnded", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", []),\n        __metadata("design:returntype", void 0)\n    ], StateMgr.prototype, "setLoadStart", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", []),\n        __metadata("design:returntype", void 0)\n    ], StateMgr.prototype, "setCanplay", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", []),\n        __metadata("design:returntype", void 0)\n    ], StateMgr.prototype, "setWaiting", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", []),\n        __metadata("design:returntype", void 0)\n    ], StateMgr.prototype, "setPlaying", null);\n    return StateMgr;\n}());\n\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/base/state-mgr.ts?')},"./src/base/video-info.ts":function srcBaseVideoInfoTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../enums */ "./src/enums.ts");\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util */ "./src/util/index.ts");\nvar __assign = (undefined && undefined.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n\n\n/** guidéæºä¸²çé¿åº¦ */\nvar GUID_LEN = 8;\n/**\n * ä¸ä¸ªurlå°åå¯¹åºçæ­æ¾å¯¹è±¡\n * @class\n */\nvar VideoInfo = /** @class */ (function () {\n    /**\n     * è§é¢ä¿¡æ¯ãå¨æ­æ¾åè¡¨ä¸­ï¼æ¯ä¸ªæ­æ¾èç¹é½å¯¹åºä¸ä¸ªè§é¢ä¿¡æ¯ã\n     */\n    function VideoInfo(opts, playerConfig) {\n        this.playtime = 0;\n        this.currentAudioTrack = NaN;\n        this.duration = 0;\n        this.performance = {};\n        this.startTime = 0;\n        this.state = _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].IDLE;\n        this.fileSize = 0;\n        this.videoWidth = 0;\n        this.videoHeight = 0;\n        this.hasFirstPlaying = false;\n        this.startPts = 0;\n        this.discontinuityTimeRanges = [];\n        this.videoFrameRate = 0;\n        this.audioTracks = [];\n        this._logger = new _util__WEBPACK_IMPORTED_MODULE_1__["Logger"](playerConfig.instanceId, \'VideoInfo\');\n        this._extraVars = {};\n        this._qualityInfo = {};\n        this._uid = _util__WEBPACK_IMPORTED_MODULE_1__["commonTool"].createGUID(GUID_LEN);\n        this._config = opts;\n        this._playerConfig = playerConfig;\n        this.codecs = this._config.codec ? __assign({}, this._config.codec) : { video: \'\', audio: \'\' };\n        this.reset();\n        this._logger.log("new VideoInfo(), uid: ".concat(this.uid));\n    }\n    VideoInfo.prototype.toJSON = function () {\n        return this.serializedString();\n    };\n    VideoInfo.prototype.toString = function () {\n        return this.serializedString();\n    };\n    Object.defineProperty(VideoInfo.prototype, "config", {\n        get: function () {\n            return this._config;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(VideoInfo.prototype, "qualityInfo", {\n        get: function () {\n            return this._qualityInfo;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(VideoInfo.prototype, "uid", {\n        get: function () {\n            return this._uid;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(VideoInfo.prototype, "loadingUrl", {\n        get: function () {\n            return this._loadingUrl;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(VideoInfo.prototype, "extraVars", {\n        get: function () {\n            return this._extraVars;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    VideoInfo.prototype.reset = function () {\n        // éç½®å°åç´¢å¼\n        this._nextBackUrlIdx = 0;\n        // éç½®éè¯æ¬¡æ°éå¶\n        this._retryCount = 0;\n        this.performance = {};\n        // åä½¿ç¨ä¼ å¥çurlå¼å§å è½½ï¼åç»­å¯è½ä¼æ¢æå¤ä»½å°ååè¡¨ä¸­çå°å\n        this._loadingUrl = this._config.url;\n        // resetçæ¶ååæ¶æ¸çé³è½¨ä¿¡æ¯\n        this.audioTracks = [];\n    };\n    VideoInfo.prototype.setLoadingUrlStartTime = function (startTime) {\n        if (this._loadingUrl && startTime > 0) {\n            this._loadingUrl = "".concat(this._loadingUrl.split(\'#t=\')[0], "#t=").concat(startTime);\n        }\n    };\n    VideoInfo.prototype.setDependVideoInfo = function (preVideoInfo) {\n        this.startTime = preVideoInfo ? (preVideoInfo.startTime + preVideoInfo.duration) : 0;\n        this._logger.log("setDependVideoInfo succ, uid/starttime: ".concat(this.uid, "/").concat(this.startTime));\n        return true;\n    };\n    /**\n     * åæ¢ä¸ä¸ä¸ªå¤ç¨å°åï¼å¤ç¨å°åä¸éæ¬¡æ°ä¸ºdefaultPlayerConfig.backupUrlsMaxRetryCountéç½®ï¼å¦æå¤ç¨å°åæ²¡ææèä¸å¤ä¼å¾ªç¯å°ç¬¬ä¸ä¸ª\n     * ï¼æ³¨ææ¯éè¯æ¬¡æ°ï¼æ¯å¦è¯·æ±1æ¬¡éè¯3æ¬¡å¤ç¨å°åï¼ä¸å±å°±ä¼æ4æ¬¡è¯·æ±ï¼\n     */\n    VideoInfo.prototype.setNextBackUrl = function () {\n        if (!this._config.url || this._retryCount >= this._playerConfig.backupUrlsMaxRetryCount)\n            return false;\n        this._retryCount++;\n        if (this._config.backupUrls && this._config.backupUrls.length > 0) {\n            if (this._nextBackUrlIdx >= this._config.backupUrls.length) {\n                this._loadingUrl = this._config.url;\n                this._nextBackUrlIdx = 0;\n            }\n            else {\n                this._loadingUrl = this._config.backupUrls[this._nextBackUrlIdx];\n                this._nextBackUrlIdx++;\n            }\n        }\n        else {\n            this._loadingUrl = this._config.url;\n        }\n        return true;\n    };\n    VideoInfo.prototype.getRetryCount = function () {\n        return this._retryCount;\n    };\n    VideoInfo.prototype.destroy = function () {\n        this.extraVars.stream = null;\n    };\n    VideoInfo.prototype.serializedString = function () {\n        var _a, _b;\n        return "VideoInfo{u:".concat(this._loadingUrl, ",t:").concat(this.playtime, ",s:").concat(this.state, ",ec:").concat(((_a = this.error) === null || _a === void 0 ? void 0 : _a.code) || \'\', ",em:").concat(((_b = this.error) === null || _b === void 0 ? void 0 : _b.message) || \'\', ",r:").concat(this._nextBackUrlIdx, "}");\n    };\n    return VideoInfo;\n}());\n/* harmony default export */ __webpack_exports__["default"] = (VideoInfo);\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/base/video-info.ts?')},"./src/define-envs.ts":function srcDefineEnvsTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CHANNEL", function() { return CHANNEL; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BUILD_TIME", function() { return BUILD_TIME; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VERSION", function() { return VERSION; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LOCAL_DEV", function() { return LOCAL_DEV; });\n/**\n * webpackç¼è¯æ¶æ³¨å¥åé\n */\nfunction getEnvVals() {\n    var CHANNEL = \'npm\';\n    try {\n        CHANNEL = "npm";\n    }\n    catch (_a) { }\n    var VERSION = \'\';\n    try {\n        VERSION = "1.12.3";\n    }\n    catch (_b) { }\n    var BUILD_TIME = \'\';\n    try {\n        BUILD_TIME = 1669113653658;\n    }\n    catch (_c) { }\n    var LOCAL_DEV = false;\n    try {\n        LOCAL_DEV = "0" === \'1\';\n    }\n    catch (_d) { }\n    return {\n        CHANNEL: CHANNEL,\n        VERSION: VERSION,\n        BUILD_TIME: BUILD_TIME,\n        LOCAL_DEV: LOCAL_DEV,\n    };\n}\nvar _a = getEnvVals(), CHANNEL = _a.CHANNEL, BUILD_TIME = _a.BUILD_TIME, VERSION = _a.VERSION, LOCAL_DEV = _a.LOCAL_DEV;\n\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/define-envs.ts?')},"./src/drm/enums.ts":function srcDrmEnumsTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DRM_ERR_CODE", function() { return DRM_ERR_CODE; });\n/**\n * DRMç¸å³éè¯¯ç \n */\nvar DRM_ERR_CODE;\n(function (DRM_ERR_CODE) {\n    DRM_ERR_CODE["UNKNOWN"] = "70090000";\n    DRM_ERR_CODE["KEY_SYS_ACCESS_FAILED"] = "70090001";\n    DRM_ERR_CODE["KEY_SESSION_CREATION_FAILED"] = "70090002";\n    DRM_ERR_CODE["KEY_SYS_NOT_SUPPORTED"] = "70090003";\n    DRM_ERR_CODE["KEY_SYS_NOT_REQUESTED"] = "70090004";\n    DRM_ERR_CODE["KEY_SESSION_NOT_EXIST"] = "70090005";\n    DRM_ERR_CODE["KEY_NOT_EXIST"] = "70090006";\n    DRM_ERR_CODE["INIT_DATA_EMPTY"] = "70090007";\n    DRM_ERR_CODE["FPS_SET_KEY_FAILED"] = "70090008";\n    DRM_ERR_CODE["FPS_CERTIFICATE_NOT_EXIST"] = "7009009";\n    DRM_ERR_CODE["HDCP_ERROR"] = "70090010";\n    DRM_ERR_CODE["LICENSE_REQUEST_FAILED"] = "70090011";\n    DRM_ERR_CODE["LICENSE_NOT_EXIST"] = "70090012";\n    DRM_ERR_CODE["KEY_SESSION_REQUEST_FAILED"] = "70090013";\n    DRM_ERR_CODE["KEY_SESSION_UPDATE_FAILED"] = "70090014";\n    DRM_ERR_CODE["KEY_EXPIRED"] = "70090015";\n    DRM_ERR_CODE["KEY_RELEASED"] = "70090016";\n    DRM_ERR_CODE["KEY_INTERNAL_ERROR"] = "70090017";\n})(DRM_ERR_CODE || (DRM_ERR_CODE = {}));\n;\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/drm/enums.ts?')},"./src/drm/fairplay-utils.ts":function srcDrmFairplayUtilsTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transformInitData", function() { return transformInitData; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getContentId", function() { return getContentId; });\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util */ "./src/util/index.ts");\n\nfunction transformInitData(initData, contentId, certificate) {\n    var contentIdBuffer = _util__WEBPACK_IMPORTED_MODULE_0__["stringTool"].stringToArray(contentId);\n    // Format:\n    // [initData]\n    // [4 byte: idLength]\n    // [idLength byte: id]\n    // [4 byte:certificateLength]\n    // [certificateLength byte: certificate]\n    var size = initData.byteLength + 4 + contentIdBuffer.byteLength + 4 + certificate.byteLength;\n    var offset = 0;\n    var buffer = new ArrayBuffer(size);\n    var dataView = new DataView(buffer);\n    var initDataArray = new Uint8Array(buffer, offset, initData.byteLength);\n    initDataArray.set(initData);\n    offset += initDataArray.byteLength;\n    dataView.setUint32(offset, contentIdBuffer.byteLength, true);\n    offset += 4;\n    var idArray = new Uint16Array(buffer, offset, contentIdBuffer.length);\n    idArray.set(contentIdBuffer);\n    offset += idArray.byteLength;\n    dataView.setUint32(offset, certificate.byteLength, true);\n    offset += 4;\n    var certificateArray = new Uint8Array(buffer, offset, certificate.byteLength);\n    certificateArray.set(certificate);\n    return new Uint8Array(buffer, 0, buffer.byteLength);\n}\nfunction getContentId(initData) {\n    var _a, _b, _c;\n    var asString = _util__WEBPACK_IMPORTED_MODULE_0__["stringTool"].arrayToString(initData);\n    var contentId = (_c = (_b = (_a = asString.split(\'skd://\')) === null || _a === void 0 ? void 0 : _a[1]) === null || _b === void 0 ? void 0 : _b.split(\'?\')) === null || _c === void 0 ? void 0 : _c[0];\n    return contentId;\n}\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/drm/fairplay-utils.ts?')},"./src/drm/index.ts":function srcDrmIndexTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KeySystems", function() { return KeySystems; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSupportedKeySystemConfig", function() { return getSupportedKeySystemConfig; });\n/* harmony import */ var _libs_event_emitter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../libs/event-emitter */ "./src/libs/event-emitter.ts");\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util */ "./src/util/index.ts");\n/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./enums */ "./src/drm/enums.ts");\n/* harmony import */ var _fairplay_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./fairplay-utils */ "./src/drm/fairplay-utils.ts");\n/* harmony import */ var _playready_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./playready-utils */ "./src/drm/playready-utils.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (undefined && undefined.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError("Generator is already executing.");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\n\n/**\n * å å¯ç³»ç»åç§°\n */\nvar KeySystems;\n(function (KeySystems) {\n    KeySystems["FairPlayWebKit"] = "com.apple.fps.1_0";\n    KeySystems["Widevine"] = "com.widevine.alpha";\n    KeySystems["FairPlay"] = "com.apple.fps";\n    KeySystems["Chacha"] = "com.tencent.chacha";\n    KeySystems["PlayReady"] = "com.microsoft.playready";\n    KeySystems["PlayReadyHardware"] = "com.microsoft.playready.hardware";\n})(KeySystems || (KeySystems = {}));\nfunction getSupportedKeySystemConfig(keySystem) {\n    switch (keySystem) {\n        case KeySystems.FairPlayWebKit:\n            return null;\n        case KeySystems.Widevine:\n            return {\n                initDataTypes: [\'cenc\'],\n                audioCapabilities: [{\n                        contentType: \'audio/mp4; codecs="mp4a.40.2"\',\n                        robustness: \'SW_SECURE_CRYPTO\',\n                    }],\n                videoCapabilities: [{\n                        contentType: \'video/mp4; codecs="avc1.42E01E"\',\n                        robustness: \'SW_SECURE_CRYPTO\',\n                    }],\n            };\n        case KeySystems.FairPlay:\n            return {\n                initDataTypes: [\'skd\'],\n                videoCapabilities: [\n                    {\n                        contentType: \'application/vnd.apple.mpegurl\',\n                        robustness: \'\',\n                    },\n                ],\n            };\n        case KeySystems.PlayReady:\n        case KeySystems.PlayReadyHardware:\n            return {\n                initDataTypes: [\'keyids\', \'cenc\'],\n                audioCapabilities: [{\n                        contentType: \'audio/mp4; codecs="mp4a.40.2"\',\n                    }],\n                videoCapabilities: [{\n                        contentType: \'video/mp4; codecs="avc1.42E01E"\',\n                    }],\n            };\n        default:\n            return null;\n    }\n}\nvar ERR = \'error\';\n/**\n * DRMæ¨¡åï¼æ¯æApple Fairplay StreamingåWidevine\n *\n * fairplayåwidevineåå¯ä»¥éè¿EMEæ åæ¥å£å®ç°ï¼åºå«ä»å¨fpséè¦æå¡ç«¯è¯ä¹¦åä¸¤èçlicenseè¯·æ±åæ°æ®ä¸å\n *\n * ! fairplayéè¦å¨macOS 10.14.4ï¼ios 12.2ä»¥ä¸ææ¯æEMEæ¥å£, webkitéè¦æä½macOS 10.10.3, iOS 11.2\n */\nvar DRM = /** @class */ (function (_super) {\n    __extends(DRM, _super);\n    function DRM(media, config, logger) {\n        var _this = _super.call(this) || this;\n        /** æ¯å¦å¤äºå¯ç¨çç¶æ */\n        _this.started = false;\n        /**\n         * å½åçkeySessionä¿¡æ¯ï¼åå«mediaKeyï¼sessionï¼initDataç­\n         */\n        _this.mediaKeyDescriptor = null;\n        /**\n         * mediaKey promiseï¼ç»EMEå®ç°ççæ¬ä½¿ç¨\n         */\n        _this.mediaKeyPromise = null;\n        /**\n         * ====================================================================================\n         * æ åEMEå®ç°çå å¯æ­æ¾æµç¨\n         * 1. åå»ºmediaKey\n         * 2. éè¿mediaKeyåå»ºmediaKeySessionï¼åå»ºsessionè¯·æ±ä¿¡æ¯ï¼åæ¶æmediaKeyç»å®å°videoä¸\n         * 3. çå¬mediaKeySessionçmessageäºä»¶ï¼è¯·æ±license\n         * 4. æ´æ°sessionè§£å¯ä¿¡æ¯\n         */\n        /**\n         * HTML5 video encryptedäºä»¶çå¬\n         * @event encrypted\n         */\n        _this.onVideoEncrypted = function (event) {\n            _this.logger.log(\'media encrypted\', event);\n            if (!_this.mediaKeyPromise) {\n                _this.emit(ERR, {\n                    code: _enums__WEBPACK_IMPORTED_MODULE_2__["DRM_ERR_CODE"].KEY_SYS_NOT_REQUESTED,\n                    message: \'è§é¢èµæºå·²å å¯ï¼ä½å°æªè¯·æ±CDM\',\n                });\n                return;\n            }\n            _this.mediaKeyPromise\n                .then(function (mediaKey) {\n                if (!_this.mediaKeyDescriptor) {\n                    _this.emit(ERR, {\n                        code: _enums__WEBPACK_IMPORTED_MODULE_2__["DRM_ERR_CODE"].KEY_NOT_EXIST,\n                        message: \'è§é¢èµæºå·²å å¯ï¼ä½å°æªè·åå°MediaKey\',\n                    });\n                    return;\n                }\n                // è¿éä¸»è¦æ¯é¿åéå¤è®¾ç½®mediaKeyï¼ä½æ¯ååä¸è¿ä¸ªäºä»¶åºè¯¥åªæ´¾åä¸æ¬¡\n                if (_this.mediaKeyDescriptor.hasInitialized) {\n                    _this.logger.warn(\'Media key-session has been initialized but requested again\');\n                    return;\n                }\n                if (!_this.mediaKeyDescriptor.mediaKeys) {\n                    _this.emit(ERR, {\n                        code: _enums__WEBPACK_IMPORTED_MODULE_2__["DRM_ERR_CODE"].KEY_NOT_EXIST,\n                        message: \'è§é¢èµæºå·²å å¯ï¼ä½å°æªè·åå°MediaKey\',\n                    });\n                    return;\n                }\n                _this.media.setMediaKeys(_this.mediaKeyDescriptor.mediaKeys);\n                if (!_this.mediaKeyDescriptor.mediaKeySession) {\n                    _this.emit(ERR, {\n                        code: _enums__WEBPACK_IMPORTED_MODULE_2__["DRM_ERR_CODE"].KEY_SESSION_NOT_EXIST,\n                        message: \'è§é¢èµæºå·²å å¯ï¼ä½CDM Sessionæªåå»º\',\n                    });\n                    return;\n                }\n                if (!event.initData) {\n                    _this.emit(ERR, {\n                        code: _enums__WEBPACK_IMPORTED_MODULE_2__["DRM_ERR_CODE"].INIT_DATA_EMPTY,\n                        message: \'è§é¢èµæºå·²å å¯ï¼ä½äºä»¶ä¿¡æ¯ä¸­æ²¡æç¨äºåå»ºè¯·æ±çinitData\',\n                    });\n                    return;\n                }\n                _this.mediaKeyDescriptor.mediaKeySession.generateRequest(event.initDataType, event.initData).catch(function (err) {\n                    _this.emit(ERR, {\n                        code: _enums__WEBPACK_IMPORTED_MODULE_2__["DRM_ERR_CODE"].KEY_SESSION_REQUEST_FAILED,\n                        message: \'è§é¢èµæºå·²å å¯ï¼ä½CDM Sessionè¯·æ±å¤±è´¥\',\n                    });\n                    return;\n                });\n                _this.mediaKeyDescriptor.initData = event.initData;\n                _this.mediaKeyDescriptor.hasInitialized = true;\n            });\n        };\n        /**\n         * HTML5 video webkitneededkeyäºä»¶çå¬\n         */\n        _this.onVideoWebkitneedkey = function (event) {\n            // éè¿initDataè§£æcontentIdï¼sdk://xxxxçæ ¼å¼\n            var contentId = _this.config.fpsCustomContentId(event.initData);\n            var cert = DRM.serverCertificate[KeySystems.FairPlayWebKit];\n            if (!cert) {\n                _this.emit(ERR, {\n                    code: _enums__WEBPACK_IMPORTED_MODULE_2__["DRM_ERR_CODE"].FPS_CERTIFICATE_NOT_EXIST,\n                    message: \'è§é¢èµæºå·²å å¯ï¼ä½ Fairplay æå¡ç«¯è¯ä¹¦æªéç½®\',\n                });\n                return;\n            }\n            // webkitè¿ééè¦éæ°æ¼æ¥initä¿¡æ¯ï¼æ ¼å¼ä¸ºassetId + certificate\n            var initData = _this.config.fpsCustomTransformInitData(event.initData, contentId, cert);\n            _this.mediaKeyDescriptor.initData = initData;\n            // é¿åéå¤åå»ºsessionï¼é²æ­¢è¯·æ±çåæ°æ®éè¯¯\n            if (_this.mediaKeyDescriptor.mediaKeySession) {\n                _this.logger.warn(\'Media key-session has already been initialized\');\n                return;\n            }\n            _this.mediaKeyDescriptor.mediaKeySession = _this.createSessionWithMediaKey(_this.mediaKeyDescriptor.mediaKeys, initData);\n            _this.mediaKeyDescriptor.assetID = contentId;\n            _this.mediaKeyDescriptor.mediaKeySession.onwebkitkeyadded = _this.onFPSKeySessionKeyAdded;\n            _this.mediaKeyDescriptor.mediaKeySession.onwebkitkeyerror = _this.onFPSKeySessionKeyError;\n            _this.mediaKeyDescriptor.mediaKeySession.onwebkitkeymessage = function (event) {\n                _this.onMediaKeySessionMessage(_this.mediaKeyDescriptor.mediaKeySession, event);\n            };\n        };\n        _this.onFPSKeySessionKeyAdded = function (event) {\n            // ç®åæ²¡åç°ç¨éï¼ä¸»è¦æ¯debug\n        };\n        _this.onFPSKeySessionKeyError = function (event) {\n            var err = _this.mediaKeyDescriptor.mediaKeySession.error;\n            if (err.systemCode) {\n                var errCodeMap = {\n                    // https://developer.apple.com/forums/thread/64204\n                    1212433232: [_enums__WEBPACK_IMPORTED_MODULE_2__["DRM_ERR_CODE"].HDCP_ERROR, \'ä½ å¯è½é¾æ¥äºä¸æ¯æHDCPæ åçæ¾ç¤ºå¨\'],\n                };\n                if (errCodeMap[err.systemCode]) {\n                    _this.emit(ERR, {\n                        code: errCodeMap[err.systemCode][0],\n                        message: errCodeMap[err.systemCode][1],\n                    });\n                }\n                return;\n            }\n            _this.emit(ERR, {\n                code: _enums__WEBPACK_IMPORTED_MODULE_2__["DRM_ERR_CODE"].UNKNOWN,\n                message: \'æªç¥éè¯¯\',\n            });\n        };\n        _this.media = media;\n        _this.logger = logger;\n        _this.config = __assign({ keySystem: null, fpsCustomContentId: _fairplay_utils__WEBPACK_IMPORTED_MODULE_3__["getContentId"], fpsCustomTransformInitData: _fairplay_utils__WEBPACK_IMPORTED_MODULE_3__["transformInitData"] }, config);\n        return _this;\n    }\n    Object.defineProperty(DRM.prototype, "isFairPlay", {\n        /** æ¯å¦æ¯fairplay */\n        get: function () {\n            var ks = this.config.keySystem;\n            return ks === KeySystems.FairPlay || ks === KeySystems.FairPlayWebKit;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * æ£æµç¯å¢æ¯å¦æ¯ææå®çkeySystem\n     * @param keySystem EME key system name, e.g. com.apple.fps.1_0\n     */\n    DRM.isKeySystemSupported = function (keySystem) {\n        var _a;\n        var _b, _c;\n        var condition = (_a = {},\n            _a[KeySystems.FairPlayWebKit] = [\n                (_b = self.WebKitMediaKeys) === null || _b === void 0 ? void 0 : _b.isTypeSupported(keySystem, \'video/mp4\'),\n            ],\n            // è¿éåªæ£æ¥EMEæ¥å£æ¯å¦å­å¨\n            _a[KeySystems.FairPlay] = [\n                _util__WEBPACK_IMPORTED_MODULE_1__["uaTool"].browser.safari,\n                self.MediaKeys,\n                self.navigator.requestMediaKeySystemAccess,\n            ],\n            _a[KeySystems.Widevine] = [\n                self.MediaKeys,\n                self.navigator.requestMediaKeySystemAccess,\n            ],\n            _a[KeySystems.PlayReady] = [\n                self.MediaKeys,\n                self.navigator.requestMediaKeySystemAccess,\n            ],\n            _a[KeySystems.PlayReadyHardware] = [\n                self.MediaKeys,\n                self.navigator.requestMediaKeySystemAccess,\n            ],\n            _a);\n        return (_c = condition[keySystem]) === null || _c === void 0 ? void 0 : _c.every(Boolean);\n    };\n    DRM.prototype.destroy = function () {\n        this.removeAllListeners();\n        this.logger = null;\n    };\n    /**\n     * æ´æ°éç½®åæ°ï¼ä¸»è¦ç¨äºæ´æ°licenseå°ååæå¡å¨è¯ä¹¦ç­\n     * @param config éç½®åæ°\n     */\n    DRM.prototype.configure = function (config) {\n        var _this = this;\n        this.config = __assign(__assign({}, this.config), config);\n        if (this.config.certificate) {\n            Object.keys(this.config.certificate).forEach(function (key) {\n                DRM.serverCertificate[key] = _this.config.certificate[key];\n            });\n        }\n    };\n    /**\n     * DRMæ¨¡åæ¯å¦å·²å¯ç¨\n     */\n    DRM.prototype.hasStarted = function () {\n        return this.started;\n    };\n    /**\n     * åå§ådrmæµç¨ï¼éè¦å¤é¨ä¸»å¨è°ç¨\n     * @param config å¯ééç½®åæ°\n     */\n    DRM.prototype.init = function (config) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.reset()];\n                    case 1:\n                        _a.sent();\n                        if (config) {\n                            this.configure(config);\n                        }\n                        if (!(typeof DRM.serverCertificate[this.config.keySystem] === \'string\')) return [3 /*break*/, 3];\n                        return [4 /*yield*/, this.requestServerCertificate(this.config.keySystem, DRM.serverCertificate[this.config.keySystem])];\n                    case 2:\n                        _a.sent();\n                        _a.label = 3;\n                    case 3:\n                        this.bind();\n                        this.logger.log(\'drm module initialized\', this.config);\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * éç½®ãæ³¨éäºä»¶çå¬ï¼éæ¯keySessionç­ã\n     * ! setMediaKeys éè¦å¨srcä¸ºç©ºæ¶è°ç¨ï¼å¦åä¼æåºå¼å¸¸\n     */\n    DRM.prototype.reset = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var jobs, session, e_1;\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        this.started = false;\n                        if (!this.config.keySystem || !this.mediaKeyDescriptor)\n                            return [2 /*return*/];\n                        jobs = (_a = {},\n                            _a[KeySystems.FairPlayWebKit] = this.cleanupFPSSession,\n                            _a[KeySystems.FairPlay] = this.cleanupMediaKeySession,\n                            _a[KeySystems.Widevine] = this.cleanupMediaKeySession,\n                            _a[KeySystems.PlayReady] = this.cleanupMediaKeySession,\n                            _a[KeySystems.PlayReadyHardware] = this.cleanupMediaKeySession,\n                            _a);\n                        this.videoEncryptedEventPicker(false);\n                        if (!jobs[this.config.keySystem]) return [3 /*break*/, 4];\n                        session = this.mediaKeyDescriptor.mediaKeySession;\n                        this.mediaKeyPromise = null;\n                        this.mediaKeyDescriptor = null;\n                        _b.label = 1;\n                    case 1:\n                        _b.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, jobs[this.config.keySystem].call(this, session)];\n                    case 2:\n                        _b.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        e_1 = _b.sent();\n                        return [3 /*break*/, 4];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * ç»å®äºä»¶ï¼åå»ºmediaKey\n     */\n    DRM.prototype.bind = function () {\n        // å¦æè¿æ¥çæ¶åæ²¡ækeySystemåä¸æ§è¡ä»»ä½é»è¾\n        var userKeySystem = this.config.keySystem;\n        if (!userKeySystem) {\n            return;\n        }\n        ;\n        if (!DRM.isKeySystemSupported(userKeySystem)) {\n            this.logger.warn("\\u5F53\\u524D\\u73AF\\u5883\\u4E0D\\u652F\\u6301 ".concat(userKeySystem));\n            return;\n        }\n        this.started = true;\n        // è¿ä¸ªpromiseä¼å¨sessionåå»ºåresolve\n        this.mediaKeyPromise = this.createKeySystemAccess(userKeySystem);\n        this.videoEncryptedEventPicker(true);\n    };\n    /**\n     * æ åEMEå®ç°çæ¸çæ¹æ³ã\n     */\n    DRM.prototype.cleanupMediaKeySession = function (mediaKeySession) {\n        if (!this.media || !mediaKeySession)\n            return Promise.resolve();\n        mediaKeySession.onmessage = null;\n        mediaKeySession.onkeystatuseschange = null;\n        // ä¸å¤çcloseåsetMediaKeyè¿ç¨ä¸­çæ¥é\n        mediaKeySession.close().catch(function () { });\n        return this.media.setMediaKeys(null);\n    };\n    /**\n     * æ ¹æ®keySystemçå¬videoçå å¯äºä»¶\n     * @param toggle trueä¸ºçå¬ï¼falseä¸ºåæ¶çå¬\n     */\n    DRM.prototype.videoEncryptedEventPicker = function (toggle) {\n        var _a;\n        if (toggle === void 0) { toggle = true; }\n        var supportedEvents = (_a = {},\n            _a[KeySystems.FairPlayWebKit] = [\'webkitneedkey\', this.onVideoWebkitneedkey],\n            _a[KeySystems.Widevine] = [\'encrypted\', this.onVideoEncrypted],\n            _a[KeySystems.FairPlay] = [\'encrypted\', this.onVideoEncrypted],\n            _a[KeySystems.PlayReady] = [\'encrypted\', this.onVideoEncrypted],\n            _a[KeySystems.PlayReadyHardware] = [\'encrypted\', this.onVideoEncrypted],\n            _a);\n        var _b = supportedEvents[this.config.keySystem], event = _b[0], handler = _b[1];\n        if (toggle)\n            this.media.addEventListener(event, handler);\n        else\n            this.media.removeEventListener(event, handler);\n    };\n    /**\n     * æ ¹æ®keySystemåå»ºmediaKey session\n     * @param mediaKey EME mediaKey\n     * @param sessionInitData å å¯äºä»¶æåºçinitDataï¼fps webkitä½¿ç¨\n     */\n    DRM.prototype.createSessionWithMediaKey = function (mediaKey, sessionInitData) {\n        var _a;\n        var creator = (_a = {},\n            _a[KeySystems.FairPlayWebKit] = this.createFPSWebkitSession,\n            _a[KeySystems.Widevine] = this.createMediaKeySession,\n            _a[KeySystems.FairPlay] = this.createMediaKeySession,\n            _a[KeySystems.PlayReady] = this.createMediaKeySession,\n            _a[KeySystems.PlayReadyHardware] = this.createMediaKeySession,\n            _a);\n        return creator[this.config.keySystem].call(this, mediaKey, sessionInitData);\n    };\n    /**\n     * åå»ºç¨äºCDMè®¿é®çmediaKey\n     * @param keySystem å å¯ç±»å\n     */\n    DRM.prototype.createKeySystemAccess = function (keySystem) {\n        var _a;\n        var creator = (_a = {},\n            _a[KeySystems.Widevine] = this.requestKeySystemAccess,\n            _a[KeySystems.FairPlay] = this.requestKeySystemAccess,\n            _a[KeySystems.FairPlayWebKit] = this.requestFPSMediaKeys,\n            _a[KeySystems.PlayReady] = this.requestKeySystemAccess,\n            _a[KeySystems.PlayReadyHardware] = this.requestKeySystemAccess,\n            _a);\n        return creator[this.config.keySystem].call(this, keySystem);\n    };\n    /**\n     * æ ¹æ®keySystemè¯·æ±license\n     * @param data licenseè¯·æ±çæ°æ®\n     * @param callback license xhrè¯·æ±çonloadåè°\n     */\n    DRM.prototype.requestLicense = function (data, callback) {\n        var _a;\n        if (!this.config.licenseUrl) {\n            this.emit(ERR, {\n                code: _enums__WEBPACK_IMPORTED_MODULE_2__["DRM_ERR_CODE"].LICENSE_NOT_EXIST,\n                message: \'è§é¢èµæºå·²å å¯ï¼ä½æªéç½®è§£å¯è¯ä¹¦å°å\',\n            });\n            return;\n        }\n        var request = (_a = {},\n            _a[KeySystems.FairPlayWebKit] = this.createFPSLicenseRequest,\n            _a[KeySystems.Widevine] = this.createWidevineLicenseRequest,\n            _a[KeySystems.PlayReady] = this.createPlayReadyLicenseRequest,\n            _a[KeySystems.FairPlay] = this.createFPSLicenseRequest,\n            _a[KeySystems.PlayReadyHardware] = this.createPlayReadyLicenseRequest,\n            _a);\n        return request[this.config.keySystem].call(this, data, callback);\n    };\n    /**\n     * è¯·æ±æå¡ç«¯è¯ä¹¦\n     * @param keySystem å å¯ç±»å\n     * @param url è¯ä¹¦å°å\n     */\n    DRM.prototype.requestServerCertificate = function (keySystem, url) {\n        return __awaiter(this, void 0, void 0, function () {\n            var data;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, _util__WEBPACK_IMPORTED_MODULE_1__["netTool"].xhr({\n                            method: \'GET\',\n                            responseType: \'arraybuffer\',\n                            url: url,\n                        })];\n                    case 1:\n                        data = (_a.sent()).data;\n                        DRM.serverCertificate[keySystem] = new Uint8Array(data);\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * ç¬¬ä¸æ­¥ï¼åå»ºCDM access\n     */\n    DRM.prototype.requestKeySystemAccess = function (keySystem) {\n        return __awaiter(this, void 0, void 0, function () {\n            var keySystemConfig, keySystemAccess, error_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        keySystemConfig = getSupportedKeySystemConfig(keySystem);\n                        if (!keySystemConfig) {\n                            this.emit(ERR, {\n                                code: _enums__WEBPACK_IMPORTED_MODULE_2__["DRM_ERR_CODE"].KEY_SYS_NOT_SUPPORTED,\n                                message: "".concat(keySystem, " \\u4E0D\\u652F\\u6301"),\n                            });\n                            return [2 /*return*/];\n                        }\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, self.navigator.requestMediaKeySystemAccess(keySystem, [keySystemConfig])];\n                    case 2:\n                        keySystemAccess = _a.sent();\n                        return [2 /*return*/, this.onMediaKeySystemObtained(keySystem, keySystemAccess)];\n                    case 3:\n                        error_1 = _a.sent();\n                        this.emit(ERR, {\n                            code: _enums__WEBPACK_IMPORTED_MODULE_2__["DRM_ERR_CODE"].KEY_SYS_ACCESS_FAILED,\n                            message: "\\u8BBF\\u95EECDM\\u5931\\u8D25, keySystem ".concat(keySystem),\n                        });\n                        return [2 /*return*/];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * ç¬¬äºæ­¥ï¼åå»ºmediaKey\n     */\n    DRM.prototype.onMediaKeySystemObtained = function (keySystem, mediaKeySystemAccess) {\n        return __awaiter(this, void 0, void 0, function () {\n            var mediaKeys, e_2;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, mediaKeySystemAccess.createMediaKeys()];\n                    case 1:\n                        mediaKeys = _a.sent();\n                        this.mediaKeyDescriptor = {\n                            hasInitialized: false,\n                            mediaKeySession: null,\n                            mediaKeySystemAccess: mediaKeySystemAccess,\n                            mediaKeys: mediaKeys,\n                        };\n                        _a.label = 2;\n                    case 2:\n                        _a.trys.push([2, 5, , 6]);\n                        if (!(keySystem === KeySystems.FairPlay)) return [3 /*break*/, 4];\n                        return [4 /*yield*/, mediaKeys.setServerCertificate(DRM.serverCertificate[KeySystems.FairPlay])];\n                    case 3:\n                        _a.sent();\n                        _a.label = 4;\n                    case 4:\n                        this.createSessionWithMediaKey(mediaKeys);\n                        return [2 /*return*/, mediaKeys];\n                    case 5:\n                        e_2 = _a.sent();\n                        this.emit(ERR, {\n                            code: _enums__WEBPACK_IMPORTED_MODULE_2__["DRM_ERR_CODE"].KEY_SESSION_CREATION_FAILED,\n                            message: \'CDM Sessionåå§åå¤±è´¥\',\n                        });\n                        return [2 /*return*/];\n                    case 6: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * ç¬¬ä¸æ­¥ï¼åå»ºmediaKeySessionï¼çå¬messageäºä»¶\n     */\n    DRM.prototype.createMediaKeySession = function (mediaKeys) {\n        var _this = this;\n        // è¿éé¿åéå¤åå»ºå¯¼è´sessionä¿¡æ¯éè¯¯\n        if (this.mediaKeyDescriptor.mediaKeySession) {\n            this.logger.warn(\'Media key-session has already been initialized\');\n            return;\n        }\n        // https://www.w3.org/TR/encrypted-media/#dom-mediakeystatus\n        // EME specä¸­å®ä¹çkey status\n        var keyStatusMap = {\n            \'output-restricted\': [_enums__WEBPACK_IMPORTED_MODULE_2__["DRM_ERR_CODE"].HDCP_ERROR, \'ä½ å¯è½é¾æ¥äºä¸æ¯æHDCPæ åçæ¾ç¤ºå¨\'],\n            \'output-downscaled\': [_enums__WEBPACK_IMPORTED_MODULE_2__["DRM_ERR_CODE"].HDCP_ERROR, \'ä½ å¯è½é¾æ¥äºä¸æ¯æHDCPæ åçæ¾ç¤ºå¨\'],\n            \'status-pending\': null,\n            \'internal-error\': [_enums__WEBPACK_IMPORTED_MODULE_2__["DRM_ERR_CODE"].KEY_INTERNAL_ERROR, \'åé¨éè¯¯\'],\n            usable: null,\n            expired: [_enums__WEBPACK_IMPORTED_MODULE_2__["DRM_ERR_CODE"].KEY_EXPIRED, \'MediaKeyå·²è¿æ\'],\n            released: [_enums__WEBPACK_IMPORTED_MODULE_2__["DRM_ERR_CODE"].KEY_RELEASED, \'MediaKeyå·²ä»CDMä¸­æ³¨é\'],\n        };\n        this.mediaKeyDescriptor.mediaKeySession = mediaKeys.createSession();\n        this.mediaKeyDescriptor.mediaKeySession.onkeystatuseschange = function (e) {\n            var _a, _b, _c;\n            (_c = (_b = (_a = e.target) === null || _a === void 0 ? void 0 : _a.keyStatuses) === null || _b === void 0 ? void 0 : _b.forEach) === null || _c === void 0 ? void 0 : _c.call(_b, function (status, keyId) {\n                if (!_this.mediaKeyDescriptor)\n                    return;\n                if (keyStatusMap[status]) {\n                    var _a = keyStatusMap[status], code = _a[0], message = _a[1];\n                    _this.emit(ERR, {\n                        code: code,\n                        message: message,\n                    });\n                }\n            });\n        };\n        this.mediaKeyDescriptor.mediaKeySession.onmessage = function (event) {\n            _this.onMediaKeySessionMessage(_this.mediaKeyDescriptor.mediaKeySession, event);\n        };\n    };\n    /**\n     * ç¬¬åæ­¥ï¼è¯·æ±licenseå¹¶æ´æ°sessionè§£å¯ä¿¡æ¯\n     *\n     * è¿éwebkitåEMEçå®ç°ç¸åï¼ä¸¤èå±ç¨ä¸ä¸ªæ¹æ³å¤ç\n     */\n    DRM.prototype.onMediaKeySessionMessage = function (keySession, event) {\n        var _this = this;\n        this.logger.log(\'received media key session message\', event);\n        this.requestLicense(event, function (response) {\n            var data = response.data;\n            if (_this.config.licenseResponseSetup) {\n                data = _this.config.licenseResponseSetup(data) || data;\n            }\n            if (!data) {\n                // å¦ææ æ³è§£ææè§£æåºä¸åæ³ç»æï¼æ¥éå¹¶ç»æ­¢\n                _this.emit(ERR, {\n                    code: _enums__WEBPACK_IMPORTED_MODULE_2__["DRM_ERR_CODE"].KEY_SESSION_UPDATE_FAILED,\n                    message: \'CDM Sessionæ´æ°å¤±è´¥ï¼è¯·æ£æ¥è¯ä¹¦è§£æ\',\n                });\n                return;\n            }\n            var updatePromise = keySession.update(data);\n            // å¼å®¹ä¸ä¸webkit fpsï¼åªææ åEMEå®ç°updateæä¼è¿åpromise\n            updatePromise === null || updatePromise === void 0 ? void 0 : updatePromise.catch(function (error) {\n                _this.emit(ERR, {\n                    code: _enums__WEBPACK_IMPORTED_MODULE_2__["DRM_ERR_CODE"].KEY_SESSION_UPDATE_FAILED,\n                    message: \'CDM Sessionæ´æ°å¤±è´¥ï¼è¯·æ£æ¥è¯ä¹¦è§£æ\',\n                });\n                return;\n            });\n        });\n    };\n    /**\n     * åå»ºwidevine licenseçxhrè¯·æ±\n     * ! widevineçè¯·æ±æ°æ®ä¸ºevent.message\n     */\n    DRM.prototype.createWidevineLicenseRequest = function (event, callback) {\n        var _this = this;\n        var message = event.message;\n        var opts = {\n            method: \'POST\',\n            responseType: \'arraybuffer\',\n            body: message,\n            url: this.config.licenseUrl,\n            headers: {\n                \'Content-Type\': \'application/x-www-form-urlencoded\',\n            },\n        };\n        if (this.config.licenseRequestSetup) {\n            opts = this.config.licenseRequestSetup(opts);\n        }\n        _util__WEBPACK_IMPORTED_MODULE_1__["netTool"].xhr(opts)\n            .then(function (response) {\n            callback(response);\n        })\n            .catch(function (error) {\n            var _a = error || {}, code = _a.code, message = _a.message;\n            var errCode = "".concat(_enums__WEBPACK_IMPORTED_MODULE_2__["DRM_ERR_CODE"].LICENSE_REQUEST_FAILED, ".").concat(code !== null && code !== void 0 ? code : \'0\');\n            _this.emit(ERR, {\n                code: errCode,\n                message: "\\u8BC1\\u4E66\\u8BF7\\u6C42\\u5931\\u8D25 [code: ".concat(code, "] ").concat(message),\n            });\n        });\n    };\n    /**\n     * åå»ºplayreadyçlicenseè¯·æ±\n     */\n    DRM.prototype.createPlayReadyLicenseRequest = function (event, callback) {\n        var _this = this;\n        var message = event.message;\n        var keyMessageXML = Object(_playready_utils__WEBPACK_IMPORTED_MODULE_4__["builtMessageXML"])(message);\n        var opts = {\n            method: \'POST\',\n            responseType: \'arraybuffer\',\n            body: Object(_playready_utils__WEBPACK_IMPORTED_MODULE_4__["getChallenge"])(keyMessageXML),\n            url: this.config.licenseUrl,\n            headers: Object(_playready_utils__WEBPACK_IMPORTED_MODULE_4__["builtHeadersFromXML"])(keyMessageXML),\n        };\n        if (this.config.licenseRequestSetup) {\n            opts = this.config.licenseRequestSetup(opts);\n        }\n        _util__WEBPACK_IMPORTED_MODULE_1__["netTool"].xhr(opts)\n            .then(function (response) {\n            callback(response);\n        })\n            .catch(function (error) {\n            _this.logger.warn(\'failed to get license\', error);\n            _this.emit(ERR, {\n                code: _enums__WEBPACK_IMPORTED_MODULE_2__["DRM_ERR_CODE"].LICENSE_REQUEST_FAILED,\n                message: "\\u8BC1\\u4E66\\u8BF7\\u6C42\\u5931\\u8D25 ".concat(error === null || error === void 0 ? void 0 : error.message),\n            });\n        });\n    };\n    /**\n     * åå»ºfps licenseçxhrè¯·æ±\n     * ! fpsçåºç¡è¯·æ±æ°æ®ä¸ºspc=data, å¶ä¸­dataæ¯base64ç¼ç çevent.message\n     */\n    DRM.prototype.createFPSLicenseRequest = function (event, callback) {\n        var _this = this;\n        var message = event.message;\n        var spcMessage = encodeURIComponent(_util__WEBPACK_IMPORTED_MODULE_1__["stringTool"].arrayBufferToBase64(message));\n        var opts = {\n            method: \'POST\',\n            responseType: \'arraybuffer\',\n            body: "spc=".concat(spcMessage, "&assetId=").concat(this.mediaKeyDescriptor.assetID),\n            url: this.config.licenseUrl,\n            headers: {\n                \'Content-Type\': \'application/x-www-form-urlencoded\',\n            },\n        };\n        if (this.config.licenseRequestSetup) {\n            opts = this.config.licenseRequestSetup(opts);\n        }\n        _util__WEBPACK_IMPORTED_MODULE_1__["netTool"].xhr(opts)\n            .then(function (response) {\n            callback(response);\n        })\n            .catch(function (error) {\n            _this.logger.warn(\'license request error\', error);\n            _this.emit(ERR, {\n                code: _enums__WEBPACK_IMPORTED_MODULE_2__["DRM_ERR_CODE"].LICENSE_REQUEST_FAILED,\n                message: \'è¯ä¹¦è¯·æ±å¤±è´¥\',\n            });\n        });\n    };\n    /**\n     * ====================================================================================\n     * Apple Fairplay Webkitæ åçå å¯æ­æ¾æµç¨\n     * 1. åå»ºwebkit mediaKey\n     * 2. ç»å®mediakeyå°videoï¼è¿ééè¦åç»å®ååå»ºsession\n     * 3. çå¬webkitneededkeyï¼æ¼è£initDataå¹¶åå»ºsession\n     * 4. çå¬sessionçmessageäºä»¶ï¼åå»ºlicenseè¯·æ±\n     * 5. æ´æ°sessionçè§£å¯ä¿¡æ¯\n     */\n    /**\n     * åå»ºwebkit mediaKey\n     */\n    DRM.prototype.requestFPSMediaKeys = function () {\n        var mediaKey = new window.WebKitMediaKeys(KeySystems.FairPlayWebKit);\n        // ! fps1.0 need to set key before create session\n        this.media.webkitSetMediaKeys(mediaKey);\n        // è¿éå¦æè®¾ç½®å¤±è´¥äºï¼å¨createSessionçæ¶åä¼å ä¸ºæ²¡æmediakeyèæ¥é\n        this.mediaKeyDescriptor = {\n            mediaKeySession: null,\n            initData: null,\n            hasInitialized: false,\n            mediaKeySystemAccess: null,\n            mediaKeys: this.media.webkitKeys,\n        };\n        return Promise.resolve(mediaKey);\n    };\n    /**\n     * åå»ºwebkit mediakeyçsession\n     */\n    DRM.prototype.createFPSWebkitSession = function (mediaKeys, initData) {\n        // è¿éåå°çmediaKeyæ¯ç»å®å¨videoæ ç­¾ä¸çï¼å¦æç»å®å¤±è´¥äºä¼å¨è¿éæåº\n        if (!mediaKeys) {\n            this.emit(ERR, {\n                code: _enums__WEBPACK_IMPORTED_MODULE_2__["DRM_ERR_CODE"].FPS_SET_KEY_FAILED,\n                message: \'Webkit MediaKeyåå»ºå¤±è´¥\',\n            });\n            return;\n        }\n        // åå»ºsessionå¤±è´¥æ¶è¿åä¸ºnull\n        // todo å¶å®å¦æsessionIdä¸ºç©ºä¹åºè¯¥å¤å«ä¸ºå¤±è´¥\n        var session = mediaKeys.createSession(\'video/mp4\', initData);\n        if (!session) {\n            this.emit(ERR, {\n                code: _enums__WEBPACK_IMPORTED_MODULE_2__["DRM_ERR_CODE"].KEY_SESSION_CREATION_FAILED,\n                message: \'Webkit CDM Sessionåå»ºå¤±è´¥\',\n            });\n            return;\n        }\n        return session;\n    };\n    /**\n     * æ¸çwebkit mediakey session\n     */\n    DRM.prototype.cleanupFPSSession = function (mediaKeySession) {\n        if (!mediaKeySession)\n            return Promise.resolve();\n        this.media.webkitSetMediaKeys(null);\n        mediaKeySession.onwebkitkeyadded = null;\n        mediaKeySession.onwebkitkeyerror = null;\n        mediaKeySession.onwebkitkeymessage = null;\n        return Promise.resolve();\n    };\n    /**\n     * æå¡å¨è¯ä¹¦ç¼å­ï¼ç®ååªæfairplayä¼ç¨å°\n     */\n    DRM.serverCertificate = {};\n    return DRM;\n}(_libs_event_emitter__WEBPACK_IMPORTED_MODULE_0__["default"]));\n/* harmony default export */ __webpack_exports__["default"] = (DRM);\n;\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/drm/index.ts?')},"./src/drm/playready-utils.ts":function srcDrmPlayreadyUtilsTs(module,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"builtMessageXML\", function() { return builtMessageXML; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getChallenge\", function() { return getChallenge; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"builtHeadersFromXML\", function() { return builtHeadersFromXML; });\nfunction builtMessageXML(message) {\n    return new DOMParser()\n        .parseFromString(String.fromCharCode.apply(null, new Uint16Array(message)), 'application/xml');\n}\nfunction getChallenge(doc) {\n    var el = doc.getElementsByTagName('Challenge')[0];\n    try {\n        return atob(el.childNodes[0].nodeValue);\n    }\n    catch (e) {\n        throw 'cannot parse <Challenge> from init message';\n    }\n}\nfunction builtHeadersFromXML(doc) {\n    var headers = {};\n    var headerNames = doc.getElementsByTagName('name');\n    var headerValues = doc.getElementsByTagName('value');\n    if (headerNames.length !== headerValues.length) {\n        throw 'header names and values are not match';\n    }\n    for (var i = 0; i < headerNames.length; i++) {\n        headers[headerNames[i].childNodes[0].nodeValue] = headerValues[i].childNodes[0].nodeValue;\n    }\n    return headers;\n}\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/drm/playready-utils.ts?")},"./src/enums.ts":function srcEnumsTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SET_LEVEL_MODE", function() { return SET_LEVEL_MODE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PLAY_MODE", function() { return PLAY_MODE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CAN_PLAY_ALL", function() { return CAN_PLAY_ALL; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VIDEO_CONTAINER_CLASS", function() { return VIDEO_CONTAINER_CLASS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "END_STATE", function() { return END_STATE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VIDEO_READY_STATE", function() { return VIDEO_READY_STATE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VIDEO_EVTS", function() { return VIDEO_EVTS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VIDEO_STATE", function() { return VIDEO_STATE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ERROR_CODE", function() { return ERROR_CODE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VIDEO_ELEMENT_ERROR", function() { return VIDEO_ELEMENT_ERROR; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ERROR_MSG", function() { return ERROR_MSG; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PLAY_EVENT", function() { return PLAY_EVENT; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PRELOAD_EVENT", function() { return PRELOAD_EVENT; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VIDEO_NODE_EVENT", function() { return VIDEO_NODE_EVENT; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MSE_EVENTS", function() { return MSE_EVENTS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PAUSE_TYPE", function() { return PAUSE_TYPE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PLAYER_LOG_LEVEL", function() { return PLAYER_LOG_LEVEL; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PRELOAD_TYPE", function() { return PRELOAD_TYPE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CODEC", function() { return CODEC; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VIDEO_CODEC", function() { return VIDEO_CODEC; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AUDIO_CODEC", function() { return AUDIO_CODEC; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CONTAINER_FORMAT", function() { return CONTAINER_FORMAT; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HDR_CAPABILITY", function() { return HDR_CAPABILITY; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VIDEO_ELEMENT_STATE", function() { return VIDEO_ELEMENT_STATE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CDN_PATH_PREFIX", function() { return CDN_PATH_PREFIX; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CACHE_SIZE_KEY", function() { return CACHE_SIZE_KEY; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DRM_TYPE", function() { return DRM_TYPE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VIDEO_TYPE", function() { return VIDEO_TYPE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KERNEL_NAME", function() { return KERNEL_NAME; });\n/**\n * åæ¢æ¸æ°åº¦çæ¨¡å¼\n */\nvar SET_LEVEL_MODE;\n(function (SET_LEVEL_MODE) {\n    /** å¤videoæ ç­¾é¢å è½½åæ¢ */\n    SET_LEVEL_MODE["SOFT"] = "soft";\n    /** é»å±éç½®srcåæ¢ */\n    SET_LEVEL_MODE["HARD"] = "hard";\n    /** æ ç¼åæ¢ï¼ä¾èµæ­æ¾åºå®ç°ï¼ */\n    SET_LEVEL_MODE["SMOOTH"] = "smooth";\n})(SET_LEVEL_MODE || (SET_LEVEL_MODE = {}));\n/**\n * æ­æ¾æ¨¡å¼æä¸¾ï¼ç¹æ­/ç´æ­\n */\nvar PLAY_MODE;\n(function (PLAY_MODE) {\n    PLAY_MODE["VOD"] = "vod";\n    PLAY_MODE["LIVE"] = "live";\n})(PLAY_MODE || (PLAY_MODE = {}));\n/**\n * è¡¨ç¤ºåæ ¸æ¯æææçæ ¼å¼ãï¼å¦ææ¯é¨åæ¯æï¼åä¸º[\'mp4\']ã[\'flv\']æ­¤ç±»æ°ç»ï¼\n */\nvar CAN_PLAY_ALL = null;\n/**\n * åé¨åå»ºçvideoæ ç­¾å®¹å¨çclasså\n */\nvar VIDEO_CONTAINER_CLASS = \'txp_videos_container\';\n/**\n * æ­æ¾ç»ææ¶çç¶ææä¸¾ï¼ç¨äºåºåæ­æ¾ç»æçåå \n * @enum {string}\n */\nvar END_STATE;\n(function (END_STATE) {\n    /** æ­£å¸¸ç»æï¼å°åºè§é¢ç»æç¹æ­æ¾å®æï¼ */\n    END_STATE["NORMAL"] = "normal";\n    /** ä¸­æ­æ­æ¾ï¼æªæ­æ¾å®ææ¶è¢«ç»æï¼ */\n    END_STATE["INTERRUPT"] = "interrupt";\n    /** æ­æ¾åºé */\n    END_STATE["ERROR"] = "error";\n})(END_STATE || (END_STATE = {}));\n/**\n * videoæ ç­¾çready stateæä¸¾\n */\nvar VIDEO_READY_STATE;\n(function (VIDEO_READY_STATE) {\n    VIDEO_READY_STATE[VIDEO_READY_STATE["HAVE_NOTHING"] = 0] = "HAVE_NOTHING";\n    VIDEO_READY_STATE[VIDEO_READY_STATE["HAVE_METADATA"] = 1] = "HAVE_METADATA";\n    VIDEO_READY_STATE[VIDEO_READY_STATE["HAVE_CURRENT_DATA"] = 2] = "HAVE_CURRENT_DATA";\n    VIDEO_READY_STATE[VIDEO_READY_STATE["HAVE_FUTURE_DATA"] = 3] = "HAVE_FUTURE_DATA";\n    VIDEO_READY_STATE[VIDEO_READY_STATE["HAVE_ENOUGH_DATA"] = 4] = "HAVE_ENOUGH_DATA";\n})(VIDEO_READY_STATE || (VIDEO_READY_STATE = {}));\n/**\n * videoæ ç­¾äºä»¶åè¡¨\n */\nvar VIDEO_EVTS;\n(function (VIDEO_EVTS) {\n    VIDEO_EVTS["loadstart"] = "loadstart";\n    VIDEO_EVTS["timeupdate"] = "timeupdate";\n    VIDEO_EVTS["durationchange"] = "durationchange";\n    VIDEO_EVTS["volumechange"] = "volumechange";\n    VIDEO_EVTS["canplay"] = "canplay";\n    VIDEO_EVTS["playing"] = "playing";\n    VIDEO_EVTS["pause"] = "pause";\n    VIDEO_EVTS["waiting"] = "waiting";\n    VIDEO_EVTS["seeking"] = "seeking";\n    VIDEO_EVTS["seeked"] = "seeked";\n    VIDEO_EVTS["loadeddata"] = "loadeddata";\n    VIDEO_EVTS["loadedmetadata"] = "loadedmetadata";\n    VIDEO_EVTS["ended"] = "ended";\n    VIDEO_EVTS["error"] = "error";\n    VIDEO_EVTS["progress"] = "progress";\n    VIDEO_EVTS["ratechange"] = "ratechange";\n    VIDEO_EVTS["resize"] = "resize";\n    /** wasm FakeVideo ä¸ç¨ */\n    VIDEO_EVTS["frameRender"] = "videoFrameRender";\n})(VIDEO_EVTS || (VIDEO_EVTS = {}));\n/**\n * æ è®°æ­æ¾å¨ç¶æ\n * @enum {string}\n */\nvar VIDEO_STATE;\n(function (VIDEO_STATE) {\n    VIDEO_STATE["IDLE"] = "idle";\n    VIDEO_STATE["LOAD_START"] = "loadStart";\n    /** å½æµè§å¨è½å¤å¼å§æ­æ¾æå®çé³é¢/è§é¢æ¶ï¼ä½å°æªå¼å§æ­æ¾ */\n    VIDEO_STATE["CANPLAY"] = "canplay";\n    VIDEO_STATE["PLAYING"] = "playing";\n    VIDEO_STATE["PAUSE"] = "pause";\n    VIDEO_STATE["SEEKING"] = "seeking";\n    VIDEO_STATE["SEEKED"] = "seeked";\n    VIDEO_STATE["BUFFERING"] = "buffering";\n    /** æ­£å¸¸æ­æ¾ç»æï¼åæ¬å¤é¨ä¸­æ­æ­æ¾ï¼ï¼å¦ææ¯æ­æ¾åºéåæ²¡ææ­¤ç¶æ */\n    VIDEO_STATE["END"] = "end";\n})(VIDEO_STATE || (VIDEO_STATE = {}));\nvar ERROR_CODE;\n(function (ERROR_CODE) {\n    ERROR_CODE["UNKNOWN_ERR"] = "70011000";\n    /** videoæ ç­¾æåºæ¥çéè¯¯1ï¼è§é¢ååè¢«ç»æ­¢ */\n    ERROR_CODE["MEDIA_ERR_ABORTED"] = "70011100";\n    /** videoæ ç­¾æåºæ¥çéè¯¯2ï¼H5ä¸è½½è§é¢éè¯¯ */\n    ERROR_CODE["MEDIA_ERR_NETWORK"] = "70011101";\n    /** videoæ ç­¾æåºæ¥çéè¯¯3ï¼H5è§é¢è§£ç éè¯¯ */\n    ERROR_CODE["MEDIA_ERR_DECODE"] = "70011102";\n    /** videoæ ç­¾æåºæ¥çéè¯¯4ï¼H5ä¸æ¯æè¯¥é³è§é¢ */\n    ERROR_CODE["MEDIA_ERR_SRC_NOT_SUPPORTED"] = "70011103";\n    /** åçæ­æ¾å è½½è¶æ¶ */\n    ERROR_CODE["ORG_LOAD_TIMEOUT"] = "70011104";\n    /** ç¶æè¶è¿æå¤§åæ»æ¶é´ */\n    ERROR_CODE["STATE_STUCK"] = "70011105";\n    /** æ­æ¾æ¶é´è¶è¿æå¤§åæ»æ¶é´ */\n    ERROR_CODE["ORG_PLAY_STUCK_ERR"] = "70011111";\n    ERROR_CODE["NULL_URL"] = "70011112";\n    ERROR_CODE["MISSING_KERNEL"] = "70011113";\n    ERROR_CODE["KERNEL_NOT_SPT"] = "70011114";\n})(ERROR_CODE || (ERROR_CODE = {}));\n/**\n * videoåçéè¯¯åè¡¨\n */\nvar VIDEO_ELEMENT_ERROR = {\n    1: { code: ERROR_CODE.MEDIA_ERR_ABORTED, message: \'è§é¢è·åè¢«ç»æ­¢\' },\n    2: { code: ERROR_CODE.MEDIA_ERR_NETWORK, message: \'ä¸è½½è§é¢åçéè¯¯\' },\n    3: { code: ERROR_CODE.MEDIA_ERR_DECODE, message: \'å°è¯è§£ç åºé\' },\n    4: { code: ERROR_CODE.MEDIA_ERR_SRC_NOT_SUPPORTED, message: \'æµè§å¨ä¸æ¯æè¯¥é³è§é¢\' },\n};\nvar ERROR_MSG;\n(function (ERROR_MSG) {\n    ERROR_MSG["UNKNOWN"] = "\\u672A\\u77E5\\u9519\\u8BEF";\n    ERROR_MSG["XHR_NET"] = "\\u89C6\\u9891\\u83B7\\u53D6\\u9014\\u4E2D\\u51FA\\u73B0\\u95EE\\u9898";\n    // PRESET_MODULE_LOAD = \'preset module failed to load\',\n    ERROR_MSG["PRELOAD_VIDEO_TIMEOUT"] = "\\u52A0\\u8F7D\\u89C6\\u9891\\u8D85\\u65F6";\n    ERROR_MSG["PLAY_STUCK"] = "\\u89C6\\u9891\\u65E0\\u6CD5\\u7EE7\\u7EED\\u64AD\\u653E";\n    ERROR_MSG["LOAD_STREAM_FAIL"] = "\\u89C6\\u9891\\u6D41\\u83B7\\u53D6\\u9014\\u4E2D\\u51FA\\u73B0\\u95EE\\u9898";\n    ERROR_MSG["INNER"] = "\\u5185\\u90E8\\u9519\\u8BEF";\n    ERROR_MSG["NULL_URL"] = "\\u4F20\\u5165\\u7684\\u5730\\u5740\\u4E3A\\u7A7A";\n})(ERROR_MSG || (ERROR_MSG = {}));\n/**\n * æ­æ¾äºä»¶å®ä¹\n */\nvar PLAY_EVENT;\n(function (PLAY_EVENT) {\n    /** éæ°æ­æ¾ */\n    PLAY_EVENT["RESTART"] = "restart";\n    PLAY_EVENT["TIME_UPDATE"] = "timeupdate";\n    PLAY_EVENT["METADATA_CHANGE"] = "metadataChange";\n    PLAY_EVENT["RATE_CHANGE"] = "rateChange";\n    PLAY_EVENT["VOLUME_CHANGE"] = "volumeChange";\n    PLAY_EVENT["DURATION_CHANGE"] = "durationChange";\n    /** èªå¨æ­æ¾è¢«é»æ­¢ */\n    PLAY_EVENT["AUTOPLAY_BLOCKED"] = "autoplayBlocked";\n    /** å è½½è¿åº¦ååæ¶ï¼åªæmseæ¨¡å¼ä¸æèªå®ä¹å è½½ï¼æä¼ååºæ­¤äºä»¶ï¼ */\n    PLAY_EVENT["LOAD_PROGRESS"] = "loadProgress";\n    PLAY_EVENT["STATE_CHANGE"] = "stateChange";\n    /** æ¯å¦æ¯å¦é¦æ¬¡å¼æ­(å³ä½¿å½åæ­æ¾åè¡¨æå¤ä¸ªè§é¢ï¼ä¹åªæä¸æ¬¡æ­¤äºä»¶ï¼èä¸ä¸å®æ¯çå°ç»é¢) */\n    PLAY_EVENT["FIRST_PLAYING"] = "firstPlaying";\n    /** æ¯ä¸æ®µæ­æ¾ç»æ */\n    PLAY_EVENT["VIDEONODE_PLAY_OVER"] = "videoNodePlayOver";\n    /** æ¯ä¸æ®µè§é¢å¼å§æ­æ¾æ¶åï¼å¯è½å¹¶æªçå°ç»é¢ï¼åªæ¯åå°æ­¤è§é¢å¼å§å è½½ï¼ */\n    PLAY_EVENT["VIDEONODE_START_PLAY"] = "videoNodeStartPlay";\n    /** æ¯ä¸æ®µè§é¢æ¯å¦é¦æ¬¡å¼æ­(ä¸å®æ¯çå°ç»é¢) */\n    PLAY_EVENT["VIDEONODE_FIRST_PLAYING"] = "videoNodeFirstPlaying";\n    /** æ¯ä¸æ®µè§é¢åå¤æ­æ¾ï¼playeråè¡¨çå½åç´¢å¼ååï¼* */\n    PLAY_EVENT["VIDEONODE_CHANGE"] = "videoNodeChange";\n    /** æ­æ¾åè¡¨åçååï¼æ¯æ¬¡åè¡¨ååï¼é½åªæ¯ååå½åæ­æ¾å°ååé¢çåè¡¨ï¼ */\n    PLAY_EVENT["LIST_CHANGE"] = "listChange";\n    /** éç¥å¤é¨æ¯å¦æ¾ç¤ºloadingå¨ç» */\n    PLAY_EVENT["SET_LOADING"] = "setLoading";\n    /** åè¡¨é¢å è½½å¼å§äºä»¶ï¼å¤è§é¢é¢å è½½åªä¼éç¥ä¸æ¬¡ */\n    PLAY_EVENT["PRELOAD_START"] = "preloadStart";\n    /** åä¸ªè§é¢é¢å è½½ç»æäºä»¶ï¼å¤è§é¢é¢å è½½æ¯ä¸ªè§é¢é½ä¼éç¥ */\n    PLAY_EVENT["PRELOAD_VIDEONODE_OVER"] = "preloadVideonodeOver";\n    /** åä¸ªè§é¢é¢å è½½æ¸é¤äºä»¶ï¼å¤è§é¢é¢å è½½æ¯ä¸ªè§é¢é½ä¼éç¥ */\n    PLAY_EVENT["PRELOAD_VIDEONODE_CLEAR"] = "preloadVideonodeClear";\n    /** åä¸ªè§é¢é¢å è½½éè¯¯äºä»¶ï¼å¤è§é¢é¢å è½½æ¯ä¸ªè§é¢é½ä¼éç¥ */\n    PLAY_EVENT["PRELOAD_VIDEONODE_ERROR"] = "preloadVideonodeError";\n    /** videoæ ç­¾çbufferedå±æ§ååæ¶ */\n    PLAY_EVENT["VIDEO_BUFFER_CHANGE"] = "videoBufferChange";\n    /** åæ¢æ¸æ°åº¦å¼å§ */\n    PLAY_EVENT["SETLEVEL_START"] = "setLevelStart";\n    /** åæ¢æ¸æ°åº¦æåorå¤±è´¥ */\n    PLAY_EVENT["SETLEVEL_OVER"] = "setLevelOver";\n    /** åæ¢é³è½¨å¼å§ */\n    PLAY_EVENT["SET_AUDIO_TRACK_START"] = "setAudioTrackStart";\n    /** åæ¢é³è½¨æåorå¤±è´¥ */\n    PLAY_EVENT["SET_AUDIO_TRACK_OVER"] = "setAudioTrackOver";\n    PLAY_EVENT["RESIZE"] = "resize";\n    PLAY_EVENT["STOPED"] = "stoped";\n    PLAY_EVENT["ERROR"] = "error";\n    PLAY_EVENT["RETRY_BACKURL"] = "retryBackUrl";\n    /** è§é¢å¸§æ¸²ææ¶é¿ï¼ä»ç¹å®åæ ¸ææï¼ä¾å¦wasmåæ ¸ï¼ */\n    PLAY_EVENT["VIDEO_FRAME_RENDER"] = "videoFrameRender";\n    /** éä¼ videoçäºä»¶ */\n    PLAY_EVENT["ELEMENT_EVTS"] = "elementEvts";\n    /** è§é¢åè¾¨çåçåå */\n    PLAY_EVENT["VIDEO_RESIZE"] = "videoResize";\n    /** å¨å±åå */\n    PLAY_EVENT["FULLSCREEN_CHANGE"] = "fullscreenChange";\n})(PLAY_EVENT || (PLAY_EVENT = {}));\n/**\n * @ignore\n */\nvar PRELOAD_EVENT;\n(function (PRELOAD_EVENT) {\n    /** å¼å§é¢å è½½ */\n    PRELOAD_EVENT["START"] = "START_PRELOAD";\n    /**  åæ­¢é¢å è½½ */\n    PRELOAD_EVENT["STOP"] = "STOP_PRELOAD";\n    /** æ´æ°é¢å è½½ä¿¡æ¯ */\n    PRELOAD_EVENT["UPDATE"] = "UPDATE_PRELOAD_INFO";\n})(PRELOAD_EVENT || (PRELOAD_EVENT = {}));\n;\nvar VIDEO_NODE_EVENT;\n(function (VIDEO_NODE_EVENT) {\n    VIDEO_NODE_EVENT["TIME_UPDATE"] = "vn_timeupdate";\n    VIDEO_NODE_EVENT["METADATA_CHANGE"] = "vn_metadataChange";\n    VIDEO_NODE_EVENT["VOLUME_CHANGE"] = "vn_volumeChange";\n    VIDEO_NODE_EVENT["DURATION_CHANGE"] = "vn_durationChange";\n    VIDEO_NODE_EVENT["PLAY_PROMISE_CATCHED"] = "vn_playPromiseCatched";\n    /** å è½½è¿åº¦ååæ¶ï¼åªæmseæ¨¡å¼ä¸æèªå®ä¹å è½½ï¼æä¼ååºæ­¤äºä»¶ï¼ */\n    VIDEO_NODE_EVENT["LOAD_PROGRESS"] = "vn_loadProgress";\n    VIDEO_NODE_EVENT["RATE_CHANGE"] = "vn_rateChange";\n    /**\n     * å½ææ°æ®appendå°sourcebufferä¸­æ¶ï¼åªæmseæ¨¡å¼ä¸æèªå®ä¹å è½½ï¼æä¼ååºæ­¤äºä»¶ï¼\n     * @ignore\n     */\n    VIDEO_NODE_EVENT["BUFFER_APPENDED"] = "vn_bufferAppended";\n    VIDEO_NODE_EVENT["STATE_CHANGE"] = "vn_stateChange";\n    VIDEO_NODE_EVENT["ERROR"] = "vn_error";\n    /** videonodeè§¦åurléè¯ */\n    VIDEO_NODE_EVENT["RETRY"] = "vn_retry";\n    VIDEO_NODE_EVENT["SET_LOADING"] = "vn_setLoading";\n    /** videoæ ç­¾çbufferedå±æ§ååæ¶ */\n    VIDEO_NODE_EVENT["VIDEO_BUFFER_CHANGE"] = "vn_videoBufferChange";\n    /** åæ¢æ¸æ°åº¦å¼å§ */\n    VIDEO_NODE_EVENT["SETLEVEL_START"] = "vn_setLevelStart";\n    /** åæ¢æ¸æ°åº¦æåorå¤±è´¥ */\n    VIDEO_NODE_EVENT["SETLEVEL_OVER"] = "vn_setLevelOver";\n    /** åæ¢é³è½¨å¼å§ */\n    VIDEO_NODE_EVENT["SET_AUDIO_TRACK_START"] = "vn_setAudioTrackStart";\n    /** åæ¢é³è½¨æåorå¤±è´¥ */\n    VIDEO_NODE_EVENT["SET_AUDIO_TRACK_OVER"] = "vn_setAudioTrackOver";\n    /** VideoNodeä¸­çå°ååå */\n    VIDEO_NODE_EVENT["URL_CHANGE"] = "vn_urlChange";\n    /** æ¯å¦æ¯å¦é¦æ¬¡å¼æ­ */\n    VIDEO_NODE_EVENT["FIRST_PLAYING"] = "vn_firstPlaying";\n    /** éä¼ videoçäºä»¶ */\n    VIDEO_NODE_EVENT["ELEMENT_EVTS"] = "vn_elementEvts";\n    /** videonodeæ­£å¸¸ç»æ */\n    VIDEO_NODE_EVENT["PLAY_OVER"] = "vn_playOver";\n    /** è§é¢åè¾¨çåçåå */\n    VIDEO_NODE_EVENT["VIDEO_RESIZE"] = "vn_videoResize";\n    /** è§é¢å¸§æ¸²ææ¶é¿ï¼ä»ç¹å®åæ ¸ææï¼ä¾å¦wasmåæ ¸ï¼ */\n    VIDEO_NODE_EVENT["VIDEO_FRAME_RENDER"] = "vn_videoFrameRender";\n})(VIDEO_NODE_EVENT || (VIDEO_NODE_EVENT = {}));\n/**\n * @ignore\n */\nvar MSE_EVENTS;\n(function (MSE_EVENTS) {\n    MSE_EVENTS["OEPN"] = "open";\n    MSE_EVENTS["CLOSE"] = "close";\n    MSE_EVENTS["ERROR"] = "error";\n    MSE_EVENTS["REINIT"] = "REINIT";\n    MSE_EVENTS["UPDATE_END"] = "updateend";\n    MSE_EVENTS["REMOVE_END"] = "removeend";\n})(MSE_EVENTS || (MSE_EVENTS = {}));\n/**\n * @ignore\n */\nvar PAUSE_TYPE;\n(function (PAUSE_TYPE) {\n    PAUSE_TYPE["USER"] = "user";\n    PAUSE_TYPE["INNER"] = "inner";\n    PAUSE_TYPE["SYS"] = "sys";\n})(PAUSE_TYPE || (PAUSE_TYPE = {}));\n/** å¼å¯æ­æ¾å¨çæ¥å¿ç­çº§ */\nvar PLAYER_LOG_LEVEL;\n(function (PLAYER_LOG_LEVEL) {\n    /** ä¸æå¼æ¥å¿ */\n    PLAYER_LOG_LEVEL[PLAYER_LOG_LEVEL["NONE"] = 0] = "NONE";\n    /** å¼å¯coreçæ¥å¿ */\n    PLAYER_LOG_LEVEL[PLAYER_LOG_LEVEL["CORE"] = 1] = "CORE";\n    /** å¼å¯åæ ¸æ¥å¿ */\n    PLAYER_LOG_LEVEL[PLAYER_LOG_LEVEL["KERNEL"] = 2] = "KERNEL";\n})(PLAYER_LOG_LEVEL || (PLAYER_LOG_LEVEL = {}));\n/**\n * é¢å è½½ç­ç¥ç±»å\n */\nvar PRELOAD_TYPE;\n(function (PRELOAD_TYPE) {\n    /** ä»å è½½è§é¢å¤´é¨æ°æ®ï¼æå°æµéæ¶è */\n    PRELOAD_TYPE["META_DATA"] = "metadata";\n    /** ç±æµè§å¨èªè¡å³å®å è½½æ°æ®å¤§å°ï¼ä»èµå¼srcå±æ§ */\n    PRELOAD_TYPE["AUTO"] = "auto";\n    /** ç±æµè§å¨èªè¡å³å®å è½½æ°æ®å¤§å°ï¼åæ¶è°ç¨HTMLVideoElementçload()æ¥å£ï¼å¯è½ä¼å è½½æ´ä¸ªè§é¢ï¼å±äºæå¤§æµéæ¶è */\n    PRELOAD_TYPE["AUTO_LOAD"] = "autoLoad";\n})(PRELOAD_TYPE || (PRELOAD_TYPE = {}));\n/** @deprecated codecæä¸¾ */\nvar CODEC;\n(function (CODEC) {\n    CODEC[CODEC["H264"] = 0] = "H264";\n    CODEC[CODEC["H265"] = 1] = "H265";\n    CODEC[CODEC["AV1"] = 2] = "AV1";\n})(CODEC || (CODEC = {}));\n/** è§é¢codecæä¸¾ */\nvar VIDEO_CODEC;\n(function (VIDEO_CODEC) {\n    /** æªç¥ç¼ç  */\n    VIDEO_CODEC["UNKNOWN"] = "unknown";\n    VIDEO_CODEC["H264"] = "h264";\n    VIDEO_CODEC["H265"] = "h265";\n    VIDEO_CODEC["H266"] = "h266";\n    VIDEO_CODEC["VP8"] = "vp8";\n    VIDEO_CODEC["VP9"] = "vp9";\n    VIDEO_CODEC["AV1"] = "av1";\n    VIDEO_CODEC["DOLBY_VISION"] = "dolbyVision";\n})(VIDEO_CODEC || (VIDEO_CODEC = {}));\n/** é³é¢codecæä¸¾ */\nvar AUDIO_CODEC;\n(function (AUDIO_CODEC) {\n    AUDIO_CODEC["AAC"] = "aac";\n    AUDIO_CODEC["OPUS"] = "opus";\n})(AUDIO_CODEC || (AUDIO_CODEC = {}));\n/** å°è£å®¹å¨æä¸¾ */\nvar CONTAINER_FORMAT;\n(function (CONTAINER_FORMAT) {\n    CONTAINER_FORMAT["MPEG_TS"] = "mpegts";\n    CONTAINER_FORMAT["FMP4"] = "fmp4";\n    CONTAINER_FORMAT["MP4"] = "mp4";\n})(CONTAINER_FORMAT || (CONTAINER_FORMAT = {}));\n/** HDRæ¯æè½åæä¸¾ */\nvar HDR_CAPABILITY;\n(function (HDR_CAPABILITY) {\n    /** ä¸æ¯æ */\n    HDR_CAPABILITY[HDR_CAPABILITY["NOT_SUPPORTED"] = 0] = "NOT_SUPPORTED";\n    /** ä¸æ¯æHDRï¼ä½æ¾ç¤ºå¨æ¯æå¹¿è²åï¼display p3ç­ï¼ï¼å¯ä»¥éè¿tone mappingéçº§å°SDRæ­æ¾ */\n    HDR_CAPABILITY[HDR_CAPABILITY["WCG_DISPLAY_BUT_NO_HDR"] = 1] = "WCG_DISPLAY_BUT_NO_HDR";\n    /** æ¯æHDR */\n    HDR_CAPABILITY[HDR_CAPABILITY["SUPPORTED"] = 2] = "SUPPORTED";\n})(HDR_CAPABILITY || (HDR_CAPABILITY = {}));\n/**\n * videoæ ç­¾çç¶æï¼è¢«å ç¨/è¢«éæ¾\n */\nvar VIDEO_ELEMENT_STATE;\n(function (VIDEO_ELEMENT_STATE) {\n    VIDEO_ELEMENT_STATE["FREE"] = "0";\n    VIDEO_ELEMENT_STATE["USED"] = "1";\n})(VIDEO_ELEMENT_STATE || (VIDEO_ELEMENT_STATE = {}));\n;\nvar CDN_PATH_PREFIX = \'//vm.gtimg.cn/thumbplayer/\';\nvar CACHE_SIZE_KEY;\n(function (CACHE_SIZE_KEY) {\n    CACHE_SIZE_KEY["DEMUX"] = "demux_cache_size";\n})(CACHE_SIZE_KEY || (CACHE_SIZE_KEY = {}));\nvar DRM_TYPE;\n(function (DRM_TYPE) {\n    DRM_TYPE["FAIRPLAY"] = "fairplay";\n    DRM_TYPE["WIDEVINE"] = "widevine";\n    DRM_TYPE["PLAYREADY"] = "playready";\n    DRM_TYPE["CHACHA"] = "chacha";\n    DRM_TYPE["NONE"] = "none";\n})(DRM_TYPE || (DRM_TYPE = {}));\n/** å¯æ­æ¾æ ¼å¼è½åæä¸¾ */\nvar VIDEO_TYPE;\n(function (VIDEO_TYPE) {\n    VIDEO_TYPE["HLS"] = "hls";\n    VIDEO_TYPE["MP4"] = "mp4";\n    VIDEO_TYPE["MOV"] = "mov";\n    VIDEO_TYPE["FLV"] = "flv";\n    VIDEO_TYPE["WEBRTC"] = "webrtc";\n    VIDEO_TYPE["AVI"] = "avi";\n    VIDEO_TYPE["MPEG"] = "mpeg";\n    VIDEO_TYPE["WEBM"] = "webm";\n    VIDEO_TYPE["OGG"] = "ogg";\n    VIDEO_TYPE["OTHER"] = "other";\n})(VIDEO_TYPE || (VIDEO_TYPE = {}));\nvar KERNEL_NAME;\n(function (KERNEL_NAME) {\n    KERNEL_NAME["ORIGIN"] = "origin";\n    KERNEL_NAME["DEMUX_2_FMP4"] = "demux2fmp4";\n    KERNEL_NAME["FLV_JS"] = "flv.js";\n    KERNEL_NAME["HLS_JS"] = "hls.js";\n    KERNEL_NAME["WASM"] = "wasm";\n    KERNEL_NAME["WEBRTC"] = "webrtc";\n    KERNEL_NAME["ELECTRON"] = "electron";\n})(KERNEL_NAME || (KERNEL_NAME = {}));\n;\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/enums.ts?')},"./src/interfaces/iaudio-track.ts":function srcInterfacesIaudioTrackTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AUDIO_TRACK_ERROR_MSG", function() { return AUDIO_TRACK_ERROR_MSG; });\n/** é³è½¨ç¸å³çéè¯¯ææ¡ */\nvar AUDIO_TRACK_ERROR_MSG;\n(function (AUDIO_TRACK_ERROR_MSG) {\n    AUDIO_TRACK_ERROR_MSG["KERNEL_NOT_EXISTS"] = "kernel not exists";\n    AUDIO_TRACK_ERROR_MSG["NOT_SUPPORT"] = "not support";\n    AUDIO_TRACK_ERROR_MSG["STATE_INVALID"] = "state invalid";\n})(AUDIO_TRACK_ERROR_MSG || (AUDIO_TRACK_ERROR_MSG = {}));\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/interfaces/iaudio-track.ts?')},"./src/interfaces/iconfigs.ts":function srcInterfacesIconfigsTs(module,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/interfaces/iconfigs.ts?")},"./src/interfaces/ievent-info.ts":function srcInterfacesIeventInfoTs(module,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/interfaces/ievent-info.ts?")},"./src/interfaces/ikernel.ts":function srcInterfacesIkernelTs(module,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/interfaces/ikernel.ts?")},"./src/interfaces/imetadata.ts":function srcInterfacesImetadataTs(module,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/interfaces/imetadata.ts?")},"./src/interfaces/index.ts":function srcInterfacesIndexTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _iplayer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./iplayer */ "./src/interfaces/iplayer.ts");\n/* empty/unused harmony star reexport *//* harmony import */ var _ivideo_info__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ivideo-info */ "./src/interfaces/ivideo-info.ts");\n/* empty/unused harmony star reexport *//* harmony import */ var _ivideo_node__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ivideo-node */ "./src/interfaces/ivideo-node.ts");\n/* empty/unused harmony star reexport *//* harmony import */ var _iconfigs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./iconfigs */ "./src/interfaces/iconfigs.ts");\n/* empty/unused harmony star reexport *//* harmony import */ var _iurl_config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./iurl-config */ "./src/interfaces/iurl-config.ts");\n/* empty/unused harmony star reexport *//* harmony import */ var _istream__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./istream */ "./src/interfaces/istream.ts");\n/* empty/unused harmony star reexport *//* harmony import */ var _imetadata__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./imetadata */ "./src/interfaces/imetadata.ts");\n/* empty/unused harmony star reexport *//* harmony import */ var _ievent_info__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ievent-info */ "./src/interfaces/ievent-info.ts");\n/* empty/unused harmony star reexport *//* harmony import */ var _ipreloader__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./ipreloader */ "./src/interfaces/ipreloader.ts");\n/* empty/unused harmony star reexport *//* harmony import */ var _ikernel__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./ikernel */ "./src/interfaces/ikernel.ts");\n/* empty/unused harmony star reexport *//* harmony import */ var _ivideo_element__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./ivideo-element */ "./src/interfaces/ivideo-element.ts");\n/* empty/unused harmony star reexport *//* harmony import */ var _ivideo_com__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./ivideo-com */ "./src/interfaces/ivideo-com.ts");\n/* empty/unused harmony star reexport *//* harmony import */ var _video_capture__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./video-capture */ "./src/interfaces/video-capture.ts");\n/* empty/unused harmony star reexport *//* harmony import */ var _isimple_timerange__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./isimple-timerange */ "./src/interfaces/isimple-timerange.ts");\n/* empty/unused harmony star reexport *//* harmony import */ var _iaudio_track__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./iaudio-track */ "./src/interfaces/iaudio-track.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AUDIO_TRACK_ERROR_MSG", function() { return _iaudio_track__WEBPACK_IMPORTED_MODULE_14__["AUDIO_TRACK_ERROR_MSG"]; });\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/interfaces/index.ts?')},"./src/interfaces/iplayer.ts":function srcInterfacesIplayerTs(module,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/interfaces/iplayer.ts?")},"./src/interfaces/ipreloader.ts":function srcInterfacesIpreloaderTs(module,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/interfaces/ipreloader.ts?")},"./src/interfaces/isimple-timerange.ts":function srcInterfacesIsimpleTimerangeTs(module,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/interfaces/isimple-timerange.ts?")},"./src/interfaces/istream.ts":function srcInterfacesIstreamTs(module,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/interfaces/istream.ts?")},"./src/interfaces/iurl-config.ts":function srcInterfacesIurlConfigTs(module,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/interfaces/iurl-config.ts?")},"./src/interfaces/ivideo-com.ts":function srcInterfacesIvideoComTs(module,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n/**\n * å¼å®¹electronåæ ¸ä½¿ç¨çç¹æ®videoç»ä»¶\n */\n\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/interfaces/ivideo-com.ts?")},"./src/interfaces/ivideo-element.ts":function srcInterfacesIvideoElementTs(module,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/interfaces/ivideo-element.ts?")},"./src/interfaces/ivideo-info.ts":function srcInterfacesIvideoInfoTs(module,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/interfaces/ivideo-info.ts?")},"./src/interfaces/ivideo-node.ts":function srcInterfacesIvideoNodeTs(module,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/interfaces/ivideo-node.ts?")},"./src/interfaces/video-capture.ts":function srcInterfacesVideoCaptureTs(module,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/interfaces/video-capture.ts?")},"./src/kernel-origin/default-config.ts":function srcKernelOriginDefaultConfigTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defaultOriginKernelConfig", function() { return defaultOriginKernelConfig; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mergeKernelConfig", function() { return mergeKernelConfig; });\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util */ "./src/util/index.ts");\nvar __assign = (undefined && undefined.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n\nvar defaultOriginKernelConfig = {\n    /**\n     * @deprecated\n     * é»è®¤åå»ºçæå¤§VideoNodeæ°éãæ­¤å¼ä¼å½±åå°å¯ä»¥åæ¶é¢å è½½çè§é¢æ°ï¼ä¾å¦å¦æéè¦åæ¶é¢å è½½3ä¸ªè§é¢ï¼è¿ä¸ªå¼å°±éè¦æå®ä¸º3+1\n     * <br>ãæ³¨ãï¼ä»åçæ­æ¾åæ ¸æ¶ææ\n     */\n    maxVideoNodeCount: 1,\n    /**\n     * æåç»ææ­æ¾çæ¶é´ï¼èèå°æäºè§é¢æååªæé³é¢ï¼æéæ±éè¦åªæè§é¢ææ«å°¾çä¸æ®µæ­æ¾ï¼x5æµè§å¨æ¯0.1sï¼\n     * <br>ãæ³¨ãï¼ä»åçæ­æ¾åæ ¸æ¶ææ\n     */\n    advanceEndTime: _util__WEBPACK_IMPORTED_MODULE_0__["uaTool"].browser.x5 ? 0.1 : 0,\n    /**\n     * åçæ­æ¾åæ ¸å®ç°åæ¢æ¶ï¼ä¸ºäºæ¼æ¥é¡ºçï¼å¯è½ä¼æä¸ä¸ä¸ªè§é¢æåä¸ç¹ç¹æ­æ¾\n     * <br>ãæ³¨ãï¼ä»åçæ­æ¾åæ ¸æ¶ææ\n     */\n    prePlayNextTime: _util__WEBPACK_IMPORTED_MODULE_0__["uaTool"].browser.x5 ? 0.2 : 0,\n};\nfunction mergeKernelConfig(config) {\n    return __assign(__assign({}, config), { originKernelConfig: __assign(__assign({}, defaultOriginKernelConfig), config.originKernelConfig) });\n}\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/kernel-origin/default-config.ts?')},"./src/kernel-origin/live-player.ts":function srcKernelOriginLivePlayerTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _base_base_live_player__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../base/base-live-player */ "./src/base/base-live-player.ts");\n/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../enums */ "./src/enums.ts");\n/* harmony import */ var _default_config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./default-config */ "./src/kernel-origin/default-config.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n/**\n * ä½¿ç¨åçåæ ¸çç®æç´æ­æ­æ¾å¨\n */\nvar LivePlayer = /** @class */ (function (_super) {\n    __extends(LivePlayer, _super);\n    function LivePlayer(conf) {\n        return _super.call(this, Object(_default_config__WEBPACK_IMPORTED_MODULE_2__["mergeKernelConfig"])(conf)) || this;\n    }\n    Object.defineProperty(LivePlayer.prototype, "kernelName", {\n        // eslint-disable-next-line @typescript-eslint/class-literal-property-style\n        get: function () {\n            return _enums__WEBPACK_IMPORTED_MODULE_1__["KERNEL_NAME"].ORIGIN;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return LivePlayer;\n}(_base_base_live_player__WEBPACK_IMPORTED_MODULE_0__["default"]));\n/* harmony default export */ __webpack_exports__["default"] = (LivePlayer);\n;\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/kernel-origin/live-player.ts?')},"./src/kernel-origin/multi-player.ts":function srcKernelOriginMultiPlayerTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _base_base_player__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../base/base-player */ "./src/base/base-player.ts");\n/* harmony import */ var _base_state_mgr__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../base/state-mgr */ "./src/base/state-mgr.ts");\n/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../enums */ "./src/enums.ts");\n/* harmony import */ var _libs_simple_defer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../libs/simple-defer */ "./src/libs/simple-defer.ts");\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../util */ "./src/util/index.ts");\n/* harmony import */ var _default_config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./default-config */ "./src/kernel-origin/default-config.ts");\n/* harmony import */ var _org_preloader__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./org-preloader */ "./src/kernel-origin/org-preloader.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (undefined && undefined.__metadata) || function (k, v) {\n    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);\n};\n\n\n\n\n\n\n\nvar logMethodCall = Object(_util__WEBPACK_IMPORTED_MODULE_4__["logMethodCallDecoratorCreator"])(\'MultiPlayer\');\n/**\n * ç¨å¤ä¸ªvideoæ ç­¾åæ¢æ­æ¾ä¸ä¸ªåè¡¨ã\n */\nvar MultiPlayer = /** @class */ (function (_super) {\n    __extends(MultiPlayer, _super);\n    function MultiPlayer(conf) {\n        var _a;\n        var _this = _super.call(this, Object(_default_config__WEBPACK_IMPORTED_MODULE_5__["mergeKernelConfig"])(conf)) || this;\n        _this._needHideVideoNode = null;\n        _this._videonodeEventMap = (_a = {},\n            _a[_enums__WEBPACK_IMPORTED_MODULE_2__["VIDEO_NODE_EVENT"].STATE_CHANGE] = _this.onCurVideoNodeStateChange.bind(_this),\n            _a);\n        return _this;\n    }\n    Object.defineProperty(MultiPlayer, "canPlayType", {\n        get: function () {\n            return _util__WEBPACK_IMPORTED_MODULE_4__["videoTool"].supportVideoFormat();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MultiPlayer.prototype, "supportPreload", {\n        get: function () {\n            return _util__WEBPACK_IMPORTED_MODULE_4__["videoTool"].supportSameTimePlay();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MultiPlayer.prototype, "kernelName", {\n        // eslint-disable-next-line @typescript-eslint/class-literal-property-style\n        get: function () {\n            return _enums__WEBPACK_IMPORTED_MODULE_2__["KERNEL_NAME"].ORIGIN;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    MultiPlayer.prototype.seek = function (time) {\n        if (this.getLevelSwitching()) {\n            // multiplayerååæ¢æ¸æ°åº¦ä¸ºsoftåæ¢ï¼è¿ç§ä¹æ¯æååæ¢ï¼è¿ç¨ä¸­æ æ³seek\n            return false;\n        }\n        return _super.prototype.seek.call(this, time);\n    };\n    MultiPlayer.prototype.createVideoNodes = function (count) {\n        _super.prototype.createVideoNodes.call(this, count);\n        for (var i = 0; i < this._vnList.length; i++) {\n            var vn = this._vnList[i];\n            if (i === 0) {\n                // ç¬¬ä¸ä¸ªvideoæ ç­¾ç´æ¥æ¾ç¤ºåºæ¥ï¼å¦ææè®¾ç½®posterï¼å¯ä»¥å±ç¤ºï¼\n                this._firstVideoNode = vn;\n            }\n            else {\n                this.visibleVideoNode(vn, false);\n            }\n        }\n    };\n    MultiPlayer.prototype.videonodeEventHandler = function (e) {\n        // åè¿è¡åé¨äºä»¶å¤çï¼å®äºä»¥ååååºäºä»¶ï¼å ä¸ºååºäºä»¶ä»¥åå¤é¨å¯è½stopæèéæ¯äºä»¶ï¼\n        if (this._videonodeEventMap[e.type]) {\n            this._videonodeEventMap[e.type](e);\n        }\n        _super.prototype.videonodeEventHandler.call(this, e);\n    };\n    MultiPlayer.prototype.onCurVideoNodeStateChange = function (e) {\n        if (e.data.new === _enums__WEBPACK_IMPORTED_MODULE_2__["VIDEO_STATE"].PLAYING) {\n            // if (e.data.new === VIDEO_STATE.CANPLAY) {\n            this.switchVideoNode();\n            // éç¥å¤é¨å½åè§é¢å·²ç»å¼æ­äº\n            if (!this.currentVideoInfo.extraVars.isStartPlay) {\n                this.currentVideoInfo.extraVars.isStartPlay = true;\n                var uid = this.currentVideoInfo ? this.currentVideoInfo.uid : null;\n                this._logger.log("videoNodeStartPlay: uid[".concat(uid, "]"));\n                this.emit(_enums__WEBPACK_IMPORTED_MODULE_2__["PLAY_EVENT"].VIDEONODE_START_PLAY, { videoInfo: this.currentVideoInfo });\n            }\n        }\n    };\n    MultiPlayer.prototype.onVideoNodeStateChange = function (e) {\n        if (this.getLevelSwitching() && !_base_state_mgr__WEBPACK_IMPORTED_MODULE_1__["VALID_STATE_IN_LEVEL_SWITCHING"].includes(e.data.new)) {\n            // å¨multiplayeréåæ¢æ¸æ°åº¦è§¦åæ¶ï¼å·²ç»å°ä¸ä¸ä¸ªVideoNodeè®¾ç½®ä¸ºcurrentVideoNodeï¼å¼å§çå¬æ­¤VideoNodeäºä»¶ï¼ãå¨åæ¢è¿ç¨ä¸­ï¼éè¦\n            // è¿æ»¤æcurrentVideoNodeçç¶æååã\n            return false;\n        }\n        return _super.prototype.onVideoNodeStateChange.call(this, e);\n    };\n    MultiPlayer.prototype.pauseInner = function (type) {\n        if (type === void 0) { type = _enums__WEBPACK_IMPORTED_MODULE_2__["PAUSE_TYPE"].INNER; }\n        if (this._prePlayNext) {\n            // æåå¼å§æ­æ¾ä¸ä¸ä¸ªï¼å°±æ¯å¨åå¤åæ¢äºãè¿ä¸ªæç­çæ¶é´éé¢ï¼ä¸åè®¸æåäº\n            this._logger.warn(\'pause when preplaynext, return!!\');\n            return;\n        }\n        _super.prototype.pauseInner.call(this, type);\n    };\n    MultiPlayer.prototype.resumeInner = function () {\n        if (this.getLevelSwitching()) {\n            // å¦ææ­£å¨åæ¸æ°åº¦çæ¶åè¢«æåäºï¼æ¯å¦å¨ææºä¸åå°åå°ï¼ç³»ç»æåäºæævideoçæ­æ¾ï¼ï¼æ¢å¤playçæ¶ååªæ¢å¤åæ¸æ°åº¦ç\n            this._setLevelVideoNode.play();\n            return;\n        }\n        _super.prototype.resumeInner.call(this);\n    };\n    MultiPlayer.prototype.loadInner = function (value, extra) {\n        var _a;\n        var vnLen = ((_a = this._vnList) === null || _a === void 0 ? void 0 : _a.length) || 0;\n        for (var i = 0; i < vnLen; i++) {\n            this.visibleVideoNode(this._vnList[i], false);\n        }\n        return _super.prototype.loadInner.call(this, value, extra);\n    };\n    MultiPlayer.prototype.playInner = function (startTime) {\n        var _this = this;\n        if (this.getLevelSwitching()) {\n            // todoï¼ å¦ææ­£å¨åæ¢æ¸æ°åº¦çæ¶åï¼è§¦åäºææ­å¼å è½½ï¼æä¹åï¼\n            // å¦ææ­£å¨åæ¸æ°åº¦çæ¶åè¢«æåäºï¼æ¯å¦å¨ææºä¸åå°åå°ï¼ç³»ç»æåäºæævideoçæ­æ¾ï¼ï¼æ¢å¤playçæ¶ååªæ¢å¤åæ¸æ°åº¦ç\n            this._setLevelVideoNode.play();\n            this._logger.log(\'play(), setlevel\');\n            return;\n        }\n        if (this._videoInfos.length <= 0 || !this._videoInfos[this._curUrlIdx]) {\n            this._logger.warn(\'play(), !videoInfo\');\n            return;\n        }\n        var videoInfo = this._videoInfos[this._curUrlIdx];\n        var oldState = this._curVideoNode ? this._curVideoNode.state : _enums__WEBPACK_IMPORTED_MODULE_2__["VIDEO_STATE"].IDLE;\n        var preloaderIdx = this.findPreloadIdxByVideoInfo(videoInfo);\n        var playImpl = function (preloadSucc) {\n            var _a, _b, _c;\n            _this._logger.log("playInner(), playImpl(), preloadSucc=".concat(preloadSucc));\n            var existPreloadVideoNode = preloaderIdx !== -1\n                ? (_b = (_a = _this._preloaders[preloaderIdx]) === null || _a === void 0 ? void 0 : _a.videoInfo) === null || _b === void 0 ? void 0 : _b.extraVars.preloadVideoNode : null;\n            // ä¸é¢å¼å§éæ©ä¸ä¸ªæ­æ¾æ§ä»¶\n            var idleVideoNode;\n            var forceSetVideoNode = false;\n            // åçæ¯å¦æé¢å è½½\n            idleVideoNode = existPreloadVideoNode;\n            // å¦æä¸ºç©ºï¼åçæ¯å¦æç©ºé²videonode\n            if (!idleVideoNode) {\n                idleVideoNode = _this.getIdleVideoNode();\n            }\n            // å¦æä¸ºç©ºï¼åçå½åvideonodeæ¯å¦æ¯ç©ºé²ç¶æ\n            if (!idleVideoNode && _this._curVideoNode && _this._curVideoNode.state === _enums__WEBPACK_IMPORTED_MODULE_2__["VIDEO_STATE"].IDLE) {\n                idleVideoNode = _this._curVideoNode;\n                // æ­¤æ¶éè¦å¼ºå¶æ¿æ¢å½åvideonode\n                forceSetVideoNode = true;\n            }\n            if (!idleVideoNode) {\n                _this._logger.warn(\'can not find idle videonode!\');\n            }\n            _this.setCurVideoNode(idleVideoNode, forceSetVideoNode);\n            // å¦æè¢«é¢å è½½è¿ï¼æ¸çé¢å è½½ä¿¡æ¯ï¼ä½æ¯ä¿çvideoä¸å·²å è½½çæ°æ®\n            if (preloaderIdx !== -1) {\n                var preloader = _this._preloaders.splice(preloaderIdx, 1)[0];\n                preloader.clear(true);\n            }\n            // å¦ææ¯èªå¨æ­æ¾çåºæ¯ï¼è¿éæä¸ªæ³¨æç¹å¦ï¼\n            // æä»¬éè¦å¨è°ç¨playä¹åå°±ævideonodeæ¾ç¤ºåºæ¥ï¼è°ç¨visibleVideoNodeä¼ trueä½¿volumeè®¾ç½®ä¸ºæ­£å¸¸ç¶æï¼ï¼å¦åæ¯éé³ç¶æçæ¶åè°ç¨äº\n            // playæ¹æ³ï¼è§ä¸é¢ä»£ç çvideonode.playæ¹æ³ï¼ãå¦ææ¯éé³ç¶ææ¶åè°ç¨playå°±æ æ³catchå°èªå¨æ­æ¾è¢«é»æ­¢çå¼å¸¸äºãèæ¯è°ç¨playåæ¢å¤é³\n            // éæ¶ï¼ä¼æ¶å°ç±»ä¼¼å¦ä¸è­¦åï¼chromeï¼ï¼\n            // Unmuting failed and the element was paused instead because the user didn\'t interact with the document before\n            // è¿ç§æåµä¸æ¯æä»¬é¢æçæ£æµèªå¨æ­æ¾ç»æãå æ­¤æä¸é¢è¿ä¸æ®µä»£ç ç§»ä¸æ¥äºã\n            if (!_this._needHideVideoNode) {\n                // ä¸éè¦ç­ä¸ä¸ä¸ªéèï¼é£å°±ç´æ¥æ¾ç¤ºãå¦åéè¦ç­ä¸å®æ¶æºæ¾ç¤ºåºæ¥\n                _this.visibleVideoNode(_this._curVideoNode, true);\n                _this._logger.log(\'visibleVideoNode, null need\');\n            }\n            else if (_this._needHideVideoNode === _this._curVideoNode) {\n                _this.visibleVideoNode(_this._curVideoNode, true);\n                _this._logger.log(\'visibleVideoNode, need==current\');\n            }\n            else if (preloadSucc) {\n                _this.switchVideoNode();\n            }\n            if (_this._curVideoNode.state !== _enums__WEBPACK_IMPORTED_MODULE_2__["VIDEO_STATE"].PLAYING) {\n                _this._curVideoNode.play(videoInfo, { startTime: startTime });\n            }\n            _this.emit(_enums__WEBPACK_IMPORTED_MODULE_2__["PLAY_EVENT"].VIDEONODE_CHANGE, { videoInfo: _this.currentVideoInfo });\n            if (preloadSucc) {\n                // å¦æä¸æ¯ç¬¬ä¸ä¸ªè§é¢æ­æ¾ï¼å¹¶ä¸è¢«é¢å è½½è¿ï¼å¯è½éè¦è¡¥åä¸äºäºä»¶\n                if (_this._videoInfos.indexOf(_this.currentVideoInfo) !== 0) {\n                    // å¦æurlæé¢å è½½ï¼durationååäºä»¶å·²ç»éè¿äºï¼è¿éè¡¥åä¸ä¸ªäºä»¶ç»å¤é¨ï¼æ¾å¨videoNode.playä»¥åè§¦åï¼æè½åå°currentVideoInfoå±æ§ï¼\n                    _this.emit(_enums__WEBPACK_IMPORTED_MODULE_2__["PLAY_EVENT"].DURATION_CHANGE, { videoInfo: _this.currentVideoInfo });\n                    // å ä¸ºå¯è½æåå¼æ­äºï¼è¡¥ä¸ä¸ªplayingäºä»¶\n                    _this.emit(_enums__WEBPACK_IMPORTED_MODULE_2__["PLAY_EVENT"].STATE_CHANGE, {\n                        videoInfo: _this.currentVideoInfo,\n                        new: _this._curVideoNode.state,\n                        old: oldState,\n                    });\n                }\n                // éç¥å¤é¨å½åè§é¢å·²ç»å¼æ­äº\n                if (!_this.currentVideoInfo.extraVars.isStartPlay) {\n                    _this.currentVideoInfo.extraVars.isStartPlay = true;\n                    _this._logger.log("videoNodeStartPlay: uid[".concat(_this.currentVideoInfo.uid, "]"));\n                    _this.emit(_enums__WEBPACK_IMPORTED_MODULE_2__["PLAY_EVENT"].VIDEONODE_START_PLAY, { videoInfo: _this.currentVideoInfo });\n                }\n            }\n            _this._logger.log("playInner(), playImpl(), uid=".concat((_c = _this.currentVideoInfo) === null || _c === void 0 ? void 0 : _c.uid, "/")\n                + "urlIdx=".concat(_this._curUrlIdx, "/state=").concat(_this._curVideoNode.state));\n        };\n        var DELAY_BUFFERING_TIME = 200;\n        var preloadBufferingTimeoutID = 0;\n        if (preloaderIdx !== -1) {\n            // å¦æå³å°æ­æ¾ä¸ä¸ä¸ªè§é¢ï¼ä½æ¯åå¤äºé¢å è½½ä¸­ï¼éè¦ç»ä¸ä¸ªbufferingäºä»¶åºå»\n            if (videoInfo.hasFirstPlaying) {\n                preloadBufferingTimeoutID = window.setTimeout(function () {\n                    _this.emit(_enums__WEBPACK_IMPORTED_MODULE_2__["PLAY_EVENT"].STATE_CHANGE, {\n                        videoInfo: videoInfo,\n                        new: _enums__WEBPACK_IMPORTED_MODULE_2__["VIDEO_STATE"].BUFFERING,\n                        old: oldState,\n                    });\n                }, DELAY_BUFFERING_TIME);\n            }\n            this._preloaders[preloaderIdx].promise.then(function () {\n                clearTimeout(preloadBufferingTimeoutID);\n                _this._logger.log("play(), preloadVideoNode succ, uid=".concat(videoInfo.uid));\n                playImpl(true);\n            }).catch(function (error) {\n                _this._logger.log("play(), preloadVideoNode error, uid=".concat(videoInfo.uid, "/error="), error);\n                if (!(error.code in _enums__WEBPACK_IMPORTED_MODULE_2__["ERROR_CODE"])) {\n                    // æè°é¸­å­ç±»åå¤æ­ï¼å ä¸ºå¯è½æåç§å¶ä»çä¸æ¯æ­æ¾å¨å®ä¹çéè¯¯\n                    return;\n                }\n                clearTimeout(preloadBufferingTimeoutID);\n                // é¢å è½½æ¶åå·²ç»æå¤ä»½å°åéè¯å®äºï¼æ²¡å¿è¦ç»§ç»­äº\n                // playImpl(false);\n                // æä»¥ä¸é¢ç´æ¥æåºéè¯¯\n                videoInfo.error = error;\n                _this.stopInner(_enums__WEBPACK_IMPORTED_MODULE_2__["END_STATE"].ERROR, true, videoInfo);\n            });\n        }\n        else if (videoInfo.error) {\n            this._logger.log(\'play(), got preload error\');\n            this.stopInner(_enums__WEBPACK_IMPORTED_MODULE_2__["END_STATE"].ERROR, true, videoInfo);\n        }\n        else {\n            playImpl(false);\n        }\n    };\n    MultiPlayer.prototype.visibleVideoNode = function (vn, value) {\n        var _a;\n        if (!vn || !vn.videoElement) {\n            return;\n        }\n        this.setVideoElementState(vn.videoElement, value);\n        this._logger.log(">>>visibleVideoNode<<<, value=".concat(value, "/uid=").concat((_a = vn.currentVideoInfo) === null || _a === void 0 ? void 0 : _a.uid));\n    };\n    MultiPlayer.prototype.setVideoElementState = function (videoElement, value) {\n        var tarVolume = value ? this._volume : 0;\n        if (videoElement.volume !== tarVolume) {\n            videoElement.volume = tarVolume;\n        }\n        // å½videoæ ç­¾åæ¢å°åå°åå¤æ­æ¾ï¼æ­¤æ¶éè¦æ¢å¤éé³ï¼ä½ä¸å®è¦åççå½åé³éæ¯ä¸æ¯æ¬æ¥å°±æ¯éé³çï¼ç¨æ·è®¾ç½®äºéé³ï¼\n        // æ­¤æ¶ä¸éè¦æ¢å¤éé³ï¼èæ¯ç»§ç»­ä¿æéé³ç¶æ\n        var tarMuted = this._volume <= 0 || !value;\n        if (videoElement.muted !== tarMuted) {\n            videoElement.muted = tarMuted;\n        }\n        _util__WEBPACK_IMPORTED_MODULE_4__["domTool"].css(videoElement, \'zIndex\', value ? \'0\' : \'-1\');\n        _util__WEBPACK_IMPORTED_MODULE_4__["domTool"].css(videoElement, \'visibility\', value ? \'inherit\' : \'hidden\');\n    };\n    MultiPlayer.prototype.switchVideoNode = function () {\n        // æéè¦éèçvideoæ ç­¾ && éèçç®æ videoæ ç­¾ä¸æ¯å½åæ­æ¾çvideoæ ç­¾ï¼æè¿è¡åæ¢\n        if (!this._needHideVideoNode || this._curVideoNode === this._needHideVideoNode) {\n            return;\n        }\n        this._logger.log(\'>>>>>switchVideoNode<<<<<\');\n        this.visibleVideoNode(this._curVideoNode, true);\n        // è¢«éèçå»¶è¿ä¸ä¸éèï¼ä¸ç¶ioså¯è½ä¼é»éª\n        var vnn = this._needHideVideoNode;\n        // commonTool.setTimeoutByRAF(() => {\n        this.visibleVideoNode(vnn, false);\n        if (vnn) {\n            vnn.stop();\n        }\n        // }, 20);\n        this._needHideVideoNode = null;\n    };\n    MultiPlayer.prototype.playNextInner = function (opts) {\n        // åè®°å½ä¸ä¸éè¦éèçä¸ä¸ä¸ªæ­æ¾æ§ä»¶ï¼ä¸ç«å³éèçåå æ¯ç§»å¨ç«¯ç­å¹³å°å¯è½ä¼å¨åæ¢videoæ ç­¾çè¿ç¨ä¸­åºç°ä¸ä¸é»å±ï¼\n        this._needHideVideoNode = this._curVideoNode;\n        this._prePlayNext = false;\n        _super.prototype.playNextInner.call(this, opts);\n    };\n    MultiPlayer.prototype.appendAfter = function (videoInfo) {\n        // åªéè¦æ£æ¥è¢«appendè¿æ¥çæ°ç»çç¬¬ä¸ä¸ªè§é¢ä¿¡æ¯ï¼ççæ¯å¦éè¦é©¬ä¸æ­æ¾å¥¹æèå¹²ç¹å«ç\n        var isIdle = this._curVideoNode ? this._curVideoNode.state === _enums__WEBPACK_IMPORTED_MODULE_2__["VIDEO_STATE"].IDLE : true;\n        // å¦æè¢«æ£æ¥çè§é¢ä¿¡æ¯å°±æ¯å½åæ­æ¾çä¸ä¸ä¸ªè§é¢ä¿¡æ¯\n        if (this._played && this._curUrlIdx + 1 === this._videoInfos.indexOf(videoInfo) && isIdle) {\n            this.playNextInner();\n        }\n    };\n    MultiPlayer.prototype.preparePreloader = function (isFirstLoad, videoInfo) {\n        this._logger.log(\'preparePreloader(), isFirstLoad=\', isFirstLoad);\n        var videoNode = this.getIdleVideoNode();\n        if (!videoNode) {\n            // å·²ç»æ¾ä¸å°ç©ºé²çIVideoNodeäº\n            return null;\n        }\n        videoInfo.extraVars.preloadVideoNode = videoNode;\n        // å¦ææ¯ç¬¬ä¸ä¸ªé¢å è½½ï¼ç´æ¥æ¾ç¤ºåºæ¥å¹¶è®¾ç½®æå½åæ­æ¾çVideoNode(ç¨äºæ´¾åäºä»¶åºå»)\n        if (isFirstLoad) {\n            this.setCurVideoNode(videoNode);\n            this.visibleVideoNode(videoNode, true);\n        }\n        return new _org_preloader__WEBPACK_IMPORTED_MODULE_6__["default"](this._config);\n    };\n    MultiPlayer.prototype.getIdleVideoNode = function () {\n        if (this._firstVideoNode) {\n            // ææå®ç¬¬ä¸ä¸ªä½¿ç¨çvideonodeï¼å°±ç´æ¥è¿å\n            var vn = this._firstVideoNode;\n            this._firstVideoNode = null;\n            return vn;\n        }\n        var ret = null;\n        var LEN = this._vnList.length;\n        for (var i = 0; i < LEN; i++) {\n            if (this._vnList[i].state === _enums__WEBPACK_IMPORTED_MODULE_2__["VIDEO_STATE"].IDLE && this._vnList[i] !== this._curVideoNode) {\n                var arr = this._vnList.splice(i, 1);\n                ret = arr[0];\n                break;\n            }\n        }\n        if (ret) {\n            this._vnList.push(ret);\n        }\n        return ret;\n    };\n    /**\n     * æ¯å¦æ­£å¨åæ¢æ¸æ°åº¦ï¼å¨multi-playerä¸­å®ç°çsoftåæ¢ï¼\n     */\n    MultiPlayer.prototype.getLevelSwitching = function () {\n        return !!this._setLevelVideoNode;\n    };\n    MultiPlayer.prototype.setLevelInner = function (value) {\n        var _this = this;\n        var setLevelMode = this.decideSetLevelMode(value === null || value === void 0 ? void 0 : value.setLevelMode);\n        this._logger.log("setLevelMode=".concat(setLevelMode));\n        if (setLevelMode === _enums__WEBPACK_IMPORTED_MODULE_2__["SET_LEVEL_MODE"].HARD || setLevelMode === _enums__WEBPACK_IMPORTED_MODULE_2__["SET_LEVEL_MODE"].SMOOTH) {\n            // VideoNodeèªè¡å¤çç¡¬åè¿æ¯å¹³æ»åæ¢\n            return this._curVideoNode.setLevel(setLevelMode);\n        }\n        // ä»¥ä¸é»è¾ä¸ºmulti-playerå®ç°softæ¨¡å¼çæ¸æ°åº¦åæ¢ï¼\n        var levelSwitchingDefer = new _libs_simple_defer__WEBPACK_IMPORTED_MODULE_3__["default"]();\n        // åæå½åçVideoInfoå­èµ·æ¥ãå ä¸ºå¦ææ¾ä¸å°å¯ä»¥ä½¿ç¨çç©ºé²VideoNodeï¼å¯è½ä¼éæ¯å½åçVideoNodeæ¥å®ç°æ¸æ°åº¦åæ¢ï¼è¿æ ·ä¼å¯¼è´\n        // currentVideoInfoåéä¸ºç©º\n        var videoInfo = this.currentVideoInfo;\n        this._logger.log("setLevelInner(), uid: ".concat(videoInfo.uid));\n        this.pauseInner();\n        // let needPauseVideoNode = this._curVideoNode;\n        this.setPlayEvents(this._curVideoNode, false);\n        this.emit(_enums__WEBPACK_IMPORTED_MODULE_2__["PLAY_EVENT"].SETLEVEL_START, { videoInfo: videoInfo, mode: _enums__WEBPACK_IMPORTED_MODULE_2__["SET_LEVEL_MODE"].SMOOTH });\n        // multi-playeråæ¢æ¸æ°åº¦ä¸ä½¿ç¨VideoNodeçsetLevelæ¹æ³ï¼èæ¯èªå·±å®ç°çå¤videoåæ¢ï¼å æ­¤åæ¢ååæ¾ç¤ºloadingå¨ç»\n        this.setLoading(true);\n        var targetPlaytime = this._curVideoNode.playtime;\n        var videoNode = this.getIdleVideoNode();\n        // æ¾ä¸ä¸ªç©ºé²çvideoNodeæ¥å è½½ä¸ä¸ä¸ªæ¸æ°åº¦ï¼å¦ææ²¡æï¼åªè½æ¸çå½åçvideoNodeäºï¼ä¼é»å±ï¼\n        if (!videoNode) {\n            this._curVideoNode.stop();\n            videoNode = this._curVideoNode;\n        }\n        else {\n            this.visibleVideoNode(videoNode, false);\n        }\n        // urléè¦éæ°å è½½\n        videoInfo.extraVars.isLoadstarted = false;\n        this._setLevelVideoNode = videoNode;\n        this._setLevelVideoNode.setLevelEvtMap = {}; // åæ¢æ¸æ°åº¦äºä»¶\n        // å¨è§¦ååæ¢çæ¶åï¼å°±è®¾ç½®ä¸ä¸ä¸ªæ¸æ°åº¦çVideoNodeä¸ºcurrentVideoNodeï¼å¼å§çå¬ä¸ä¸ä¸ªæ¸æ°åº¦çäºä»¶ãèä¸ä¸ä¸ªæ¸æ°åº¦çVideoNodeä»ä¸ºäºä¿\n        // çç»é¢ï¼ä¸åå¼å§çå¬äºä»¶ãæ§å¶å¶è¡ä¸ºã\n        var preVideoNode = this._curVideoNode;\n        this.setCurVideoNode(videoNode, true);\n        /**\n         * åå¤±è´¥äºå¾åæ»ï¼ä¸ç¶å°±å¡æ­»äº\n         */\n        var rollbackLevelVideoNode = function () {\n            _this._logger.log(\'>>>>>rollbackLevelVideoNode<<<<<\');\n            if (_this._urlBeforeSetLevel) {\n                // åæ»æ¶åæ¢å¤åæ¢ä¹åçurlå°åï¼å¹¶éç½®loadingUrlç­ï¼\n                Object.assign(_this.currentVideoInfo.config, _this._urlBeforeSetLevel);\n                _this.currentVideoInfo.reset();\n                _this._urlBeforeSetLevel = null;\n            }\n            _this.setPlayEvents(_this._curVideoNode, true);\n            _this.resumeInner();\n        };\n        videoNode.setLevelEvtMap[_enums__WEBPACK_IMPORTED_MODULE_2__["VIDEO_NODE_EVENT"].STATE_CHANGE] = function (e) {\n            // ä¸ä¸ä¸ªæ¸æ°åº¦è§é¢å¼æ­ï¼ä»£è¡¨åæ¢æå\n            if (e.data.new === _enums__WEBPACK_IMPORTED_MODULE_2__["VIDEO_STATE"].PLAYING) {\n                _this._logger.log("setLevel succ>>>>>> uid: ".concat(videoInfo.uid), e);\n                _this.clearSetLevelThings(true);\n                _this.switchVideoNodeWhenSetLevelSucc(preVideoNode);\n                levelSwitchingDefer.resolve();\n                _this.emit(_enums__WEBPACK_IMPORTED_MODULE_2__["PLAY_EVENT"].SETLEVEL_OVER, { videoInfo: videoInfo });\n                _this.setLoading(false);\n            }\n        };\n        videoNode.setLevelEvtMap[_enums__WEBPACK_IMPORTED_MODULE_2__["VIDEO_NODE_EVENT"].ERROR] = function (e) {\n            var _a;\n            _this._logger.log("setLevel fail>>>>>> uid: ".concat(videoInfo.uid), e);\n            _this.clearSetLevelThings();\n            rollbackLevelVideoNode();\n            levelSwitchingDefer.reject(new Error("setLevel failed, ".concat((_a = videoInfo.error) === null || _a === void 0 ? void 0 : _a.message)));\n            _this.emit(_enums__WEBPACK_IMPORTED_MODULE_2__["PLAY_EVENT"].SETLEVEL_OVER, { videoInfo: videoInfo, fail: true });\n            _this.setLoading(false);\n        };\n        // timeupdateæ¯ç­å¾æ°çæ¸æ°åº¦æ¶é´è¶è¿åæ¢æ¸æ°åº¦çæ¶é´æ¶ç»æï¼è¿æ ·å¯è½ä¼æ¯è¾æ¢\n        // videoNode.on(VIDEO_NODE_EVENT.TIME_UPDATE, videoNode.setLevelEvtMap[VIDEO_NODE_EVENT.TIME_UPDATE]);\n        videoNode.on(_enums__WEBPACK_IMPORTED_MODULE_2__["VIDEO_NODE_EVENT"].STATE_CHANGE, videoNode.setLevelEvtMap[_enums__WEBPACK_IMPORTED_MODULE_2__["VIDEO_NODE_EVENT"].STATE_CHANGE]);\n        videoNode.on(_enums__WEBPACK_IMPORTED_MODULE_2__["VIDEO_NODE_EVENT"].ERROR, videoNode.setLevelEvtMap[_enums__WEBPACK_IMPORTED_MODULE_2__["VIDEO_NODE_EVENT"].ERROR]);\n        // ç´æ¥æ­æ¾ä¸ä¸ä¸ªæ¸æ°åº¦çè§é¢\n        videoNode.play(videoInfo, { startTime: targetPlaytime });\n        return levelSwitchingDefer.promise;\n    };\n    /**\n     * ä¸ä¸ä¸ªæ¸æ°åº¦çVideoNodeæ­æ¾okä»¥åï¼åæ¢å°åå°å¼å§æ­æ¾\n     * @param preVideoNode ä¸ä¸ä¸ªæ¸æ°åº¦æ­æ¾æ¶ä½¿ç¨çVideoNode\n     */\n    MultiPlayer.prototype.switchVideoNodeWhenSetLevelSucc = function (preVideoNode) {\n        this._logger.log(\'>>>>>switchLevelVideoNode<<<<<\');\n        if (preVideoNode === this._curVideoNode) {\n            // ä¸ä¸ä¸ªæ¸æ°åº¦çVideoNodeå°±æ¯å½åçVideoNodeï¼ç´æ¥æ¾ç¤ºåºæ¥\n            this.visibleVideoNode(this._curVideoNode, true);\n        }\n        else {\n            this.visibleVideoNode(this._curVideoNode, true);\n            this.visibleVideoNode(preVideoNode, false);\n            preVideoNode === null || preVideoNode === void 0 ? void 0 : preVideoNode.stop();\n        }\n    };\n    MultiPlayer.prototype.clearSetLevelThings = function (keepdata) {\n        if (!this.getLevelSwitching()) {\n            return;\n        }\n        var videoNode = this._setLevelVideoNode;\n        if (videoNode.setLevelEvtMap) {\n            Object.keys(videoNode.setLevelEvtMap).forEach(function (evt) {\n                videoNode.off(evt, videoNode.setLevelEvtMap[evt]);\n            });\n            videoNode.setLevelEvtMap = null;\n        }\n        if (!keepdata) {\n            videoNode.stop();\n        }\n        // æ¸æ°åº¦åæ¢æåä»¥åï¼å¼ºå¶æ¸çæææçé¢å è½½æ°æ®\n        this.clearAllPreloadInner();\n        this._setLevelVideoNode = null;\n    };\n    MultiPlayer.prototype.checkAccuratePlaytime = function (videoElementTime, videoElementDuration) {\n        var _a, _b;\n        var prePlayNextTime = this._config.originKernelConfig.prePlayNextTime;\n        var leftTime = Math.abs(videoElementDuration - videoElementTime);\n        if (prePlayNextTime > 0 && leftTime < prePlayNextTime && !this._prePlayNext) { // æåå¼æ­ä¸ä¸ä¸ª\n            this._prePlayNext = true;\n            var preloaderIdx = this.findPreloadIdxByVideoInfo(this.nextVideoInfo);\n            if (this.nextVideoInfo && preloaderIdx !== -1) {\n                var existPreloadVideoNode = (_b = (_a = this._preloaders[preloaderIdx]) === null || _a === void 0 ? void 0 : _a.videoInfo) === null || _b === void 0 ? void 0 : _b.extraVars.preloadVideoNode;\n                if (existPreloadVideoNode) {\n                    this._logger.log("preplay next!! idx/state: ".concat(existPreloadVideoNode.idx, "/").concat(existPreloadVideoNode.state));\n                    existPreloadVideoNode.play();\n                }\n            }\n        }\n        this.checkAutoPreloadNext(leftTime);\n    };\n    MultiPlayer.prototype.stopInner = function (endState, dispatchEvt, videoInfo) {\n        if (endState === void 0) { endState = _enums__WEBPACK_IMPORTED_MODULE_2__["END_STATE"].NORMAL; }\n        if (dispatchEvt === void 0) { dispatchEvt = false; }\n        if (videoInfo === void 0) { videoInfo = null; }\n        this._firstVideoNode = null;\n        this._prePlayNext = false;\n        // å¦æææ­£å¨åæ¢æ¸æ°åº¦çvideoNodeï¼ä¹å¾æ¸ç\n        this.clearSetLevelThings(true);\n        _super.prototype.stopInner.call(this, endState, dispatchEvt, videoInfo);\n    };\n    MultiPlayer.prototype.destroy = function () {\n        this._needHideVideoNode = null;\n        this._setLevelVideoNode = null;\n        this._firstVideoNode = null;\n        // ç¼å­ä¸ä¸ï¼é¿åsuper.destroyä»¥åä¸ºç©º\n        var videoElement = this.videoElements;\n        _super.prototype.destroy.call(this);\n        // å videoæ ç­¾æ¯å¤é¨ä¼ å¥å¹¶ä¸å¤ç¨çï¼ä¸æ¯æ¬å¯¹è±¡èªå·±åå»ºçï¼å æ­¤éè¦æ¢å¤åæ ·\n        videoElement.forEach(function (e) {\n            if (!(e instanceof HTMLVideoElement)) {\n                return;\n            }\n            // åæ¢videoæ ç­¾å°åå°é¢å è½½ç­é»è¾æ¶ï¼å¯è½ä¼ä¿®æ¹videoæ ç­¾çå¦ä¸å±æ§ï¼æ¢å¤ä¿®æ¹\n            e.volume = 1;\n            e.muted = false;\n            _util__WEBPACK_IMPORTED_MODULE_4__["domTool"].css(e, {\n                zIndex: \'0\',\n                visibility: \'inherit\',\n            });\n            e.dataset.idx = \'0\';\n        });\n    };\n    // åçæ­æ¾è¿åtrueï¼å¦æç»§æ¿MultiPlayerçåæ ¸éè¦éåè¯¥æ¹æ³\n    MultiPlayer.isEnvSupport = true;\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", [Number]),\n        __metadata("design:returntype", void 0)\n    ], MultiPlayer.prototype, "playInner", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", []),\n        __metadata("design:returntype", void 0)\n    ], MultiPlayer.prototype, "switchVideoNode", null);\n    return MultiPlayer;\n}(_base_base_player__WEBPACK_IMPORTED_MODULE_0__["default"]));\n/* harmony default export */ __webpack_exports__["default"] = (MultiPlayer);\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/kernel-origin/multi-player.ts?')},"./src/kernel-origin/org-ios-videonode.ts":function srcKernelOriginOrgIosVideonodeTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OrgIOSVideoNode", function() { return OrgIOSVideoNode; });\n/* harmony import */ var _base_play_helper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../base/play-helper */ "./src/base/play-helper.ts");\n/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../enums */ "./src/enums.ts");\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util */ "./src/util/index.ts");\n/* harmony import */ var _org_videonode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./org-videonode */ "./src/kernel-origin/org-videonode.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (undefined && undefined.__metadata) || function (k, v) {\n    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);\n};\n\n\n\n\nvar logMethodCall = Object(_util__WEBPACK_IMPORTED_MODULE_2__["logMethodCallDecoratorCreator"])(\'OrgIOSVideoNode\');\n// æåçéå¼æ¶é¿\nvar PAUSE_TIME_THRESHOLD = 5 * 1000;\n/**\n * iOS åçæ­æ¾ä¸ç¨ VideoNodeï¼ç¨äºå¼å®¹ iOS æ­æ¾ä¸­ç bug\n */\nvar OrgIOSVideoNode = /** @class */ (function (_super) {\n    __extends(OrgIOSVideoNode, _super);\n    function OrgIOSVideoNode() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /** ä¸æ¬¡è°ç¨ pause æ¶çæ­æ¾æ¶é´ */\n        _this.lastPausePlayTime = null;\n        /** ä¸æ¬¡è°ç¨ pause æ¶çæ¶é´æ³ */\n        _this.lastPauseTimeStamp = null;\n        /** æ¯å¦å±è½ seek äºä»¶ */\n        _this.disableSeekEvt = false;\n        return _this;\n    }\n    Object.defineProperty(OrgIOSVideoNode, "shouldUseResumeFix", {\n        /**\n         * æ¯å¦å¯ç¨ Bug å¼å®¹å¤çï¼https://git.woa.com/ThumbPlayerMaster/ThumbPlayerH5/thumbplayer-h5/issues/98\n         * iOS 15 ï¼å¦æ < iOS 15.0 åä¸åå¤ç\n         */\n        get: function () {\n            return _util__WEBPACK_IMPORTED_MODULE_2__["uaTool"].os.ios\n                && _util__WEBPACK_IMPORTED_MODULE_2__["commonTool"].compareVersion(_util__WEBPACK_IMPORTED_MODULE_2__["uaTool"].os.version, \'15.0\') >= 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    OrgIOSVideoNode.prototype.setLevel = function (mode) {\n        if (mode === void 0) { mode = _enums__WEBPACK_IMPORTED_MODULE_1__["SET_LEVEL_MODE"].HARD; }\n        this.clearPauseMemTime();\n        return _super.prototype.setLevel.call(this, mode);\n    };\n    OrgIOSVideoNode.prototype.onVideoEventPause = function () {\n        /**\n         * Webkit Bug:\n         * è¿é iOS 15 å­å¨ä¸ä¸ª Bugï¼å½æåæ­æ¾åï¼å°æµè§å¨åæ¢å°åå°çº¦ 10sï¼åååæ¥æ­æ¾\n         * åèµ·æ­æ¶é´åä¸æ¬¡æåçä¸ä¸è´ï¼èµ·æ­æ¶é´å¯è½ä¼å¢å  0.5 ~ 3åé\n         * @see https://git.woa.com/ThumbPlayerMaster/ThumbPlayerH5/thumbplayer-h5/issues/98\n         */\n        if (this.isOriginHlsPlaying()) {\n            this.lastPausePlayTime = this._video.currentTime;\n            this.lastPauseTimeStamp = Date.now();\n        }\n        return _super.prototype.onVideoEventPause.call(this);\n    };\n    OrgIOSVideoNode.prototype.onVideoEventSeeking = function () {\n        this.clearPauseMemTime();\n        if (this.disableSeekEvt) {\n            return;\n        }\n        return _super.prototype.onVideoEventSeeking.call(this);\n    };\n    OrgIOSVideoNode.prototype.onVideoEventSeeked = function () {\n        if (this.disableSeekEvt) {\n            this.disableSeekEvt = false;\n            return;\n        }\n        _super.prototype.onVideoEventSeeked.call(this);\n    };\n    OrgIOSVideoNode.prototype.onVideoEventPlaying = function () {\n        // å¦ææ¯ç¹å®çæ¬ç iOS è®¾å¤ï¼å¨èµ·æ­æ¶ï¼å¦æ pause çæ¶é´è¶è¿éå¼ï¼åå¼ºè¡ seek åæ¥\n        if (OrgIOSVideoNode.shouldUseResumeFix\n            && this.lastPausePlayTime\n            && Date.now() - this.lastPauseTimeStamp > PAUSE_TIME_THRESHOLD) {\n            this.disableSeekEvt = true;\n            this._video.currentTime = this.lastPausePlayTime;\n        }\n        this.clearPauseMemTime();\n        return _super.prototype.onVideoEventPlaying.call(this);\n    };\n    OrgIOSVideoNode.prototype.clearPauseMemTime = function () {\n        this.lastPausePlayTime = null;\n        this.lastPauseTimeStamp = null;\n    };\n    /**\n     * ä» loadingURL å¤æ­æ¯å¦å¨åçæ­æ¾ HLS\n     * @return æ¯å¦ä¸º hls\n     */\n    OrgIOSVideoNode.prototype.isOriginHlsPlaying = function () {\n        var loadingUrl = this.currentVideoInfo.loadingUrl;\n        var ext = _util__WEBPACK_IMPORTED_MODULE_2__["urlTool"].getFileExtension(loadingUrl);\n        return Object(_base_play_helper__WEBPACK_IMPORTED_MODULE_0__["fileExtension2VideoType"])(ext) === _enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_TYPE"].HLS;\n    };\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", [Object]),\n        __metadata("design:returntype", void 0)\n    ], OrgIOSVideoNode.prototype, "setLevel", null);\n    return OrgIOSVideoNode;\n}(_org_videonode__WEBPACK_IMPORTED_MODULE_3__["default"]));\n\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/kernel-origin/org-ios-videonode.ts?')},"./src/kernel-origin/org-player.ts":function srcKernelOriginOrgPlayerTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _define_envs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../define-envs */ "./src/define-envs.ts");\n/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../enums */ "./src/enums.ts");\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util */ "./src/util/index.ts");\n/* harmony import */ var _live_player__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./live-player */ "./src/kernel-origin/live-player.ts");\n/* harmony import */ var _multi_player__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./multi-player */ "./src/kernel-origin/multi-player.ts");\n\n\n\n\n\n/**\n * åçåæ ¸æ­æ¾å¨ï¼vodä¸ºmultiplayerï¼liveä¸ºliveplayer\n */\nvar OrgPlayer = /** @class */ (function () {\n    function OrgPlayer(opts) {\n        return opts.type === _enums__WEBPACK_IMPORTED_MODULE_1__["PLAY_MODE"].LIVE ? new _live_player__WEBPACK_IMPORTED_MODULE_3__["default"](opts) : new _multi_player__WEBPACK_IMPORTED_MODULE_4__["default"](opts);\n    }\n    Object.defineProperty(OrgPlayer, "canPlayType", {\n        get: function () {\n            return _util__WEBPACK_IMPORTED_MODULE_2__["videoTool"].supportVideoFormat();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    OrgPlayer.isEnvSupport = true;\n    OrgPlayer.VERSION = _define_envs__WEBPACK_IMPORTED_MODULE_0__["VERSION"];\n    OrgPlayer.BUILD_TIME = _define_envs__WEBPACK_IMPORTED_MODULE_0__["BUILD_TIME"];\n    return OrgPlayer;\n}());\n/* harmony default export */ __webpack_exports__["default"] = (OrgPlayer);\n;\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/kernel-origin/org-player.ts?')},"./src/kernel-origin/org-preloader.ts":function srcKernelOriginOrgPreloaderTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../enums */ "./src/enums.ts");\n/* harmony import */ var _libs_event_emitter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../libs/event-emitter */ "./src/libs/event-emitter.ts");\n/* harmony import */ var _libs_simple_defer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../libs/simple-defer */ "./src/libs/simple-defer.ts");\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../util */ "./src/util/index.ts");\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (undefined && undefined.__metadata) || function (k, v) {\n    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);\n};\n\n\n\n\nvar logMethodCall = Object(_util__WEBPACK_IMPORTED_MODULE_3__["logMethodCallDecoratorCreator"])(\'OrgPreLoader\');\n/**\n * æ§è¡é¢å è½½\n */\nvar OrgPreLoader = /** @class */ (function () {\n    function OrgPreLoader(playerConfig) {\n        var _a;\n        this.playerConfig = playerConfig;\n        this._defer = new _libs_simple_defer__WEBPACK_IMPORTED_MODULE_2__["default"]();\n        this._logger = new _util__WEBPACK_IMPORTED_MODULE_3__["Logger"](playerConfig.instanceId, \'OrgPreLoader\');\n        this._evtMaps = (_a = {},\n            _a[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_NODE_EVENT"].STATE_CHANGE] = this.firstLoadStateChangeHandler.bind(this),\n            _a[_enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_NODE_EVENT"].ERROR] = this.errorHandler.bind(this),\n            _a);\n    }\n    Object.defineProperty(OrgPreLoader.prototype, "promise", {\n        get: function () {\n            return this._defer.promise;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(OrgPreLoader.prototype, "videoInfo", {\n        get: function () {\n            return this._videoInfo;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    OrgPreLoader.prototype.getVideoNode = function () {\n        var _a;\n        return (_a = this._videoInfo) === null || _a === void 0 ? void 0 : _a.extraVars.preloadVideoNode;\n    };\n    OrgPreLoader.prototype.errorHandler = function (e) {\n        this.preloadFail(e.data.videoInfo.error);\n    };\n    OrgPreLoader.prototype.firstLoadStateChangeHandler = function (e) {\n        if (e.data.new === _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_STATE"].CANPLAY) {\n            this.preloadSucc();\n        }\n    };\n    OrgPreLoader.prototype.preloadSucc = function () {\n        this._logger.log("preload url ready>>>>>> uid=".concat(this._videoInfo.uid));\n        this.clearInner(true);\n        this._evtDispatcher.emit(_enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_EVENT"].PRELOAD_VIDEONODE_OVER, { videoInfo: this._videoInfo });\n        this._defer.resolve();\n    };\n    OrgPreLoader.prototype.preloadFail = function (error) {\n        this._logger.log("preload url fail>>>>>> uid: ".concat(this._videoInfo.uid));\n        this.clearInner();\n        this._evtDispatcher.emit(_enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_EVENT"].PRELOAD_VIDEONODE_ERROR, { videoInfo: this._videoInfo });\n        this._videoInfo.error = error;\n        this._defer.reject(error);\n    };\n    OrgPreLoader.prototype.setVideoNodeEvents = function (value) {\n        var _this = this;\n        var videoNode = this.getVideoNode();\n        Object.keys(this._evtMaps).forEach(function (key) {\n            if (value) {\n                videoNode.on(key, _this._evtMaps[key]);\n            }\n            else {\n                videoNode.off(key, _this._evtMaps[key]);\n            }\n        });\n    };\n    OrgPreLoader.prototype.load = function (isFirstLoad, evtDispatcher, videoInfo, extra) {\n        this._videoInfo = videoInfo;\n        this._evtDispatcher = evtDispatcher;\n        this.setVideoNodeEvents(true);\n        this._logger.log("load(), isFirstLoad=".concat(isFirstLoad));\n        this.getVideoNode().load(videoInfo, extra);\n    };\n    OrgPreLoader.prototype.clearInner = function (keepLoadedData, emitEvt) {\n        if (!this._videoInfo) {\n            return;\n        }\n        var videoNode = this.getVideoNode();\n        if (!videoNode) {\n            return;\n        }\n        this._logger.log("clear(), uid=".concat(this._videoInfo.uid, "/keep=").concat(keepLoadedData));\n        this.setVideoNodeEvents(false);\n        if (!keepLoadedData) {\n            this._videoInfo.extraVars.preloadVideoNode = null;\n            videoNode.stop();\n        }\n        if (emitEvt) {\n            this._evtDispatcher.emit(_enums__WEBPACK_IMPORTED_MODULE_0__["PLAY_EVENT"].PRELOAD_VIDEONODE_CLEAR, { videoInfo: this._videoInfo });\n        }\n    };\n    OrgPreLoader.prototype.clear = function (keepLoadedData) {\n        this.clearInner(keepLoadedData, true);\n    };\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", [Boolean, _libs_event_emitter__WEBPACK_IMPORTED_MODULE_1__["default"], Object, Object]),\n        __metadata("design:returntype", void 0)\n    ], OrgPreLoader.prototype, "load", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", [Boolean]),\n        __metadata("design:returntype", void 0)\n    ], OrgPreLoader.prototype, "clear", null);\n    return OrgPreLoader;\n}());\n/* harmony default export */ __webpack_exports__["default"] = (OrgPreLoader);\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/kernel-origin/org-preloader.ts?')},"./src/kernel-origin/org-videonode.ts":function srcKernelOriginOrgVideonodeTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _base_base_videonode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../base/base-videonode */ "./src/base/base-videonode.ts");\n/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../enums */ "./src/enums.ts");\n/* harmony import */ var _libs_simple_defer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../libs/simple-defer */ "./src/libs/simple-defer.ts");\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../util */ "./src/util/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (undefined && undefined.__metadata) || function (k, v) {\n    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);\n};\n\n\n\n\nvar logMethodCall = Object(_util__WEBPACK_IMPORTED_MODULE_3__["logMethodCallDecoratorCreator"])(\'OrgVideoNode\');\n/**\n * ä½¿ç¨åççvideoæ ç­¾æ­æ¾åä¸ªè§é¢ã\n */\nvar OrgVideoNode = /** @class */ (function (_super) {\n    __extends(OrgVideoNode, _super);\n    function OrgVideoNode(config) {\n        var _this = _super.call(this, config) || this;\n        _this._logger = new _util__WEBPACK_IMPORTED_MODULE_3__["Logger"](config.instanceId, \'OrgVideoNode\');\n        return _this;\n    }\n    OrgVideoNode.prototype.onVideoEventCanplay = function () {\n        var _a;\n        (_a = this._canplayDefer) === null || _a === void 0 ? void 0 : _a.resolve();\n        _super.prototype.onVideoEventCanplay.call(this);\n    };\n    OrgVideoNode.prototype.onVideoEventLoadedmetadata = function () {\n        _super.prototype.onVideoEventLoadedmetadata.call(this);\n        if ((_util__WEBPACK_IMPORTED_MODULE_3__["uaTool"].os.ios || _util__WEBPACK_IMPORTED_MODULE_3__["uaTool"].browser.safari)\n            && [_enums__WEBPACK_IMPORTED_MODULE_1__["PRELOAD_TYPE"].META_DATA, _enums__WEBPACK_IMPORTED_MODULE_1__["PRELOAD_TYPE"].AUTO].includes(this._config.preloadType)) {\n            // iosåmac safariå¦ææ¯åªå è½½å¤´é¨æ°æ®ï¼ä¸ä¼ååºcanplayäºä»¶ãè¿æ¶åå°±éè¦å¼ºå¶æcanplayï¼ç¶åæå¯ä»¥æ¸é¤é¢å è½½è¶æ¶ï¼å¹¶è½è§¦åæ­æ¾\n            this.onVideoEventCanplay();\n        }\n    };\n    OrgVideoNode.prototype.onVideoEventLoadeddata = function () {\n        _super.prototype.onVideoEventLoadeddata.call(this);\n        // iosè¦å¨canplayä»¥åæè½seekï¼æä»¥å¨è¿éæ£æ¥å¼æ­ä»¥åéè¦è·³è½¬å°åªä¸ªèµ·æ­ç¹\n        this.checkPlayInitSeek();\n    };\n    OrgVideoNode.prototype.onVideoEventTimeUpdate = function () {\n        _super.prototype.onVideoEventTimeUpdate.call(this);\n        // x5è¦å¨timeupdateä»¥åæè½seekï¼æä»¥å¨è¿éæ£æ¥å¼æ­ä»¥åéè¦è·³è½¬å°åªä¸ªèµ·æ­ç¹\n        this.checkPlayInitSeek();\n    };\n    OrgVideoNode.prototype.onVideoEventLoadStart = function () {\n        this.resolveWaitVideoLoadStartEvt();\n    };\n    OrgVideoNode.prototype.load = function (videoInfo, opts) {\n        var _this = this;\n        if (!videoInfo.loadingUrl) {\n            return false;\n        }\n        // éå¯¹ææçdrmè§é¢ å±è½requestVideoFrameCallback\n        if (videoInfo.config.drmConfig) {\n            this.performanceMonitor.stop();\n        }\n        this.stopInner(true);\n        this._drm.init(videoInfo.config.drmConfig);\n        this._videoInfo = videoInfo;\n        this._videoInfo.extraVars.isLoadstarted = true;\n        this.setVideoEvents(true);\n        this.stateMgr.setLoadStart();\n        this.assignStartTime((opts === null || opts === void 0 ? void 0 : opts.startTime) || 0);\n        this._video.src = this._videoInfo.loadingUrl;\n        this._logger.log("load(), loadingUrl=".concat(this._videoInfo.loadingUrl, ", uid=").concat(this._videoInfo.uid));\n        if (this._config.preloadType === _enums__WEBPACK_IMPORTED_MODULE_1__["PRELOAD_TYPE"].AUTO_LOAD) {\n            this._video.load();\n        }\n        this.setCheckLoadTimeoutEnable(true);\n        this._canplayDefer = new _libs_simple_defer__WEBPACK_IMPORTED_MODULE_2__["default"]();\n        this.waitVideoLoadStartEvt()\n            .then(function () {\n            // æ¶å°äºloadStartäºä»¶\n            _this._logger.log(\'load(), video load succ...\');\n        })\n            .catch(function () {\n            _this._logger.error(\'load(), video load cannot be trigger...\');\n            // æ²¡æ¶å°loadStartäºä»¶ï¼ç­å¾è¶æ¶\n            _this.onVideoEventCanplay();\n        });\n        return true;\n    };\n    OrgVideoNode.prototype.play = function (videoInfo, opts) {\n        var _this = this;\n        this._logger.log("play(), uid=".concat(videoInfo === null || videoInfo === void 0 ? void 0 : videoInfo.uid, "/idx=").concat(this.idx, "/state=").concat(this.state));\n        this._played = true;\n        if (videoInfo && !videoInfo.extraVars.isLoadstarted) {\n            // å¦ææ²¡æå¼å§å è½½ï¼å°è¯å è½½è§é¢\n            this.load(videoInfo, opts);\n        }\n        var playPromise = null;\n        if (_util__WEBPACK_IMPORTED_MODULE_3__["uaTool"].browser.safari && this._canplayDefer) {\n            // è°ç¨loadä»¥åï¼å¦æé©¬ä¸playï¼ç®åsafariä¼æ æ³æ£æµå°èªå¨æ­æ¾ï¼å æ­¤safariçè¯ç­canplayååè°ç¨playæ­æ¾\n            // çä¸é¢ç¤ºä¾ä»£ç å¨safariä¸­çè¿è¡å¯ä»¥çå°è¿éä¿®æ¹çåå \n            // var videoTag = document.querySelector(\'video\');\n            // videoTag.src = \'//\' + location.host + \'/assets/u3139lwnb4l.mp4\'\n            // videoTag.load();\n            // // å¦æé©¬ä¸è°ç¨\n            // videoTag.play().catch(function (e) {\n            //   console.this._logger.log(`play() catch: ${e.name}, ${e.message}`);// AbortError, The operation was aborted\n            // });\n            // // å¦æå¨canplayåè°ç¨\n            // videoTag.addEventListener(\'canplay\', function() {\n            //   videoTag.play().catch(function (e) {\n            // NotAllowedError, The request is not allowed by ...\n            //   console.this._logger.log(`play() catch: ${e.name}, ${e.message}`);\n            // });\n            // // })\n            this._canplayDefer.promise.then(function () {\n                _this.videoplay();\n            });\n        }\n        else {\n            playPromise = this.videoplay();\n        }\n        this.setMainLoopEnable(true);\n        return playPromise;\n    };\n    /**\n     * æå®èµ·æ­æ¶é´\n     * @param startTime èµ·æ­æ¶é´ç¹\n     * @returns void\n     */\n    OrgVideoNode.prototype.assignStartTime = function (startTime) {\n        if (this._config.type === _enums__WEBPACK_IMPORTED_MODULE_1__["PLAY_MODE"].LIVE) {\n            // æå®èµ·æ­ç¹åªæç¹æ­æ¨¡å¼ä¸æçæ\n            return;\n        }\n        this._userStartTime = startTime;\n        var playtime = !Number.isNaN(startTime) && startTime >= 0 ? startTime : 0;\n        if (playtime <= 0) {\n            return;\n        }\n        if (_util__WEBPACK_IMPORTED_MODULE_3__["videoTool"].supportMediaFragmentsURISpec(this._config.enableMediaFragmentsURI)\n            && !this._videoInfo.loadingUrl.startsWith(\'blob:\')) {\n            this._logger.log(\'assignStartTime by #t\');\n            // urlç´æ¥æå®#tåæ°ï¼ä½blobå°åä¸æ¯ææå®æ­æ¾èµ·ç¹\n            this._videoInfo.setLoadingUrlStartTime(playtime);\n        }\n        else {\n            this._logger.log(\'assignStartTime with seek()\');\n            // å¼æ­ä»¥åseekå°ç®æ ç¹\n            this._needPlaySeektime = playtime;\n        }\n    };\n    OrgVideoNode.prototype.checkPlayInitSeek = function () {\n        if (this._needPlaySeektime > 0 && this._videoInfo && this._video.duration > 0) {\n            // å¤æ­çæåä¸ä¸ªæ¡ä»¶æ¯å ä¸ºä¸è¬videoçduration<=0æ¶é½æ æ³seek\n            this._logger.log("checkPlayInitSeek(), idx=".concat(this.idx, "/seektime=").concat(this._needPlaySeektime));\n            this.seek(this._needPlaySeektime);\n            this._needPlaySeektime = 0;\n        }\n    };\n    OrgVideoNode.prototype.stopInner = function (keepState, videoInfo) {\n        this._canplayDefer = null;\n        this._needPlaySeektime = 0;\n        _super.prototype.stopInner.call(this, keepState, videoInfo);\n    };\n    OrgVideoNode.prototype.seek = function (value, isUser) {\n        if (isUser === void 0) { isUser = false; }\n        var time = value;\n        if (!this.checkCanSeek(time, isUser)) {\n            return false;\n        }\n        if ((_util__WEBPACK_IMPORTED_MODULE_3__["uaTool"].browser.x5 || _util__WEBPACK_IMPORTED_MODULE_3__["uaTool"].browser.safari) && Math.abs(time - this._videoInfo.duration) <= 1) {\n            // bugå¤å¿ï¼\n            // safari / x5ä¸å¯è½åºç°ç´æ¥seekå°è§é¢çæç»å°¾ï¼seekæ¶é´ç­äºè§é¢æ¶é¿ï¼åï¼videoä¸ååºendäºä»¶åºæ¥ï¼æä»¥æ£æµå¦æè¿ç§æåµï¼ætimeå¼åé1s\n            time = this._videoInfo.duration - 1;\n        }\n        this._isUserSeek = isUser;\n        this._logger.log("seek(), uid".concat(this._videoInfo.uid, "/idx=").concat(this.idx, "/time=").concat(time, "/duration=").concat(this._video.duration, "/")\n            + "state=".concat(this.state));\n        this._targetSeekTime = time;\n        this._video.currentTime = time;\n        return true;\n    };\n    OrgVideoNode.prototype.updateAccuratePlaytime = function () {\n        _super.prototype.updateAccuratePlaytime.call(this);\n        var leftTime = Math.abs(this._video.duration - this._video.currentTime);\n        var advanceEndTime = this._config.originKernelConfig.advanceEndTime;\n        if (advanceEndTime > 0 && leftTime <= advanceEndTime) {\n            // æ ¹æ®éç½®çæ¶é´æåç»æå½åçæ­æ¾\n            this._logger.log(\'setEndInner(), reason=leftTimeCheck\');\n            this.setEndInner();\n        }\n    };\n    OrgVideoNode.prototype.setEndInner = function () {\n        if (this.state !== _enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_STATE"].END && this.state !== _enums__WEBPACK_IMPORTED_MODULE_1__["VIDEO_STATE"].IDLE) {\n            if (this.onAccurateTimeupdate) {\n                this.onAccurateTimeupdate(0);\n            }\n            this.updatePlaytime(this._video.currentTime); // æ´æ°æ´ç²¾ç¡®çæ¶é´\n        }\n        _super.prototype.setEndInner.call(this);\n    };\n    /**\n   * iosçå¾®ä¿¡æµè§å¨åx5æµè§å¨å¨æ²¡æç¨æ·æå¿ä¹åï¼è°ç¨video.load()æ¥å£ï¼å¹¶ä¸ä¼ææ°æ®è¯·æ±ï¼ä¹ä¸ä¼æ¶å°videoç»ä»¶çloadStartãcanplayäºä»¶ã\n   * å æ­¤æä»¬ç­å¾ä¸ä¸videoç»ä»¶çloadStartäºä»¶ï¼å¦ææ¶å°äºï¼è¯´æè§¦åäºæ°æ®å è½½ï¼å¯ä»¥æåè§¦ååç»­çcanplayäºä»¶ãä½æ¯å¦æä¸å®æ¶é´åæ²¡ææ¶å°\n   * loadStartäºä»¶ï¼é£ä¹å¯ä»¥å¤æ­video.load()æ¥å£è°ç¨å¹¶æ²¡æä»»ä½ååºã\n   */\n    OrgVideoNode.prototype.waitVideoLoadStartEvt = function () {\n        var _this = this;\n        this._waitVideoLoadStartEvtDefer = new _libs_simple_defer__WEBPACK_IMPORTED_MODULE_2__["default"]();\n        // 50msåé½æ²¡ææ¶å°loadStartäºä»¶ï¼è¯´ævideoç»ä»¶å¨è°ç¨loadä»¥åå¹¶ä¸ä¼è§¦åå è½½è¡ä¸º\n        var WAIT_TIME_MS = 50;\n        window.setTimeout(function () {\n            if (_this._waitVideoLoadStartEvtDefer.state !== \'rejected\') {\n                _this._waitVideoLoadStartEvtDefer.reject();\n            }\n        }, WAIT_TIME_MS);\n        return this._waitVideoLoadStartEvtDefer.promise;\n    };\n    OrgVideoNode.prototype.resolveWaitVideoLoadStartEvt = function () {\n        if (this._waitVideoLoadStartEvtDefer) {\n            this._waitVideoLoadStartEvtDefer.resolve();\n        }\n    };\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", [Object, Object]),\n        __metadata("design:returntype", void 0)\n    ], OrgVideoNode.prototype, "load", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", [Object, Object]),\n        __metadata("design:returntype", void 0)\n    ], OrgVideoNode.prototype, "play", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", [Boolean, Object]),\n        __metadata("design:returntype", void 0)\n    ], OrgVideoNode.prototype, "stopInner", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", [Number, Object]),\n        __metadata("design:returntype", void 0)\n    ], OrgVideoNode.prototype, "seek", null);\n    return OrgVideoNode;\n}(_base_base_videonode__WEBPACK_IMPORTED_MODULE_0__["default"]));\n/* harmony default export */ __webpack_exports__["default"] = (OrgVideoNode);\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/kernel-origin/org-videonode.ts?')},"./src/kernel-proxy.ts":function srcKernelProxyTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _base_config_helper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base/config-helper */ "./src/base/config-helper.ts");\n/* harmony import */ var _base_reference_report__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base/reference-report */ "./src/base/reference-report.ts");\n/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./enums */ "./src/enums.ts");\n/* harmony import */ var _interfaces__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./interfaces */ "./src/interfaces/index.ts");\n/* harmony import */ var _kernel_selector_kernel_factory__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./kernel-selector/kernel-factory */ "./src/kernel-selector/kernel-factory.ts");\n/* harmony import */ var _libs_autoplay_policy__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./libs/autoplay-policy */ "./src/libs/autoplay-policy.ts");\n/* harmony import */ var _libs_event_emitter__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./libs/event-emitter */ "./src/libs/event-emitter.ts");\n/* harmony import */ var _libs_simple_defer__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./libs/simple-defer */ "./src/libs/simple-defer.ts");\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./util */ "./src/util/index.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (undefined && undefined.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (undefined && undefined.__metadata) || function (k, v) {\n    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);\n};\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError("Generator is already executing.");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\n\n\n\n\n\nvar logMethodCall = Object(_util__WEBPACK_IMPORTED_MODULE_8__["logMethodCallDecoratorCreator"])(\'KernelProxy\');\n/** å¨å±çåæ ¸å è½½mapï¼ç¨äºè®°å½åæ ¸çjså è½½ãå è½½åè®°å½å°mapä¸­ï¼å è½½å®æåresolve */\nvar loadKernelDeferMap = {};\n/**\n * ä»£çæ­æ¾åæ ¸ï¼å¨åé¨å®ç°æ­æ¾åæ ¸çåå»ºãåæ¢ãéæ¯ï¼äºä»¶è½¬åç­ãè¿éå·²ç»åå»ºäºä¸ç»videoæ ç­¾ï¼ç¶åéè¿configä¼ ç»æ­£å¨ä½¿ç¨çæ­æ¾åæ ¸ãèä¸æ­æ¾\n * åæ ¸ä¹é´åæ¢ï¼videoæ ç­¾æ¯å¤ç¨çã\n */\nvar KernelProxy = /** @class */ (function (_super) {\n    __extends(KernelProxy, _super);\n    function KernelProxy(conf) {\n        var _this = _super.call(this) || this;\n        /** é³éå¼ï¼ç¨äºæ²¡æåå»ºåæ ¸ä¹åè®¸è®¾ç½®çä¸´æ¶ä¿å­*/\n        _this.volumeInner = 1;\n        _this.videoElementsInner = [];\n        _this.addedEvts = [];\n        _this.playerConfig = Object(_base_config_helper__WEBPACK_IMPORTED_MODULE_0__["createConfig"])(conf);\n        _this.logger = new _util__WEBPACK_IMPORTED_MODULE_8__["Logger"](_this.playerConfig.instanceId, \'KernelProxy\');\n        if (conf.logLevel > _enums__WEBPACK_IMPORTED_MODULE_2__["PLAYER_LOG_LEVEL"].NONE) {\n            // ä¸ä¼ å¥åæ°æ¶å¯ç¨æææ§å¶å°è¾åº\n            Object(_util__WEBPACK_IMPORTED_MODULE_8__["enableConsoleOutput"])();\n        }\n        if (!_this.playerConfig.videoElements) {\n            _this.playerConfig.videoElements = _this.createVideoElements();\n        }\n        _this.createVideoElementsContainer();\n        _this.kernelEvtFuncs = _this.kernelEvtHandler.bind(_this);\n        // å¼ç¨ä¸æ¥\n        _base_reference_report__WEBPACK_IMPORTED_MODULE_1__["default"].getReporter().collectUsage();\n        return _this;\n    }\n    Object.defineProperty(KernelProxy.prototype, "config", {\n        get: function () {\n            var _a;\n            return ((_a = this.kernel) === null || _a === void 0 ? void 0 : _a.config) || this.playerConfig;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(KernelProxy.prototype, "useWorker", {\n        get: function () {\n            var _a;\n            return !!((_a = this.kernel) === null || _a === void 0 ? void 0 : _a.useWorker);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(KernelProxy.prototype, "kernelName", {\n        get: function () {\n            var _a;\n            return (_a = this.kernel) === null || _a === void 0 ? void 0 : _a.kernelName;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(KernelProxy.prototype, "videoElements", {\n        get: function () {\n            var _a;\n            return ((_a = this.kernel) === null || _a === void 0 ? void 0 : _a.videoElements) || [];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(KernelProxy.prototype, "currentVideoElement", {\n        get: function () {\n            var _a;\n            return (_a = this.kernel) === null || _a === void 0 ? void 0 : _a.currentVideoElement;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(KernelProxy.prototype, "supportPreload", {\n        get: function () {\n            var _a;\n            return !!((_a = this.kernel) === null || _a === void 0 ? void 0 : _a.supportPreload);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(KernelProxy.prototype, "duration", {\n        get: function () {\n            var _a;\n            return ((_a = this.kernel) === null || _a === void 0 ? void 0 : _a.duration) || 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(KernelProxy.prototype, "playtime", {\n        get: function () {\n            var _a;\n            return ((_a = this.kernel) === null || _a === void 0 ? void 0 : _a.playtime) || 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(KernelProxy.prototype, "videoInfos", {\n        get: function () {\n            var _a;\n            return ((_a = this.kernel) === null || _a === void 0 ? void 0 : _a.videoInfos) || [];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(KernelProxy.prototype, "preloadVideoInfos", {\n        get: function () {\n            var _a;\n            return (_a = this.kernel) === null || _a === void 0 ? void 0 : _a.preloadVideoInfos;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(KernelProxy.prototype, "currentVideoInfo", {\n        get: function () {\n            var _a;\n            return (_a = this.kernel) === null || _a === void 0 ? void 0 : _a.currentVideoInfo;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(KernelProxy.prototype, "currentVideoInfoIdx", {\n        get: function () {\n            var _a;\n            return ((_a = this.kernel) === null || _a === void 0 ? void 0 : _a.currentVideoInfoIdx) || 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(KernelProxy.prototype, "totalVideoInfoCount", {\n        get: function () {\n            var _a;\n            return ((_a = this.kernel) === null || _a === void 0 ? void 0 : _a.totalVideoInfoCount) || 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(KernelProxy.prototype, "supportPlaybackRate", {\n        get: function () {\n            var _a;\n            return !!((_a = this.kernel) === null || _a === void 0 ? void 0 : _a.supportPlaybackRate);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(KernelProxy.prototype, "played", {\n        get: function () {\n            var _a;\n            return !!((_a = this.kernel) === null || _a === void 0 ? void 0 : _a.played);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(KernelProxy.prototype, "state", {\n        get: function () {\n            var _a;\n            return ((_a = this.kernel) === null || _a === void 0 ? void 0 : _a.state) || _enums__WEBPACK_IMPORTED_MODULE_2__["VIDEO_STATE"].IDLE;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(KernelProxy.prototype, "videoSize", {\n        get: function () {\n            var _a;\n            return ((_a = this.kernel) === null || _a === void 0 ? void 0 : _a.videoSize) || { width: 0, height: 0 };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(KernelProxy.prototype, "videoBuffered", {\n        get: function () {\n            var _a;\n            return ((_a = this.kernel) === null || _a === void 0 ? void 0 : _a.videoBuffered) || [];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    KernelProxy.prototype.captureVideo = function (dx, dy, dw, dh, extra) {\n        var _a;\n        return (_a = this.kernel) === null || _a === void 0 ? void 0 : _a.captureVideo(dx, dy, dw, dh, extra);\n    };\n    KernelProxy.prototype.log = function () {\n        var _a;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        (_a = this.logger) === null || _a === void 0 ? void 0 : _a.log.apply(_a, args);\n    };\n    KernelProxy.prototype.warn = function () {\n        var _a;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        (_a = this.logger) === null || _a === void 0 ? void 0 : _a.warn.apply(_a, args);\n    };\n    KernelProxy.prototype.error = function () {\n        var _a;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        (_a = this.logger) === null || _a === void 0 ? void 0 : _a.error.apply(_a, args);\n    };\n    KernelProxy.prototype.hasAppended = function (value) {\n        var _a;\n        return !!((_a = this.kernel) === null || _a === void 0 ? void 0 : _a.hasAppended(value));\n    };\n    KernelProxy.prototype.hasPreloaded = function (value) {\n        var _a;\n        return !!((_a = this.kernel) === null || _a === void 0 ? void 0 : _a.hasPreloaded(value));\n    };\n    Object.defineProperty(KernelProxy.prototype, "volume", {\n        get: function () {\n            var _a;\n            return ((_a = this.kernel) === null || _a === void 0 ? void 0 : _a.volume) || this.volumeInner;\n        },\n        set: function (value) {\n            this.volumeInner = value;\n            if (this.kernel) {\n                this.kernel.volume = value;\n            }\n            else {\n                // loadåè®¾ç½®é³éè¡¥åååºäºä»¶ï¼ä½æ²¡ævideoInfo\n                this.emit(_enums__WEBPACK_IMPORTED_MODULE_2__["PLAY_EVENT"].VOLUME_CHANGE, { volume: value });\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(KernelProxy.prototype, "playbackRate", {\n        get: function () {\n            var _a;\n            return ((_a = this.kernel) === null || _a === void 0 ? void 0 : _a.playbackRate) || this.playbackRateInner;\n        },\n        set: function (value) {\n            this.playbackRateInner = value;\n            if (this.kernel) {\n                this.kernel.playbackRate = value;\n            }\n            else {\n                // loadåè®¾ç½®åéè¡¥åååºäºä»¶ï¼ä½æ²¡ævideoInfo\n                this.emit(_enums__WEBPACK_IMPORTED_MODULE_2__["PLAY_EVENT"].RATE_CHANGE, { playbackRate: value });\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    KernelProxy.prototype.resizeVideoElements = function (value) {\n        var _a;\n        (_a = this.kernel) === null || _a === void 0 ? void 0 : _a.resizeVideoElements(value);\n    };\n    KernelProxy.prototype.resize = function (value) {\n        var _a;\n        (_a = this.kernel) === null || _a === void 0 ? void 0 : _a.resize(value);\n    };\n    KernelProxy.prototype.seek = function (time) {\n        var _a;\n        return (_a = this.kernel) === null || _a === void 0 ? void 0 : _a.seek(time);\n    };\n    KernelProxy.prototype.play = function (urlConfig, extra) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this.checkConfigBeforeLoad(urlConfig, extra)];\n                    case 1:\n                        _b.sent();\n                        return [2 /*return*/, (_a = this.kernel) === null || _a === void 0 ? void 0 : _a.play(urlConfig, extra)];\n                }\n            });\n        });\n    };\n    KernelProxy.prototype.load = function (urlConfig, extra) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this.checkConfigBeforeLoad(urlConfig, extra)];\n                    case 1:\n                        _b.sent();\n                        return [2 /*return*/, (_a = this.kernel) === null || _a === void 0 ? void 0 : _a.load(urlConfig, extra)];\n                }\n            });\n        });\n    };\n    KernelProxy.prototype.playNext = function (opts) {\n        var _a;\n        (_a = this.kernel) === null || _a === void 0 ? void 0 : _a.playNext(opts);\n    };\n    KernelProxy.prototype.pause = function (pauseType) {\n        var _a;\n        (_a = this.kernel) === null || _a === void 0 ? void 0 : _a.pause(pauseType);\n    };\n    KernelProxy.prototype.stop = function (endState) {\n        var _a;\n        (_a = this.kernel) === null || _a === void 0 ? void 0 : _a.stop(endState);\n    };\n    KernelProxy.prototype.appendNext = function (value) {\n        var _a;\n        return !!((_a = this.kernel) === null || _a === void 0 ? void 0 : _a.appendNext(value));\n    };\n    KernelProxy.prototype.preloadNext = function () {\n        var _a;\n        var confs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            confs[_i] = arguments[_i];\n        }\n        return (_a = this.kernel) === null || _a === void 0 ? void 0 : _a.preloadNext.apply(_a, confs);\n    };\n    KernelProxy.prototype.clearAllPreload = function () {\n        var _a;\n        (_a = this.kernel) === null || _a === void 0 ? void 0 : _a.clearAllPreload();\n    };\n    KernelProxy.prototype.triggerAutoplay = function () {\n        var _this = this;\n        var _a;\n        if (!this.kernel) {\n            this.logger.log(\'triggerAutoplay(), start\');\n            var func = function (el) {\n                var autoplay = new _libs_autoplay_policy__WEBPACK_IMPORTED_MODULE_5__["default"](el, { instanceId: _this.playerConfig.instanceId });\n                return autoplay.userTrigger();\n            };\n            var triggerPromises = this.videoElementsInner.map(func);\n            return Promise.all(triggerPromises);\n        }\n        return (_a = this.kernel) === null || _a === void 0 ? void 0 : _a.triggerAutoplay();\n    };\n    KernelProxy.prototype.setAudioTrack = function (id) {\n        if (!this.kernel) {\n            return Promise.reject(new Error(_interfaces__WEBPACK_IMPORTED_MODULE_3__["AUDIO_TRACK_ERROR_MSG"].KERNEL_NOT_EXISTS));\n        }\n        return this.kernel.setAudioTrack(id);\n    };\n    KernelProxy.prototype.getAudioTrackList = function () {\n        if (!this.currentVideoInfo)\n            return [];\n        return this.currentVideoInfo.audioTracks;\n    };\n    KernelProxy.prototype.getCurrentAudioTrack = function () {\n        if (!this.currentVideoInfo)\n            return NaN;\n        return this.currentVideoInfo.currentAudioTrack;\n    };\n    KernelProxy.prototype.setLevel = function (urlOrUrlConfig, backupUrls, extraConfig) {\n        return __awaiter(this, void 0, void 0, function () {\n            var nextLevelUrlConfig, preVideoInfo, _a, isKernelSwitched, error;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!this.kernel) {\n                            return [2 /*return*/, Promise.reject(\'åæ¢æ¸æ°åº¦æ¶æ¾ä¸å°å¯¹åºåæ ¸\')];\n                        }\n                        nextLevelUrlConfig = typeof urlOrUrlConfig === \'string\'\n                            // è¿éè¦æ¼æ¥extraï¼å¸¦ä¸drmåæ°\n                            ? __assign(__assign({}, extraConfig), { url: urlOrUrlConfig }) : urlOrUrlConfig;\n                        preVideoInfo = this.currentVideoInfo;\n                        return [4 /*yield*/, this.checkWhetherNeedToSwitchKernel(nextLevelUrlConfig, null, false)];\n                    case 1:\n                        _a = _b.sent(), isKernelSwitched = _a.isKernelSwitched, error = _a.error;\n                        if (error === null || error === void 0 ? void 0 : error.message) {\n                            return [2 /*return*/, Promise.reject(error === null || error === void 0 ? void 0 : error.message)];\n                        }\n                        if (isKernelSwitched) {\n                            return [2 /*return*/, this.setLevelWhenKernelSwitched(__assign(__assign(__assign({}, nextLevelUrlConfig), { backupUrls: backupUrls }), extraConfig), preVideoInfo)];\n                        }\n                        // ç´æ¥å¨èçåæ ¸ä¸åæ¢æ¸æ°åº¦\n                        if (typeof urlOrUrlConfig === \'string\') {\n                            return [2 /*return*/, this.kernel.setLevel(urlOrUrlConfig, backupUrls, extraConfig)];\n                        }\n                        return [2 /*return*/, this.kernel.setLevel(urlOrUrlConfig)];\n                }\n            });\n        });\n    };\n    KernelProxy.prototype.on = function (type, listener, priority) {\n        _super.prototype.on.call(this, type, listener, priority);\n        this.proxyEvent(type);\n        return this;\n    };\n    KernelProxy.prototype.once = function (type, listener, priority) {\n        _super.prototype.once.call(this, type, listener, priority);\n        this.proxyEvent(type, true);\n        return this;\n    };\n    /**\n     * éæ¯å½åproxy\n     */\n    KernelProxy.prototype.destroy = function () {\n        var _a;\n        if (this.videoElementsInner) {\n            this.videoElementsInner.forEach(function (videoElement) {\n                _util__WEBPACK_IMPORTED_MODULE_8__["videoTool"].destroyElement(videoElement);\n            });\n            this.videoElementsInner = null;\n        }\n        if ((_a = this.videoElementsContainer) === null || _a === void 0 ? void 0 : _a.parentNode) {\n            this.videoElementsContainer.remove();\n        }\n        this.destroyKernel();\n        this.removeAllListeners();\n        this.kernelEvtFuncs = null;\n        this.playerConfig = null;\n    };\n    /**\n     * æ£æ¥æ¯å¦éè¦åæ¢åæ ¸ãå¦æéè¦ï¼åä¼éæ¯æ§çåæ ¸ï¼å¹¶åå»ºæ°çåæ ¸ã\n     * @param urlConfig ä¼ å¥çæ­æ¾å°å\n     * @param emitStopEvent æ¯å¦éè¦æ´¾åStopäºä»¶\n     * @returns æ¯å¦æåæ¢åæ ¸ï¼å¦ææ²¡ææ§çåæ ¸èåå»ºäºæ°çåæ ¸ï¼ä¹ç®åæ¢ã\n     */\n    KernelProxy.prototype.checkWhetherNeedToSwitchKernel = function (urlConfig, extra, emitStopEvent) {\n        if (emitStopEvent === void 0) { emitStopEvent = true; }\n        return __awaiter(this, void 0, void 0, function () {\n            var checkUrlConfig, forceKernelName, selectedKernelName, kernelName;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        checkUrlConfig = (urlConfig instanceof Array) ? urlConfig[0] : urlConfig;\n                        forceKernelName = (extra === null || extra === void 0 ? void 0 : extra.kernelName) || checkUrlConfig.kernelName;\n                        selectedKernelName = _kernel_selector_kernel_factory__WEBPACK_IMPORTED_MODULE_4__["default"].selectKernel(urlConfig, forceKernelName, this.playerConfig.kernelPriority);\n                        // KernelFactory.selectKernelè¿åç±»åæ¯IVideoERRORï¼æå³çå¼ºå¶åæ ¸æ¯æ æ³æ­æ¾å½åè§é¢ï¼ç´æ¥æç¤ºéè¯¯\n                        if (typeof selectedKernelName !== \'string\') {\n                            return [2 /*return*/, {\n                                    isKernelSwitched: false,\n                                    error: selectedKernelName,\n                                }];\n                        }\n                        this.logger.log(\'kernel select:\', selectedKernelName);\n                        if (!(selectedKernelName && !_kernel_selector_kernel_factory__WEBPACK_IMPORTED_MODULE_4__["default"].kernelMap[selectedKernelName])) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.loadKernel(selectedKernelName)];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2:\n                        kernelName = _kernel_selector_kernel_factory__WEBPACK_IMPORTED_MODULE_4__["default"].kernelMap[selectedKernelName] ? selectedKernelName : _enums__WEBPACK_IMPORTED_MODULE_2__["KERNEL_NAME"].ORIGIN;\n                        // 1.å¦ækernelNameä¸ä¸æ ·ï¼éè¦åéæ¯æ§ç\n                        if (this.kernel && this.kernel.kernelName !== kernelName) {\n                            // å¦æå·²ç»è§¦åæ­æ¾ï¼æ­æ¾ä¸­ï¼ï¼KernelProxyå±éè¦è¡¥åSTOPEDäºä»¶åºå»ï¼å ä¸ºéæ¯å½ååæ ¸çæä½å¤é¨æ æ³æç¥\n                            if (this.kernel.played && emitStopEvent) {\n                                this.emit(_enums__WEBPACK_IMPORTED_MODULE_2__["PLAY_EVENT"].STOPED, {\n                                    videoInfo: this.kernel.currentVideoInfo,\n                                    endState: _enums__WEBPACK_IMPORTED_MODULE_2__["END_STATE"].INTERRUPT,\n                                });\n                            }\n                            this.destroyKernel();\n                        }\n                        if (!!this.kernel) return [3 /*break*/, 4];\n                        return [4 /*yield*/, this.createKernel(kernelName)];\n                    case 3:\n                        _a.sent();\n                        return [2 /*return*/, {\n                                isKernelSwitched: true,\n                            }];\n                    case 4: return [2 /*return*/, {\n                            isKernelSwitched: false,\n                        }];\n                }\n            });\n        });\n    };\n    /**\n     * å°è¯ä»è¿ç¨å è½½åæ ¸æä»¶ãå è½½æååä¼èªå¨æ³¨åå°window.ThumbplayerCore.KernelFactory\n     * @param kernelName åæ ¸åç§°\n     * @param retryTimes å¤±è´¥æ¶éè¯æ¬¡æ°\n     * @returns æ¯å¦æåå è½½\n     */\n    KernelProxy.prototype.loadKernel = function (kernelName, retryTimes) {\n        if (retryTimes === void 0) { retryTimes = 3; }\n        return __awaiter(this, void 0, void 0, function () {\n            var kernelCdnPath, loadSucc_1, loadSucc, i, err_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        kernelCdnPath = Object(_kernel_selector_kernel_factory__WEBPACK_IMPORTED_MODULE_4__["getKernelCdnPath"])(kernelName, this.playerConfig.autoLoadKernelVerMap);\n                        if (!kernelCdnPath) {\n                            return [2 /*return*/, false];\n                        }\n                        if (!loadKernelDeferMap[kernelName]) return [3 /*break*/, 2];\n                        this.logger.log("auto download kernel [".concat(kernelCdnPath, "] has been started!"));\n                        return [4 /*yield*/, loadKernelDeferMap[kernelName].promise];\n                    case 1:\n                        loadSucc_1 = _a.sent();\n                        this.logger.log("auto download kernel [".concat(kernelCdnPath, "] succ=").concat(loadSucc_1));\n                        return [2 /*return*/, loadSucc_1];\n                    case 2:\n                        loadKernelDeferMap[kernelName] = new _libs_simple_defer__WEBPACK_IMPORTED_MODULE_7__["default"]();\n                        this.logger.log("auto download kernel [".concat(kernelCdnPath, "]"));\n                        loadSucc = false;\n                        i = 0;\n                        _a.label = 3;\n                    case 3:\n                        if (!(i < retryTimes)) return [3 /*break*/, 9];\n                        _a.label = 4;\n                    case 4:\n                        _a.trys.push([4, 6, , 7]);\n                        return [4 /*yield*/, _util__WEBPACK_IMPORTED_MODULE_8__["domTool"].loadScript("".concat(_enums__WEBPACK_IMPORTED_MODULE_2__["CDN_PATH_PREFIX"] + kernelCdnPath, "?max_age=86400"), null, 10000)];\n                    case 5:\n                        _a.sent();\n                        this.logger.log("auto download kernel [".concat(kernelCdnPath, "] succ=true"));\n                        loadSucc = true;\n                        return [3 /*break*/, 7];\n                    case 6:\n                        err_1 = _a.sent();\n                        loadSucc = false;\n                        // çè®ºä¸å è½½å¤±è´¥ä¹ä¼èµ°åçåæ ¸å°è¯æ­æ¾ï¼æä»¥è¿éè®¾è®¡æä¸éè¦æåºå¼å¸¸ï¼ä»è¿åå è½½å¤±è´¥ã\n                        this.logger.error("auto download kernel [".concat(kernelCdnPath, "] failed"));\n                        return [3 /*break*/, 7];\n                    case 7:\n                        if (loadSucc) {\n                            return [3 /*break*/, 9];\n                        }\n                        _a.label = 8;\n                    case 8:\n                        i++;\n                        return [3 /*break*/, 3];\n                    case 9:\n                        loadKernelDeferMap[kernelName].resolve(loadSucc);\n                        return [2 /*return*/, loadSucc];\n                }\n            });\n        });\n    };\n    /**\n     * åå»ºåæ ¸å®ä¾ã\n     */\n    KernelProxy.prototype.createKernel = function (kernelName) {\n        this.kernel = _kernel_selector_kernel_factory__WEBPACK_IMPORTED_MODULE_4__["default"].createKernel(kernelName, this.playerConfig);\n        if (typeof this.volumeInner !== \'undefined\') {\n            this.kernel.volume = this.volumeInner;\n        }\n        if (typeof this.playbackRateInner !== \'undefined\') {\n            this.kernel.playbackRate = this.playbackRateInner;\n        }\n        this.setKernelEvts(true);\n    };\n    /**\n     * åå»ºvideoæ ç­¾ï¼videoæ ç­¾éè¦æåå¨æ­æ¾åæ ¸åå»ºä¹ååå§åãå ä¸ºloadæèplayæ¥å£æä¼åå»ºæ­æ¾åæ ¸ãä½æ¯è§¦åèªå¨æ­æ¾ç­è¡ä¸ºå¯è½åäºloadæè\n     * playæ¥å£ï¼èè¿äºè¡ä¸ºä¾èµvideoæ ç­¾çå®ä¾ãè¿éåå»ºçvideoæ ç­¾å¨åç§æ­æ¾åæ ¸åæ¢ä¸­ï¼ä¼åå°å¤ç¨ã\n     */\n    KernelProxy.prototype.createVideoElements = function () {\n        var _a = this.playerConfig, instanceId = _a.instanceId, videoElementConfig = _a.videoElementConfig, maxVideoNodeCount = _a.maxVideoNodeCount;\n        var createVideoDomOptions = Object(_base_config_helper__WEBPACK_IMPORTED_MODULE_0__["convertVideoElementConfig"])(__assign(__assign({ preload: this.playerConfig.preloadType === _enums__WEBPACK_IMPORTED_MODULE_2__["PRELOAD_TYPE"].META_DATA ? \'metadata\' : \'auto\' }, videoElementConfig), { playerid: instanceId }));\n        for (var i = 0; i < maxVideoNodeCount; i++) {\n            var videoElement = _util__WEBPACK_IMPORTED_MODULE_8__["domTool"].createVideoDom(createVideoDomOptions);\n            this.videoElementsInner.push(videoElement);\n        }\n        return this.videoElementsInner;\n    };\n    /**\n     * åå»ºåè£¹videoæ ç­¾çå®¹å¨ã\n     */\n    KernelProxy.prototype.createVideoElementsContainer = function () {\n        var container = this.playerConfig.container;\n        var containerElement = _util__WEBPACK_IMPORTED_MODULE_8__["domTool"].getElementFromConfig(container);\n        this.videoElementsContainer = _util__WEBPACK_IMPORTED_MODULE_8__["domTool"].creatDom("\\n      <div class=\\"".concat(_enums__WEBPACK_IMPORTED_MODULE_2__["VIDEO_CONTAINER_CLASS"], "\\" style=\\"position:absolute;left:0;top:0;width:100%;height:100%;z-index:0;\\">\\n      </div>\\n    ").trim());\n        _util__WEBPACK_IMPORTED_MODULE_8__["domTool"].append(containerElement, this.videoElementsContainer);\n    };\n    /**\n     * ä»£çkernelçäºä»¶ï¼çå¬ä»¥åè¿è¡è½¬åãï¼è°ç¨KernelProxyçonceæ¹æ³ä¹å®å¨æ²¡é®é¢ï¼\n     */\n    KernelProxy.prototype.setKernelEvts = function (value) {\n        var _this = this;\n        if (!this.kernel) {\n            return;\n        }\n        if (value) {\n            // ä¿è¯kernelå¯¹ä»»ä½äºä»¶åªçå¬ä¸æ¬¡\n            this.setKernelEvts(false);\n        }\n        var func = value ? this.kernel.on : this.kernel.off;\n        this.addedEvts.forEach(function (evtName) {\n            func.apply(_this.kernel, [evtName, _this.kernelEvtFuncs]);\n        });\n    };\n    KernelProxy.prototype.kernelEvtHandler = function (e) {\n        if (this.setLevelWhenKernelSwitchedDefer) {\n            // å¦ææ¯æ°åæ ¸æ­æ¾å®ç°åæ¢æ¸æ°åº¦çæåµä¸ï¼åæ¢ä¸­ææäºä»¶é½ä¸ååºå»ï¼ç­åæ¢æå\n            var isSetLevelOver = this.checkSetLevelOverWhenKernelSwitched(e);\n            if (isSetLevelOver) {\n                this.setLevelWhenKernelSwitchedDefer = null;\n            }\n        }\n        else {\n            this.emit(e.type, e.data);\n        }\n    };\n    /**\n     * éè¦æ¢åæ ¸åºæ¯ä¸çåæ¸æ°åº¦ãæ­¤æåµä¸ä½¿ç¨æ°åæ ¸ç´æ¥æ­æ¾è§é¢ï¼èä¸æ¯å¨èçåæ ¸ä¸æ§è¡setLevelé»è¾ï¼å ä¸ºèçåæ ¸å·²ç»è¢«éæ¯ã\n     */\n    KernelProxy.prototype.setLevelWhenKernelSwitched = function (urlConfig, preVideoInfo) {\n        this.emit(_enums__WEBPACK_IMPORTED_MODULE_2__["PLAY_EVENT"].SETLEVEL_START, { videoInfo: preVideoInfo, mode: _enums__WEBPACK_IMPORTED_MODULE_2__["SET_LEVEL_MODE"].HARD });\n        this.kernel.play(urlConfig, { startTime: (preVideoInfo === null || preVideoInfo === void 0 ? void 0 : preVideoInfo.playtime) || 0 });\n        this.setLevelWhenKernelSwitchedDefer = new _libs_simple_defer__WEBPACK_IMPORTED_MODULE_7__["default"]();\n        return this.setLevelWhenKernelSwitchedDefer.promise;\n    };\n    /**\n     * æ£æ¥æ¢åæ ¸æ¹å¼ä¸åæ¢æ¸æ°åº¦æ¯å¦å®æã\n     * @returns æ¯å¦åæ¢å®æï¼æ è®ºæåè¿æ¯å¤±è´¥ï¼\n     */\n    KernelProxy.prototype.checkSetLevelOverWhenKernelSwitched = function (e) {\n        var _a;\n        if (e.type === _enums__WEBPACK_IMPORTED_MODULE_2__["PLAY_EVENT"].STATE_CHANGE && e.data.new === _enums__WEBPACK_IMPORTED_MODULE_2__["VIDEO_STATE"].PLAYING) {\n            // æ­æ¾æåï¼ä»£è¡¨åæ¢æå\n            this.setLevelWhenKernelSwitchedDefer.resolve();\n            this.emit(_enums__WEBPACK_IMPORTED_MODULE_2__["PLAY_EVENT"].SETLEVEL_OVER, { videoInfo: this.currentVideoInfo });\n            return true;\n        }\n        if (e.type === _enums__WEBPACK_IMPORTED_MODULE_2__["PLAY_EVENT"].ERROR) {\n            // æ­æ¾åºéï¼ä»£è¡¨åæ¢å¤±è´¥\n            this.setLevelWhenKernelSwitchedDefer.reject((_a = e.data.videoInfo) === null || _a === void 0 ? void 0 : _a.error);\n            this.emit(_enums__WEBPACK_IMPORTED_MODULE_2__["PLAY_EVENT"].SETLEVEL_OVER, { videoInfo: this.currentVideoInfo, fail: true });\n            return true;\n        }\n        return false;\n    };\n    /**\n     * ä»£çäºä»¶\n     * @param type äºä»¶ç±»å\n     * @param isOnce æ¯å¦åªæ§è¡ä¸æ¬¡\n     */\n    KernelProxy.prototype.proxyEvent = function (type, isOnce) {\n        if (isOnce === void 0) { isOnce = false; }\n        // 1. åªè¦å¤é¨æ·»å çå¬æä¸ªäºä»¶ï¼\n        // é¦åä¼ç¼å­äºä»¶åå°æ°ç»ä¸­ï¼å¶æ¬¡å½åæ­æ¾åæ ¸å°±ä¼æ·»å è¯¥äºä»¶åççå¬å¹¶å¨äºä»¶çå¬å¨ä¸­è¿è¡è½¬åãè½¬åèä¸ºkernel-proxyã\n        // 2. å¤é¨ç§»é¤æä¸ªäºä»¶ççå¬ï¼\n        // ç§»é¤çæ¯kernel-proxyä¸ççå¬ï¼èä¸æ¯kernelä¸çãkernelä¸ççå¬åªå¨kernelè¢«éæ¯çæ¶åç§»é¤ã\n        if (this.addedEvts.includes(type))\n            return;\n        this.addedEvts.push(type);\n        if (!this.kernel)\n            return;\n        if (isOnce) {\n            this.kernel.once(type, this.kernelEvtFuncs);\n            return;\n        }\n        this.kernel.on(type, this.kernelEvtFuncs);\n    };\n    /**\n     * æ§è¡urlConfigæ­æ¾åçåæ ¸æ£æ¥ï¼å¦ææ´æ¢äºæ ¼å¼ï¼éè¦åæ¢åæ ¸å¦åæé\n     */\n    KernelProxy.prototype.checkConfigBeforeLoad = function (urlConfig, extra) {\n        return __awaiter(this, void 0, void 0, function () {\n            var error;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!urlConfig) {\n                            return [2 /*return*/];\n                        }\n                        return [4 /*yield*/, this.checkWhetherNeedToSwitchKernel(urlConfig, extra)];\n                    case 1:\n                        error = (_a.sent()).error;\n                        if (error) {\n                            this.emit(_enums__WEBPACK_IMPORTED_MODULE_2__["PLAY_EVENT"].ERROR, { videoInfo: { error: error } });\n                            throw error;\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n    * éæ¯å½ååæ ¸\n    */\n    KernelProxy.prototype.destroyKernel = function () {\n        var _a;\n        if (this.kernel) {\n            this.setKernelEvts(false);\n            (_a = this.kernel) === null || _a === void 0 ? void 0 : _a.destroy();\n            this.kernel = null;\n        }\n    };\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", [Object, Object]),\n        __metadata("design:returntype", Promise)\n    ], KernelProxy.prototype, "play", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", [Object, Object]),\n        __metadata("design:returntype", Promise)\n    ], KernelProxy.prototype, "load", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", [Object]),\n        __metadata("design:returntype", void 0)\n    ], KernelProxy.prototype, "setAudioTrack", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", [Object, Array, Object]),\n        __metadata("design:returntype", Promise)\n    ], KernelProxy.prototype, "setLevel", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", []),\n        __metadata("design:returntype", void 0)\n    ], KernelProxy.prototype, "destroy", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", [Object, Object, Object]),\n        __metadata("design:returntype", Promise)\n    ], KernelProxy.prototype, "checkWhetherNeedToSwitchKernel", null);\n    __decorate([\n        logMethodCall,\n        __metadata("design:type", Function),\n        __metadata("design:paramtypes", [String]),\n        __metadata("design:returntype", void 0)\n    ], KernelProxy.prototype, "createKernel", null);\n    return KernelProxy;\n}(_libs_event_emitter__WEBPACK_IMPORTED_MODULE_6__["default"]));\n/* harmony default export */ __webpack_exports__["default"] = (KernelProxy);\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/kernel-proxy.ts?')},"./src/kernel-selector/index.ts":function srcKernelSelectorIndexTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KERNEL_NAME_BY_PRIORITY", function() { return KERNEL_NAME_BY_PRIORITY; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VIDEO_TYPE_2_AVAILABEL_MAP", function() { return VIDEO_TYPE_2_AVAILABEL_MAP; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VIDEO_TYPE_2_KERNEL_NAME_MAP", function() { return VIDEO_TYPE_2_KERNEL_NAME_MAP; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KernelSelector", function() { return KernelSelector; });\n/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../enums */ "./src/enums.ts");\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util */ "./src/util/index.ts");\n/* harmony import */ var _kernel_available__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./kernel-available */ "./src/kernel-selector/kernel-available.ts");\n/* harmony import */ var _metadata__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./metadata */ "./src/kernel-selector/metadata.ts");\nvar _a;\n\n\n\n\n/** URLæ³¨å¥åæ°keyå */\nvar UrlParamKey;\n(function (UrlParamKey) {\n    UrlParamKey["forceKernel"] = "__forceKernel";\n})(UrlParamKey || (UrlParamKey = {}));\n/**\n * æä¼åçº§é¡ºåºæåçåæ ¸åç§°æ°ç»ï¼ä»é«å°ä½ä¾æ¬¡å¤æ­\n * ORIGINä½ä¸ºååºåæ ¸ä½¿ç¨ï¼ååä¸æ¥è¯´æ²¡æå¹éä¸çï¼é½å°è¯ä½¿ç¨originæ¹å¼æ­æ¾\n * WASMåæ ¸å¾ç¹æ®ä¸ä½¿ç¨æéå¶ï¼æä»¥ä¸å¨åè¡¨éï¼å¦æéè¦ä½¿ç¨åªè½å¤é¨æå®\n */\nvar KERNEL_NAME_BY_PRIORITY = [\n    _enums__WEBPACK_IMPORTED_MODULE_0__["KERNEL_NAME"].HLS_JS,\n    _enums__WEBPACK_IMPORTED_MODULE_0__["KERNEL_NAME"].FLV_JS,\n    _enums__WEBPACK_IMPORTED_MODULE_0__["KERNEL_NAME"].WEBRTC,\n    _enums__WEBPACK_IMPORTED_MODULE_0__["KERNEL_NAME"].ORIGIN,\n];\n/**\n * ä»è§é¢æ ¼å¼å°åæ ¸åç§°çæ å°ï¼è¿éæ¯å¨éåæ ¸åè¡¨\n */\nvar VIDEO_TYPE_2_AVAILABEL_MAP = (_a = {},\n    _a[_enums__WEBPACK_IMPORTED_MODULE_0__["KERNEL_NAME"].HLS_JS] = _kernel_available__WEBPACK_IMPORTED_MODULE_2__["default"].isHlsjsAvailable,\n    _a[_enums__WEBPACK_IMPORTED_MODULE_0__["KERNEL_NAME"].FLV_JS] = _kernel_available__WEBPACK_IMPORTED_MODULE_2__["default"].isFlvjsAvailable,\n    _a[_enums__WEBPACK_IMPORTED_MODULE_0__["KERNEL_NAME"].WEBRTC] = _kernel_available__WEBPACK_IMPORTED_MODULE_2__["default"].isWebrtcplayerAvailable,\n    _a[_enums__WEBPACK_IMPORTED_MODULE_0__["KERNEL_NAME"].DEMUX_2_FMP4] = _kernel_available__WEBPACK_IMPORTED_MODULE_2__["default"].isDemux2fmp4Available,\n    _a[_enums__WEBPACK_IMPORTED_MODULE_0__["KERNEL_NAME"].ORIGIN] = function () { return true; },\n    _a[_enums__WEBPACK_IMPORTED_MODULE_0__["KERNEL_NAME"].WASM] = _kernel_available__WEBPACK_IMPORTED_MODULE_2__["default"].isWasmplayerAvailble,\n    _a[_enums__WEBPACK_IMPORTED_MODULE_0__["KERNEL_NAME"].ELECTRON] = _kernel_available__WEBPACK_IMPORTED_MODULE_2__["default"].isElectronPlayerAailble,\n    _a);\n/*\n * ä»è§é¢æ ¼å¼å°åæ ¸åç§°çæ å°\n */\nvar VIDEO_TYPE_2_KERNEL_NAME_MAP = {\n    flv: _enums__WEBPACK_IMPORTED_MODULE_0__["KERNEL_NAME"].FLV_JS,\n    hls: _enums__WEBPACK_IMPORTED_MODULE_0__["KERNEL_NAME"].HLS_JS,\n    webrtc: _enums__WEBPACK_IMPORTED_MODULE_0__["KERNEL_NAME"].WEBRTC,\n};\n/**\n * ç¨äºæ ¹æ®å½åæ­æ¾éç½®ä¿¡æ¯éæ©åéçæ­æ¾åæ ¸åç§°\n */\nvar KernelSelector = /** @class */ (function () {\n    function KernelSelector() {\n    }\n    KernelSelector.getSelector = function () {\n        if (!this.selector) {\n            this.selector = new KernelSelector();\n        }\n        return this.selector;\n    };\n    /**\n    * æ ¹æ®æ­æ¾éç½®èªå¨éæ©éæ©æ­æ¾åæ ¸ãä¹å¯ä»¥å¼ºè¡æå®æ­æ¾åæ ¸åç§°ï¼ä½ä»ç¶éè¦éè¿ä¸äºæ ¡éªæä¼å³å®æ¯å¦ä½¿ç¨ã\n    * @param urlConfig æ­æ¾éç½®ä¿¡æ¯\n    * @param forceKernelName å¼ºå¶ä½¿ç¨æç§åæ ¸\n    * @param kernelPriority èªå®ä¹åæ ¸éæ©æ¶çä¼åçº§\n    * @returns è¢«éæ©çåæ ¸åç§°\n    */\n    KernelSelector.prototype.selectByURLConfig = function (urlConfig, forceKernelName, kernelPriority) {\n        var metadata = Object(_metadata__WEBPACK_IMPORTED_MODULE_3__["createMetadata"])(urlConfig);\n        // ä¼åçº§1ï¼å¦æå¤é¨æå®ä½¿ç¨åæ ¸ï¼ä¸è¬ç¨äºdebugæèå¼ç¨æ¹æå®ï¼æä»¥ä¼åçº§æé«\n        return this.selectKernelWithAssign(metadata, forceKernelName)\n            // ä¼åçº§2ï¼æä¼åçº§åè¡¨éæ©è½æ­æ¾å¯¹åºæ ¼å¼çåæ ¸\n            || this.selectKernelInPresetMap(metadata, kernelPriority);\n    };\n    /**\n     * å¦æå¤é¨æå®ä½¿ç¨åæ ¸ï¼æ è®ºå¦ä½é½ç«å³è¿åè¯¥åæ ¸\n     */\n    KernelSelector.prototype.selectKernelWithAssign = function (metadata, forceKernelName) {\n        var _a;\n        var kernelName = forceKernelName;\n        // å¦ææéè¿urlåæ°æå®ï¼æ è®ºå¦ä½é½ç«å³è¿åè¯¥åæ ¸ï¼ä¼åçº§æ¯forceKernelNameæ´é«\n        var kernelNameFromUrlParam = _util__WEBPACK_IMPORTED_MODULE_1__["urlTool"].getUrlParamByKey(location.href, UrlParamKey.forceKernel);\n        // æå®åæ ¸å¨é¢è®¾åè¡¨éæå¯ä»¥ç¨\n        if (kernelNameFromUrlParam && Object.keys(VIDEO_TYPE_2_AVAILABEL_MAP).includes(kernelNameFromUrlParam)) {\n            kernelName = kernelNameFromUrlParam;\n        }\n        // forceKernelåURLé½æ²¡æå¼ºå¶æå®åæ°ï¼ç´æ¥è¿åèµ°èªå¨è®¾å®\n        if (!kernelName) {\n            return null;\n        }\n        // å¦ææå®çåæ ¸å¯ä»¥æ­æ¾è¯¥è§é¢\n        if ((_a = VIDEO_TYPE_2_AVAILABEL_MAP[kernelName]) === null || _a === void 0 ? void 0 : _a.call(VIDEO_TYPE_2_AVAILABEL_MAP, metadata)) {\n            return kernelName;\n        }\n        // å¼ºå¶æå®åæ ¸ä¸è½æ­æ¾ï¼è¿åéè¯¯\n        var suggestKernelName = this.suggestKernelNameByMetadata(metadata, KERNEL_NAME_BY_PRIORITY);\n        var message = "".concat(kernelName !== _enums__WEBPACK_IMPORTED_MODULE_0__["KERNEL_NAME"].ORIGIN ? "".concat(kernelName, "\\u5185\\u6838") : \'\', "\\u65E0\\u6CD5\\u64AD\\u653E\\u5F53\\u524D\\u683C\\u5F0F")\n            + "".concat(suggestKernelName && suggestKernelName !== _enums__WEBPACK_IMPORTED_MODULE_0__["KERNEL_NAME"].ORIGIN ? "\\uFF0C\\u8BF7\\u5C1D\\u8BD5\\u4F7F\\u7528".concat(suggestKernelName, "\\u5185\\u6838\\u64AD\\u653E") : \'\');\n        return {\n            code: _enums__WEBPACK_IMPORTED_MODULE_0__["ERROR_CODE"].MISSING_KERNEL,\n            message: message,\n        };\n    };\n    /**\n     * æ ¹æ®è§é¢ä¿¡æ¯éæ©å¯ç¨çåæ ¸\n     * @param metadata è§é¢ä¿¡æ¯\n     * @param kernelPriority å¤é¨æè¦æ±è°æ´å¶å®çåæ ¸é¡ºåº\n     * @returns åæ ¸åç§°\n     */\n    KernelSelector.prototype.selectKernelInPresetMap = function (metadata, kernelPriority) {\n        var kernelNames;\n        // å¦ææå¤é¨å¹²é¢åæ ¸åè¡¨\n        if (kernelPriority) {\n            kernelNames = kernelPriority;\n            // æç¨æ·èªå®ä¹åè¡¨ä¸­æ²¡æåå«çåæ ¸ä¹è¡¥ä¸\n            for (var i = 0; i < KERNEL_NAME_BY_PRIORITY.length; i++) {\n                if (kernelPriority.indexOf(KERNEL_NAME_BY_PRIORITY[i]) === -1) {\n                    kernelNames.push(KERNEL_NAME_BY_PRIORITY[i]);\n                }\n            }\n        }\n        else {\n            kernelNames = KERNEL_NAME_BY_PRIORITY;\n        }\n        // éåå½åææçæ­æ¾åæ ¸ï¼ççåªä¸ªæ¯æå½åçè§é¢ç±»å\n        return this.suggestKernelNameByMetadata(metadata, kernelNames);\n    };\n    /**\n    * éåå½åææçæ­æ¾åæ ¸ï¼ççåªä¸ªåæ ¸æ¯æå½åçè§é¢ç±»å\n    * @param metadata è§é¢ä¿¡æ¯\n    * @param kernelNames åæ ¸åè¡¨\n    */\n    KernelSelector.prototype.suggestKernelNameByMetadata = function (metadata, kernelNames) {\n        var _a;\n        if (!metadata) {\n            return null;\n        }\n        // éåå½åææçæ­æ¾åæ ¸ï¼ççåªä¸ªæ¯æå½åçè§é¢ç±»å\n        for (var i = 0; i < kernelNames.length; i++) {\n            var kernelName = kernelNames[i];\n            if ((_a = VIDEO_TYPE_2_AVAILABEL_MAP[kernelName]) === null || _a === void 0 ? void 0 : _a.call(VIDEO_TYPE_2_AVAILABEL_MAP, metadata)) {\n                return kernelName;\n            }\n        }\n        return null;\n    };\n    /**\n     * æ ¹æ®kernelNameåurlConfigéªè¯è¯¥åæ ¸æ¯å¦æ¯æ\n     * @param kernelName ç®æ åæ ¸åç§°\n     * @param urlConfig è§é¢ä¿¡æ¯\n     * @returns æ¯å¦æ¯æ\n     */\n    KernelSelector.prototype.isKernelSupportByUrlConfig = function (kernelName, urlConfig) {\n        var isKernelAvailable = VIDEO_TYPE_2_AVAILABEL_MAP[kernelName];\n        if (!isKernelAvailable) {\n            return false;\n        }\n        var metadata = Object(_metadata__WEBPACK_IMPORTED_MODULE_3__["createMetadata"])(urlConfig);\n        return isKernelAvailable(metadata);\n    };\n    return KernelSelector;\n}());\n\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/kernel-selector/index.ts?')},"./src/kernel-selector/kernel-available.ts":function srcKernelSelectorKernelAvailableTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../enums */ "./src/enums.ts");\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util */ "./src/util/index.ts");\n\n\n/**\n * ç»åæµè§å¨ç¯å¢è½ååè§é¢Metaä¿¡æ¯å¤æ­åæ ¸ç±»åæ¯å¦å¯ç¨ï¼ä¹æ§å¶å¨æäºç¯å¢æ¯å¦å¯ç¨è¯¥åæ ¸ï¼æªå¼ç¨åæ ¸ä¹æ éå è½½\n */\nvar kernelAvailable = {\n    isHlsjsAvailable: function (metadata) {\n        if (!metadata) {\n            return false;\n        }\n        // éhlsæ ¼å¼æ æ³æ­æ¾ï¼å¦æå å¯åå®¹æ¯Fairplayç®ååªè½ä½¿ç¨åçåæ ¸æä»¥HLSjsä¹æ æ³æ­æ¾\n        if (metadata.videoType !== _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_TYPE"].HLS || metadata.drmType === _enums__WEBPACK_IMPORTED_MODULE_0__["DRM_TYPE"].FAIRPLAY) {\n            return false;\n        }\n        // å¦ææ¯è§é¢265ç¼ç ï¼å¿é¡»æ£æ¥æµè§å¨æ¯å¦æ¯æHEVC\n        if (metadata.vcodec === _enums__WEBPACK_IMPORTED_MODULE_0__["CODEC"].H265 && !_util__WEBPACK_IMPORTED_MODULE_1__["videoTool"].supportHevc()) {\n            return false;\n        }\n        // å¦ææ¯è§é¢AV1ç¼ç ï¼å¿é¡»æ£æ¥æµè§å¨æ¯å¦æ¯æAV1\n        if (metadata.vcodec === _enums__WEBPACK_IMPORTED_MODULE_0__["CODEC"].AV1 && !_util__WEBPACK_IMPORTED_MODULE_1__["videoTool"].supportAV1()) {\n            return false;\n        }\n        // å¦æç¯å¢æ¯å¦æ¯æMSEå°±å¯ä»¥ä½¿ç¨hls\n        return _util__WEBPACK_IMPORTED_MODULE_1__["videoTool"].supportMSE();\n    },\n    /**\n     * å¤æ­å½åè§é¢å¨Flvjsæ¯å¦å¯æ­\n     * @param metadata è§é¢æ­æ¾æ°æ®ä¿¡æ¯\n     * @returns æ¯å¦å¯æ­\n     */\n    isFlvjsAvailable: function (metadata) {\n        // ç§»å¨ç«¯ä¸å¯ç¨flvåæ ¸ï¼å°æ è¯¥åºæ¯ä½¿ç¨éæ±ï¼ä¸æ²¡æéªè¯è¿å¼å®¹æ§\n        if (!metadata || _util__WEBPACK_IMPORTED_MODULE_1__["uaTool"].mobile) {\n            return false;\n        }\n        // éflvæ ¼å¼ãå å¯åå®¹æ­æ¾åæ æ³æ­æ¾\n        if (metadata.videoType !== _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_TYPE"].FLV || metadata.drmType !== _enums__WEBPACK_IMPORTED_MODULE_0__["DRM_TYPE"].NONE) {\n            return false;\n        }\n        // å¦æç¯å¢æ¯å¦æ¯æMSEå°±å¯ä»¥ä½¿ç¨flv\n        return _util__WEBPACK_IMPORTED_MODULE_1__["videoTool"].supportMSE();\n    },\n    /**\n     * å¤æ­å½åè§é¢å¨Demux2fmp4åæ ¸æ¯å¦å¯æ­\n     * @param metadata è§é¢æ­æ¾æ°æ®ä¿¡æ¯\n     * @returns æ¯å¦å¯æ­\n     */\n    isDemux2fmp4Available: function (metadata) {\n        if (!metadata) {\n            return false;\n        }\n        // åªè½æ­æ¾MP4åMOVæ ¼å¼è§é¢\n        if (metadata.videoType !== _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_TYPE"].MP4 && metadata.videoType !== _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_TYPE"].MOV) {\n            return false;\n        }\n        // å¦ææ¯è§é¢265ç¼ç ï¼å¿é¡»æ£æ¥æµè§å¨æ¯å¦æ¯æHEVC\n        if (metadata.vcodec !== undefined && metadata.vcodec !== _enums__WEBPACK_IMPORTED_MODULE_0__["CODEC"].H264) {\n            return false;\n        }\n        // å¦æç¯å¢æ¯å¦æ¯æMSEå°±å¯ä»¥ä½¿ç¨2fmp4åæ ¸\n        return _util__WEBPACK_IMPORTED_MODULE_1__["videoTool"].supportMSE();\n    },\n    /**\n     * å¤æ­å½åè§é¢å¨Webrtcplayeråæ ¸æ¯å¦å¯æ­\n     * @param metadata è§é¢æ­æ¾æ°æ®ä¿¡æ¯\n     * @returns æ¯å¦å¯æ­\n     */\n    isWebrtcplayerAvailable: function (metadata) {\n        if (!metadata) {\n            return false;\n        }\n        // åªè½Webrtcåè®®è½æ­æ¾\n        if (metadata.videoType !== _enums__WEBPACK_IMPORTED_MODULE_0__["VIDEO_TYPE"].WEBRTC) {\n            return false;\n        }\n        return _util__WEBPACK_IMPORTED_MODULE_1__["videoTool"].isWebRTCSupported();\n    },\n    /**\n     * å¤æ­å½åè§é¢å¨Wasmplayeræ¯å¦å¯æ­\n     * @param metadata è§é¢æ­æ¾ä¿¡æ¯\n     * @returns æ¯å¦å¯æ­\n     */\n    isWasmplayerAvailble: function (metadata) {\n        // ç§»å¨ç«¯ä¸è½å¯ç¨WASMï¼å°æªéªè¯å¼å®¹æ§\n        if (!metadata || _util__WEBPACK_IMPORTED_MODULE_1__["uaTool"].mobile) {\n            return false;\n        }\n        // WASMçè®ºä¸è½æ­æ¾æææ ¼å¼ï¼æä»¥æ éå¤æ­videoType\n        return _util__WEBPACK_IMPORTED_MODULE_1__["videoTool"].isWasmSupported();\n    },\n    /**\n     *å¤æ­å½åè§é¢å¨Electronç¯å¢æ¯å¦å¯æ­ï¼ååä¸Electronè½æ­æ¾æææ ¼å¼ï¼æä»¥å¤æ­ç¯å¢å³å¯\n     * @param metadata\n     */\n    isElectronPlayerAailble: function () {\n        return (/electron\\//i).test(navigator.userAgent);\n    },\n};\n/* harmony default export */ __webpack_exports__["default"] = (kernelAvailable);\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/kernel-selector/kernel-available.ts?')},"./src/kernel-selector/kernel-factory.ts":function srcKernelSelectorKernelFactoryTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getKernelCdnPath", function() { return getKernelCdnPath; });\n/* harmony import */ var _define_envs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../define-envs */ "./src/define-envs.ts");\n/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../enums */ "./src/enums.ts");\n/* harmony import */ var _kernel_proxy__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../kernel-proxy */ "./src/kernel-proxy.ts");\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../util */ "./src/util/index.ts");\n/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ */ "./src/kernel-selector/index.ts");\n\n\n\n\n\n/**\n * ç¨äºæ³¨åæ­æ¾åæ ¸çå·¥åæ¹æ³\n */\nvar KernelFactory = /** @class */ (function () {\n    function KernelFactory() {\n    }\n    /**\n     * æ³¨åæ­æ¾åæ ¸\n     * @param kernelName åæ ¸åç§°\n     * @param kernel åæ ¸çå®ç°ï¼ç±»å¯¹è±¡ï¼ï¼å¯ä¼ å¥undefinedç¸å½äºåæ¶æ³¨å\n     */\n    KernelFactory.registerKernel = function (kernelName, kernel) {\n        var _a, _b, _c;\n        if (this.kernelMap[kernelName]) {\n            // æ¿æ¢æ³¨åï¼æ§è¡æ³¨é hook\n            (_b = (_a = this.kernelMap[kernelName]).unregister) === null || _b === void 0 ? void 0 : _b.call(_a);\n        }\n        else if (!this.kernelMap[kernelName] && kernel) {\n            // æ°æ³¨åæ­æ¾åæ ¸æ¶ï¼æ§è¡åæ ¸æ³¨å hook æ¹æ³\n            (_c = kernel.register) === null || _c === void 0 ? void 0 : _c.call(kernel);\n        }\n        // ä¿®æ¹ä¸ºå¯ä»¥éå¤æ³¨åãæ¿æ¢æ³¨å\n        this.kernelMap[kernelName] = kernel;\n    };\n    /**\n   * åå»ºæ­æ¾åæ ¸\n   * @ignore\n   */\n    KernelFactory.createKernel = function (kernelName, conf) {\n        // å¦æå¼ºå¶æå®æµç±»åçè¯\n        if (kernelName) {\n            var KernelClass = KernelFactory.kernelMap[kernelName];\n            // åæ£æ¥æ¯å¦ææ­æ¾åæ ¸\n            if (!KernelClass) {\n                throw new Error("Can\'t find [".concat(kernelName, "] kernel"));\n            }\n            // åæ£æ¥æ­æ¾ç¯å¢æ¯å¦æ¯ææ­æ¾åæ ¸\n            if (KernelClass.isEnvSupport) {\n                var inst = new KernelClass(conf);\n                if (KernelClass.exportApis) {\n                    _util__WEBPACK_IMPORTED_MODULE_3__["commonTool"].assignApiToPrototype(inst, _kernel_proxy__WEBPACK_IMPORTED_MODULE_2__["default"].prototype, KernelClass.exportApis);\n                }\n                return inst;\n            }\n            // æµè§å¨ä¸æ¯æ\n            window.console.log("Browser does not support kernelName[".concat(kernelName, "]"));\n        }\n        return new KernelFactory.kernelMap.origin(conf);\n    };\n    /**\n     * @deprecated åå»ºthumbplayer-coreå®ä¾ï¼è¯·ä½¿ç¨new KernelProxyåå»º\n     */\n    KernelFactory.create = function (conf) {\n        // è¾æ©è®¾è®¡ï¼å ä¸ºç®åæå¤é¨è°ç¨ï¼åä½¿ç¨åºå¼æ¹å¼æç¤º\n        return new _kernel_proxy__WEBPACK_IMPORTED_MODULE_2__["default"](conf);\n    };\n    /**\n     * æ ¹æ®æ­æ¾åæ ¸åç§°è·åæ­æ¾åæ ¸çç±»å¯¹è±¡\n     */\n    KernelFactory.getKernelByName = function (kernelName) {\n        return KernelFactory.kernelMap[kernelName];\n    };\n    /**\n     * æ£æ¥æä¸ªæ­æ¾åæ ¸æ¯å¦æ¯ææå®çUrlConfigæ­æ¾\n     * @param kernelName æ­æ¾åæ ¸åç§°\n     * @param urlConfig æå®çè§é¢æ­æ¾å°å\n     */\n    KernelFactory.isKernelSupportByUrlConfig = function (kernelName, urlConfig) {\n        return ___WEBPACK_IMPORTED_MODULE_4__["KernelSelector"].getSelector().isKernelSupportByUrlConfig(kernelName, urlConfig);\n    };\n    /**\n     * æ ¹æ®æ­æ¾éç½®èªå¨éæ©éæ©æ­æ¾åæ ¸ãä¹å¯ä»¥å¼ºè¡æå®æ­æ¾åæ ¸åç§°ï¼ä½ä»ç¶éè¦éè¿ä¸äºæ ¡éªæä¼å³å®æ¯å¦ä½¿ç¨ã\n     * @param value æ­æ¾éç½®ä¿¡æ¯\n     * @param forceKernelName å¼ºå¶ä½¿ç¨æç§åæ ¸\n     * @param kernelPriority èªå®ä¹åæ ¸éæ©æ¶çä¼åçº§\n     * @returns è¢«éæ©çåæ ¸åç§°\n     */\n    KernelFactory.selectKernel = function (value, forceKernelName, kernelPriority) {\n        var checkValue = (value instanceof Array) ? value[0] : value;\n        return ___WEBPACK_IMPORTED_MODULE_4__["KernelSelector"].getSelector().selectByURLConfig(checkValue, forceKernelName, kernelPriority);\n    };\n    KernelFactory.kernelMap = {};\n    return KernelFactory;\n}());\n/* harmony default export */ __webpack_exports__["default"] = (KernelFactory);\n/**\n * æ ¹æ®åæ ¸åç§°è·ååæ ¸çcdnæä»¶å°å\n */\nfunction getKernelCdnPath(kernelName, autoLoadKernelVerMap) {\n    var _a;\n    if (autoLoadKernelVerMap === void 0) { autoLoadKernelVerMap = {}; }\n    var version = _define_envs__WEBPACK_IMPORTED_MODULE_0__["LOCAL_DEV"] ? \'latest\' : (autoLoadKernelVerMap[kernelName] || _define_envs__WEBPACK_IMPORTED_MODULE_0__["VERSION"]);\n    var kernelCdnPrefix = "core/".concat(version);\n    var kernelName2CdnPathMap = (_a = {},\n        _a[_enums__WEBPACK_IMPORTED_MODULE_1__["KERNEL_NAME"].HLS_JS] = "".concat(kernelCdnPrefix, "/txhlsjs-kernel.js"),\n        _a[_enums__WEBPACK_IMPORTED_MODULE_1__["KERNEL_NAME"].FLV_JS] = "".concat(kernelCdnPrefix, "/flvjs-kernel.js"),\n        _a[_enums__WEBPACK_IMPORTED_MODULE_1__["KERNEL_NAME"].DEMUX_2_FMP4] = "".concat(kernelCdnPrefix, "/demux2fmp4-kernel.js"),\n        _a[_enums__WEBPACK_IMPORTED_MODULE_1__["KERNEL_NAME"].WASM] = "".concat(kernelCdnPrefix, "/wasm-kernel.js"),\n        _a[_enums__WEBPACK_IMPORTED_MODULE_1__["KERNEL_NAME"].WEBRTC] = "".concat(kernelCdnPrefix, "/webrtc-kernel.js"),\n        _a);\n    return kernelName2CdnPathMap[kernelName];\n}\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/kernel-selector/kernel-factory.ts?')},"./src/kernel-selector/metadata.ts":function srcKernelSelectorMetadataTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createMetadata", function() { return createMetadata; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getDrmType", function() { return getDrmType; });\n/* harmony import */ var _base_play_helper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../base/play-helper */ "./src/base/play-helper.ts");\n/* harmony import */ var _drm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../drm */ "./src/drm/index.ts");\n/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../enums */ "./src/enums.ts");\n\n\n\n/**\n * éè¿urlConfigè®¡ç®å¯¹åºMetadata\n * @param urlConfig\n */\nfunction createMetadata(urlConfig) {\n    var metadata = {\n        urlConfig: urlConfig,\n        videoType: Object(_base_play_helper__WEBPACK_IMPORTED_MODULE_0__["getUrlConfigVideoType"])(urlConfig),\n        drmType: getDrmType(urlConfig),\n        vcodec: urlConfig === null || urlConfig === void 0 ? void 0 : urlConfig.vcodec,\n    };\n    return metadata;\n}\n/**\n * éè¿urlConfigæ£æ¥å½åçå å¯ç±»åï¼ä»¥ä¾¿äºéæ©å¯¹åºåæ ¸\n */\nfunction getDrmType(urlConfig) {\n    var _a;\n    // å¦æå¸¦æchachaåæ°ï¼åæ¯èªç å å¯\n    if (urlConfig === null || urlConfig === void 0 ? void 0 : urlConfig.chachaParam) {\n        return _enums__WEBPACK_IMPORTED_MODULE_2__["DRM_TYPE"].CHACHA;\n    }\n    var keySystem = (_a = urlConfig === null || urlConfig === void 0 ? void 0 : urlConfig.drmConfig) === null || _a === void 0 ? void 0 : _a.keySystem;\n    // KeySystemsåå«FairPlay\n    if ([_drm__WEBPACK_IMPORTED_MODULE_1__["KeySystems"].FairPlay, _drm__WEBPACK_IMPORTED_MODULE_1__["KeySystems"].FairPlayWebKit].includes(keySystem)) {\n        return _enums__WEBPACK_IMPORTED_MODULE_2__["DRM_TYPE"].FAIRPLAY;\n    }\n    // KeySystemsåå«Widevine\n    if (_drm__WEBPACK_IMPORTED_MODULE_1__["KeySystems"].Widevine === keySystem) {\n        return _enums__WEBPACK_IMPORTED_MODULE_2__["DRM_TYPE"].WIDEVINE;\n    }\n    return _enums__WEBPACK_IMPORTED_MODULE_2__["DRM_TYPE"].NONE;\n}\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/kernel-selector/metadata.ts?')},"./src/libs/autoplay-policy.ts":function srcLibsAutoplayPolicyTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util */ "./src/util/index.ts");\n/* harmony import */ var _simple_defer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./simple-defer */ "./src/libs/simple-defer.ts");\n\n\nvar AutoPlayPolicy = /** @class */ (function () {\n    function AutoPlayPolicy(videoElement, extra) {\n        this._logger = new _util__WEBPACK_IMPORTED_MODULE_0__["Logger"](extra.instanceId, \'AutoPlayPolicy\');\n        this._videoElement = videoElement;\n    }\n    /**\n     * è§¦åèªå¨æ­æ¾çåçå°±æ¯è°ç¨äºplayä»¥åé©¬ä¸è°ç¨pauseï¼è¿éä¼åæä¸¤ç§æåµï¼\n     * 1. å¦ævideo.readyStateä¸º0ï¼https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLMediaElement/readyStateï¼ï¼è¿éå¯ä»¥\n     * æè·å°å¦ä¸éè¯¯ï¼æè·å°éè¯¯ä»¥åè§¦åå®æã\n     * chrome: The play() request was interrupted by a call to pause()\n     * safari/ios: The operation was aborted\n     *\n     * 2. å¦ævideo.readyStateä¸ä¸º0ï¼å¯è½å·²ç»è®¾ç½®srcæèå·²ç»ææ°æ®ï¼ï¼ç´æ¥è§¦åå®æã\n     */\n    AutoPlayPolicy.prototype.userTrigger = function () {\n        var _this = this;\n        this._triggerDefer = new _simple_defer__WEBPACK_IMPORTED_MODULE_1__["default"]();\n        this._logger.log(\'userTrigger(), start\');\n        var catchTimeoutId;\n        // videoè°ç¨ä¸æ¬¡playåpauseï¼éå¸¸æåµä¼catchä½ä¸ä¸ªvideoæåºæ¥çinterruptå¼å¸¸ï¼å¦æè¢«èªå¨æ­æ¾é»æ­¢ï¼åä¸ºå¦ä¸ä¸ªå¼å¸¸\n        var catchHandler = function (e) {\n            if (catchTimeoutId > 0) {\n                clearTimeout(catchTimeoutId);\n                catchTimeoutId = 0;\n            }\n            _this._logger.log(\'userTrigger(), catch: \', e.name, e.message);\n            if (_util__WEBPACK_IMPORTED_MODULE_0__["videoTool"].isAutoPlayBlockedMessage(e.message)) {\n                _this._triggerDefer.reject(e);\n            }\n            else {\n                _this._logger.log(\'userTrigger() over, catched.\');\n                _this._triggerDefer.resolve();\n            }\n        };\n        var playPromise = this._videoElement.play();\n        this._videoElement.pause();\n        if (this._videoElement.readyState === 0) {\n            if (playPromise) {\n                playPromise.catch(catchHandler);\n            }\n            // æäºæµè§å¨ç¯å¢video.playæ²¡æè¿åpromiseæèplayåé©¬ä¸pauseä¸ä¼æcatchï¼è¿ç§æåµç¨è¶æ¶æ¥å¤æ­\n            catchTimeoutId = window.setTimeout(function () {\n                _this._logger.log(\'userTrigger() over, timeout.\');\n                _this._triggerDefer.resolve();\n            }, 300);\n        }\n        else {\n            this._logger.log(\'userTrigger() over, sync.\');\n            var delayTime = (_util__WEBPACK_IMPORTED_MODULE_0__["uaTool"].browser.safari && !_util__WEBPACK_IMPORTED_MODULE_0__["uaTool"].mobile) ? 400 : 0;\n            // åæ­¥è§¦åçè¯ï¼playé©¬ä¸pauseï¼é£ä¹è¿ä¸¤ä¸ªäºä»¶æ¯éå¸¸æ¥è¿çãå¯è½ä¼å¯¼è´å¤é¨æ¥ä¸åå¤çï¼æä»¥å»¶è¿ä¸ä¸ã\n            // ä½è¿éè°è¯éå°safariéè¦ç¹ä¸¤æ¬¡æ­æ¾æé®çé®é¢ï¼å·ä½å¦ä¸ï¼\n            // 1. setTimeoutçdelayä¸º0æ¶ï¼safariç¹æ­æ¾æé®ï¼ç¶æä¸ºloadStart,canplay,playingï¼æ­¤æ¶ç»é¢ä¸å¨ï¼éè¦åç¹ä¸æ¬¡\n            // 2. setTimeoutçdelayä¸º400msï¼å®éªå¼ï¼æ¶ï¼safariç¹æ­æ¾æé®ï¼ç¶æä¸ºloadStart,canplay,playingï¼å¯æ­£å¸¸èµ·æ­\n            // 3. æä»¬æè¿ä¸ªsetTimeoutæ¹æPromise.resolveï¼åç°safariç¹æ­æ¾æé®ææ¶åå¯ä»¥æåæ­æ¾ï¼ææ¶åæ æ³æåæ­æ¾ï¼\n            // ç¶æåä¸º loadStart,canplay,playing,pause,playing\n            // 4. å»æè¿ä¸ªå»¶è¿ï¼å³ä¸ç¨setTimeoutæPromiseï¼ä¹å¯è½åºç°ç¹ä¸ä¸æ­æ¾æé®å¯æ­æ¾ï¼æèç¹ä¸¤ä¸æå¯æ­çæåµï¼\n            // ç¶æåä¸º loadStart,canplay,playing,pause,playing\n            // æä»¥è¿éçæµsafariæµè§å¨èªå¨æ­æ¾è¢«é»æ­¢åè°ç¨play, pauseï¼autoplay-policyåçé»è¾ï¼ï¼åè°ç¨playï¼å¤é¨è°ç¨æ¢å¤æ­æ¾ï¼å­å¨å¼æ­¥\n            // è°ç¨bugï¼æµè§å¨å¼å®¹æ§ææ æ³è§£å³ï¼ç¨ä¸è¿°2çæ¹æ³å»¶è¿å¤ç\n            window.setTimeout(function () {\n                _this._triggerDefer.resolve();\n            }, delayTime);\n        }\n        return this._triggerDefer.promise;\n    };\n    AutoPlayPolicy.prototype.destroy = function () {\n        this._videoElement = null;\n    };\n    return AutoPlayPolicy;\n}());\n/* harmony default export */ __webpack_exports__["default"] = (AutoPlayPolicy);\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/libs/autoplay-policy.ts?')},"./src/libs/detect-stream.ts":function srcLibsDetectStreamTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "detectStream", function() { return detectStream; });\n/* harmony import */ var _util___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/ */ "./src/util/index.ts");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError("Generator is already executing.");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n/**\n * æ­æ¾çè§é¢æµæµæ¢æµ\n */\nfunction detectStream(url) {\n    return __awaiter(this, void 0, void 0, function () {\n        var detectData, _a, data, target, startTimestamp, downloadSize, downloadCostTime, e_1, catchData, error, target;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    detectData = { httpCode: -1 };\n                    _b.label = 1;\n                case 1:\n                    _b.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, _util___WEBPACK_IMPORTED_MODULE_0__["netTool"].xhr({\n                            url: url,\n                            retryCount: 0,\n                            responseType: \'arraybuffer\',\n                            range: [0, 102400],\n                        })];\n                case 2:\n                    _a = _b.sent(), data = _a.data, target = _a.target, startTimestamp = _a.startTimestamp;\n                    detectData.httpCode = target.status;\n                    downloadSize = data.byteLength / 1024;\n                    downloadCostTime = (+new Date() - startTimestamp) / 1000;\n                    detectData.downloadSpeed = "".concat(Math.floor(downloadSize / downloadCostTime), "kb/s");\n                    try {\n                        detectData.headers = target.getAllResponseHeaders();\n                    }\n                    catch (e) { }\n                    return [3 /*break*/, 4];\n                case 3:\n                    e_1 = _b.sent();\n                    catchData = e_1 || {};\n                    error = catchData.error, target = catchData.target;\n                    detectData.httpCode = target === null || target === void 0 ? void 0 : target.status;\n                    detectData.error = error;\n                    return [3 /*break*/, 4];\n                case 4: return [2 /*return*/, detectData];\n            }\n        });\n    });\n}\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/libs/detect-stream.ts?')},"./src/libs/event-emitter.ts":function srcLibsEventEmitterTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _tencent_ovb_event_emitter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tencent/ovb-event-emitter */ "./node_modules/@tencent/ovb-event-emitter/lib/index.es.js");\n\n/* harmony default export */ __webpack_exports__["default"] = (_tencent_ovb_event_emitter__WEBPACK_IMPORTED_MODULE_0__["default"]);\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/libs/event-emitter.ts?')},"./src/libs/polyfill.ts":function srcLibsPolyfillTs(module,exports){eval("/** Promise Finallyçpolyfillï¼ä¸»è¦éå¯¹chrome<66çç§»å¨ç«¯åæ ¸ */\nif (!Promise.prototype.finally) {\n    Promise.prototype.finally = function finallyConstructor(callback) {\n        var constructor = this.constructor;\n        return this.then(function (value) { return constructor.resolve(callback()).then(function () { return value; }); }, function (reason) { return constructor.resolve(callback()).then(function () { return constructor.reject(reason); }); });\n    };\n}\n;\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/libs/polyfill.ts?")},"./src/libs/simple-defer.ts":function srcLibsSimpleDeferTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TimeoutDefer", function() { return TimeoutDefer; });\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar SimpleDefer = /** @class */ (function () {\n    function SimpleDefer() {\n        var _this = this;\n        this.state = \'pending\';\n        this.promise = new Promise(function (resolve, reject) {\n            _this.resolve = function (arg) {\n                _this.state = \'fulfilled\';\n                resolve(arg);\n            };\n            _this.reject = function (arg) {\n                _this.state = \'rejected\';\n                reject(arg);\n            };\n        });\n    }\n    return SimpleDefer;\n}());\n/* harmony default export */ __webpack_exports__["default"] = (SimpleDefer);\nvar TimeoutDefer = /** @class */ (function (_super) {\n    __extends(TimeoutDefer, _super);\n    function TimeoutDefer(config) {\n        var _this = _super.call(this) || this;\n        if (config.timeoutMS > 0) {\n            setTimeout(function () { return _this.reject(); }, config.timeoutMS);\n        }\n        return _this;\n    }\n    return TimeoutDefer;\n}(SimpleDefer));\n\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/libs/simple-defer.ts?')},"./src/util/comtool.ts":function srcUtilComtoolTs(module,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _tencent_ovb_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tencent/ovb-utils */ \"./node_modules/@tencent/ovb-utils/lib/index.es.js\");\n\nvar comTool = {\n    /** æ£æ¥æ¯å¦æ¯æes6è¯­æ³ */\n    supportES6: function () {\n        try {\n            // eslint-disable-next-line no-eval\n            eval('var foo = (x)=>x+1');\n        }\n        catch (e) {\n            return false;\n        }\n        return true;\n    },\n    isObject: function (list) {\n        if (typeof list === 'object' && list.constructor === Object) {\n            return true;\n        }\n        return false;\n    },\n    createGUID: function (lenParam) {\n        if (lenParam === void 0) { lenParam = 32; }\n        var len = lenParam || 32;\n        var guid = '';\n        for (var i = 1; i <= len; i++) {\n            var n = Math.floor(Math.random() * 16.0).toString(16);\n            guid += n;\n        }\n        return guid;\n    },\n    xss: _tencent_ovb_utils__WEBPACK_IMPORTED_MODULE_0__[\"xssFilter\"],\n    /** è®¡ç®åé¤discontinuityåçæ­æ¾æ¶é´ */\n    removeDiscontinuityTimeRangesFromPlayTime: function (time, discontinuities) {\n        var inAdRange = comTool.findDiscontinuityTimeRangeAtPlaytime(time, discontinuities);\n        if (inAdRange)\n            return inAdRange.start;\n        var res = time;\n        discontinuities.forEach(function (range) {\n            if (range.end < time) {\n                res -= (range.end - range.start);\n            }\n        });\n        return res;\n    },\n    /** æ¾å°å½åæ­æ¾æ¶é´æå¨çdiscontinuityåºé´ */\n    findDiscontinuityTimeRangeAtPlaytime: function (time, discontinuities) {\n        return comTool.mergeTimeRanges(discontinuities).find(function (range) { return time >= range.start && time <= range.end; });\n    },\n    /** åå¹¶å¤ä¸ªè¿ç»­çdiscontinuityåºé´ */\n    mergeTimeRanges: function (ranges) {\n        var curStart = -1;\n        var lastEnd = -1;\n        var mergedRanges = [];\n        ranges.forEach(function (range) {\n            var start = range.start, end = range.end;\n            if (curStart < 0)\n                curStart = start;\n            if (start !== lastEnd && lastEnd >= 0) {\n                mergedRanges.push({ start: curStart, end: lastEnd });\n                curStart = start;\n            }\n            lastEnd = end;\n        });\n        if (curStart >= 0 && lastEnd >= 0)\n            mergedRanges.push({ start: curStart, end: lastEnd });\n        return mergedRanges;\n    },\n    /**\n     * å¯¹æ¯çæ¬å·\n     * @param  {String} nParam\n     * @param  {String} kParam\n     * @return {Number}   1:n>k, 0:n=k, -1:n<k\n     */\n    compareVersion: _tencent_ovb_utils__WEBPACK_IMPORTED_MODULE_0__[\"compareVersions\"],\n    formatPlayTime: function (timeParam) {\n        var time = timeParam;\n        if (typeof time === 'string')\n            time = parseInt(time, 10);\n        if (typeof time !== 'number' || Number.isNaN(time))\n            return '00:00';\n        var formatZero = function (num) {\n            if (num < 10)\n                return \"0\".concat(num);\n            return num;\n        };\n        var h = Math.floor(time / 3600);\n        var m = Math.floor((time - (h * 3600)) / 60);\n        var s = Math.floor(time - (h * 3600) - (m * 60));\n        if (h === 0) {\n            return [formatZero(m), formatZero(s)].join(':');\n        }\n        return [h, formatZero(m), formatZero(s)].join(':');\n    },\n    dateFormat: function (fmtParam, timeParam) {\n        if (timeParam === void 0) { timeParam = Date.now(); }\n        return _tencent_ovb_utils__WEBPACK_IMPORTED_MODULE_0__[\"dateFormat\"](timeParam, fmtParam || 'yyyy-MM-dd hh:mm:ss');\n    },\n    base64ToArrayBuffer: function (base64) {\n        var binaryString = window.atob(base64);\n        var len = binaryString.length;\n        var bytes = new Uint8Array(len);\n        for (var i = 0; i < len; i++) {\n            bytes[i] = binaryString.charCodeAt(i);\n        }\n        return bytes;\n    },\n    /**\n     * ä½¿ç¨requestAnimationFrameå®ç°åè®¡æ¶åè½ï¼æªå®ç°åæ¶åè®¡æ¶ï¼æç¨ï¼\n     * @param callback åè®¡æ¶åçåè°\n     * @param time åè®¡æ¶é¿ï¼åä½æ¯«ç§\n     */\n    setTimeoutByRAF: function (callback, time) {\n        var RAF = window.requestAnimationFrame || window.webkitRequestAnimationFrame;\n        var startTime = +new Date();\n        function loop() {\n            if (+new Date() - startTime > time) {\n                callback();\n            }\n            else {\n                RAF(loop);\n            }\n        }\n        loop();\n    },\n    /**\n     * å°æä¸ªå®ä¾ä¸æå®çæ¹æ³æ©å±å°ç®æ prototypeä¸\n     */\n    assignApiToPrototype: function (fromInst, toPrototype, apis) {\n        var instPrototype = Object.getPrototypeOf(fromInst);\n        var existMembers = Object.getOwnPropertyNames(toPrototype);\n        for (var i = 0, len = apis.length; i < len; i++) {\n            var apiName = apis[i];\n            var hasExisted = existMembers.indexOf(apiName) !== -1;\n            if (hasExisted || typeof instPrototype[apiName] !== 'function') {\n                continue;\n            }\n            toPrototype[apiName] = instPrototype[apiName].bind(fromInst);\n        }\n    },\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (comTool);\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/util/comtool.ts?")},"./src/util/cookietool.ts":function srcUtilCookietoolTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _tencent_ovb_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tencent/ovb-utils */ "./node_modules/@tencent/ovb-utils/lib/index.es.js");\n\n/* harmony default export */ __webpack_exports__["default"] = ({\n    /**\n     * è®¾ç½®ä¸ä¸ªcookie\n     * @param name cookieåç§°\n     * @param value cookieå¼\n     * @param domain æå¨åå é»è®¤ä¸ºwindow.location.hostçå¼\n     * @param path æå¨è·¯å¾ é»è®¤ä¸ºæ¯"\\"\n     * @param hour å­æ´»æ¶é´ï¼åä½:å°æ¶\n     */\n    set: function (name, value, domain, path, hour) {\n        var param = {\n            domain: domain,\n            path: path,\n        };\n        if (hour) {\n            param.expires = new Date().getTime() + (hour * 3600 * 1e3);\n        }\n        _tencent_ovb_utils__WEBPACK_IMPORTED_MODULE_0__["Cookies"].setCookie(name, value, param);\n        return true;\n    },\n    /**\n     * è·åæå®åç§°çcookieå¼\n     * @param name cookieåç§°\n     * @return è·åå°çcookieå¼\n     */\n    get: function (name) {\n        return _tencent_ovb_utils__WEBPACK_IMPORTED_MODULE_0__["Cookies"].getCookie(name) || \'\';\n    },\n    /**\n     * å é¤æå®cookie,å¤åä¸ºè¿æ\n     * @param name cookieåç§°\n     * @param domain æå¨å é»è®¤ä¸º window.location.hostçå¼\n     * @param path æå¨è·¯å¾ é»è®¤ä¸ºæ¯"\\"\n     */\n    del: _tencent_ovb_utils__WEBPACK_IMPORTED_MODULE_0__["Cookies"].clearCookie,\n});\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/util/cookietool.ts?')},"./src/util/dom.ts":function srcUtilDomTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _tencent_ovb_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tencent/ovb-utils */ "./node_modules/@tencent/ovb-utils/lib/index.es.js");\n/* harmony import */ var _libs_simple_defer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../libs/simple-defer */ "./src/libs/simple-defer.ts");\nvar __assign = (undefined && undefined.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n\n\n/* harmony default export */ __webpack_exports__["default"] = ({\n    insertStyle: _tencent_ovb_utils__WEBPACK_IMPORTED_MODULE_0__["insertStyle"],\n    loadScript: function (src, tag, timeoutMS, option) {\n        var defer = new _libs_simple_defer__WEBPACK_IMPORTED_MODULE_1__["TimeoutDefer"]({ timeoutMS: timeoutMS });\n        _tencent_ovb_utils__WEBPACK_IMPORTED_MODULE_0__["loadScript"](__assign(__assign({}, option), { src: src }), tag).then(defer.resolve)\n            .catch(defer.reject);\n        return defer.promise;\n    },\n    attr: _tencent_ovb_utils__WEBPACK_IMPORTED_MODULE_0__["elementAttr"],\n    removeAttr: function (el, attributeName) {\n        if (!el)\n            return;\n        if (attributeName) {\n            if (attributeName === \'src\') {\n                delete el.src;\n            }\n            else {\n                el.removeAttribute(attributeName);\n            }\n        }\n    },\n    css: _tencent_ovb_utils__WEBPACK_IMPORTED_MODULE_0__["elementCss"],\n    append: function (el, childNode) {\n        if (!el)\n            return;\n        el.appendChild(childNode);\n    },\n    prepend: function (el, childNode) {\n        if (el.children[0]) {\n            el.insertBefore(childNode, el.children[0]);\n        }\n        else {\n            el.appendChild(childNode);\n        }\n    },\n    addClass: _tencent_ovb_utils__WEBPACK_IMPORTED_MODULE_0__["addClass"],\n    removeClass: _tencent_ovb_utils__WEBPACK_IMPORTED_MODULE_0__["removeClass"],\n    hasClass: _tencent_ovb_utils__WEBPACK_IMPORTED_MODULE_0__["hasClass"],\n    hide: _tencent_ovb_utils__WEBPACK_IMPORTED_MODULE_0__["hideElement"],\n    show: _tencent_ovb_utils__WEBPACK_IMPORTED_MODULE_0__["showElement"],\n    text: _tencent_ovb_utils__WEBPACK_IMPORTED_MODULE_0__["elementText"],\n    html: _tencent_ovb_utils__WEBPACK_IMPORTED_MODULE_0__["elementHtml"],\n    /**\n     * ä» HTMLå­ç¬¦ä¸²åå»º HTMLElement å¯¹è±¡\n     * @param str HTML å­ç¬¦ä¸²\n     * @deprecated typoï¼è¯·ä½¿ç¨ createDom æ¹æ³\n     */\n    creatDom: function (str) {\n        return this.createDom(str);\n    },\n    /**\n     * ä» HTMLå­ç¬¦ä¸²åå»º HTMLElement å¯¹è±¡\n     * @param domStr HTML å­ç¬¦ä¸²\n     */\n    createDom: function (domStr) {\n        var wrapper = document.createElement(\'div\');\n        wrapper.innerHTML = domStr;\n        return wrapper.firstChild;\n    },\n    getDomSize: function (el) {\n        if (!el) {\n            return { width: 0, height: 0 };\n        }\n        // currentStyleä¸ºieå±æ§\n        var computedStyle = el.currentStyle ? el.currentStyle : window.getComputedStyle(el, null);\n        var width = parseFloat(computedStyle.width);\n        var height = parseFloat(computedStyle.height);\n        return { width: width, height: height };\n    },\n    /**\n     * åå»ºvideoæ ç­¾ï¼æ ¹æ®ä¼ å¥éç½®å¢å videoæ ç­¾å±æ§ç­ã\n     */\n    createVideoDom: function (options) {\n        var _a = options || {}, _b = _a.attrOpts, attrOpts = _b === void 0 ? {} : _b, _c = _a.cssOpts, cssOpts = _c === void 0 ? {} : _c;\n        var videoTag = document.createElement(\'video\');\n        // è®¾ç½®videoæ ç­¾ææçattributeå±æ§\n        Object.keys(attrOpts).forEach(function (opt) {\n            videoTag.setAttribute(opt, attrOpts[opt]);\n        });\n        // è®¾ç½®videoæ ç­¾çstyle\n        _tencent_ovb_utils__WEBPACK_IMPORTED_MODULE_0__["elementCss"](videoTag, cssOpts);\n        return videoTag;\n    },\n    getElementFromConfig: function (value) {\n        return typeof value === \'string\' ? document.querySelector(value) : value;\n    },\n});\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/util/dom.ts?')},"./src/util/index.ts":function srcUtilIndexTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _comtool__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./comtool */ "./src/util/comtool.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "commonTool", function() { return _comtool__WEBPACK_IMPORTED_MODULE_0__["default"]; });\n\n/* harmony import */ var _uatool__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./uatool */ "./src/util/uatool.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "uaTool", function() { return _uatool__WEBPACK_IMPORTED_MODULE_1__["default"]; });\n\n/* harmony import */ var _logtool__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./logtool */ "./src/util/logtool.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "logTool", function() { return _logtool__WEBPACK_IMPORTED_MODULE_2__["default"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "logMethodCallDecoratorCreator", function() { return _logtool__WEBPACK_IMPORTED_MODULE_2__["logMethodCallDecoratorCreator"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "logMethodCallDecoratorCreater", function() { return _logtool__WEBPACK_IMPORTED_MODULE_2__["logMethodCallDecoratorCreator"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Logger", function() { return _logtool__WEBPACK_IMPORTED_MODULE_2__["Logger"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "enableConsoleOutput", function() { return _logtool__WEBPACK_IMPORTED_MODULE_2__["enableConsoleOutput"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LogMode", function() { return _logtool__WEBPACK_IMPORTED_MODULE_2__["LogMode"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "dumpLog", function() { return _logtool__WEBPACK_IMPORTED_MODULE_2__["dumpLog"]; });\n\n/* harmony import */ var _cookietool__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./cookietool */ "./src/util/cookietool.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "cookieTool", function() { return _cookietool__WEBPACK_IMPORTED_MODULE_3__["default"]; });\n\n/* harmony import */ var _lstool__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lstool */ "./src/util/lstool.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "lsTool", function() { return _lstool__WEBPACK_IMPORTED_MODULE_4__["default"]; });\n\n/* harmony import */ var _urltool__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./urltool */ "./src/util/urltool.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "urlTool", function() { return _urltool__WEBPACK_IMPORTED_MODULE_5__["default"]; });\n\n/* harmony import */ var _dom__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./dom */ "./src/util/dom.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "domTool", function() { return _dom__WEBPACK_IMPORTED_MODULE_6__["default"]; });\n\n/* harmony import */ var _net__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./net */ "./src/util/net.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "netTool", function() { return _net__WEBPACK_IMPORTED_MODULE_7__["default"]; });\n\n/* harmony import */ var _videotool__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./videotool */ "./src/util/videotool.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "videoTool", function() { return _videotool__WEBPACK_IMPORTED_MODULE_8__["default"]; });\n\n/* harmony import */ var _stringtool__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./stringtool */ "./src/util/stringtool.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "stringTool", function() { return _stringtool__WEBPACK_IMPORTED_MODULE_9__["default"]; });\n\n/* harmony import */ var _jsontool__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./jsontool */ "./src/util/jsontool.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "jsonTool", function() { return _jsontool__WEBPACK_IMPORTED_MODULE_10__["default"]; });\n\n/* harmony import */ var _task_loop__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./task-loop */ "./src/util/task-loop.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TaskLoop", function() { return _task_loop__WEBPACK_IMPORTED_MODULE_11__["TaskLoop"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LoopMode", function() { return _task_loop__WEBPACK_IMPORTED_MODULE_11__["LoopMode"]; });\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/util/index.ts?')},"./src/util/jsontool.ts":function srcUtilJsontoolTs(module,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    /** å°è£try catch stringify */\n    safelyStringify: function (obj) {\n        try {\n            return JSON.stringify(obj);\n        }\n        catch (e) {\n            return '{}';\n        }\n    },\n});\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/util/jsontool.ts?")},"./src/util/logtool.ts":function srcUtilLogtoolTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "enableConsoleOutput", function() { return enableConsoleOutput; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LogMode", function() { return LogMode; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Logger", function() { return Logger; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "logMethodCallDecoratorCreator", function() { return logMethodCallDecoratorCreator; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dumpLog", function() { return dumpLog; });\n/* harmony import */ var _jsontool__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./jsontool */ "./src/util/jsontool.ts");\n/**\n * @fileoverview æ¥å¿æå°\n */\n/**\n * åèhls.jsçconsole printerï¼å¹¶å¼å®¹hls.js\n * ç»ä¸åå¤ä½¿ç¨çconsoleè¾åºï¼éè¿ç»ä¸å¼å³æ§å¶å¹¶è¾åºç¸åçæ ¼å¼\n */\nvar __assign = (undefined && undefined.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArray = (undefined && undefined.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\n\nvar LogCacheLimit = 4000;\nvar noop = function () { };\nvar dummyConsole = {\n    trace: noop,\n    debug: noop,\n    info: noop,\n    log: noop,\n    warn: noop,\n    error: noop,\n};\nvar PatchedConsole = Object.assign({}, dummyConsole);\nfunction patchConsole(functions) {\n    (functions || Object.keys(dummyConsole)).forEach(function (key) {\n        var _a;\n        PatchedConsole[key] = ((_a = self.console) === null || _a === void 0 ? void 0 : _a[key]) || noop;\n    });\n}\n/** å¯ç¨å¨å±consoleçå¼å³å½æ° */\nfunction enableConsoleOutput(levels) {\n    patchConsole(levels);\n    try {\n        PatchedConsole.log();\n    }\n    catch (e) {\n        PatchedConsole = dummyConsole;\n    }\n}\n/**\n * @deprecated ä¸ºäºå¼å®¹æäºæä»¶ç¨å¼å¥thumbplayer-coreçæ¥å¿å½æ°ä¿çç©ºå½æ°\n */\n/* harmony default export */ __webpack_exports__["default"] = (function (scopeName) {\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n    };\n});\n/**\n * æ¥å¿å­å¨çæ¨¡å¼, bitmapæ è¯ï¼å¯ä»¥å¤ç§æ¨¡å¼ç»å\n */\nvar LogMode;\n(function (LogMode) {\n    /** å¨æ§å¶å°ä¸­è¾åº */\n    LogMode[LogMode["console"] = 1] = "console";\n    /** å­å¥ç¼å­ä¸­ */\n    LogMode[LogMode["cache"] = 2] = "cache";\n})(LogMode || (LogMode = {}));\n/**\n * ç»å®æ­æ¾å¨å®ä¾çæ¥å¿å·¥å·ï¼å°æ¥å¿å­ç¬¦ä¸²cacheèµ·æ¥ä½¿ç¨\n */\nvar Logger = /** @class */ (function () {\n    function Logger(playerId, scopeName, logModeConfig) {\n        this.playerId = playerId;\n        this.scopeName = scopeName;\n        if (!this.playerId) {\n            throw new Error(\'Missing logger id\');\n        }\n        if (!Logger.cache[playerId]) {\n            Logger.cache[playerId] = [];\n        }\n        // é»è®¤ä»ä½¿ç¨log, warn, errorçæ¥å¿\n        this.logModeConfig = __assign({ trace: LogMode.console, debug: LogMode.console, info: LogMode.console, log: LogMode.cache | LogMode.console, warn: LogMode.cache | LogMode.console, error: LogMode.cache | LogMode.console }, logModeConfig);\n    }\n    // æ¥å¿åå¥æ¥å£\n    Logger.prototype.trace = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        this.callApi.apply(this, __spreadArray([\'trace\'], args, false));\n    };\n    ;\n    Logger.prototype.debug = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        this.callApi.apply(this, __spreadArray([\'debug\'], args, false));\n    };\n    ;\n    Logger.prototype.info = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        this.callApi.apply(this, __spreadArray([\'info\'], args, false));\n    };\n    ;\n    Logger.prototype.log = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        this.callApi.apply(this, __spreadArray([\'log\'], args, false));\n    };\n    Logger.prototype.warn = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        this.callApi.apply(this, __spreadArray([\'warn\'], args, false));\n    };\n    Logger.prototype.error = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        this.callApi.apply(this, __spreadArray([\'error\'], args, false));\n    };\n    Logger.prototype.callApi = function (level) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        var _a = this, playerId = _a.playerId, scopeName = _a.scopeName;\n        var logPrefix = "[".concat(playerId.slice(-8), "][").concat(getLogTime(), "]").concat(scopeName ? "[".concat(scopeName, "]") : \'\');\n        // æ¥å¿æä¸æå°åºæ¥é½ç¼å­èµ·æ¥ï¼æä¾ç»å¤é¨åææ¥å¿\n        if (this.logModeConfig[level] & LogMode.cache) {\n            var payload = "[".concat(level, "]").concat(logPrefix, " ").concat(args.join(\',\'));\n            if (payload.length >= LogCacheLimit) {\n                PatchedConsole.warn("Logger cache limit exceeded: ".concat(payload.length));\n                payload = "".concat(payload.slice(0, LogCacheLimit), "...");\n            }\n            Logger.cache[playerId].push(payload);\n        }\n        // æ³¨æï¼enableConsoleçä¼åçº§ä¼æ´é«ï¼å¦æå¨å±å³é­äºæä¸ç§consoleè¾åºï¼é£ä¹è¿éä¹ä¸ä¼è¾åº\n        if (this.logModeConfig[level] & LogMode.console) {\n            PatchedConsole[level].apply(PatchedConsole, __spreadArray([logPrefix], args, false));\n        }\n    };\n    /** @deprecated */\n    Logger.level = 0;\n    /** ç¼å­å·²ç»æå°çæ¥å¿å­ç¬¦ä¸² */\n    Logger.cache = {};\n    return Logger;\n}());\n\n/**\n * åå»ºâå½æ°è°ç¨æ¥å¿è£é¥°å¨â\n * @param scope å½æ°ä½ç¨ååï¼ä¼ å¥æåå½æ°æå¨çç±»å\n * @returns MethodDecorator\n */\nvar logMethodCallDecoratorCreator = function (scope) {\n    if (scope === void 0) { scope = \'\'; }\n    var methodDecorator = function (_target, name, desc) {\n        var rawValue = desc.value;\n        desc.value = function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            // åå²åå ï¼ç±»å¯¹è±¡ä¸çloggerå±æ§åä¸ä¸æ ·\n            var logger = this._logger || this.logger;\n            if (typeof (logger === null || logger === void 0 ? void 0 : logger.log) === \'function\')\n                logger.log("@".concat(scope, ".").concat(name, "()"), _jsontool__WEBPACK_IMPORTED_MODULE_0__["default"].safelyStringify(args));\n            return rawValue.apply(this, args);\n        };\n    };\n    return methodDecorator;\n};\n/** ä¸è½½æ¥å¿txtææ¬ */\nfunction dumpLog(data) {\n    var element = document.createElement(\'a\');\n    var output = data.join(\'\\n\\n\');\n    element.setAttribute(\'href\', "data:text/plain;charset=utf-8,".concat(encodeURIComponent(output)));\n    element.setAttribute(\'download\', "tp-log-".concat(Date.now(), ".txt"));\n    element.style.display = \'none\';\n    document.body.appendChild(element);\n    element.click();\n    document.body.removeChild(element);\n}\n;\nfunction getLogTime() {\n    var time = new Date();\n    var timeStr = "".concat(time.getHours(), ":").concat(time.getMinutes(), ":").concat(time.getSeconds())\n        + ".".concat(("0000".concat(time.getMilliseconds())).slice(-3));\n    return timeStr;\n}\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/util/logtool.ts?')},"./src/util/lstool.ts":function srcUtilLstoolTs(module,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n/**\n * @fileoverview æ¬å°ç¼å­å·¥å·\n */\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    getData: function (name) {\n        var data = '';\n        try {\n            if (window.localStorage) {\n                data = window.localStorage[name];\n            }\n        }\n        catch (e) {\n            window.console.log(e);\n        }\n        return data;\n    },\n    setData: function (name, value) {\n        if (name === 'undefined' || name === undefined) {\n            return;\n        }\n        try {\n            if (window.localStorage) {\n                window.localStorage[name] = value;\n            }\n        }\n        catch (e) {\n            window.console.log(e);\n        }\n    },\n    delData: function (name) {\n        try {\n            if (window.localStorage) {\n                window.localStorage.removeItem(name);\n            }\n        }\n        catch (e) {\n            window.console.log(e);\n        }\n    },\n});\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/util/lstool.ts?")},"./src/util/net.ts":function srcUtilNetTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _tencent_ovb_request__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tencent/ovb-request */ "./node_modules/@tencent/ovb-request/lib/index.es.js");\n\n/* harmony default export */ __webpack_exports__["default"] = ({\n    jsonp: _tencent_ovb_request__WEBPACK_IMPORTED_MODULE_0__["jsonp"],\n    img: function (url) {\n        return new window.Promise((function (resolve, reject) {\n            var img = new Image();\n            img.src = url;\n            resolve();\n        }));\n    },\n    fetch: function (url, opts) {\n        if (opts === void 0) { opts = {}; }\n        return Object(_tencent_ovb_request__WEBPACK_IMPORTED_MODULE_0__["request"])({\n            url: url,\n            method: opts.method,\n            body: opts.body,\n        }).then(function (res) { return res.json(); });\n    },\n    /**\n     * åèµ·xhrè¯·æ±\n     */\n    xhr: function (opts) {\n        var totalRetryCount = opts.retryCount || 0;\n        var startTimestamp = +new Date();\n        var currentRetryCount = 0;\n        var impl = function (resolve, reject) {\n            var retryHandler = function (error) {\n                if (error === void 0) { error = \'xhrNetworkError\'; }\n                if (currentRetryCount < totalRetryCount) { // retry again\n                    currentRetryCount++;\n                    impl(resolve, reject);\n                }\n                else {\n                    reject({ error: error, target: xhr });\n                }\n            };\n            var xhr = new XMLHttpRequest();\n            // è¦å openï¼å¦å IE ä¸ä¼æåºå¼å¸¸\n            // @see https://stackoverflow.com/questions/28524485/xmlhttprequest-throwing-invalidsateerror-saying-object-state-must-be-opened\n            xhr.open(opts.method || \'get\', opts.url);\n            if (opts.timeout) {\n                xhr.timeout = opts.timeout;\n            }\n            if (opts.responseType) {\n                xhr.responseType = opts.responseType;\n            }\n            xhr.withCredentials = !!opts.withCredentials;\n            xhr.ontimeout = opts.ontimeout;\n            if (opts.range) {\n                xhr.setRequestHeader(\'Range\', "bytes=".concat(opts.range[0], "-").concat(opts.range[1]));\n            }\n            if (opts.headers) {\n                Object.keys(opts.headers).forEach(function (key) {\n                    xhr.setRequestHeader(key, opts.headers[key]);\n                });\n            }\n            xhr.onload = function () {\n                if (xhr.status === 200 || xhr.status === 206) {\n                    resolve({ data: xhr.response, target: xhr, startTimestamp: startTimestamp });\n                    return;\n                }\n                retryHandler(\'xhrStatusCodeError\');\n            };\n            xhr.onerror = function (e) {\n                retryHandler();\n            };\n            xhr.onabort = function () {\n                // to do\n            };\n            xhr.ontimeout = function () {\n                retryHandler(\'xhrTimeoutError\');\n            };\n            if (opts.body) { // post\n                xhr.send(opts.body);\n            }\n            else {\n                xhr.send();\n            }\n        };\n        return new Promise((function (resolve, reject) {\n            impl(resolve, reject);\n        }));\n    },\n});\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/util/net.ts?')},"./src/util/stringtool.ts":function srcUtilStringtoolTs(module,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    arrayToString: function (array) {\n        return String.fromCharCode.apply(null, new Uint16Array(array.buffer));\n    },\n    base64ToUint8Array: function (base64String) {\n        var padding = '='.repeat((4 - (base64String.length % 4)) % 4);\n        var base64 = (base64String + padding)\n            .replace(/-/g, '+')\n            .replace(/_/g, '/');\n        var rawData = window.atob(base64);\n        var outputArray = new Uint8Array(rawData.length);\n        for (var i = 0; i < rawData.length; ++i) {\n            outputArray[i] = rawData.charCodeAt(i);\n        }\n        return outputArray;\n    },\n    arrayBufferToBase64: function (buffer) {\n        var binary = '';\n        var bytes = new Uint8Array(buffer);\n        var len = bytes.byteLength;\n        for (var i = 0; i < len; i++) {\n            binary += String.fromCharCode(bytes[i]);\n        }\n        return window.btoa(binary);\n    },\n    stringToArray: function (string) {\n        var length = string.length;\n        // 2 bytes for each char\n        var buffer = new ArrayBuffer(length * 2);\n        var array = new Uint16Array(buffer);\n        for (var i = 0; i < length; i++) {\n            array[i] = string.charCodeAt(i);\n        }\n        return array;\n    },\n});\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/util/stringtool.ts?")},"./src/util/task-loop.ts":function srcUtilTaskLoopTs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LoopMode", function() { return LoopMode; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskLoop", function() { return TaskLoop; });\nvar _a;\nvar LoopMode;\n(function (LoopMode) {\n    LoopMode[LoopMode["Timer"] = 0] = "Timer";\n    LoopMode[LoopMode["RAF"] = 1] = "RAF";\n})(LoopMode || (LoopMode = {}));\nvar LoopRunnerPair = (_a = {},\n    _a[LoopMode.RAF] = [window.requestAnimationFrame.bind(window), window.cancelAnimationFrame.bind(window)],\n    _a[LoopMode.Timer] = [window.setTimeout.bind(window), window.clearTimeout.bind(window)],\n    _a);\nvar TaskLoop = /** @class */ (function () {\n    function TaskLoop(callback, mode) {\n        this.running = false;\n        this.callback = callback;\n        if (mode === LoopMode.RAF && LoopRunnerPair[mode][0]) {\n            this.mode = LoopMode.RAF;\n        }\n        else {\n            this.mode = LoopMode.Timer;\n        }\n        this.runner = LoopRunnerPair[this.mode][0];\n    }\n    TaskLoop.prototype.start = function (interval) {\n        var _this = this;\n        if (interval === void 0) { interval = 0; }\n        if (this.running)\n            return;\n        this.running = true;\n        var loop = function () {\n            var _a;\n            if (!_this.running) {\n                return;\n            }\n            (_a = _this.callback) === null || _a === void 0 ? void 0 : _a.call(_this);\n            _this.loopId = _this.runner(loop, interval);\n        };\n        this.loopId = this.runner(loop, interval);\n    };\n    TaskLoop.prototype.stop = function () {\n        if (!this.running)\n            return;\n        this.running = false;\n        if (this.loopId)\n            LoopRunnerPair[this.mode][1](this.loopId);\n        this.loopId = null;\n    };\n    TaskLoop.prototype.destroy = function () {\n        this.stop();\n        this.callback = null;\n        this.loopId = null;\n    };\n    return TaskLoop;\n}());\n\n;\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/util/task-loop.ts?')},"./src/util/uatool.ts":function srcUtilUatoolTs(module,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"uaMatch\", function() { return uaMatch; });\n/* eslint-disable no-useless-escape */\n// å¤æ­æ¯å¦ä¸ºç§»å¨ç«¯çæ­£å\nvar mobileDevReg = /android|iPod|ipad|iPhone|mobile/i;\n/**\n * copyèª@tencent/useragent\n */\nfunction uaMatch(ua) {\n    var _a, _b, _c;\n    ua = ua || navigator.userAgent;\n    ua = ua.toLowerCase();\n    this.browser = {};\n    this.os = {};\n    this.mobile = false;\n    this.spider = false;\n    if (mobileDevReg.test(ua))\n        this.mobile = true;\n    var spiderRegex = /(googlebot|bingbot|yandex|twitterbot|facebookexternalhit|rogerbot|linkedinbot|embedly|quora link preview|showyoubot|outbrain|pinterest\\/0\\.|pinterestbot|slackbot|vkShare|W3C_Validator|whatsapp|petalbot|applebot|mpcrawler|spider)/i;\n    if (spiderRegex.test(ua))\n        this.spider = true;\n    var osDetect = {\n        android_1: /android[\\s\\/]([\\d\\.]+)/i,\n        android_2: /android/i,\n        android_3: /MIDP-/i,\n        ipod_1: /iPod\\stouch;\\sCPU\\siPhone\\sos\\s([\\d_]+)/i,\n        ipod_100: /iPod.*os\\s?([\\d_\\.]+)/i,\n        iphone: /iPhone;\\sCPU\\siPhone\\sos\\s([\\d_]+)/i,\n        iphone_100: /iPhone.*os\\s?([\\d_\\.]+)/i,\n        ipad_1: /ipad;\\scpu\\sos\\s([\\d_]+)/i,\n        ipad_2: /ipad([\\d]+)?/i,\n        windows: /windows\\snt\\s([\\d\\.]+)/i,\n        mac: /Macintosh.*mac\\sos\\sx\\s([\\d_\\.]+)/i,\n        linux: /Linux/i,\n    };\n    var osMatch;\n    var osName;\n    var osKeys = Object.keys(osDetect);\n    for (var i = 0, len = osKeys.length; i < len; i++) {\n        var osKey = osKeys[i];\n        osMatch = osDetect[osKey].exec(ua);\n        if (!osMatch)\n            continue;\n        osName = osKey.replace(/_\\d+/, '');\n        this.os[osName] = true;\n        this.os.osName = osName;\n        if (osMatch[1])\n            this.os.version = osMatch[1].replace(/_/g, '.');\n        break;\n    }\n    // $.os.ios\n    if (this.os.iphone || this.os.ipad || this.os.ipod) {\n        this.os.ios = true;\n    }\n    var browserDetect = {\n        wechat: /MicroMessenger\\/([\\d\\.]+)/i,\n        ipadqq: /IPadQQ\\/([\\d\\.]+)/i,\n        mqq: /qq\\/([\\d\\.]+)/i,\n        qzone: /QZONEJSSDK\\/([\\d\\.]+)/i,\n        mqqbrowser: /mqqbrowser\\/([\\d\\.]+)/i,\n        qqbrowser: /[^m]QQBrowser\\/([\\d\\.]+)/i,\n        x5: /tbs\\/(\\d+)/i,\n        uc: /UCBrowser\\/([\\d\\.]+)/i,\n        safari_1: /Version\\/(([\\d\\.]+))\\sSafari\\/[\\d\\.]+/i,\n        safari_2: /Safari\\/([\\d\\.]+)/i,\n        chrome_1: /CriOS\\/([\\d\\.]+)/i,\n        chrome_2: /Chrome\\/([\\d\\.]+)/i,\n        firefox: /Firefox\\/([\\d\\.]+)/i,\n        ie_1: /MSIE\\s([\\d\\.]+)/i,\n        ie_2: /(trident\\/\\d\\.\\d)/i,\n        ie_3: /(Edge)\\/\\d+\\.\\d+/i,\n        weibo: /weibo__([\\d\\.]+)/i,\n        qqnews: /qqnews\\/([\\d\\.]+)/i,\n        qqlive_1: /QQLiveBrowser\\/([\\d\\.]+)/i,\n        qqlive_2: /QQLiveHDBrowser\\/([\\d\\.]+)/i,\n        kuaibao: /qnreading\\/([\\d\\.]+)/i,\n        liebao: /LieBaoFast\\/([\\d\\.]+)/i,\n        douban: /com\\.douban\\.frodo\\/([\\d\\.]+)/i,\n        miuibrowser: /MiuiBrowser/i,\n        baidu: /baiduboxapp/i,\n        browser360: /360browser/i,\n        oppobrowser: /OppoBrowser/i,\n        qqdownloader: /qqdownloader\\/([\\d\\.]+)/i,\n    };\n    var browserMatch;\n    var browserName;\n    var bKeys = Object.keys(browserDetect);\n    for (var j = 0, len = bKeys.length; j < len; j++) {\n        var bkey = bKeys[j];\n        browserMatch = browserDetect[bkey].exec(ua);\n        if (!browserMatch)\n            continue;\n        browserName = bkey.replace(/_\\d+/, '');\n        if (this.browser[browserName])\n            return this;\n        this.browser[browserName] = {\n            version: browserMatch[1],\n        };\n        this.browser.browserName = browserName;\n        this.browser.version = browserMatch[1];\n    }\n    // There is no safari in android\n    if (this.os.android && this.browser.safari) {\n        this.browser.safari = null;\n    }\n    // chrome come first\n    if (this.browser.chrome && this.browser.safari) {\n        this.browser.safari = null;\n    }\n    // https://msdn.microsoft.com/library/ms537503.aspx#TriToken\n    if (((_c = (_b = (_a = this.browser) === null || _a === void 0 ? void 0 : _a.ie) === null || _b === void 0 ? void 0 : _b.version) === null || _c === void 0 ? void 0 : _c.indexOf('trident')) > -1) {\n        if (this.browser.ie.version.indexOf('6.0') > -1) {\n            this.browser.ie.version = '10';\n        }\n        else if (this.browser.ie.version.indexOf('5.0') > -1) {\n            this.browser.ie.version = '9';\n        }\n        else if (this.browser.ie.version.indexOf('4.0') > -1) {\n            this.browser.ie.version = '8';\n        }\n        else {\n            this.browser.ie.version = '11';\n        }\n    }\n    return this;\n}\n/**\n * uaè§£æå·¥å·\n */\nvar uaTool = uaMatch.call({}, navigator.userAgent);\n/* harmony default export */ __webpack_exports__[\"default\"] = (uaTool);\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/util/uatool.ts?")},"./src/util/urltool.ts":function srcUtilUrltoolTs(module,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _tencent_ovb_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tencent/ovb-utils */ \"./node_modules/@tencent/ovb-utils/lib/index.es.js\");\n\nvar urlTool = {\n    /**\n     * å°å¯¹è±¡è½¬æ¢æURLå½¢å¼çå­ç¬¦ä¸²ï¼å¯ä»¥æå®combineParamé´éå­ç¬¦ï¼é»è®¤ä¸ºâ&â\n     */\n    object2string: function (obj, combine) {\n        if (combine === void 0) { combine = '&'; }\n        return this.convertUrlParam(obj, combine, false);\n    },\n    /**\n     * å°å¯¹è±¡è½¬æ¢æURLè¯·æ±åæ°ï¼é»è®¤ä½¿ç¨&è¿æ¥ï¼å¹¶ä¸ä¼encodeå¯¹è±¡çkeyåvalue\n     * @param obj è¢«è½¬æ¢å¯¹è±¡\n     * @param combine è¿æ¥ç¬¦ï¼é»è®¤ä¸º&\n     * @param needEncodeURI æ¯å¦ä½¿ç¨encodeURIComponentè½¬æ¢ï¼é»è®¤ä¸ºtrue\n     * @returns è½¬æ¢åçè¯·æ±å­ç¬¦ä¸²\n     */\n    convertUrlParam: function (obj, combine, needEncodeURI) {\n        if (combine === void 0) { combine = '&'; }\n        if (needEncodeURI === void 0) { needEncodeURI = true; }\n        if (!obj) {\n            return '';\n        }\n        var objKeys = Object.keys(obj);\n        if (objKeys.length <= 0) {\n            return '';\n        }\n        var data = [];\n        objKeys.forEach(function (i) {\n            var keyValueStr = '';\n            if (needEncodeURI) {\n                keyValueStr = \"\".concat(encodeURIComponent(i), \"=\").concat(encodeURIComponent(obj[i]));\n            }\n            else {\n                keyValueStr = \"\".concat(i, \"=\").concat(obj[i]);\n            }\n            data.push(keyValueStr);\n        });\n        return data.join(combine);\n    },\n    /**\n     * éè¿window.location.hostè·åå½åé¡µé¢æ ¹ååï¼å¦https://v.qq.com/test.htmlè¿åqq.com\n     */\n    getRootDomain: function () {\n        var host = window.location.hostname || window.location.host;\n        var sarray = window.location.host.split('.');\n        if (sarray.length > 1) {\n            host = sarray.slice(sarray.length - 2).join('.');\n        }\n        return host;\n    },\n    /**\n     * è·åé¡µé¢é¡¶çº§å°åï¼å¦ææiframeåµå¥çæåµï¼\n     */\n    getTopFrameUrl: function () {\n        var topURL = '';\n        if (window.top !== window) {\n            try {\n                topURL = window.top.location.href;\n            }\n            catch (e) {\n                topURL = document.referrer;\n            }\n        }\n        else {\n            topURL = window.location.href;\n        }\n        return topURL;\n    },\n    /**\n     * è¿åä¼ å¥URLçååå°åï¼å¦ä¼ å¥https://v.qq.com/test.htmlè¿åv.qq.com\n     */\n    getDomainOfURL: function (url) {\n        if (typeof url === 'undefined' || url === null || url === '') {\n            return '';\n        }\n        try {\n            return new URL(url).hostname;\n        }\n        catch (_a) {\n            return '';\n        }\n    },\n    /**\n     * æ¥æ¾å¹¶è¿åæå®URLékeyçå¼ï¼å¦æä¸å­å¨è¿åç©ºå­ç¬¦ä¸²\n     */\n    getUrlParamByKey: function (url, key) {\n        return Object(_tencent_ovb_utils__WEBPACK_IMPORTED_MODULE_0__[\"parseUrl\"])(url || location.href).query[key] || '';\n    },\n    /**\n     * è¿åæå®URLéææåæ°\n     */\n    getUrlParams: function (url) {\n        return Object(_tencent_ovb_utils__WEBPACK_IMPORTED_MODULE_0__[\"parseUrl\"])(url || location.href).query;\n    },\n    /**\n     * æå®æ´æ°URLéçåæ°\n     */\n    updateUrlParam: function (url, key, val) {\n        var u = url;\n        var oldValue = this.getUrlParamByKey(u, key);\n        var newStr = \"\".concat(key, \"=\").concat(val);\n        if (!oldValue) {\n            u = u + (u.indexOf('?') !== -1 ? '&' : '?') + newStr;\n        }\n        else {\n            u = u.replace(\"\".concat(key, \"=\").concat(oldValue), newStr);\n        }\n        return u;\n    },\n    /**\n     * è·åå½åURLçæä»¶åï¼å¦https://v.qq.com/test.htmlè¿åtest.html\n     */\n    getFileName: function (url) {\n        if (!url) {\n            return null;\n        }\n        var fileName = url;\n        var idxWH = fileName.indexOf('?');\n        if (idxWH > 0) {\n            fileName = fileName.slice(0, idxWH);\n        }\n        var idxP = fileName.lastIndexOf('/');\n        if (idxP > 0) {\n            fileName = fileName.slice(idxP + 1, fileName.length);\n        }\n        var idxHash = fileName.lastIndexOf('#');\n        if (idxHash > 0) {\n            fileName = fileName.slice(0, idxHash);\n        }\n        return fileName;\n    },\n    /**\n     * è·åç½ç»urlå°åçæä»¶ååç¼\n     */\n    getFileExtension: function (url) {\n        if (!url) {\n            return null;\n        }\n        if (this.isWebRTCLink(url))\n            return 'webrtc';\n        var fileName = urlTool.getFileName(url);\n        if (fileName) {\n            var splitArr = fileName.split('.');\n            if (splitArr && splitArr.length > 1) {\n                return splitArr[splitArr.length - 1];\n            }\n        }\n        return null;\n    },\n    isWebRTCLink: function (url) {\n        return /^webrtc:\\/\\//.test(url);\n    },\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (urlTool);\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/util/urltool.ts?")},"./src/util/videotool.ts":function srcUtilVideotoolTs(module,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _drm__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../drm */ \"./src/drm/index.ts\");\n/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../enums */ \"./src/enums.ts\");\n/* harmony import */ var _comtool__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./comtool */ \"./src/util/comtool.ts\");\n/* harmony import */ var _dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./dom */ \"./src/util/dom.ts\");\n/* harmony import */ var _uatool__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./uatool */ \"./src/util/uatool.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\n\nvar testVideoElement = document.createElement('video');\nvar videoTool = {\n    getBuffered: function (video) {\n        var buffered = [];\n        var len = video.buffered.length;\n        for (var i = 0; i < len; i++) {\n            buffered.push({\n                start: video.buffered.start(i),\n                end: video.buffered.end(i),\n            });\n        }\n        return buffered;\n    },\n    /**\n     * æ£æ¥æ¶é´æ¯å¦å¨videoå·²ç»ç¼å²çbufferèå´å\n     * @param {number} time ç¸å¯¹äºæ´ä¸ªvideoæ ç­¾çæ¶é´\n     */\n    checkTimeInBuffer: function (time, buffered) {\n        var ret = false;\n        var len = buffered.length;\n        for (var i = 0; i < len; i++) {\n            var sr = buffered[i].start;\n            var er = buffered[i].end;\n            if (time >= sr && time <= er) {\n                ret = true;\n                break;\n            }\n        }\n        return ret;\n    },\n    clear: function (video) {\n        if (!video) {\n            return;\n        }\n        if (video instanceof HTMLVideoElement) {\n            // å¦ææ¯çvideoæ ç­¾ï¼ç§»é¤srcå±æ§ã\n            // æ³¨æï¼videoæ ç­¾ä¸è½è®¾ç½®src=nullåè°ç¨loadï¼å¦åä¼äº§çä¸ä¸ªç±»ä¼¼http://xxx/nullçè¯·æ±ã\n            video.removeAttribute('src');\n            // å¦æå webrtc è¿æ ·æ¯éè¿è®¾ç½® srcObject æ¥æ­æ¾çæºï¼åä¸å¹¶æ¸é¤æ\n            video.srcObject = null;\n        }\n        else {\n            // æäºåæ ¸çvideoç»ä»¶éHTMLVideoElement\n            video.srcConfig = null;\n            video.src = null;\n        }\n        video.load();\n    },\n    destroyElement: function (video) {\n        var _a;\n        if (!video) {\n            return;\n        }\n        // ææ©å±destroyæ¥å£çIVideoElementå¯¹è±¡ï¼è°ç¨ä¸ä¸destroyæ¹æ³\n        (_a = video.destroy) === null || _a === void 0 ? void 0 : _a.call(video);\n        videoTool.clear(video);\n        videoTool.removeElement(video, null);\n    },\n    /**\n     * ä½¿ç¨ Canvas è¿è¡è§é¢æªå¾ï¼å¹¶è¿åæªå¾ä¿¡æ¯\n     */\n    captureVideo: function (video, config) {\n        var dx = config.dx, dy = config.dy, dw = config.dw, dh = config.dh;\n        var videoWidth = video.videoWidth, videoHeight = video.videoHeight;\n        var canvas = document.createElement('canvas');\n        canvas.width = videoWidth;\n        canvas.height = videoHeight;\n        var ctx = canvas.getContext('2d');\n        ctx.drawImage(video, 0, 0, videoWidth, videoHeight);\n        return {\n            captureHeight: dh,\n            captureWidth: dw,\n            captureX: dx,\n            captureY: dy,\n            playtime: video.currentTime,\n            data: ctx.getImageData(dx, dy, dw, dh),\n        };\n    },\n    resizeElement: function (video, value) {\n        var _a;\n        if (!value || !video) {\n            return;\n        }\n        if (video instanceof HTMLElement) {\n            _dom__WEBPACK_IMPORTED_MODULE_3__[\"default\"].css(video, value);\n        }\n        else {\n            var width = value.width, height = value.height;\n            if (typeof width === 'number' && typeof height === 'number') {\n                // å¯è½æ¯æ¨¡ævideoæ ç­¾çç»ä»¶ï¼ä¾å¦electronåæ ¸ä½¿ç¨çvideoæ ç­¾\n                (_a = video.resize) === null || _a === void 0 ? void 0 : _a.call(video, width, height);\n            }\n        }\n    },\n    appendElement: function (video, container) {\n        var _a;\n        if (video instanceof HTMLElement) {\n            _dom__WEBPACK_IMPORTED_MODULE_3__[\"default\"].append(container, video);\n        }\n        else {\n            // å¯è½æ¯æ¨¡ævideoæ ç­¾çç»ä»¶ï¼ä¾å¦electronåæ ¸ä½¿ç¨çvideoæ ç­¾\n            (_a = video.appendToParent) === null || _a === void 0 ? void 0 : _a.call(video, container);\n        }\n    },\n    removeElement: function (video, container) {\n        var _a;\n        if (video instanceof HTMLElement) {\n            if (video === null || video === void 0 ? void 0 : video.parentNode) {\n                video.remove();\n            }\n        }\n        else {\n            // å¯è½æ¯æ¨¡ævideoæ ç­¾çç»ä»¶ï¼ä¾å¦electronåæ ¸ä½¿ç¨çvideoæ ç­¾\n            (_a = video.removeFromParent) === null || _a === void 0 ? void 0 : _a.call(video, container);\n        }\n    },\n    /**\n     * è®¾ç½®videoç»ä»¶çobject-fitå±æ§ç±»å\n     * @param el videoåç´ \n     * @param type å¡«åç±»å\n     */\n    setElementFitType: function (el, type) {\n        if (el && el instanceof HTMLElement) {\n            _dom__WEBPACK_IMPORTED_MODULE_3__[\"default\"].css(el, { 'object-fit': type });\n        }\n    },\n    /**\n     * ç¼å²æ°æ®çæå¤§æ¶é¿\n     */\n    getDefaultMaxBufferTime: function () {\n        var connection = navigator.connection;\n        if (connection && connection.type === 'wifi') {\n            return 180;\n        }\n        if (connection && connection.type === '4g') {\n            return 120;\n        }\n        return 180;\n    },\n    /**\n     * æ¯å¦æ¯èªå¨æ­æ¾è¢«é»æ­¢çæ è¯\n     * @param errorMsg videoæ ç­¾playæ¶catchå°çå¼å¸¸ä¿¡æ¯\n     */\n    isAutoPlayBlockedMessage: function (errorMsg) {\n        // èªå¨æ­æ¾è¢«é»æ­¢çä¿¡æ¯nameåmessage\n        // chrome: NotAllowedError, play() failed because the user didn't interact with the document first.\n        // safari/ios: NotAllowedError, The request is not allowed by the user agent or the platform in the current\n        //             context, possibly because the user denied permission.\n        // x5: NotAllowedError, play() can only be initiated by a user gesture.\n        return errorMsg && /interact|not allowed|user gesture/.test(errorMsg);\n    },\n    /**\n     * æ¯å¦æ¯æä¸¤ä¸ªæä»¥ä¸videoæ ç­¾åæ¶æ­æ¾è§é¢ã\n     */\n    supportSameTimePlay: function () {\n        // x5çææ°64ä½çæ¬ä¸æ¯æå¤videoåæ¶æ­æ¾\n        if (_uatool__WEBPACK_IMPORTED_MODULE_4__[\"default\"].browser.x5 && ['45031', '45032'].indexOf(\"\".concat(_uatool__WEBPACK_IMPORTED_MODULE_4__[\"default\"].browser.x5.version)) !== -1) {\n            return false;\n        }\n        // ç§»å¨ç«¯qqæµè§å¨\n        if (_uatool__WEBPACK_IMPORTED_MODULE_4__[\"default\"].browser.mqqbrowser && !(_uatool__WEBPACK_IMPORTED_MODULE_4__[\"default\"].browser.qqlive || _uatool__WEBPACK_IMPORTED_MODULE_4__[\"default\"].browser.wechat || _uatool__WEBPACK_IMPORTED_MODULE_4__[\"default\"].browser.mqq)) {\n            return false;\n        }\n        // ios9: æ æ³ç¨jsä»£ç å°è§é¢éé³ï¼volume =0 æèmutedï¼ï¼å³ä½¿ç¨ç©çé®å°ææºéé³ï¼ä¹æ æ³ä¸¤ä¸ªè§é¢åæ¶æ­æ¾\n        // åæ¬ios11ä»¥ä¸\n        if (_uatool__WEBPACK_IMPORTED_MODULE_4__[\"default\"].os.ios && _uatool__WEBPACK_IMPORTED_MODULE_4__[\"default\"].os.version && _comtool__WEBPACK_IMPORTED_MODULE_2__[\"default\"].compareVersion(_uatool__WEBPACK_IMPORTED_MODULE_4__[\"default\"].os.version, '11.0') < 0) {\n            return false;\n        }\n        return true;\n    },\n    /**\n     * ç®ååç°ä½çæ¬x5ä½¿ç¨çwebview(chrome57)æ æ³æ£æµå°èªå¨æ­æ¾ï¼å³video.play()æ æ³catchå°è¢«æ¦æªçéè¯¯ï¼\n     * AudioContextä¹æ æ³æ£æµã\n     */\n    cannotDetectAutoPlayBlock: function () {\n        return _uatool__WEBPACK_IMPORTED_MODULE_4__[\"default\"].browser.chrome && _comtool__WEBPACK_IMPORTED_MODULE_2__[\"default\"].compareVersion(_uatool__WEBPACK_IMPORTED_MODULE_4__[\"default\"].browser.chrome.version, '66.0') < 0;\n    },\n    /**\n     * æ¯æ#tæ åçæµè§å¨ï¼æ¯ææå®èµ·æ­ç¹ï¼\n     */\n    supportMediaFragmentsURISpec: function (enableMediaFragmentsURI) {\n        if (typeof enableMediaFragmentsURI !== 'undefined') {\n            return !!enableMediaFragmentsURI;\n        }\n        if (window.navigator.userAgent.indexOf('jsdom') !== -1) {\n            // jsdomç¯å¢ä¸ä¸æ¯æ\n            return false;\n        }\n        // ç®åå¯ä»¥ç¡®å®æ¯æ#tçï¼åºæ¬ä¸æ¡é¢æææµè§å¨ãç§»å¨ç«¯ios\n        return !_uatool__WEBPACK_IMPORTED_MODULE_4__[\"default\"].mobile || !!_uatool__WEBPACK_IMPORTED_MODULE_4__[\"default\"].os.ios;\n    },\n    getVideoPlaybackQuality: function (video) {\n        var totalVideoFrames = 0;\n        var droppedVideoFrames = 0;\n        if (video === null || video === void 0 ? void 0 : video.getVideoPlaybackQuality) {\n            var info = video.getVideoPlaybackQuality();\n            droppedVideoFrames = info.droppedVideoFrames || 0;\n            totalVideoFrames = info.totalVideoFrames || 0;\n        }\n        else if (video && video.webkitDecodedFrameCount) {\n            totalVideoFrames = video.webkitDecodedFrameCount;\n            droppedVideoFrames = video.webkitDroppedFrameCount;\n        }\n        return { totalVideoFrames: totalVideoFrames, droppedVideoFrames: droppedVideoFrames };\n    },\n    /**\n     * MSEè½åæ£æ¥\n     */\n    supportMSE: function () {\n        var mediaSource = videoTool.getMediaSource();\n        if (!mediaSource) {\n            return false;\n        }\n        var sourceBuffer = window.SourceBuffer || window.WebKitSourceBuffer;\n        var isTypeSupported = mediaSource\n            && typeof mediaSource.isTypeSupported === 'function'\n            && mediaSource.isTypeSupported('video/mp4; codecs=\"avc1.42E01E,mp4a.40.2\"');\n        // if SourceBuffer is exposed ensure its API is valid\n        // safari and old version of Chrome doe not expose SourceBuffer globally so checking SourceBuffer.prototype is\n        // impossible\n        var sourceBufferValidAPI = !sourceBuffer\n            || (sourceBuffer.prototype\n                && typeof sourceBuffer.prototype.appendBuffer === 'function'\n                && typeof sourceBuffer.prototype.remove === 'function');\n        return !!isTypeSupported && !!sourceBufferValidAPI;\n    },\n    /**\n     * âç²ç¥çâæ£æ¥å½åç¯å¢å¯¹ä¸»æµè§é¢æ ¼å¼çæ¯ææåµ\n     * <br>ãæ³¨ãè¿åç»æåªæ¯å¯è½æ¯æï¼å¨è§é¢å¼å§æ­æ¾ä»¥åä»ç¶æå¯è½æåºä¸æ¯æåªä½æ ¼å¼çå¼å¸¸ã\n     */\n    supportVideoFormat: function () {\n        //  mineç±»ååèï¼\n        // https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types\n        // https://www.iana.org/assignments/media-types/media-types.xhtml\n        var mimetypesKind = {\n            mp4: 'video/mp4',\n            mov: 'video/mp4',\n            hls: 'application/x-mpegURL',\n            avi: 'video/x-msvideo',\n            mpeg: 'video/mpeg',\n            webm: 'video/webm',\n            ogg: 'video/ogg',\n        };\n        var sptFormats = [];\n        Object.keys(mimetypesKind).forEach(function (key) {\n            var mimetype = mimetypesKind[key];\n            var canPlayResult = testVideoElement.canPlayType(mimetype);\n            // 'probably': è¿ç§åªä½æä»¶ä¼¼ä¹æ¯å¯æ­æ¾çã\n            // 'maybe': ä¸è½åè¯ä½ è¿ç§åªä½æä»¶æ¯å¦è½è¢«æ­æ¾ï¼ç´å°ä½ å°è¯æ­æ¾å®ã\n            if (['maybe', 'probably'].indexOf(canPlayResult) !== -1) {\n                sptFormats.push(key);\n            }\n        });\n        return sptFormats;\n    },\n    /**\n     * å¤æ­å½åç¯å¢æ¯å¦æ¯æav1ç¼ç çè§é¢æ­æ¾\n     */\n    supportAV1: function () {\n        return videoTool.isMediaSourceTypeSupported('video/mp4;codecs=av01.0.12M.08');\n    },\n    /**\n     * å¤æ­å½åç¯å¢æ¯å¦æ¯æhevcç¼ç çè§é¢æ­æ¾\n     */\n    supportHevc: function () {\n        return videoTool.isMediaSourceTypeSupported('video/mp4;codecs=\"hev1.1.6.L120.90\"');\n    },\n    /** å¤æ­å½åç¯å¢æ¯å¦æ¯æhevc profile main 10 */\n    supportHEVCMain10: function () {\n        return videoTool.isMediaSourceTypeSupported('video/mp4;codecs=\"hev1.2.4.L120.90\"');\n    },\n    /** éè¿video canPlayTypeæ¥å£æ£æµæ¯å¦åçæ¯ææå®mimeæ ¼å¼ */\n    isVideoCanPlayType: function (mimeType) {\n        return testVideoElement.canPlayType(mimeType);\n    },\n    /** éè¿mse isTypeSupportedæ¥å£æ£æµæ¯å¦æ¯ææå®mimeæ ¼å¼ */\n    isMediaSourceTypeSupported: function (mimeType) {\n        var _a;\n        try {\n            return (_a = videoTool.getMediaSource()) === null || _a === void 0 ? void 0 : _a.isTypeSupported(mimeType);\n        }\n        catch (e) {\n            return false;\n        }\n    },\n    /**\n     * éè¿MediaCapabilitiesæ¥å£æ£æµæå®mimeæ ¼å¼æ¯å¦æ¯æ\n     */\n    isMediaCapabilitiesTypeSupported: function (config) {\n        return __awaiter(this, void 0, void 0, function () {\n            var type, mimeType, _a, resolution, _b, bitrate, _c, framerate, mediaConfig, _d, height, width, _e;\n            return __generator(this, function (_f) {\n                switch (_f.label) {\n                    case 0:\n                        type = config.type, mimeType = config.mimeType, _a = config.resolution, resolution = _a === void 0 ? '860x480' : _a, _b = config.bitrate, bitrate = _b === void 0 ? 800 : _b, _c = config.framerate, framerate = _c === void 0 ? 30 : _c;\n                        _f.label = 1;\n                    case 1:\n                        _f.trys.push([1, 3, , 4]);\n                        mediaConfig = {\n                            type: 'media-source',\n                        };\n                        switch (type) {\n                            case 'audio':\n                                mediaConfig.audio = {\n                                    contentType: mimeType,\n                                };\n                                break;\n                            case 'audio-spatial':\n                                mediaConfig.audio = {\n                                    contentType: mimeType,\n                                    spatialRendering: true,\n                                };\n                                break;\n                            case 'video': {\n                                _d = resolution.toLowerCase().split('x'), height = _d[0], width = _d[1];\n                                mediaConfig.video = {\n                                    contentType: mimeType,\n                                    bitrate: bitrate,\n                                    framerate: framerate,\n                                    height: +height,\n                                    width: +width,\n                                };\n                            }\n                            default:\n                                break;\n                        }\n                        return [4 /*yield*/, navigator.mediaCapabilities.decodingInfo(mediaConfig)];\n                    case 2: return [2 /*return*/, (_f.sent()).supported];\n                    case 3:\n                        _e = _f.sent();\n                        return [2 /*return*/, false];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    },\n    /**\n     * æ£æµå½åæ¾ç¤ºå¨æ¯å¦æ¯æHDR\n     * @returns 0 ä¸æ¯æï¼1 ä¸æ¯æï¼ä½ä¸ºå¹¿è²åå±å¹ï¼å¯ä»¥éè¿ç³»ç»çº§çtone mapæ­æ¾SDRåå®¹ï¼2 æ¯æ\n     */\n    isHDRSupported: function () {\n        try {\n            if (window.matchMedia('(dynamic-range: high)').matches)\n                return _enums__WEBPACK_IMPORTED_MODULE_1__[\"HDR_CAPABILITY\"].SUPPORTED;\n            if (window.matchMedia('(color-gamut: p3)').matches)\n                return _enums__WEBPACK_IMPORTED_MODULE_1__[\"HDR_CAPABILITY\"].WCG_DISPLAY_BUT_NO_HDR;\n            return _enums__WEBPACK_IMPORTED_MODULE_1__[\"HDR_CAPABILITY\"].NOT_SUPPORTED;\n        }\n        catch (_a) {\n            return _enums__WEBPACK_IMPORTED_MODULE_1__[\"HDR_CAPABILITY\"].NOT_SUPPORTED;\n        }\n    },\n    /**\n     * æ£æµå½åç¯å¢æ¯å¦æ¯æHEVC-based Dolby Visionæ ¼å¼\n     */\n    isDolbyVisionSupported: function () {\n        return videoTool.isMediaSourceTypeSupported('video/mp4; codecs=\"dvhe\"');\n    },\n    /**\n     * æ£æµå½åç¯å¢æ¯å¦æ¯æDolby Atmosæ ¼å¼\n     */\n    isDolbyAtomsSupported: function (spatial) {\n        if (spatial === void 0) { spatial = false; }\n        return videoTool.isMediaSourceTypeSupported('audio/mp4; codecs=\"ec-3\"');\n    },\n    getMediaSource: function () {\n        if (typeof window !== 'undefined') {\n            return window.MediaSource || window.WebKitMediaSource;\n        }\n    },\n    /** å¤æ­å½åç¯å¢æ¯å¦æ¯æç¹å®çEMEéç½® */\n    isEncryptionSupported: function (keySystem, configuration) {\n        return __awaiter(this, void 0, void 0, function () {\n            var configurationToUse, hasEMESupport, hasCDMSupport, mediaKeySystemAccess, e_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        configurationToUse = configuration || Object(_drm__WEBPACK_IMPORTED_MODULE_0__[\"getSupportedKeySystemConfig\"])(keySystem);\n                        hasEMESupport = [window.MediaKeys, window.WebKitMediaKeys].some(function (i) { return i; });\n                        if (!hasEMESupport)\n                            return [2 /*return*/, false];\n                        hasCDMSupport = typeof window.navigator.requestMediaKeySystemAccess !== 'undefined';\n                        if (!hasCDMSupport)\n                            return [2 /*return*/, false];\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, window.navigator.requestMediaKeySystemAccess(keySystem, [configurationToUse])];\n                    case 2:\n                        mediaKeySystemAccess = _a.sent();\n                        return [2 /*return*/, !!mediaKeySystemAccess];\n                    case 3:\n                        e_1 = _a.sent();\n                        return [2 /*return*/, false];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    },\n    /**\n     * @deprecated ç»´æå¼å®¹æ§ï¼æ¨èä½¿ç¨isEncryptionSupported\n     * å¤æ­å½åç¯å¢æ¯å¦æ¯æwidevine\n     */\n    supportWidevine: function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, videoTool.isEncryptionSupported(_drm__WEBPACK_IMPORTED_MODULE_0__[\"KeySystems\"].Widevine)];\n            });\n        });\n    },\n    /** å¤æ­å½åç¯å¢æ¯å¦æ¯æfairplay */\n    supportFairplay: function () {\n        var keySystem = _drm__WEBPACK_IMPORTED_MODULE_0__[\"KeySystems\"].FairPlayWebKit;\n        if (!window.WebKitMediaKeys)\n            return false;\n        var isTypeSupported = window.WebKitMediaKeys.isTypeSupported(keySystem, 'video/mp4');\n        return isTypeSupported;\n    },\n    supportWebGL: function () {\n        var canvasElement = document.createElement('canvas');\n        var webglContext;\n        try {\n            webglContext = canvasElement.getContext('webgl');\n        }\n        catch (e) {\n            return false;\n        }\n        return !!webglContext;\n    },\n    /**\n     * å¤æ­å½åç¯å¢æ¯å¦æ¯æWebRTC\n     */\n    isWebRTCSupported: function () {\n        var isIOS = Boolean(_uatool__WEBPACK_IMPORTED_MODULE_4__[\"default\"].os.ios);\n        var isUC = Boolean(_uatool__WEBPACK_IMPORTED_MODULE_4__[\"default\"].browser.uc);\n        var isSafari = Boolean(_uatool__WEBPACK_IMPORTED_MODULE_4__[\"default\"].browser.safari);\n        // androidçucæµè§å¨ç´æ¥å°±ä¸æ¯æwebrtcï¼iosçucæµè§å¨ä¼å«ævideoæ ç­¾ï¼å¯¼è´æ æ³æ­æ¾è§é¢æµ\n        if (isUC) {\n            return false;\n        }\n        // isIOSçsafari 11.1.2ä»¥ä¸ææ¯æWebRTC\n        if (isIOS && isSafari && _comtool__WEBPACK_IMPORTED_MODULE_2__[\"default\"].compareVersion(_uatool__WEBPACK_IMPORTED_MODULE_4__[\"default\"].os.version, '11.1.2') < 0) {\n            return false;\n        }\n        // æ£æ¥ window ä¸æ¯å¦æ¯æå¯¹åº API\n        return 'RTCPeerConnection' in window || 'webkitRTCPeerConnection' in window;\n    },\n    /**\n     * å¤æ­å½åç¯å¢æ¯å¦æ¯æWASMæ­æ¾\n     */\n    isWasmSupported: function () {\n        return !!window.WebAssembly\n            && !!window.customElements\n            && _comtool__WEBPACK_IMPORTED_MODULE_2__[\"default\"].supportES6() // wasmåæ ¸è¿éè¦æ¯æwebcomponentãå æ­¤ä¹æ¯es6è¯­æ³\n            && videoTool.supportWebGL();\n    },\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (videoTool);\n\n\n//# sourceURL=webpack://ThumbPlayerCore/./src/util/videotool.ts?")}})})},{}],3:[function(e,k,c){Object.defineProperty(c,"__esModule",{value:!0});var u=e("tslib"),d=e("@tencent/thumbplayer-core"),B=e("js-sha256"),V={};function K(e,t){V[e]=t}function _(e){return V[e]}var U="__thumbplayer-ad";function F(e){return-1!==[c.AD_TYPE.PRE,c.AD_TYPE.POST].indexOf(e.adType)}c.AD_TYPE=void 0,(e=c.AD_TYPE||(c.AD_TYPE={})).PRE="preAd",e.ZT="ZT",e.POST="postAd";var Y={container:void 0,enableQAreporter:!0},Q=(c.ErrorCode=void 0,(e=c.ErrorCode||(c.ErrorCode={})).SUC="0",e.UNKNOWN="70040000",e.AD_END_DEFAULT_FAIL="70040002",e.AD_REQ_INFO_DEFAULT_FAIL="70040003",e.GETINFO_PLUGIN_MISSING="70040001",e.GETINFO_NET="70014001",e.GETINFO_TIMEOUT="70014003",e.GETINFO_PARSE="70014004",e.GETINFO_INNER="70014005",e.GETINFO_SERVER_CODE_PREFIX="70013",e.GETINFO_LIVE_SERVER_CODE_PREFIX="70023",e.GETINFO_UNIFIED_LIVE_SERVER_CODE_PREFIX="70033",e.UNPAIED_1080P="70013091.0",c.ErrorMsg=void 0,(e=c.ErrorMsg||(c.ErrorMsg={})).GETINFO_PLUGIN_MISSING="æ²¡ææ¾å°è·åè§é¢ä¿¡æ¯æä»¶",e.GETINFO_INNER="è·åè§é¢ä¿¡æ¯åé¨éè¯¯",e.GETINFO_NET="æ æ³è·åè§é¢ä¿¡æ¯",e.GETINFO_TIMEOUT="è·åè§é¢ä¿¡æ¯è¶æ¶",e.GETINFO_PARSE="è§é¢ä¿¡æ¯æ æ³è§£æ",e.GETINFO_CODE="æ­æ¾åå°è¿åéè¯¯",c.H5_EXT_EVENT=void 0,(e=c.H5_EXT_EVENT||(c.H5_EXT_EVENT={})).SET_LOADING="SET_LOADING",e.PROXY_HTTP_START="PROXY_HTTP_START",e.PROXY_HTTP_END="PROXY_HTTP_END",e.GETINFO_START="GETINFO_START",e.GETINFO_OVER="GETINFO_OVER",e.PRELOAD_GETINFO_OVER="PRELOAD_GETINFO_OVER",e.VID_CHANGE="VID_CHANGE",e.DESTROY="DESTROY",e.DATASET_UPDATE="data-set:update",e.DATASET_STATE_UPDATE="data-set:stateUpdate",e.RETRY_PLAY="retryPlay",e.DEGRADE_CODEC_PLAY="degradeCodecPlay",e.FLOW_NODE_PRELOAD="FLOW_NODE_PRELOAD",e.FLOW_NODE_START="FLOW_NODE_START",e.FLOW_NODE_END="FLOW_NODE_END",e.FLOW_NODE_ABORT="FLOW_NODE_ABORT",c.H5_PLAY_EVENT=void 0,(e=c.H5_PLAY_EVENT||(c.H5_PLAY_EVENT={})).PLAY_SESSION_START="PLAY_SESSION_START",e.AD_REQ_INFO_START="AD_REQ_INFO_START",e.AD_REQ_INFO_END="AD_REQ_INFO_END",e.AD_REQ_ASSETS_START="AD_REQ_ASSETS_START",e.AD_AUTOPLAY_BLOCKED="AD_AUTOPLAY_BLOCKED",e.AD_PLAYING="AD_PLAYING",e.AD_VOLUME_CHANGE="AD_VOLUME_CHANGE",e.AD_ASSETS_LOADED="AD_ASSETS_LOADED",e.AD_PAUSE="AD_PAUSE",e.AD_RESUME="AD_RESUME",e.AD_END="AD_END",e.AD_TIME_UPDATE="AD_TIME_UPDATE",e.VIDEO_REQ_INFO_START="VIDEO_REQ_INFO_START",e.VIDEO_REQ_INFO_END="VIDEO_REQ_INFO_END",e.VIDEO_LOAD_START="VIDEO_LOAD_START",e.VIDEO_LOAD_PROGRESS="VIDEO_LOAD_PROGRESS",e.VIDEO_DURATION_CHANGE="VIDEO_DURATION_CHANGE",e.VIDEO_METADATA_CHANGE="VIDEO_METADATA_CHANGE",e.VIDEO_TIMEUPDATE="VIDEO_TIMEUPDATE",e.VIDEO_VOLUME_CHANGE="VIDEO_VOLUME_CHANGE",e.VIDEO_RATE_CHANGE="VIDEO_RATE_CHANGE",e.VIDEO_CANPLAY="VIDEO_CANPLAY",e.VIDEO_PLAYING="VIDEO_PLAYING",e.VIDEO_AUTOPLAY_BLOCKED="VIDEO_AUTOPLAY_BLOCKED",e.VIDEO_PAUSE="VIDEO_PAUSE",e.VIDEO_BUFFERING="VIDEO_BUFFERING",e.VIDEO_SEEKING="VIDEO_SEEKING",e.VIDEO_SEEKED="VIDEO_SEEKED",e.VIDEO_SETLEVEL_START="VIDEO_SETLEVEL_START",e.VIDEO_SETLEVEL_END="VIDEO_SETLEVEL_END",e.VIDEO_RESIZE="VIDEO_RESIZE",e.VIDEO_END="VIDEO_END",e.PLAY_SESSION_END="PLAY_SESSION_END",{}),n=function(e){return Object.prototype.hasOwnProperty.call(Q,e)},H=function(e){return n(e)?Q[e]:void 0};function q(e,t){if("string"!=typeof e)throw new Error('Illegal plugin name, "'.concat(e,'", must be a string, was ').concat(void 0===e?"undefined":_typeof(e),"."));if("function"!=typeof t)throw new Error('Illegal plugin for "'.concat(e,'", must be a function, was ').concat(void 0===t?"undefined":_typeof(t),"."));if(!n(e))return Q[e]=t}function W(e){n(e)&&delete Q[e]}function j(e){var n;return(e=void 0===e?Object.keys(Q):e).forEach(function(e){var t=H(e);t&&((n=n||{})[e]=t)}),n}var G,z=Object.values(c.H5_PLAY_EVENT),X=(G=d.EvtEmitter,u.__extends(i,G),i.prototype.log=function(){for(var e,t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];null!=(t=(e=this.logger_).log)&&t.call.apply(t,u.__spreadArray([e],n,!1))},i.prototype.warn=function(){for(var e,t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];null!=(t=(e=this.logger_).warn)&&t.call.apply(t,u.__spreadArray([e],n,!1))},i.prototype.error=function(){for(var e,t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];null!=(t=(e=this.logger_).error)&&t.call.apply(t,u.__spreadArray([e],n,!1))},i.prototype.debug=function(){for(var e,t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];null!=(t=(e=this.logger_).debug)&&t.call.apply(t,u.__spreadArray([e],n,!1))},i.prototype.info=function(){for(var e,t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];null!=(t=(e=this.logger_).info)&&t.call.apply(t,u.__spreadArray([e],n,!1))},i.prototype.hasPlugin=function(e){return!!n(e)},i.prototype.destroy=function(){var e,t=this.player,n=this.name;null!=(e=t.plugins)&&e[n]&&delete t.plugins[n],this.unRegisterHook(),this.hookMap=null,this.player=null,this.removeAllListeners()},i.prototype.hookPlaySessionStart=function(e){},i.prototype.hookAdReqInfoStart=function(e){},i.prototype.hookAdReqInfoEnd=function(e){},i.prototype.hookAdReqAssetsStart=function(e){},i.prototype.hookAdAutoplayBlocked=function(e){},i.prototype.hookAdPlaying=function(e){},i.prototype.hookAdVolumeChange=function(e){},i.prototype.hookAdAssetsLoaded=function(e){},i.prototype.hookAdPause=function(e){},i.prototype.hookAdResume=function(e){},i.prototype.hookAdEnd=function(e){},i.prototype.hookAdTimeUpdate=function(e){},i.prototype.hookVideoReqInfoStart=function(e){},i.prototype.hookVideoReqInfoEnd=function(e){},i.prototype.hookVideoLoadStart=function(e){},i.prototype.hookVideoMetadataChange=function(e){},i.prototype.hookVideoLoadProgress=function(e){},i.prototype.hookVideoDurationChange=function(e){},i.prototype.hookVideoTimeupdate=function(e){},i.prototype.hookVideoVolumeChange=function(e){},i.prototype.hookVideoResize=function(e){},i.prototype.hookVideoRateChange=function(e){},i.prototype.hookVideoCanplay=function(e){},i.prototype.hookVideoPlaying=function(e){},i.prototype.hookVideoAutoplayBlocked=function(e){},i.prototype.hookVideoPause=function(e){},i.prototype.hookVideoBuffering=function(e){},i.prototype.hookVideoSeeking=function(e){},i.prototype.hookVideoSeeked=function(e){},i.prototype.hookVideoSetlevelStart=function(e){},i.prototype.hookVideoSetlevelEnd=function(e){},i.prototype.hookVideoEnd=function(e){},i.prototype.hookPlaySessionEnd=function(e){},i.prototype.registerHook=function(){var r=this;z.forEach(function(e){var n=Z(e);r.hookMap[e]=function(e){var t;return null==(t=r[n])?void 0:t.call(r,e.data)},r.player.on(e,r.hookMap[e])})},i.prototype.unRegisterHook=function(){var t=this;z.forEach(function(e){t.hookMap[e]&&t.player.off(e,t.hookMap[e])})},i.VERSION="",i.pluginName="",i);function i(e,t,n){var r=this.constructor,o=G.call(this)||this;if(o.player=e,o.config=t,o.hookMap={},r===i)throw new Error("Plugin must be sub-classed; not directly instantiated.");o.logger_=new d.Logger(e.config.instanceId,o.constructor.pluginName);t=(n||{}).msg;return o.msg=t,o.registerHook(),o}function J(e){e="string"==typeof e?H(e):e;return"function"==typeof e&&!Object.prototype.isPrototypeOf.call(X.prototype,e.prototype)}function $(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=n[0],t=J(t)?t.apply(o,n):((t=t).prototype.name=e,new(t.bind.apply(t,u.__spreadArray([void 0],n,!1))));return t&&(o.plugins[e]=t),t}function Z(e){return"hook"+e.toLowerCase().replace(/^[a-z]/,function(e){return e.toUpperCase()}).replace(/_[a-z]/g,function(e){return e[1].toUpperCase()})}function a(e){return"string"==typeof e||"number"==typeof e}var ee,e={NONE:0,CHACHA:3,FAIR_PLAY:4,WIDEVINE:5,ChinaDRM:6},te={NONE:0,CHACHA:8,FAIR_PLAY:16,WIDEVINE:32},t=(c.DATA_EVENTS=void 0,(t=c.DATA_EVENTS||(c.DATA_EVENTS={})).UPDATE="data-set:update",t.STATE_UPDATE="data-set:stateUpdate",c.DATA_STATE=void 0,(t=c.DATA_STATE||(c.DATA_STATE={})).INIT="PLAYER:init",t.SESSION_START="PLAYER:session_start",t.SESSION_END="PLAYER:session_end",t.GET_INFO="PLAYER:getinfo",t.GET_INFO_START="PLAYER:getinfo_start",t.GET_INFO_END="PLAYER:getinfo_end",t.SUBTITLE="PLAYER:subtitle",t.SUBTITLE_START="PLAYER:subtitle_start",t.SUBTITLE_END="PLAYER:subtitle_end",t.LOAD_START="PLAYER:load_start",t.LOAD_END="PLAYER:load_end",t.LOAD="PLAYER:load",t.BUFFER="PLAYER:buffer",t.BUFFER_START="PLAYER:buffer_start",t.BUFFER_END="PLAYER:buffer_end",t.SEEK="PLAYER:seek",t.SEEK_START="PLAYER:seek_start",t.SEEK_END="PLAYER:seek_end",t.USER_SEEK_START="PLAYER:user_seek_start",t.USER_SEEK_END="PLAYER:user_seek_end",t.END="PLAYER:end",t.ERROR="PLAYER:error",t.FATAL_ERROR="PLAYER:fatal_error",t.FIRST_PLAY="PLAYER:firstPlay",t.IDLE="PLAYER:idle",t.PLAYING="PLAYER:playing",t.SET_LEVEL="PLAYER:setLevel",t.SET_LEVEL_START="PLAYER:setLevel_start",t.SET_LEVEL_END="PLAYER:setLevel_end",t.PAUSE="PLAYER:pause",t.PAUSE_START="PLAYER:pause_start",t.PAUSE_END="PLAYER:pause_end",t.SET_RATE="PLAYER:setRate",t.RETRY_BACKURL="PLAYER:retryBackUrl",t.RETRY_PLAY="PLAYER:retryPlay",t.AUTO_PLAY_BLOCKED="PLAYER:autoplayBlocked",t.CODEC_DEGRADE="PLAYER:codecDegrade",c.LOG_TYPE=void 0,(t=c.LOG_TYPE||(c.LOG_TYPE={})).USER_ACTION="log:userAction",t.PLUGIN_ACTION="log:pluginAction",t.CORE_EVENT="log:coreEvent",t.API_INVOKE="log:apiInvoke",t.UNCATEGORIZED="log:uncategorized",c.BUFFER_REASON=void 0,(t=c.BUFFER_REASON||(c.BUFFER_REASON={}))[t.NETWORK_UNSTABLE=1400027]="NETWORK_UNSTABLE",t[t.PARALLEL_DOWNLOAD=1400028]="PARALLEL_DOWNLOAD",t[t.CDN_NO_CONNECTION=1400007]="CDN_NO_CONNECTION",t[t.CDN_URL_SWITCH_SUCCESS=1400029]="CDN_URL_SWITCH_SUCCESS",t[t.CDN_SLOW=1400030]="CDN_SLOW",t[t.CDN_URL_SWITCH_UNSUCCESS=1400031]="CDN_URL_SWITCH_UNSUCCESS",t[t.CDN_TIMEOUT=1400026]="CDN_TIMEOUT",t[t.CDN_TIMEOUT_URL_SWITCH=1400032]="CDN_TIMEOUT_URL_SWITCH",t[t.BYTERATE_ERROR=1400033]="BYTERATE_ERROR",t[t.DOWNLOAD_TOO_SHORT=1400034]="DOWNLOAD_TOO_SHORT",t[t.P2P_UPLOAD_SLOW=1400035]="P2P_UPLOAD_SLOW",t[t.DEFAULT=0]="DEFAULT",c.LOCAL_KEY=void 0,(t=c.LOCAL_KEY||(c.LOCAL_KEY={})).GUID="thumbplayer-h5-guid",t.VOLUME="thumbplayer-h5-volume",c.PersistedUserSettings=void 0,(t=c.PersistedUserSettings||(c.PersistedUserSettings={})).definition="user-setting:definition",t.volume="user-setting:volume",t.playbackRate="user-setting:playbackRate",t.subtitle="user-setting:subtitle",t.audioTrack="user-setting:audioTrack",{loginid:"",loginex:"",logintype:"",hh_ip:"",hc_main_login:"",hc_vuserid:"",hc_openid:"",hc_appid:"",hc_access_token:"",hc_vuession:"",vip:0,codec:d.CODEC.H264,freetype:0,videoCapability:"",mobile:0,guid:"",ua:"",uip:"",device:"",resolution:"",osver:"",p2pver:"",appVer:"",playerver:"",playertype:0,playercore:"",confid:"",downloadkit:0,online:1,p2p:0,sstrength:0,network:0,testid:0,curcore:"",curcorever:"",speed:0,quic:0,platform:"",flowid:"",vid:"",cid:"",columnId:"",livepid:"",interactid:"",url:"",referrer:"",topUrl:"",drm:0,drmtype:0,fmt:0,cdnid:0,dltype:"",rate:0,clip:0,status:0,duration:0,type:0,cdnuip:"",cdnip:"",ptag:"",sdtfrom:"",authfrom:"",currentDefnList:[],currentDefn:"",currentAudioTrack:0,currentAudioTrackList:[],currentSubtitle:"",currentSubtitleList:[],sessionBufferCount:0,sessionRetryBackUrlCount:0,sessionRetryPlayCount:0}),l={},r=(Object.keys(t).forEach(function(e){return l[e]=e}),"thumbplayer-h5-dataset"),ne=((E={})[d.DrmKeySystems.Widevine]=e.WIDEVINE,E[d.DrmKeySystems.FairPlay]=e.FAIR_PLAY,E[d.DrmKeySystems.FairPlayWebKit]=e.FAIR_PLAY,E.none=e.NONE,E),re=0,oe=1,ie=2,o=(ee=X,u.__extends(s,ee),Object.defineProperty(s.prototype,"stats",{get:function(){var e=this.player,t=e.playbackRate,n=e.volume,r=e.played,o=e.playtime,i=e.currentVideoInfo;return{volume:n,playbackRate:t,played:r,playtime:o,urlIndex:null!=(t=null==(n=null==(e=null==i?void 0:i.config)?void 0:e.backupUrls)?void 0:n.findIndex(function(e){return e===i.loadingUrl}))?t:-1,frameDroppedInPercentage:null!=(o=null==(r=null==i?void 0:i.qualityInfo)?void 0:r.frameDroppedInPercentage)?o:-1,averageDecodeTimeInMs:null!=(n=null==(e=null==i?void 0:i.qualityInfo)?void 0:e.averageDecodeTimeInMs)?n:-1,currentUrl:null==i?void 0:i.loadingUrl,paused:this.paused,fragUrl:null==i?void 0:i.currentFragUrl}},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"visualStats",{get:function(){return{isTabFocused:this.isTabFocused(),isPlayerInViewport:this.isPlayerInViewport()}},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"paused",{get:function(){var e;return null==(e=null==(e=this.player)?void 0:e.currentVideoElement)?void 0:e.paused},enumerable:!1,configurable:!0}),s.prototype.defrost=function(e,t,n){switch(void 0===n&&(n="secret"),e){case"state":return this.stateMapFreeze[t]===n?(delete this.stateMapFreeze[t],!0):!1;case"common":return this.commonMapFreeze[t]===n?(delete this.commonMapFreeze[t],!0):!1}},s.prototype.freeze=function(e,t,n){switch(void 0===n&&(n="secret"),e){case"state":return this.stateMapFreeze[t]?(this.player.log("".concat(t,"å·²éå®")),!1):(this.stateMapFreeze[t]=n,!0);case"common":return this.commonMapFreeze[t]?(this.player.log("".concat(t,"å·²éå®")),!1):(this.commonMapFreeze[t]=n,!0);default:return!1}},s.prototype.setEnv=function(){var t=this;this.player.on(d.PLAY_EVENT.STATE_CHANGE,this.onStateChange),this.player.on(d.PLAY_EVENT.FIRST_PLAYING,this.onFirstPlay),this.player.on(d.PLAY_EVENT.TIME_UPDATE,this.onTimeChange),this.player.on(d.PLAY_EVENT.DURATION_CHANGE,this.onDurationChange),this.player.on(d.PLAY_EVENT.ERROR,this.onError),this.player.on(d.PLAY_EVENT.SETLEVEL_START,this.onSetLevelStart),this.player.on(d.PLAY_EVENT.SETLEVEL_OVER,this.onSetLevelEnd),this.player.on(d.PLAY_EVENT.RATE_CHANGE,this.onRateChange),this.player.on(d.PLAY_EVENT.RETRY_BACKURL,this.onRetryLoad),this.player.on(d.PLAY_EVENT.AUTOPLAY_BLOCKED,this.onAutoplayBlocked),this.player.on(c.H5_PLAY_EVENT.VIDEO_REQ_INFO_START,this.onVideoReqInfoStart),this.player.on(c.H5_PLAY_EVENT.VIDEO_REQ_INFO_END,this.onVideoReqInfoEnd),this.player.on(c.H5_PLAY_EVENT.PLAY_SESSION_START,this.onPlaySessionStart),this.player.on(c.H5_PLAY_EVENT.PLAY_SESSION_END,this.onPlaySessionEnd),this.player.on(c.H5_PLAY_EVENT.VIDEO_REQ_INFO_END,function(e){var e=e.data;e.code!==c.ErrorCode.SUC&&(e=((null==(e=e.data)?void 0:e.error)||{}).code,t.writeState(c.DATA_STATE.ERROR,{eventId:t.generateEvtId(),type:c.LOG_TYPE.CORE_EVENT,name:c.DATA_STATE.ERROR,code:e,ftime:+new Date}))}),this.msg.on(c.H5_EXT_EVENT.RETRY_PLAY,this.onRetryPlay),this.msg.on(c.H5_EXT_EVENT.DEGRADE_CODEC_PLAY,this.onCodecDegrade)},s.prototype.collectBaseInfo=function(){var e=d.uaTool.os,t=d.uaTool.mobile;this.writeCommon(l.mobile,t?1:0,r),this.writeCommon(l.online,1,r),this.writeCommon(l.resolution,"".concat(screen.width,"*").concat(screen.height,"*").concat(window.devicePixelRatio||1),r),this.writeCommon(l.ua,navigator.userAgent.replace(/,/g,"\\,"),r),this.writeCommon(l.osver,"".concat(e.osName," ").concat(e.version),r),this.writeCommon(l.playertype,0),this.writeCommon(l.confid,re),this.writeCommon(l.playercore,Object.keys(d.KernelFactory.kernelMap).join(","),r),this.writeCommon(l.playerver,d.VERSION),this.writeCommon(l.speed,0),this.writeCommon(l.drm,0),this.writeCommon(l.url,location.href,r),this.writeCommon(l.topUrl,d.urlTool.getTopFrameUrl(),r),this.writeCommon(l.referrer,document.referrer,r),this.writeCommon(l.guid,this.getGUID())},s.prototype.collectVideoCapability=function(){try{var e={concurrency:navigator.hardwareConcurrency},t={av1:+d.videoTool.supportAV1(),hevc:+d.videoTool.supportHevc(),dolby:+d.videoTool.isDolbyVisionSupported()},n={hls:+d.videoTool.supportVideoFormat().includes("hls")},r=d.videoTool.isHDRSupported(),o=d.jsonTool.safelyStringify({codec:t,format:n,hdr:r,hw:e}).replace(/,/g,"\\,");this.writeCommon(l.videoCapability,o),this.log("device capability info: ".concat(o))}catch(e){}},s.prototype.persistUserSetting=function(){function r(e){var t;return-1<(null==(t=null==n?void 0:n.indexOf)?void 0:t.call(n,e))}var o=this,i={},e=this.player.config,n=e.disableUserSettingCache,a=e.type;s.SETTING_CONFIG.forEach(function(e){var t=e.dsKey,n=e.lsKey,e=e.oldDsKey,n="".concat(n,"_").concat(a);r(t)||e&&r(e)||(i[t]=n,(e=d.lsTool.getData(n))&&t&&o.writeCommon(t,e))}),this.msg.on(c.H5_EXT_EVENT.DATASET_UPDATE,function(e){var e=e.data,t=e.newVal,e=e.key;i[e]&&d.lsTool.setData(i[e],t)})},s.prototype.removeUserSetting=function(e){var t=this;("string"==typeof e?[e]:e).forEach(function(e){t.writeCommon(e,"")})},s.pluginName="dataset",s.SETTING_CONFIG=[{oldDsKey:l.currentDefn,dsKey:c.PersistedUserSettings.definition,lsKey:"".concat(s.UserSettingKeyPrefix="__thumbplayer_setting_","_definition")},{oldDsKey:l.currentSubtitle,dsKey:c.PersistedUserSettings.subtitle,lsKey:"".concat(s.UserSettingKeyPrefix,"_subtitle")},{oldDsKey:l.currentAudioTrack,dsKey:c.PersistedUserSettings.audioTrack,lsKey:"".concat(s.UserSettingKeyPrefix,"_audioTrack")},{dsKey:c.PersistedUserSettings.volume,lsKey:"".concat(s.UserSettingKeyPrefix,"_volume")},{dsKey:c.PersistedUserSettings.playbackRate,lsKey:"".concat(s.UserSettingKeyPrefix,"_playbackRate")}],s.canUseProxy=void 0!==window.Proxy,s);function s(e,t,n){var _=ee.call(this,e,t,n)||this;return _.player=e,_.isSeeking=!1,_.isBuffering=!1,_.isSettingLevel=!1,_.isLoading=!1,_.lastPlay=0,_.playDuration=0,_.prevPlayTimeS=0,_.sessionBufferCount=0,_.sessionRetryBackUrlCount=0,_.sessionRetryPlayCount=0,_.commonMapFreeze={},_.stateMapFreeze={},_.isLive=!1,_.evtIdMap={},_.writeCommon=function(e,t,n){var r=_.commonMap[e];return _.commonMap[e]=t,s.canUseProxy||_.emit(c.DATA_EVENTS.UPDATE,{key:e,oldVal:r,newVal:t}),!!n&&_.freeze("common",e,n)},_.writeState=function(e,t,n){var r=t.type||c.LOG_TYPE.UNCATEGORIZED,o=_.stateMap[e],i=_.getStartEventData(e);return _.stateMap[e]=u.__assign(u.__assign(u.__assign({},r===c.LOG_TYPE.CORE_EVENT?_.stats:{}),{type:r,ftime:+new Date,name:e,eventId:_.generateEvtId()}),t),!s.canUseProxy&&_.commonMap[l.flowid]&&_.emit(c.DATA_EVENTS.STATE_UPDATE,{key:e,oldVal:o,newVal:_.stateMap[e],startEvent:i}),!!n&&_.freeze("state",e,n)},_.onClose=function(){var e=+new Date;return{code:c.ErrorCode.SUC,playDuration:_.playDuration,ftime:e}},_.getStats=function(){return u.__assign(u.__assign({playDuration:_.playDuration},_.stats),_.visualStats)},_.generateFlowId=function(){return d.commonTool.createGUID(32)},_.generateEvtId=function(){return d.commonTool.createGUID(8)},_.getStartEventData=function(e){var t;return(t={})[c.DATA_STATE.SEEK_END]=_.stateMap[c.DATA_STATE.SEEK_START],t[c.DATA_STATE.BUFFER_END]=_.stateMap[c.DATA_STATE.BUFFER_START],t[c.DATA_STATE.LOAD_END]=_.stateMap[c.DATA_STATE.LOAD_START],t[c.DATA_STATE.SET_LEVEL_END]=_.stateMap[c.DATA_STATE.SET_LEVEL_START],t[c.DATA_STATE.PAUSE_END]=_.stateMap[c.DATA_STATE.PAUSE_START],t[c.DATA_STATE.GET_INFO_END]=_.stateMap[c.DATA_STATE.GET_INFO_START],t[e]},_.resetState=function(){_.isBuffering=!1,_.isSeeking=!1,_.isSettingLevel=!1},_.finalCleanup=function(e,t){var n=t.error,r=t.loadingUrl,t=t.config,t=null!=(t=null==(t=null==t?void 0:t.backupUrls)?void 0:t.findIndex(function(e){return e===r}))?t:-1;_.isSeeking&&(_.writeState(c.DATA_STATE.SEEK_END,{currentUrl:r,urlIndex:t,type:c.LOG_TYPE.CORE_EVENT,ftime:e,error:n,code:(null==n?void 0:n.code)||c.ErrorCode.SUC,name:c.DATA_STATE.SEEK_END,eventId:_.evtIdMap[c.DATA_STATE.SEEK_START]}),_.isSeeking=!1),_.isBuffering&&(_.writeState(c.DATA_STATE.BUFFER_END,{currentUrl:r,urlIndex:t,type:c.LOG_TYPE.CORE_EVENT,ftime:e,code:(null==n?void 0:n.code)||c.ErrorCode.SUC,error:n,name:c.DATA_STATE.BUFFER_END,eventId:_.evtIdMap[c.DATA_STATE.BUFFER_START]}),_.isBuffering=!1),_.isSettingLevel&&(_.isSettingLevel=!1,_.writeState(c.DATA_STATE.SET_LEVEL_END,{currentUrl:r,urlIndex:t,type:c.LOG_TYPE.CORE_EVENT,ftime:e,code:(null==n?void 0:n.code)||c.ErrorCode.SUC,error:n,name:c.DATA_STATE.SET_LEVEL_END,eventId:_.evtIdMap[c.DATA_STATE.SET_LEVEL_START]})),_.isLoading&&(_.isLoading=!1,_.writeState(c.DATA_STATE.LOAD_END,{type:c.LOG_TYPE.CORE_EVENT,currentUrl:r,urlIndex:t,ftime:e,error:n,code:(null==n?void 0:n.code)||c.ErrorCode.SUC,name:c.DATA_STATE.LOAD_END,eventId:_.evtIdMap[c.DATA_STATE.LOAD_START]}))},_.onAutoplayBlocked=function(e){_.writeState(c.DATA_STATE.AUTO_PLAY_BLOCKED,{type:c.LOG_TYPE.CORE_EVENT,name:c.DATA_STATE.AUTO_PLAY_BLOCKED,eventId:_.generateEvtId(),ftime:+new Date})},_.onRetryLoad=function(e){var e=e.data,t=e.prevUrl,n=e.curUrl,e=e.error,e=void 0===e?{}:e;_.writeState(c.DATA_STATE.RETRY_BACKURL,{type:c.LOG_TYPE.CORE_EVENT,name:c.DATA_STATE.RETRY_BACKURL,eventId:_.generateEvtId(),prevUrl:t,currentUrl:n,ftime:+new Date,error:e,code:null==e?void 0:e.code}),_.sessionRetryBackUrlCount++,_.writeCommon(l.sessionRetryBackUrlCount,_.sessionRetryBackUrlCount)},_.onRetryPlay=function(e){e=e.data.retryTimes;_.writeState(c.DATA_STATE.RETRY_PLAY,{type:c.LOG_TYPE.CORE_EVENT,name:c.DATA_STATE.RETRY_PLAY,eventId:_.generateEvtId(),ftime:+new Date,ext:{retryTimes:e}}),_.sessionRetryPlayCount++,_.writeCommon(l.sessionRetryPlayCount,_.sessionRetryPlayCount)},_.onBuffering=function(e){var t;_.isBuffering||(_.isBuffering=!0,t=_.generateEvtId(),_.evtIdMap[c.DATA_STATE.BUFFER_START]=t,_.writeState(c.DATA_STATE.BUFFER_START,{type:c.LOG_TYPE.CORE_EVENT,name:c.DATA_STATE.BUFFER_START,eventId:t,prevState:e.old,ftime:+new Date}),_.sessionBufferCount++,_.writeCommon(l.sessionBufferCount,_.sessionBufferCount))},_.onLoadStart=function(e){_.resetState();var e=null==(e=e.videoInfo)?void 0:e.config,t=+new Date,n=(_.writeCommon(l.curcore,_.player.kernelName),null==(n=d.KernelFactory.getKernelByName(_.player.kernelName))?void 0:n.VERSION),n=(_.writeCommon(l.curcorever,n),_.writeCommon(l.drmtype,ne[(null==(n=e.drmConfig)?void 0:n.keySystem)||"none"]),_.writeCommon(l.playertype,_.player.kernelName===d.KERNEL_NAME.ORIGIN?0:1),null==(n=(e=_.player.corePlayer).getHls)?void 0:n.call(e)),r=null==(r=(e=_.player.corePlayer).getP2P)?void 0:r.call(e),r=(r&&_.writeCommon(l.p2pver,null==(e=r.getVersion)?void 0:e.call(r)),n&&(r=(e=n.config||{}).progressive,n=e.startFragPrefetch,e=re,r&&(e+=oe),n&&(e+=ie),e)&&_.writeCommon(l.confid,e),_.isLoading=!0,_.generateEvtId());_.evtIdMap[c.DATA_STATE.LOAD_START]=r,_.writeState(c.DATA_STATE.LOAD_START,{type:c.LOG_TYPE.CORE_EVENT,eventId:r,name:c.DATA_STATE.LOAD_START,ftime:t})},_.onEnd=function(e){_.writeState(c.DATA_STATE.END,{type:c.LOG_TYPE.CORE_EVENT,name:c.DATA_STATE.END,eventId:_.generateEvtId(),ftime:+new Date,ext:{playDuration:_.playDuration},code:c.ErrorCode.SUC})},_.onIdle=function(e,t){},_.onSeeking=function(e){var t=+new Date,n=(_.isSeeking&&_.writeState(c.DATA_STATE.SEEK_END,{type:c.LOG_TYPE.CORE_EVENT,name:c.DATA_STATE.SEEK_END,ftime:t,eventId:_.evtIdMap[c.DATA_STATE.SEEK_START],ext:{isUserSeek:(null==(n=null==(n=_.stateMap[c.DATA_STATE.SEEK_START])?void 0:n.ext)?void 0:n.isUserSeek)||!1}}),_.isLive||_.resetState(),_.isSeeking=!0,_.generateEvtId());_.evtIdMap[c.DATA_STATE.SEEK_START]=n,_.writeState(c.DATA_STATE.SEEK_START,{type:c.LOG_TYPE.CORE_EVENT,ftime:t,name:c.DATA_STATE.SEEK_START,eventId:n,ext:{inBufferedRange:d.videoTool.checkTimeInBuffer(e.seekingTime,_.player.videoBuffered),isUserSeek:e.isUserSeek}})},_.onSeeked=function(e){_.isSeeking&&(_.isSeeking=!1,_.writeState(c.DATA_STATE.SEEK_END,{type:c.LOG_TYPE.CORE_EVENT,eventId:_.evtIdMap[c.DATA_STATE.SEEK_START],ftime:+new Date,name:c.DATA_STATE.SEEK_END,ext:{isUserSeek:e.isUserSeek},code:c.ErrorCode.SUC}))},_.onPause=function(e){var e=e.pauseType,t=_.generateEvtId();_.evtIdMap[c.DATA_STATE.PAUSE_START]=t,_.writeState(c.DATA_STATE.PAUSE_START,{type:c.LOG_TYPE.CORE_EVENT,ftime:+new Date,name:c.DATA_STATE.PAUSE_START,eventId:t,pauseType:e})},_.onPlaying=function(e){var t=+new Date;_.isBuffering&&(_.writeState(c.DATA_STATE.BUFFER_END,{type:c.LOG_TYPE.CORE_EVENT,name:c.DATA_STATE.BUFFER_END,ftime:t,eventId:_.evtIdMap[c.DATA_STATE.BUFFER_START]}),_.isBuffering=!1),_.lastPlay=t,_.evtIdMap[c.DATA_STATE.PAUSE_START]&&(_.writeState(c.DATA_STATE.PAUSE_END,{type:c.LOG_TYPE.CORE_EVENT,name:c.DATA_STATE.PAUSE_END,eventId:_.evtIdMap[c.DATA_STATE.PAUSE_START],ftime:t,code:c.ErrorCode.SUC}),delete _.evtIdMap[c.DATA_STATE.PAUSE_START])},_.onCanPlay=function(e){var t=+new Date;_.isLoading&&(_.writeState(c.DATA_STATE.LOAD_END,{type:c.LOG_TYPE.CORE_EVENT,ftime:t,name:c.DATA_STATE.LOAD_END,eventId:_.evtIdMap[c.DATA_STATE.LOAD_START],code:c.ErrorCode.SUC}),_.isLoading=!1)},_.onCodecDegrade=function(e){var t=+new Date;_.writeState(c.DATA_STATE.CODEC_DEGRADE,{type:c.LOG_TYPE.CORE_EVENT,ftime:t,name:c.DATA_STATE.CODEC_DEGRADE,code:null!=(t=e.data.degradeReason)?t:c.ErrorCode.SUC})},_.onSetLevelStart=function(e){var t=+new Date,n=(_.isSeeking&&(_.isSeeking=!1,_.writeState(c.DATA_STATE.SEEK_END,{type:c.LOG_TYPE.CORE_EVENT,name:c.DATA_STATE.SEEK_END,ftime:t,eventId:_.evtIdMap[c.DATA_STATE.SEEK_START]})),_.resetState(),_.isSettingLevel=!0,_.generateEvtId());_.evtIdMap[c.DATA_STATE.SET_LEVEL_START]=n,_.writeState(c.DATA_STATE.SET_LEVEL_START,{type:c.LOG_TYPE.CORE_EVENT,ftime:t,eventId:n,name:c.DATA_STATE.SET_LEVEL_START,ext:{defn:_.commonMap.currentDefn,mode:e.data.mode}})},_.onSetLevelEnd=function(e){e=e.data,e=((void 0===e?{}:e).videoInfo||{}).error;_.isSettingLevel=!1,_.writeCommon(l.curcore,_.player.kernelName),_.writeState(c.DATA_STATE.SET_LEVEL_END,{type:c.LOG_TYPE.CORE_EVENT,name:c.DATA_STATE.SET_LEVEL_END,ftime:+new Date,eventId:_.evtIdMap[c.DATA_STATE.SET_LEVEL_START],error:e,code:(null==e?void 0:e.code)||c.ErrorCode.SUC})},_.onError=function(e){var e=(e.data||{}).videoInfo,t=e||{},n=t.error,r=t.state,o=t.currentFragSn,i=t.currentFragUrl,a=t.loadingUrl,t=t.config,s=+new Date;_.writeState(c.DATA_STATE.ERROR,{currentUrl:a,urlIndex:null!=(t=null==(t=null==t?void 0:t.backupUrls)?void 0:t.findIndex(function(e){return e===a}))?t:-1,type:c.LOG_TYPE.CORE_EVENT,name:c.DATA_STATE.ERROR,eventId:_.generateEvtId(),fragUrl:i,ext:{fragSn:o},code:n.code,error:n,ftime:s,prevState:r}),_.finalCleanup(s,e)},_.onDurationChange=function(e){e=e.data,e=((void 0===e?{}:e).videoInfo||{}).duration;_.commonMap.duration=void 0===e?0:e},_.onFirstPlay=function(e){var t=+new Date;_.writeState(c.DATA_STATE.FIRST_PLAY,{type:c.LOG_TYPE.CORE_EVENT,name:c.DATA_STATE.FIRST_PLAY,ftime:t,eventId:_.generateEvtId()})},_.onTimeChange=function(e){var t=Math.floor(_.player.playtime);t&&t!==_.prevPlayTimeS&&(_.prevPlayTimeS=t,_.playDuration||(_.playDuration=0),_.playDuration+=1)},_.onStateChange=function(e){var t,e=e.data,n=e.new;(t={})[d.VIDEO_STATE.BUFFERING]=_.onBuffering,t[d.VIDEO_STATE.LOAD_START]=_.onLoadStart,t[d.VIDEO_STATE.END]=_.onEnd,t[d.VIDEO_STATE.IDLE]=_.onIdle,t[d.VIDEO_STATE.SEEKING]=_.onSeeking,t[d.VIDEO_STATE.SEEKED]=_.onSeeked,t[d.VIDEO_STATE.PAUSE]=_.onPause,t[d.VIDEO_STATE.PLAYING]=_.onPlaying,t[d.VIDEO_STATE.CANPLAY]=_.onCanPlay,t[d.VIDEO_STATE.SEEKING]=_.onSeeking;t[n]&&t[n](e)},_.onRateChange=function(e){_.writeState(c.DATA_STATE.SET_RATE,{type:c.LOG_TYPE.CORE_EVENT,name:c.DATA_STATE.SET_RATE,eventId:_.generateEvtId(),ftime:+new Date})},_.onVideoReqInfoStart=function(){var e=_.generateEvtId();_.evtIdMap[c.DATA_STATE.GET_INFO_START]=e,_.writeState(c.DATA_STATE.GET_INFO_START,{type:c.LOG_TYPE.CORE_EVENT,name:c.DATA_STATE.GET_INFO_START,eventId:e,ftime:+new Date})},_.onVideoReqInfoEnd=function(e){var e=e.data,t=e.code,e=e.data,e=void 0===e?{}:e;_.sessionRetryBackUrlCount=0,_.evtIdMap[c.DATA_STATE.GET_INFO_START]&&_.writeState(c.DATA_STATE.GET_INFO_END,{type:c.LOG_TYPE.CORE_EVENT,name:c.DATA_STATE.GET_INFO_END,code:t,ext:{reqBody:d.urlTool.object2string(e.reqParams||{},"&"),reqPath:e.reqPath||"",retryCount:e.alreadyRetryCount||0},error:e.error||{},eventId:_.evtIdMap[c.DATA_STATE.GET_INFO_START],ftime:+new Date})},_.onPlaySessionStart=function(e){e=e.data;_.writeCommon(l.flowid,e.flowid),a(e.playItem)&&_.writeCommon(l.vid,e.playItem),_.emit(c.DATA_EVENTS.STATE_UPDATE,{key:c.DATA_STATE.INIT,oldVal:void 0,newVal:_.stateMap[c.DATA_STATE.INIT],startEvent:void 0}),_.writeState(c.DATA_STATE.SESSION_START,{eventId:_.generateEvtId(),type:c.LOG_TYPE.CORE_EVENT,name:c.DATA_STATE.SESSION_START,ftime:+new Date})},_.onPlaySessionEnd=function(e){var e=e.data.code,t=e===c.ErrorCode.SUC?u.__assign({},_.stateMap[c.DATA_STATE.END]):u.__assign({},_.stateMap[c.DATA_STATE.ERROR]);e!==c.ErrorCode.SUC&&_.removeUserSetting([c.PersistedUserSettings.definition,c.PersistedUserSettings.audioTrack]),_.writeState(c.DATA_STATE.SESSION_END,u.__assign(u.__assign({},t),{code:e,eventId:_.generateEvtId(),name:c.DATA_STATE.SESSION_END,type:c.LOG_TYPE.CORE_EVENT,ftime:+new Date})),_.playDuration=0,_.prevPlayTimeS=0,_.sessionBufferCount=0,_.sessionRetryBackUrlCount=0,_.sessionRetryPlayCount=0},_.getGUID=function(){var e=d.lsTool.getData(c.LOCAL_KEY.GUID);return e||(e=d.commonTool.createGUID(32),d.lsTool.setData(c.LOCAL_KEY.GUID,e),e)},_.isTabFocused=function(){var e=["hidden","msHidden","webkitHidden"].find(function(e){return void 0!==document[e]});return e?document[e]?0:1:-1},_.isPlayerInViewport=function(){var e,t,n=_.player.container;return n.offsetParent?(n=n.getBoundingClientRect(),e=window.innerHeight||document.documentElement.clientHeight,t=window.innerWidth||document.documentElement.clientWidth,e=n.top<=e&&0<=n.top+n.height,t=n.left<=t&&0<=n.left+n.width,+(e&&t)):0},_.commonMap=s.canUseProxy?new Proxy({},{get:function(e,t,n){return Reflect.get(e,t,n)},set:function(e,t,n,r){var o;return"string"==typeof t&&!_.commonMapFreeze[t]&&(o=Reflect.get(e,t,r),e=Reflect.set(e,t,n,r),o!==n&&_.emit(c.DATA_EVENTS.UPDATE,{key:t,oldVal:o,newVal:n}),e)}}):{},_.stateMap=s.canUseProxy?new Proxy({},{get:function(e,t,n){return Reflect.get(e,t,n)},set:function(e,t,n,r){var o;return"string"==typeof t&&!_.stateMapFreeze[t]&&(o=Reflect.get(e,t,r),e=Reflect.set(e,t,n,r),_.commonMap[l.flowid]&&_.emit(c.DATA_EVENTS.STATE_UPDATE,{key:t,oldVal:o,newVal:n,startEvent:_.getStartEventData(t),startEventData:_.getStartEventData(t)}),e)}}):{},_.isLive=_.player.config.type===d.PLAY_MODE.LIVE,_.setEnv(),_.collectBaseInfo(),_.collectVideoCapability(),_.persistUserSetting(),_}var ae=[c.H5_PLAY_EVENT.AD_REQ_INFO_START,c.H5_PLAY_EVENT.AD_REQ_INFO_END,c.H5_PLAY_EVENT.AD_REQ_ASSETS_START,c.H5_PLAY_EVENT.AD_ASSETS_LOADED,c.H5_PLAY_EVENT.AD_END,c.H5_PLAY_EVENT.AD_PLAYING,c.H5_PLAY_EVENT.AD_AUTOPLAY_BLOCKED,c.H5_PLAY_EVENT.AD_PAUSE,c.H5_PLAY_EVENT.AD_RESUME,c.H5_PLAY_EVENT.AD_TIME_UPDATE,c.H5_PLAY_EVENT.AD_VOLUME_CHANGE];c.FullScreenMode=void 0,(E=c.FullScreenMode||(c.FullScreenMode={})).FAKE_FULLSCREEN="fakeFullscreen",E.FULL_SCREEN="fullscreen";var se="thumbplayer-fake-fullscreen",_e="\n.".concat(se," {\n  position: fixed !important;\n  top: 0 !important;\n  right: 0 !important;\n  bottom: 0 !important;\n  left: 0 !important;\n  width: 100% !important;\n  height: 100% !important;\n  z-index: 9999 !important;\n}\n");function le(e,t){if(void 0===t&&(t=!0),!(e instanceof HTMLElement))return Promise.reject("requestElFullScreen: container is not an element");function n(e){var t;return null==(t=e.requestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullscreen||e.webkitRequestFullScreen||e.msRequestFullscreen)?void 0:t.bind(e)}function r(e){var t;return null==(t=e.cancelFullScreen||e.mozCancelFullScreen||e.webkitCancelFullScreen||e.exitFullscreen||e.webkitExitFullscreen||e.msExitFullscreen)?void 0:t.bind(e)}var o=n(e)||n(document),e=r(e)||r(document),t=t?o:e;try{return Promise.resolve(t())}catch(e){return Promise.reject(e)}}function ce(e){return e&&(e.webkitDisplayingFullscreen||"fullscreen"===e.webkitPresentationMode)&&(e=e,!d.uaTool.os.ios&&!d.uaTool.browser.safari||!document.pictureInPictureEnabled&&document.pictureInPictureElement!==e)}var p,ue="fullscreen_handler",de=["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"],pe=(Object.defineProperty(fe.prototype,"fullscreenMode",{get:function(){var e=this.container,t=this.player.currentVideoElement,n=this.player.config.videoElements;return function(e){if(e){var t=document;if(t.fullscreen||t.mozFullScreen||t.webkitIsFullScreen||t.msFullscreenElement)return(t=t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement)===e||t===document}}(e)||ce(t)||n[0]instanceof HTMLVideoElement&&ce(n[0])?c.FullScreenMode.FULL_SCREEN:e.classList.contains(se)?c.FullScreenMode.FAKE_FULLSCREEN:null},enumerable:!1,configurable:!0}),fe.prototype.requestFullScreen=function(_,l){return void 0===_&&(_=!0),u.__awaiter(this,void 0,void 0,function(){var r,o,i,a,s;return u.__generator(this,function(e){switch(e.label){case 0:if(r=this.container,i=this.player,o=i.currentVideoElement,i=i.config,i=i.videoElements,s=this.fullscreenMode,a=this.getFullScreenMode(l),_&&s){if(s===a)return[2];this.requestFullScreen(!1,s)}if(!_&&!s||!_&&s!==a)return[2];e.label=1;case 1:if(e.trys.push([1,7,,8]),a===c.FullScreenMode.FAKE_FULLSCREEN)return t=r,void 0===(n=_)&&(n=!0),d.domTool.insertStyle(_e,"thumbplayer-fake-fullscreen-style"),t.classList.toggle(se,n),this.player.emit(d.PLAY_EVENT.FULLSCREEN_CHANGE,{isEnter:_,mode:a}),[2];e.label=2;case 2:return e.trys.push([2,4,,6]),[4,le(r,_)];case 3:return e.sent(),[3,6];case 4:return e.sent(),[4,function(n,r){return void 0===r&&(r=!0),u.__awaiter(this,void 0,void 0,function(){var t;return u.__generator(this,function(e){if(!(n&&n instanceof HTMLVideoElement))throw new Error("videoRequestFullScreen: video is not an VideoElement");if(t=n.requestFullscreen||n.webkitEnterFullscreen||n.webkitRequestFullScreen,t=r?t:n.webkitExitFullscreen)return[2,t.call(n)];throw new Error("Video Fullscreen API is not supported.")})})}(o||i[0],_)];case 5:return e.sent(),[3,6];case 6:return[3,8];case 7:throw s=e.sent(),this.logger.error("@FullscreenLogics.requestFullScreen, isEnter=".concat(_,", mode=").concat(a,", err=").concat(s)),s;case 8:return[2]}var t,n})})},fe.prototype.destroy=function(){this.listenFullScreenEvts(!1)},fe.prototype.getFullScreenMode=function(e){return e||(!d.uaTool.mobile||d.uaTool.os.ios?c.FullScreenMode.FULL_SCREEN:c.FullScreenMode.FAKE_FULLSCREEN)},fe.prototype.listenFullScreenEvts=function(e){var t=this,n=((e=void 0===e?!0:e)?document.addEventListener:document.removeEventListener).bind(document),r=(e?this.player.on:this.player.off).bind(this.player);r(c.H5_PLAY_EVENT.VIDEO_LOAD_START,this.onVideoLoadStart),r(c.H5_PLAY_EVENT.PLAY_SESSION_END,this.onPlaySessionEnd),de.forEach(function(e){n(e,t.fullscreenChangeHandler)}),e||null!=(r=this.player.videoElements)&&r.forEach(function(e){e instanceof HTMLVideoElement&&t.bindVideoElFullscreenEvt(e,!1)})},fe.prototype.bindVideoElFullscreenEvt=function(e,t){var n=(t?e.addEventListener:e.removeEventListener).bind(e);n("webkitendfullscreen",this.fullscreenChangeHandler),n("webkitbeginfullscreen",this.fullscreenChangeHandler),t?e.dataset[ue]=String(!0):delete e.dataset[ue]},fe);function fe(e,t){var n=this;this.player=e,this.onVideoLoadStart=function(){n.player.videoElements.forEach(function(e){e instanceof HTMLVideoElement&&!e.dataset[ue]&&n.bindVideoElFullscreenEvt(e,!0)})},this.onPlaySessionEnd=function(){d.uaTool.mobile&&n.fullscreenMode===c.FullScreenMode.FULL_SCREEN&&n.requestFullScreen(!1,c.FullScreenMode.FULL_SCREEN)},this.fullscreenChangeHandler=function(){var e=n.fullscreenMode;n.player.emit(d.PLAY_EVENT.FULLSCREEN_CHANGE,{isEnter:e===c.FullScreenMode.FULL_SCREEN,mode:c.FullScreenMode.FULL_SCREEN})},this.logger=new d.Logger(e.config.instanceId,"FullscreenLogics"),this.container=t||e.container,this.listenFullScreenEvts(!0)}(E=p=p||{}).STORAGE_INIT_FAILED="storageInitFailed",E.STORAGE_READY="storageReady",E.REQUEST_STORE_LOG="requestStoreLog",E.STORE_LOG_SUCCESS="storeLogSuccess",E.STORE_LOG_FAILED="storeLogFailed",E.REQUEST_REPORT_LOG="requestReportLog",E.REPORT_LOG_SUCCESS="reportLogSuccess",E.REPORT_LOG_FAILED="reportLogFailed";function Ee(e,t){var n=this;this.sender=e,this.receiver=t,this.callbackMap={},this.hasDestroy=!1,this.onReceiverMessage=function(e){n.receiverMessageHandler(e)},this.sender.addEventListener("message",this.onReceiverMessage)}Ee.prototype.postMessage=function(e){if(this.hasDestroy)throw new Error("Cannot exec postMessage after destroy");this.receiver.postMessage(e,"*")},Ee.prototype.on=function(e,t){this.hasDestroy||(this.callbackMap[e]||(this.callbackMap[e]=[]),this.callbackMap[e].push(t))},Ee.prototype.off=function(e,t){this.hasDestroy||null!=(e=this.callbackMap[e])&&e.length&&-1!==(t=e.indexOf(t))&&e.splice(t,1)},Ee.prototype.destroy=function(){var e;this.hasDestroy=!0,null!=(e=this.sender)&&e.removeEventListener("message",this.onReceiverMessage),this.sender=null,this.receiver=null,this.callbackMap=null},Ee.prototype.receiverMessageHandler=function(e){var t,n=this;this.isBridgeMessage(e.data)&&!this.hasDestroy&&(t=e.data,null!=(e=this.callbackMap[t.name]))&&e.forEach(function(e){e(t,n.postMessage.bind(n))})},Ee.prototype.isBridgeMessage=function(e){return"object"===(void 0===e?"undefined":_typeof(e))&&"string"==typeof(null==e?void 0:e.name)&&"string"==typeof(null==e?void 0:e.instanceId)};he=Ee,u.__extends(f,he),f.getIframe=function(e,t){var n;return void 0===t&&(t=1e4),f.iframeEl||((n=document.createElement("iframe")).src=e,document.body.append(n),n.style.display="none",n.classList.add("thumbplayer-remote-storage-bridge"),f.iframeEl=n,f.rejectTimeout=window.setTimeout(function(){f.storageDefer.reject(new Error("IFrame wait timeout"))},t),n)},f.prototype.storeLogs=function(t){return u.__awaiter(this,void 0,void 0,function(){return u.__generator(this,function(e){switch(e.label){case 0:return[4,f.storageDefer.promise];case 1:return e.sent(),[4,this.postMessagePromise({name:p.REQUEST_STORE_LOG,instanceId:this.instanceId,data:t},p.STORE_LOG_SUCCESS,p.STORE_LOG_FAILED)];case 2:return e.sent(),[2]}})})},f.prototype.report=function(t){return u.__awaiter(this,void 0,void 0,function(){return u.__generator(this,function(e){switch(e.label){case 0:return[4,f.storageDefer.promise];case 1:return e.sent(),[4,this.postMessagePromise({name:p.REQUEST_REPORT_LOG,instanceId:this.instanceId,data:t},p.REPORT_LOG_SUCCESS,p.REPORT_LOG_FAILED,3e4)];case 2:return e.sent(),[2]}})})},f.prototype.postMessagePromise=function(e,_,l,c){var u=this;return void 0===c&&(c=this.timeout),new Promise(function(t,n){var r=e.instanceId,o=setTimeout(function(){n(new Error("PostMessage response timeout: ".concat(e.name," / ").concat(e.instanceId))),i(!1)},c),i=function(e){var t=((e=void 0===e?!1:e)?u.on:u.off).bind(u);t(l,a),t(_,s),e||clearTimeout(o)},a=function(e){r===e.instanceId&&(n(e.data),i(!1))},s=function(e){r===e.instanceId&&(t(e),i(!1))};i(!0),u.postMessage(e)})},f.prototype.destroy=function(){var e;--f.instanceCount,f.instanceCount<=0&&(clearTimeout(f.rejectTimeout),(f.rejectTimeout=null)!=(e=f.iframeEl)&&e.remove(),f.iframeEl=null,f.instanceCount=0,f.storageDefer=new d.SimpleDefer,he.prototype.destroy.call(this))},f.prototype.receiverMessageHandler=function(e){this.isBridgeMessage(e.data)&&(e.data.name===p.STORAGE_READY?(f.storageDefer.resolve(),clearTimeout(f.rejectTimeout)):he.prototype.receiverMessageHandler.call(this,e))},f.storageDefer=new d.SimpleDefer,f.instanceCount=0;var he,Ae=f;function f(e,t,n){void 0===n&&(n=1e4);e=he.call(this,self,f.getIframe(e,n).contentWindow)||this;return e.instanceId=t,e.timeout=n,f.instanceCount+=1,e}ge=d.EvtEmitter,u.__extends(ye,ge),ye.prototype.setPageLeave=function(){window.addEventListener("pagehide",this.emitPageLeave),document.addEventListener("visibilitychange",this.emitPageLeave)},ye.prototype.setPageUnload=function(){window.addEventListener("beforeunload",this.emitPageUnload),window.addEventListener("unload",this.emitPageUnload)},ye.THROTTLE_GAP=10;var ge,me,E=ye;function ye(){var e=ge.call(this)||this;return e.emitPageLeave=function(){"hidden"!==document.visibilityState||Date.now()-e.pageLeaveTimeStamp<=ye.THROTTLE_GAP||(e.pageLeaveTimeStamp=Date.now(),e.emit(me.PageLeave))},e.emitPageUnload=function(){Date.now()-e.pageUnloadTimeStamp<=ye.THROTTLE_GAP||(e.pageUnloadTimeStamp=Date.now(),e.emit(me.UNLOAD))},e.setPageLeave(),e.setPageUnload(),e}(g=me=me||{}).PageLeave="pageLeave",g.UNLOAD="unload";var ve={instance:new E,PageWatcherEvent:me};var be,Te="//v.qq.com/cache/wuji/object?appid=tenvideo_offline_log&schemaid=whileList&schemakey=d5dccc35902346b2bdcbcef774fefe99",Ce=0;function Ie(n){return u.__awaiter(this,void 0,void 0,function(){var o,i;return u.__generator(this,function(e){switch(e.label){case 0:o={vuid:d.cookieTool.get("vqq_vuserid")||d.cookieTool.get("vuserid"),openid:d.cookieTool.get("openid")||d.cookieTool.get("vqq_openid"),guid:d.lsTool.getData(c.LOCAL_KEY.GUID)},e.label=1;case 1:return e.trys.push([1,3,,4]),[4,(t=n,t=encodeURIComponent('projectId="'.concat(t,'"')),t="".concat(Te,"&include=encryptValue,type&filter=").concat(t,"&otype=jsonp"),Ce+=1,d.netTool.jsonp(t,{name:"offline_log"+Ce%200,timeout:3e3}))];case 2:return i=e.sent(),[2,Object.entries(be).some(function(e){var t=e[0],n=e[1],r=o[t];return r&&i.data.some(function(e){return e.type===n&&e.encryptValue===B.sha256(r)})})];case 3:return e.sent(),[2,!1];case 4:return[2]}var t})})}(g=be=be||{}).vuid="2",g.guid="5",g.openid="6";Pe=X,u.__extends(h,Pe),Object.defineProperty(h,"isEnvSupport",{get:function(){return"function"==typeof window.Proxy},enumerable:!1,configurable:!0}),h.prototype.destroy=function(){return u.__awaiter(this,void 0,void 0,function(){return u.__generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,3,4]),this.isDestroy=!0,this.setPollLogger(!1),this.setPageWatcher(!1),this.setPlayerEvt(!1),[4,this.storeLogs({clearContentCache:!0})];case 1:case 2:return e.sent(),[3,4];case 3:return this.remoteStorage.destroy(),Pe.prototype.destroy.call(this),[7];case 4:return[2]}})})},h.prototype.report=function(t,n){return u.__awaiter(this,void 0,void 0,function(){return u.__generator(this,function(e){switch(e.label){case 0:if(!t&&!h.isInWhiteList)return[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.remoteStorage.report({downloadOnFailed:t,reportSource:n})];case 2:return e.sent(),[2,{status:!0,msg:""}];case 3:return[2,{status:!1,msg:e.sent().message}];case 4:return[2]}})})},h.prototype.logEnvInfo=function(){try{this.logger.log("URL: ".concat(location.href)),this.logger.log("TOP URL: ".concat(d.urlTool.getTopFrameUrl())),this.logger.log("Kernel List: ".concat(Object.keys(d.KernelFactory.kernelMap).join(","))),this.logger.log("PlayItem: ".concat(d.jsonTool.safelyStringify(this.player.currentPlayItem)))}catch(e){}},h.prototype.checkWhiteList=function(){return u.__awaiter(this,void 0,void 0,function(){var t,n;return u.__generator(this,function(e){switch(e.label){case 0:return h.hasCheckWhiteList?[2]:(n=this.config.platform,h.hasCheckWhiteList=!0,t=h,[4,Ie(n)]);case 1:if(t.isInWhiteList=e.sent(),!h.isInWhiteList)return[3,5];e.label=2;case 2:return e.trys.push([2,4,,5]),[4,this.report(!1,"white")];case 3:return e.sent(),[3,5];case 4:return n=e.sent(),this.logger.error("Error occur when reporting: ".concat(n)),[3,5];case 5:return[2]}})})},h.prototype.setPollLogger=function(e){void 0===e&&(e=!0);var t=this.config.pollTime,t=void 0===t?3e3:t;clearInterval(this.pollTimer),e&&(this.pollTimer=window.setInterval(this.storeLogs,t))},h.prototype.setPageWatcher=function(e){var t=this.pageWatcher,e=((e=void 0===e?!0:e)?t.on:t.off).bind(t);e(ve.PageWatcherEvent.PageLeave,this.onPageLeave),e(ve.PageWatcherEvent.UNLOAD,this.onPageLeave)},h.prototype.setPlayerEvt=function(e){((e=void 0===e?!0:e)?this.player.on:this.player.off).bind(this.player)(d.PLAY_EVENT.ERROR,this.onPlayerError)},h.prototype.hookVideoReqInfoEnd=function(e){e=null==(e=null==(e=e.data)?void 0:e.error)?void 0:e.code;e&&(this.logInfoChange.code=e),this.logInfoChange.videoName=this.player.dataset.commonMap.videoName,this.storeLogs()},h.prototype.hookPlaySessionStart=function(){this.logInfoChange=this.collectLogInfo(),this.logEnvInfo(),this.storeLogs()},h.prototype.hookPlaySessionEnd=function(e){this.logInfoChange.code=e.code,this.storeLogs({clearInfoCache:!0})},h.prototype.collectLogInfo=function(){var e=this.player.dataset.commonMap,t=e.guid,n=e.drm,r=e.videoName,o=e.vid,i=e.hc_vuserid,a=e.flowid,e=e.platform;return{code:"",drm:Boolean(n),startTime:Date.now(),endTime:Date.now(),guid:t,ua:navigator.userAgent,url:location.href,videoName:r,vid:o,platform:e,vuid:i,instanceId:this.instanceId,id:a}},Object.defineProperty(h.prototype,"instanceId",{get:function(){return this.player.config.instanceId},enumerable:!1,configurable:!0}),h.pluginName="offlineLog",h.hasCheckWhiteList=!1,h.isInWhiteList=!1;var Pe,De=h;function h(e,t,n){var r=Pe.call(this,e,t,n)||this;return r.pageWatcher=ve.instance,r.logInfoChange={},r.isDestroy=!1,r.onPageLeave=function(){r.storeLogs()},r.storeLogs=function(o){return u.__awaiter(r,void 0,void 0,function(){var t,n,r;return u.__generator(this,function(e){switch(e.label){case 0:if(!(r=this.instanceId))return[2];if(t=d.Logger.cache[r],t={logs:t,info:this.logInfoChange,ext:o},n=o||t.logs.length||Boolean(Object.keys(this.logInfoChange).length),d.Logger.cache[r]=[],this.logInfoChange={},!n)return[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.remoteStorage.storeLogs(t)];case 2:return e.sent(),[3,4];case 3:return r=e.sent(),this.logger.error("Error occur when store offlineLog: ".concat(r)),[3,4];case 4:return[2]}})})},r.onPlayerError=function(e){r.logInfoChange.code=null==(e=null==(e=null==(e=e.data)?void 0:e.videoInfo)?void 0:e.error)?void 0:e.code,r.storeLogs()},r.config=u.__assign(u.__assign({},Me),t||{}),r.logger=new d.Logger(r.instanceId,h.pluginName),r.remoteStorage=new Ae(xe,r.instanceId),Ae.storageDefer.promise.then(function(){r.isDestroy||(r.setPollLogger(),r.setPageWatcher(),r.setPlayerEvt())}).catch(function(e){r.logger.error("Error occur when init DB: ".concat(e))}),r.logEnvInfo(),r.checkWhiteList(),r}var Oe,we,Me={platform:"1",disable:!1,pollTime:3e3},xe="https://v.qq.com/thumbplayer-offline-log.html",Re=((E=Oe=Oe||{}).EMPTY_CONFIG="éç½®ä¸è½ä¸ºç©º",E.POINTS_BOTH_EMPTY="startPoint / endPoint éç½®ä¸è½åæ¶ä¸ºç©º",E.START_TIME_BELOW_ZERO="startPoint.value å¼ä¸è½å°äº 0",E.END_TIME_BELOW_START_TIME="endPoint.value å¼ä¸è½å°äº startPoint.value",d.END_STATE.NORMAL),Se={startTime:0,startPriority:0,endTime:1/0,endPriority:0,endState:d.END_STATE.NORMAL},Le={emptyConfigCheck:function(e){if(!e)return Oe.EMPTY_CONFIG},emptyStartAndEndCheck:function(e){var t=e.startPoint,e=e.endPoint;if(!t&&!e)return Oe.POINTS_BOTH_EMPTY},startBelowZero:function(e){e=e.startPoint;if(e&&e.value<0)return Oe.START_TIME_BELOW_ZERO},endBelowStart:function(e){var t=e.startPoint,e=e.endPoint;if(t&&e&&t.value>=e.value)return Oe.END_TIME_BELOW_START_TIME}},Ne=(we=X,u.__extends(A,we),Object.defineProperty(A.prototype,"range",{get:function(){return this.limitRange||(this.limitRange=this.mergePlaytimeLimitConfigs(Object.values(this.limitConfigMap))),u.__assign({},this.limitRange)},enumerable:!1,configurable:!0}),A.prototype.addLimitConfig=function(e){var t;return this.validatePlayTimeConfig(e)?(t=null!=(t=e.id)?t:this.generateID(),this.limitConfigMap[t]=u.__assign(u.__assign({},e),{vidOrUrl:this.player.vid||this.player.url}),this.onConfigChange(),t):null},A.prototype.deleteLimitConfig=function(e){delete this.limitConfigMap[e],this.onConfigChange()},A.prototype.clearAllConfig=function(n){var r=this;Object.entries(this.limitConfigMap).forEach(function(e){var t=e[0];e[1].vidOrUrl!==n&&delete r.limitConfigMap[t]}),this.limitRange=null},A.prototype.getLimitConfig=function(e){return this.limitConfigMap[e]},A.prototype.setLimitConfig=function(e,t){return!(!this.getLimitConfig(e)||!this.validatePlayTimeConfig(t)||(this.limitConfigMap[e]=t,this.onConfigChange(),0))},A.prototype.generateID=function(){return this.nextId++},A.prototype.validatePlayTimeConfig=function(t){var n=this;return Object.values(this.configRules).every(function(e){e=e(t);return!e||(n.player.log(e),!1)})},A.prototype.mergePlaytimeLimitConfigs=function(e){var n=this,r=u.__assign({},Se);return e.forEach(function(e){var t=e.startPoint,e=e.endPoint;r=n.mergeStartPoint(r,t),r=n.mergeEndPoint(r,e)}),r},A.prototype.mergeStartPoint=function(e,t){return this.shouldUpdateStartTime(e,t)?u.__assign(u.__assign({},e),{startTime:t.value,startPriority:t.priority||0}):e},A.prototype.shouldUpdateStartTime=function(e,t){var n,r,o;return!!t&&(n=t.value,t=void 0===(t=t.priority)?0:t,r=e.startTime,o=e.startPriority,n<e.endTime)&&(o<t||t===o&&r<n)},A.prototype.mergeEndPoint=function(e,t){return this.shouldUpdateEndTime(e,t)?u.__assign(u.__assign({},e),{endTime:t.value,endPriority:t.priority||0,endState:t.endState||Re}):e},A.prototype.shouldUpdateEndTime=function(e,t){var n,r,o;return!!t&&(n=t.value,t=void 0===(t=t.priority)?0:t,r=e.startTime,o=e.endPriority,e=e.endTime,r<n)&&(o<t||t===o&&n<e)},A.prototype.onConfigChange=function(){if(this.limitRange=this.mergePlaytimeLimitConfigs(Object.values(this.limitConfigMap)),!(this.player.playtime>=this.range.startTime))return this.seekPlayer(this.range.startTime),u.__assign({},this.limitRange)},A.prototype.hookVideoCanplay=function(){!this.isCanplayEmitted&&this.canplaySeekPos&&(this.player.seek(this.canplaySeekPos),this.canplaySeekPos=null),this.isCanplayEmitted=!0},A.prototype.seekPlayer=function(e){this.isCanplayEmitted?this.player.seek(this.canplaySeekPos):this.canplaySeekPos=e},A.pluginName="playtimeLimiter",A);function A(){var t=null!==we&&we.apply(this,arguments)||this;return t.configRules=Le,t.nextId=0,t.limitConfigMap={},t.isCanplayEmitted=!1,t.canplaySeekPos=null,t.hookVideoTimeupdate=function(e){e=e.playtime;if(!(e<t.range.endTime))return t.player.corePlayer.stop(t.range.endState),d.EvtEmitter.STOP_IMMEDIATE_PROPAGATION},t.hookPlaySessionEnd=function(){t.isCanplayEmitted=null,t.canplaySeekPos=null},t}function ke(e){var t=e.data,n=void 0===(n=e.url)?"":n,e=void 0!==(e=e.forceImage)&&e,t=Ve(void 0===t?{}:t);!e&&t.length>Ke?d.netTool.xhr({method:"POST",url:n,withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t}):(new Image).src="".concat(n,"&").concat(t)}var Be,Ve=function(n){void 0===n&&(n={});var e=Object.keys(n).reduce(function(e,t){return e[t]=encodeURIComponent(null!=(t=n[t])?t:""),e},{_dc:Math.random()});return d.urlTool.object2string(e,"&")},Ke=2048,g=(Be=X,u.__extends(m,Be),m.prototype.saveToLS=function(e,t){var n=this.getPrevData();n[e]={data:t,ts:Date.now()},d.lsTool.setData(this.FLOW_DATA_KEY,JSON.stringify(n))},m.prototype.removeFromLS=function(e){var t=this.getPrevData();delete t[e],d.lsTool.setData(this.FLOW_DATA_KEY,JSON.stringify(t))},m.prototype.reportPrev=function(){var t=this,n=this.getPrevData();Object.keys(n).forEach(function(e){n[e].ts+t.RELEASE_DELAY<Date.now()&&(t.report(n[e].data),delete n[e])}),d.lsTool.setData(this.FLOW_DATA_KEY,JSON.stringify(n))},m.prototype.report=function(e){var t;if(void 0===e&&(e={}),!d.uaTool.spider){e=u.__assign(u.__assign({},this.reportHeader),e);if(this.reporter({data:e,url:this.REPORT_URL,key:this.REPORT_KEY,forceImage:this.config.forceImage}),"function"==typeof(null==(t=this.config)?void 0:t.onAfterReport))try{this.config.onAfterReport(e)}catch(e){}}},m.prototype.handlePageHide=function(e){void 0===e&&(e={}),!d.uaTool.spider&&this.reporterForPageHide&&(e=u.__assign(u.__assign({},this.reportHeader),e),this.reporterForPageHide({data:e,url:this.REPORT_URL,key:this.REPORT_KEY}))},m.prototype.getPrevData=function(){var t,e=d.lsTool.getData(this.FLOW_DATA_KEY)||"{}";try{t=JSON.parse(e)}catch(e){t={}}return t},m);function m(e,t,n){e=Be.call(this,e,t,n)||this;return e.RELEASE_DELAY=3e5,e.reporter=ke,e.reportedEvt={},e.FLOW_DATA_KEY="",e.REPORT_URL="",e.REPORT_KEY="",e.config=t,e}v.loadBeaconSDK=function(){var e=this;return"function"==typeof window.BeaconAction?Promise.resolve():v.SDKLoadingDefer=v.SDKLoadingDefer||new Promise(function(r,o){return u.__awaiter(e,void 0,void 0,function(){var t,n;return u.__generator(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:if(!(t<3))return[3,6];e.label=2;case 2:return e.trys.push([2,4,,5]),[4,d.domTool.loadScript("//beacon.cdn.qq.com/sdk/4.5.13/beacon_web.min.js")];case 3:return e.sent(),r(),[3,6];case 4:return n=e.sent(),n=n,[3,5];case 5:return t++,[3,1];case 6:return o(n),[2]}})})})},v.flushQueue=function(e){v.queues[e]&&v.instances[e]&&(v.queues[e].forEach(function(e){v.report(e)}),v.queues[e]=[])},v.clear=function(e){v.queues[e]=[]},v.report=function(e){var t=e.data,n=e.key,r=v.instances[n],o=(t||{}).stepname;r?r.onDirectUserAction(o,t):v.queues[n].push(e)},v.reportWhenPageHide=function(e){var t=e.data,e=e.key,e=v.instances[e],n=(t||{}).stepname;e&&e.onSendBeacon(n,t)},v.register=function(o,i){return u.__awaiter(this,void 0,void 0,function(){var t,n,r;return u.__generator(this,function(e){switch(e.label){case 0:if(n=!1,"object"===(void 0===(t=o)?"undefined":_typeof(o))&&(t=o.appKey,n=!!o.isOversea),v.queues[t])return[2];v.queues[t]=[],i&&(v.SDKLoadingDefer=i),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,v.loadBeaconSDK()];case 2:return e.sent(),v.SDKLoadingDefer=null,r=new window.BeaconAction({appkey:t,strictMode:!1,isOversea:n}),v.instances[t]=r,v.flushQueue(t),[3,4];case 3:return e.sent(),[3,4];case 4:return[2]}})})},v.instances={},v.queues={};var y=v;function v(){}function Ue(){var e=d.cookieTool.get("luin")||d.cookieTool.get("uin");return e=e&&e.replace(/\D/g,"").replace(/^0+/,"")}(E=Fe=Fe||{}).Web="web",E.H5="h5";var Fe,Ye,Qe={cdnuip:"",iqq:"",pvid:"",qqopen_id:l.hc_openid,playno:l.flowid,cdnid:l.cdnid,guid:l.guid,fplayerver:l.playerver,dsip:"",sstrength:"",devtype:"",nettype:"",freetype:"",platform:l.platform,vplatform:l.platform,codec:l.codec,device:l.device,resolution:l.resolution,osver:l.osver,playertype:l.playertype,appver:l.appVer,use_p2p:l.p2p,p2p_play:l.p2p,p2pver:l.p2pver,playtype:"",scenesid:l.sid,sid:l.vid,livepid:l.livepid,contentid:l.cid,drm:l.drmtype,videocapability:l.videoCapability,playtime:"",isuserpay:"",live_type:"",xserverip:"",durl:"",lookback:"",live_tag:"",extraInfo:"",spanId:"",tuid:"",ext1:"",ext2:"",ext3:""},He=(Ye=g,u.__extends(qe,Ye),Object.defineProperty(qe.prototype,"reportHeader",{get:function(){var e,t=this.config.paramsKey,t=void 0===t?{}:t,n=this.player.getCommonKv;return u.__assign({videocapability:n(t.videocapability)||"",cdnuip:n(t.cdnuip)||"",iqq:n(t.iqq)||Ue(),qqopen_id:n(t.qqopen_id)||"",pvid:d.cookieTool.get("pgv_pvid")||"",playno:n(t.playno)||"",cdnid:n(t.cdnid)||"",guid:n(t.guid)||"",fplayerver:n(t.fplayerver)||"",dsip:n(t.dsip)||"",sstrength:n(t.sstrength)||0,devtype:n(t.devtype)||0,nettype:n(t.nettype)||100,codec:n(t.codec)||d.CODEC.H264,freetype:n(t.freetype)||0,platform:n(t.platform)||"",vplatform:n(t.platform)||"",device:n(t.device)||"",resolution:n(t.resolution)||"",osver:n(t.osver)||"",playertype:n(t.playertype)||0,appver:n(t.appver)||"",use_p2p:n(t.use_p2p)||0,p2p_play:n(t.p2p_play)||0,p2pver:n(t.p2pver)||"",playtype:n(t.playtype)||1,scenesid:n(t.scenesid)||0,drm:n(t.drm)||0,sid:n(t.sid)||0,livepid:n(t.livepid)||0,contentid:n(t.contentid)||0,playtime:n(t.playtime)||0,isuerpay:n(t.isuserpay)||0,live_type:n(t.live_type)||0,xserverip:n(t.xserverip)||"",durl:n(t.durl)||(null==(e=null==(e=this.player)?void 0:e.currentVideoInfo)?void 0:e.loadingUrl)||"",lookback:n(t.lookback)||0,live_tag:n(t.live_tag)||0,extraInfo:n(t.extraInfo)||"",spanId:n(t.spanId)||"",tuid:n(t.tuid)||"",kernel:this.player.kernelName,plat_code:d.uaTool.mobile?Fe.H5:Fe.Web,domain:d.urlTool.getDomainOfURL(d.urlTool.getTopFrameUrl()),seq:this.seq,ext1:n(t.ext1)||"",ext2:n(t.ext2)||"",ext3:n(t.ext3)||""},this.flowHeader)},enumerable:!1,configurable:!0}),qe.prototype.destroy=function(){this.endPeriodReport(),y.clear(this.REPORT_KEY),Ye.prototype.destroy.call(this)},qe.prototype.report=function(e){Ye.prototype.report.call(this,e),this.seq=this.seq+1},qe.pluginName="live-qa-reporter",qe);function qe(e,t,n){var o=Ye.call(this,e,t,n)||this,t=(o.REPORT_KEY="0WEB0CN7W9446C2I",o.seq=0,o.lastPlayDuration=0,o.bufferHistory=[],o.flowHeader={cnntime:0,maxspeed:0,testspeed:0,downspeed:0,recnncount:0,loadingtime:0,blockcount:0,blocktime:0,errorcode:0,geturltime:0,fullecode:"",prdlength:0,get_stream_data_duration:0,get_sync_frame_duration:0,live_delay:0},o.isSettingLevel=!1,o.setEvtHandler=function(){o.msg.on(c.H5_EXT_EVENT.DATASET_STATE_UPDATE,o.onStateChange),o.player.on(d.PLAY_EVENT.RETRY_BACKURL,o.onRetryUrl)},o.onRetryUrl=function(){o.flowHeader.recnncount=o.flowHeader.recnncount+1},o.onStateChange=function(e){var t,e=e.data,n=e.key;(t={})[c.DATA_STATE.LOAD_END]=o.onLoad,t[c.DATA_STATE.BUFFER_END]=o.onBuffer,t[c.DATA_STATE.GET_INFO_END]=o.onGetinfoEnd,t[c.DATA_STATE.SET_LEVEL_START]=o.onSetLevel,t[c.DATA_STATE.SESSION_START]=o.onSessionStart,t[c.DATA_STATE.SESSION_END]=o.onSessionEnd,t[c.DATA_STATE.CODEC_DEGRADE]=o.onCodecDegrade;t[n]&&t[n](e)},o.onSessionStart=function(){o.resetLoopData(),o.seq=0},o.onSessionEnd=function(e){e=e.newVal,e=(void 0===e?{}:e).code;o.onPeriod({code:e}),o.seq=0,o.endPeriodReport(),o.reportedEvt={}},o.startPeriodReport=function(){o.endPeriodReport(),o.period=setInterval(o.onPeriod,6e4)},o.endPeriodReport=function(){o.period&&(clearInterval(o.period),o.period=null)},o.onSetLevel=function(){o.isSettingLevel=!0,o.onPeriod(),o.endPeriodReport()},o.onBuffer=function(e){var t=e.newVal,e=e.startEvent,t=(void 0===t?{}:t).ftime,e=(void 0===e?{}:e).ftime;t-e<=1200||o.bufferHistory.push({stime:e,etime:t})},o.onGetinfoEnd=function(e){var t=e.newVal,e=e.startEvent,t=t.ftime,e=e.ftime;o.flowHeader.geturltime=t-e},o.onCodecDegrade=function(e){var e=e.newVal,e=void 0===e?{}:e,t=e.ftime,e=e.code;o.report({step:701,stepname:"codec_degrade",etime:t,code:e})},o.onLoad=function(e){var t,n;o.reportedEvt[205]&&!o.isSettingLevel||(o.reportedEvt[205]=!0,o.isSettingLevel=!1,t=e.startEvent,(n=(e=void 0===(e=e.newVal)?{}:e).code)===c.ErrorCode.SUC&&(o.flowHeader.loadingtime=e.ftime-(void 0===t?{}:t).ftime,o.flowHeader.errorcode=n,o.flowHeader.fullecode=n,o.report({step:205,stepname:"live_loading",code:n}),o.startPeriodReport()))},o.onPeriod=function(e){var e=(e||{code:c.ErrorCode.SUC}).code,e=void 0===e?c.ErrorCode.SUC:e,t=o.bufferHistory.reduce(function(e,t){return[e[0]+1,e[1]+(t.etime-t.stime)]},[0,0]),n=t[0],t=t[1],r=o.player.dataset.getStats().playDuration,n=(o.flowHeader.blockcount=n,o.flowHeader.blocktime=t,o.flowHeader.prdlength=r-o.lastPlayDuration,o.flowHeader.errorcode=e,{step:(o.flowHeader.fullecode=e)===c.ErrorCode.SUC?263:150,stepname:e===c.ErrorCode.SUC?"live_period":"live_error",code:e});o.report(n),o.resetLoopData(),o.lastPlayDuration=r},o.resetLoopData=function(){o.bufferHistory=[],o.flowHeader=u.__assign(u.__assign({},o.flowHeader),{blockcount:0,blocktime:0,errorcode:0,loadingtime:0,fullecode:"",prdlength:0,recnncount:0,downspeed:0,live_delay:0})},e.config.liveQaReporterConfig);return o.config={paramsKey:u.__assign(u.__assign({},Qe),(null==t?void 0:t.paramsKey)||{}),onAfterReport:null==t?void 0:t.onAfterReport,onBeforeReport:null==t?void 0:t.onBeforeReport},o.setEvtHandler(),y.register({appKey:o.REPORT_KEY,isOversea:!(null==t||!t.isOversea)},null==t?void 0:t.externalBeaconDefer),o.log("live-qa-reporter registered to ".concat(o.REPORT_KEY,", oversea: ").concat(!(null==t||!t.isOversea))),o.reporter=y.report,o}Ge.prototype.destroy=function(){this.unbindCoreEvents()},Ge.prototype.init=function(e,t){this.adPlayer&&this.unbindCoreEvents();var n=e.currentVideoInfo;n&&(this.adPlayer=e,this.adType=t,this.bindCoreEvents(),this.reportData={},this.reportData[n.uid]={seq:0,flowidSuffix:"ad".concat(this.getAdClipNumber()),load:Date.now()})},Ge.prototype.getAdClipNumber=function(){return Object.keys(this.reportData).length},Ge.prototype.bindCoreEvents=function(){this.adPlayer.on(d.PLAY_EVENT.STATE_CHANGE,this.onStateChange),this.adPlayer.on(d.PLAY_EVENT.ERROR,this.onError),this.adPlayer.on(d.PLAY_EVENT.VIDEONODE_FIRST_PLAYING,this.onFirstPlaying),this.adPlayer.on(d.PLAY_EVENT.VIDEONODE_CHANGE,this.onVideoNodeChange)},Ge.prototype.unbindCoreEvents=function(){this.adPlayer.off(d.PLAY_EVENT.STATE_CHANGE,this.onStateChange),this.adPlayer.off(d.PLAY_EVENT.ERROR,this.onError),this.adPlayer.off(d.PLAY_EVENT.VIDEONODE_FIRST_PLAYING,this.onFirstPlaying),this.adPlayer.off(d.PLAY_EVENT.VIDEONODE_CHANGE,this.onVideoNodeChange)},Ge.prototype.emitToMainReporter=function(e,t){e=u.__assign(u.__assign({code:c.ErrorCode.SUC},e),{flowid:t.flowidSuffix,seq:t.seq,scenesid:We[this.adType]||We.otherAd,duration:this.adPlayer.duration,kernel:this.adPlayer.kernelName,vid:"",fmt:"",rate:"",cdnid:"",cdnip:"",drm:"",definition:"",dltype:""});t.seq+=1,this.reporterPlugin.emit("adReport",e)};var b,We,je=Ge;function Ge(e){var o=this;this.reportData={},this.currentBufferHistory=[],this.onStateChange=function(e){var t,n=e.data,r=n.new,n=n.old;(t={})[d.VIDEO_STATE.CANPLAY]=o.onCanPlay,t[d.VIDEO_STATE.BUFFERING]=o.onBuffering,t[d.VIDEO_STATE.END]=o.onEnd;t[r]&&t[r](e.data.videoInfo,n)},this.onError=function(e){var t,n,r=e.data.videoInfo;r&&(e=r.uid,n=r.error,e=o.reportData[e])&&(0<=e.load&&(o.emitToMainReporter({code:n.code,step:"30",stime:e.load,stepname:b.FIRST_LOAD,etime:Date.now(),url:r.loadingUrl,urlIndex:(null==(t=null==(t=r.config)?void 0:t.backupUrls)?void 0:t.findIndex(function(e){return e===r.loadingUrl}))||-1},e),e.load=-1),o.emitToMainReporter({step:"50",playDuration:r.playtime,code:n.code,stepname:b.END,tbcount:0,tbduration:0,scount:0,etime:Date.now(),bcount:o.currentBufferHistory.length,tduration:o.currentBufferHistory.reduce(function(e,t){return e+(t.etime-t.stime)},0)},e))},this.onFirstPlaying=function(e){var t,e=e.data.videoInfo;e&&(t=o.reportData[e.uid])&&(0<=t.load&&o.reportFirstLoad(e,t),e=Date.now(),e={step:"32",stepname:b.FIRST_RENDERING,stime:e,etime:e,code:c.ErrorCode.SUC},o.emitToMainReporter(e,t))},this.onVideoNodeChange=function(e){e=e.data.videoInfo;e&&!o.reportData[e.uid]&&(o.reportData[e.uid]={seq:0,flowidSuffix:"_ad".concat(o.getAdClipNumber()),load:Date.now()})},this.reportFirstLoad=function(t,e){var n=null!=(n=null==(n=null==(n=null==(n=o.adPlayer.currentVideoInfo)?void 0:n.extraVars)?void 0:n.stream)?void 0:n.cacheSize)?n:0,r={step:"30",stepname:b.FIRST_LOAD,stime:e.load,etime:Date.now(),url:t.loadingUrl,urlIndex:(null==(r=null==(r=t.config)?void 0:r.backupUrls)?void 0:r.findIndex(function(e){return e===t.loadingUrl}))||-1,code:c.ErrorCode.SUC,cachesize:n};o.emitToMainReporter(r,e),e.load=-1},this.onCanPlay=function(e){var t,n;e&&(t=o.reportData[e.uid])&&(0<=t.load?o.reportFirstLoad(e,t):0<=t.buffer&&(e=Date.now(),n=t.buffer,t.buffer=-1,e-n<=1200||(o.currentBufferHistory.push({stime:n,etime:Date.now()}),e={step:"35",stime:n,stepname:b.BUFFERING,etime:Date.now(),ptime:o.adPlayer.playtime,code:c.ErrorCode.SUC},o.emitToMainReporter(e,t))))},this.onEnd=function(e){var t;e&&(t=o.reportData[e.uid])&&(e={step:"50",playDuration:e.playtime,code:c.ErrorCode.SUC,stepname:b.END,tbcount:0,tbduration:0,scount:0,etime:Date.now(),bcount:o.currentBufferHistory.length,tduration:o.currentBufferHistory.reduce(function(e,t){return e+(t.etime-t.stime)},0)},o.emitToMainReporter(e,t))},this.onBuffering=function(e){e&&(e=o.reportData[e.uid])&&(e.buffer=Date.now())},this.reporterPlugin=e}(E=b=b||{}).INIT="init_player",E.GETINFO="get_cdn_url",E.FIRST_LOAD="first_load",E.FIRST_RENDERING="first_rendering",E.BUFFERING="second_buffering",E.SEEKING="user_seek",E.END="play_done",E.CODEC_DEGRADE="codec_degrade",(E=We=We||{})[E.preAd=400]="preAd",E[E.ZT=401]="ZT",E[E.postAd=402]="postAd",E[E.otherAd=403]="otherAd",E[E.video=421]="video";var ze,Xe={platform:l.platform,vplatform:l.platform,flowid:l.flowid,uin:"",QQopenid:l.hc_openid,WXopenid:l.hc_openid,logintype:l.hc_main_login,guid:l.guid,uip:"",cdnuip:l.cdnuip,codec:l.codec,cdnip:l.cdnip,online:l.online,p2p:l.p2p,sstrength:l.sstrength,network:l.network,speed:l.speed,device:l.device,resolution:l.resolution,testid:l.testid,osver:l.osver,p2pver:l.p2pver,appver:l.appVer,playerver:l.playerver,playertype:l.playertype,confid:l.confid,cdnid:l.cdnid,drm:l.drmtype,scenesid:"",playtype:"",dltype:l.dltype,vid:l.vid,definition:l.currentDefn,fmt:l.fmt,rate:l.rate,videocapability:l.videoCapability,isad:"",duration:"",kernel:"",ext1:"",ext2:"",ext3:""},Je=(ze=g,u.__extends(T,ze),Object.defineProperty(T.prototype,"seekStat",{get:function(){var e=this.seekHistory.reduce(function(e,t){var n=e[0],r=e[1],t=t.letime-t.lstime;return 1200<t?[n+1,r+t]:e},[0,0]);return{tbcount:e[0],tbduration:e[1],scount:this.seekHistory.length}},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"bufferStat",{get:function(){return{tduration:this.bufferHistory.reduce(function(e,t){return e+(t.etime-t.stime)},0),bcount:this.bufferHistory.length}},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"reportHeader",{get:function(){var e,n=this,r=this.config.paramsKey,o=this.player.getCommonKv,t=this.player.dataset.getStats(),i=t.averageDecodeTimeInMs,t=t.frameDroppedInPercentage;return Object.entries(this.initData).forEach(function(e){var t=e[0];e[1]||(n.initData[t]=o(r[t])||"")}),{videocapability:o(r.videocapability)||"",platform:o(r.platform)||"",vplatform:o(r.platform)||"",flowid:o(r.flowid)||"",uin:o(r.uin)||Ue(),QQopenid:o(r.QQopenid)||"",WXopenid:o(r.WXopenid)||"",logintype:o(r.logintype)||0,guid:o(r.guid)||"",uip:o(r.uip)||"",cdnuip:o(r.cdnuip)||"",cdnip:o(r.cdnip)||"",online:o(r.online)||1,p2p:o(r.p2p)||0,sstrength:o(r.sstrength)||0,network:o(r.network)||0,speed:o(r.speed)||0,device:o(r.device)||"",resolution:o(r.resolution)||"",testid:o(r.testid)||0,codec:o(r.codec)||d.CODEC.H264,osver:o(r.osver)||"",p2pver:o(r.p2pver)||"",appver:o(r.appver)||"",playerver:o(r.playerver)||"",confid:o(r.confid)||0,playertype:o(r.playertype)||0,cdnid:this.initData.cdnid,scenesid:o(r.scenesid)||We.video,playtype:0,dltype:o(r.dltype)||0,vid:o(r.vid)||"",fmt:this.initData.fmt,rate:this.initData.rate,drm:o(r.drm)||0,definition:o(r.definition)||"",duration:Math.round(o(r.duration)||this.player.duration),seq:this.seq,kernel:null!=(e=this.player.kernelName)?e:"unknown",domain:d.urlTool.getDomainOfURL(d.urlTool.getTopFrameUrl()),isad:0,ext1:o(r.ext1)||"",ext2:o(r.ext2)||"",ext3:o(r.ext3)||"",framedrop:t,avgdecodecost:i}},enumerable:!1,configurable:!0}),T.prototype.destroy=function(){window.removeEventListener("pagehide",this.onPageHide),y.clear(this.REPORT_KEY),ze.prototype.destroy.call(this)},T.prototype.report=function(e){ze.prototype.report.call(this,e),this.seq=this.seq+1},T.pluginName="vod-qa-reporter",T);function T(n,e,t){var s=ze.call(this,n,e,t)||this,e=(s.REPORT_KEY="0WEB0QEJW44KW5A5",s.FLOW_DATA_KEY="__thumbplayer_vod_qa_report__",s.seq=0,s.bufferHistory=[],s.seekHistory=[],s.initData={fmt:"",rate:"",cdnid:""},s.bufferCount=0,s.seekCount=0,s.setEvtHandler=function(){s.msg.on(c.H5_EXT_EVENT.DATASET_STATE_UPDATE,s.onStateChange),s.player.on(d.PLAY_EVENT.SETLEVEL_OVER,function(){s.bufferCount=0,s.seekCount=0}),window.addEventListener("pagehide",s.onPageHide)},s.onPageHide=function(){s.handlePageHide(s.collectFinalData())},s.onStateChange=function(e){var t,e=e.data,n=e.key;(t={})[c.DATA_STATE.INIT]=s.onPlayerInit,t[c.DATA_STATE.LOAD_END]=s.onLoad,t[c.DATA_STATE.BUFFER_END]=s.onBuffer,t[c.DATA_STATE.GET_INFO_END]=s.onGetinfoEnd,t[c.DATA_STATE.SEEK_END]=s.onSeek,t[c.DATA_STATE.SESSION_END]=s.onPlaySessionEnd,t[c.DATA_STATE.FIRST_PLAY]=s.onFirstPlay,t[c.DATA_STATE.SESSION_START]=s.reset,t[c.DATA_STATE.CODEC_DEGRADE]=s.onCodecDegrade,t[c.DATA_STATE.RETRY_BACKURL]=function(){s.bufferCount=0,s.seekCount=0};t[n]&&t[n](e)},s.onPlayerInit=function(e){var e=e.newVal,t=e.ftime,e=e.ext,e=(void 0===e?{}:e).stime;s.report({stepname:b.INIT,step:"5",stime:e,etime:t,code:c.ErrorCode.SUC})},s.onGetinfoEnd=function(e){var t=e.newVal,e=e.startEvent,n=t.ftime,t=t.code,e=e.ftime;s.report({stepname:b.GETINFO,step:"15",stime:e,etime:n,code:t})},s.onLoad=function(e){var t=e.newVal,t=void 0===t?{}:t,e=e.startEvent,e=(void 0===e?{}:e).ftime,n=t.ftime,r=t.currentUrl,o=t.urlIndex,t=t.code;s.report({stepname:b.FIRST_LOAD,step:"30",stime:e,etime:n,url:r||"",urlindex:o+1,fileopenedtime:0,firstpacketreadtime:0,code:t})},s.onFirstPlay=function(){var e;s.reportedEvt[b.FIRST_RENDERING]||(s.reportedEvt[b.FIRST_RENDERING]=!0,e=+new Date,s.report({step:"32",stepname:b.FIRST_RENDERING,stime:e,etime:e,code:c.ErrorCode.SUC}))},s.onBuffer=function(e){var t=e.newVal,t=void 0===t?{}:t,e=e.startEvent,e=void 0===e?{}:e,n=t.ftime,r=t.playtime,o=t.currentUrl,t=t.code,i=e.ftime,e=e.prevState===d.VIDEO_STATE.SEEKING?1:0,a=1<s.player.playbackRate?2:1;n-i<=1200||(s.bufferHistory.push({stime:i,etime:n}),s.bufferCount<20&&(s.report({step:"35",stepname:b.BUFFERING,ptime:r,levent:e,stime:i,etime:n,scene:a,format:s.player.getCommonKv(s.config.paramsKey.fmt)||0,url:o||"",reason:0,code:t,vt:s.player.getCommonKv(s.config.paramsKey.cdnid)||0}),s.bufferCount+=1))},s.onSeek=function(e){var t=e.newVal,t=void 0===t?{}:t,e=e.startEvent,e=void 0===e?{}:e,n=t.ftime,r=t.playtime,o=t.code,t=t.ext,i=e.ftime,e=e.playtime;(void 0===t?{}:t).isUserSeek&&(s.seekHistory.push({lstime:i,letime:n}),s.seekCount<20)&&(s.report({step:"40",stepname:b.SEEKING,lstime:i,letime:n,pstime:e,petime:r,format:s.player.getCommonKv(s.config.paramsKey.fmt)||0,code:o}),s.seekCount+=1)},s.onPlaySessionEnd=function(e){var t,n;s.reportedEvt[b.END]||(s.reportedEvt[b.END]=!0,t=(e=void 0===(e=e.newVal)?{}:e).ftime,e=e.code,n=s.player.dataset.getStats().playDuration,e=[0===e.indexOf(c.ErrorCode.GETINFO_SERVER_CODE_PREFIX),0===e.indexOf("70014"),0===e.indexOf("7004"),"70011112"===e,"70011113"===e].some(function(e){return e})?c.ErrorCode.SUC:e,s.report(u.__assign(u.__assign({step:"50",stepname:b.END,etime:t,playduration:n,code:e},s.seekStat),s.bufferStat)),s.removeFromLS(s.player.getCommonKv(l.flowid)),s.seq=0)},s.onCodecDegrade=function(e){var e=e.newVal,e=void 0===e?{}:e,t=e.ftime,e=e.code;s.report({step:"701",stepname:b.CODEC_DEGRADE,etime:t,code:e})},s.onInit=function(){s.reportPrev()},s.collectFinalData=function(){var e=+new Date,t=s.player.getCommonKv(l.flowid);if(t&&!s.reportedEvt[b.END])return t=s.player.dataset.getStats().playDuration,u.__assign(u.__assign({step:"50",stepname:b.END,etime:e,code:c.ErrorCode.SUC,playduration:t},s.seekStat),s.bufferStat)},s.reset=function(){s.reportedEvt={},s.initData.fmt="",s.initData.rate="",s.initData.cdnid="",s.bufferHistory=[],s.seekHistory=[],s.bufferCount=0,s.seekCount=0},n.config.vodQaReporterConfig);return s.config={paramsKey:u.__assign(u.__assign({},Xe),(null==e?void 0:e.paramsKey)||{}),onAfterReport:null==e?void 0:e.onAfterReport,onBeforeReport:null==e?void 0:e.onBeforeReport},s.setEvtHandler(),y.register({appKey:s.REPORT_KEY,isOversea:!(null==e||!e.isOversea)},null==e?void 0:e.externalBeaconDefer),s.log("vod-qa-reporter registered to ".concat(s.REPORT_KEY,", oversea: ").concat(!(null==e||!e.isOversea))),s.reporter=y.report,s.reporterForPageHide=y.reportWhenPageHide,s.onInit(),s.adReportHelper=new je(s),s.player.on(c.H5_PLAY_EVENT.AD_REQ_ASSETS_START,function(e){var t=e.data;setTimeout(function(){var e=_(null==n?void 0:n.config.instanceId)[t.adType===c.AD_TYPE.ZT?"ztVideoAdPlayer":"videoAdPlayer"];e&&s.adReportHelper.init(e,t.adType)})}),s.on("adReport",function(e){ze.prototype.report.call(s,u.__assign(u.__assign({},e.data),{flowid:"".concat(s.reportHeader.flowid,"_").concat(e.data.flowid),isad:1}))}),s}var $e,E={VOD_FLOW_REPORTER:"vod-flow-reporter",LIVE_FLOW_REPORTER:"live-flow-reporter",GETINFO_LIVE:"getinfo-live",GETINFO_VOD:"getinfo-vod",GETINFO_TC:"getinfo-tc",BARRAGE:"barrage",MARKID:"markid",CONTEXT_MENU:"context-menu",WATERMARK:"ui-watermark",UI_PREVIEW:"ui-preview",UI_PREVIEW_LIST:"ui-preview-list",POLL_DURATION:"poll-duration",REPORTERS:"reporters",UI_ROLE_FILTER:"ui-role-filter",SETTING_BTN:"setting-btn",CTRLBAR:"ctrlbar",ERROR_PAGE:"error-page",FULLSCREEN_RATIO:"fullscreen-ratio",INFO_PANEL:"info-panel",LIVE_POLL:"live-poll",POSTER:"poster",SUBTITLE:"subtitle",TIPS:"tips",UI_LOADING:"ui-loading",VR:"vr",TVK_UTILS:"tvk-utils",UNMUTE_BTN:"unmute-btn"},Ze={"vod-flow-reporter":{cdnPath:"thumbplayer-plugin-atta-reporter",version:"1.4.104"},"live-flow-reporter":{cdnPath:"thumbplayer-plugin-atta-reporter",version:"1.4.104"},"getinfo-live":{pluginName:"__thumbplayer-video-request",version:"1.4.133"},"getinfo-vod":{pluginName:"__thumbplayer-video-request",version:"1.4.133"},"getinfo-tc":{pluginName:"__thumbplayer-video-request",version:"1.4.125"},barrage:{pluginName:"Barrage",version:"1.4.133"},markid:{pluginName:"ui-markid",version:"1.4.133"},"context-menu":{cdnPath:"thumbplayer-plugin-ui-contextmenu",version:"1.4.133"},"ui-preview-list":{cdnPath:"thumbplayer-plugin-ui-preview",version:"1.4.133"},"ui-preview":{cdnPath:"thumbplayer-plugin-ui-preview",version:"1.4.133"},"ui-watermark":{cdnPath:"thumbplayer-plugin-watermark",version:"1.4.133"},"poll-duration":{version:"1.4.133"},reporters:{version:"1.4.133"},"ui-role-filter":{version:"1.4.133"},"setting-btn":{version:"1.4.133"},ctrlbar:{version:"1.4.133"},"error-page":{version:"1.4.133"},"fullscreen-ratio":{version:"1.4.133"},"info-panel":{version:"1.4.133"},"live-poll":{version:"1.4.104"},poster:{version:"1.4.133"},subtitle:{version:"1.4.133"},tips:{version:"1.4.133"},"ui-loading":{version:"1.4.133"},vr:{version:"1.4.133"},"tvk-utils":{version:"1.4.133"},"unmute-btn":{version:"1.4.133"}},C=(c.H5_PAUSE_TYPE=void 0,(c.H5_PAUSE_TYPE||(c.H5_PAUSE_TYPE={})).USER_CLICK="user-click",c.AUTO_PLAY_POLICY=void 0,(C=c.AUTO_PLAY_POLICY||(c.AUTO_PLAY_POLICY={})).IN_MUTED="autoPlayInMuted",C.USER_GESTURE="autoPlayRequireByUserGesture",c.PictureDirection=void 0,(C=c.PictureDirection||(c.PictureDirection={})).NORMAL="normal",C.VERTICAL="vertical",C.HORIZON="horizon",$e=d.EvtEmitter,u.__extends(I,$e),I.prototype.createPlugin=function(e,t){var n=(t=void 0===t?{}:t).pluginName,n=void 0===n?e:n,r=H(n);if(!r)throw new Error("cannot find plugin: ".concat(n));this.triggerSetupEvent({name:e,plugin:r,instance:null},!0),$(e,r,this,t,{msg:this.pluginMsgProxy,api:this.playerApiProxy}),n===U&&(K(this.config.instanceId,this.plugins[U]),delete this.plugins[U]),this.triggerSetupEvent({name:e,plugin:r,instance:null})},I.prototype.createPlugins=function(e){var t=this;e.forEach(function(e){try{"string"==typeof e?t.createPlugin(e):t.createPlugin.apply(t,e)}catch(e){}})},I.prototype.triggerSetupEvent=function(e,t){var n=this,r="".concat((t=void 0===t?!1:t)?"before":"","pluginsetup");setTimeout(function(){n.pluginMsg.emit("".concat(r,":").concat(e.name),e)})},I.registerPlugin=q,I.deregisterPlugin=W,I.getPlugins=j,I.getPlugin=H,I.isFunctionPlugin=J,I.pluginExists=n,I.isBasicPlugin=J,I);function I(){var l=null!==$e&&$e.apply(this,arguments)||this;return l.plugins={},l.pluginMsg=new d.EvtEmitter,l.playerApiProxy={},l.pluginMsgProxy={on:l.pluginMsg.on.bind(l.pluginMsg),off:l.pluginMsg.off.bind(l.pluginMsg),once:l.pluginMsg.once.bind(l.pluginMsg)},l._destroyed=!1,l.loadPlugin=function(e){var t=e.config,n=e.timeout,r=e.version,o=e.crossOrigin,i=e.globalName,a=e.pluginName,s=void 0===a?i:a,_=e.insName,a=e.url;if(a||Ze[s])return!a&&Ze[s]&&(e=r||Ze[s].version,r=Ze[s].cdnPath||"thumbplayer-plugin-".concat(s),s=Ze[s].pluginName||s,a="//vm.gtimg.cn/thumbplayer/plugins/".concat(r,"/").concat(e,"/index.min.js")),_=_||s,d.domTool.loadScript(a,void 0,n,{crossOrigin:o}).then(function(){l._destroyed||(H(s)||q(s,window[i]),l.plugins[_])||l.createPlugin(_,u.__assign(u.__assign({},t),{pluginName:s}))});throw new Error("æ¨æä¼ å¥çæä»¶ä¸æ¯å®æ¹æä»¶ï¼å¿é¡»æä¾ url")},l}Object.defineProperty(P.prototype,"startParam",{get:function(){return this.config.startParam},set:function(e){this.config.startParam=e},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"flowid",{get:function(){return this.config.flowid},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"videoLoadParam",{get:function(){return this.config.startParam.videoLoadParam},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"videoReqInfoParam",{get:function(){return this.config.startParam.videoReqInfoParam},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"vid",{get:function(){return this.config.startParam.vid},enumerable:!1,configurable:!0}),P.prototype.getAdParam=function(e){return u.__assign({adType:e},this.startParam.adParam)},P.prototype.shouldRequest=function(){return!!this.config.videoReqInfoPlugin},P.prototype.setVideoInfo=function(){var n,r;return u.__awaiter(this,void 0,void 0,function(){var t;return u.__generator(this,function(e){switch(e.label){case 0:return this.vinfoCache&&this.vid&&this.shouldRequest()?[4,this.vinfoCache]:[2];case 1:return(t=e.sent())&&null!=(r=(n=this.config.videoReqInfoPlugin).setVideoInfo)&&r.call(n,this.vid,t),[2]}})})},P.prototype.getOutputData=function(){var n,r;return u.__awaiter(this,void 0,void 0,function(){var t;return u.__generator(this,function(e){switch(e.label){case 0:return this.vinfoCache&&this.vid?[4,this.vinfoCache]:[2];case 1:return(t=e.sent())?[2,null==(r=null==(n=this.config.videoReqInfoPlugin)?void 0:n.parseVideoInfo)?void 0:r.call(n,this.vid,t,{flowid:this.flowid})]:[2]}})})},P.prototype.requestVod=function(o,i){var a;return void 0===i&&(i=!0),u.__awaiter(this,void 0,void 0,function(){var t,n,r;return u.__generator(this,function(e){switch(e.label){case 0:return(r=this.config,t=r.videoReqInfoPlugin,n=r.startParam,r=r.flowid,this.shouldRequest())?(null!=(a=t.abort)&&a.call(t),[4,t.request(n.vid,u.__assign(u.__assign(u.__assign({},n.videoReqInfoParam),{flowid:r}),o),[],i)]):[2,null];case 1:return[2,e.sent()]}})})},P.prototype.requestRawVod=function(){this.vinfoCache=this.requestVod({},!1).then(function(e){return null==e?void 0:e.resData})};var et=P;function P(e){this.vinfoCache=null,this.adCache=null,this.config=e}function tt(e){return e.map(function(e){return[e[0].pluginName,e[1]]})}function nt(a){return function(e,t,n){var r,o=a,i=(o||(r=t.slice("on".length).toLowerCase(),t=Object.keys(d.PLAY_EVENT).find(function(e){return d.PLAY_EVENT[e].toLowerCase()===r}),o=(t?d.PLAY_EVENT:(t=Object.keys(c.H5_PLAY_EVENT).find(function(e){return c.H5_PLAY_EVENT[e].toLowerCase()===r}),c.H5_PLAY_EVENT))[t]),n.value);n.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o&&this.player?this.player.on(o,i.bind(this)):i.apply(this,e)}}}function rt(e,r,t){var o=t.value;t.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="";try{n=JSON.stringify(e)}catch(e){n="parse arg failed"}return this.setStateKv(r,{type:c.LOG_TYPE.API_INVOKE,ftime:Date.now(),ext:{from:"thumbplayer-h5",args:n}}),o.apply(this,e)}}function ot(e,n,t){var r=t.value;t.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!this["__hasRun".concat(n)])return this["__hasRun".concat(n)]=!0,r.apply(this,e)}}it=d.EvtEmitter,u.__extends(D,it),D.prototype.destroy=function(){this.removeAllListeners()},D.prototype.getName=function(){return""},D.prototype.pause=function(e){},D.prototype.resume=function(){},D.prototype.replay=function(e,t){return Promise.reject("replay not implemented! (".concat(this.getName(),")"))},D.prototype.start=function(){return Promise.resolve()},D.prototype.preload=function(){return Promise.resolve()},D.prototype.retry=function(e,t){};var it,at=D;function D(e){var t=it.call(this)||this;return t.flowid=e.flowid,t}c.FLOW_NODE_EVENT=void 0,(yt=c.FLOW_NODE_EVENT||(c.FLOW_NODE_EVENT={})).PRELOAD_NEXT="PRELOAD_NEXT",yt.PRELOAD="PRELOAD",yt.START="START",yt.END="END",yt.ABORT="ABORT";st=at,u.__extends(O,st),O.prototype.getName=function(){return"AdFlowNode.".concat(this.config.adType)},O.prototype.start=function(){if(this.logger.log("".concat(this.getName()," exec start")),this.emit(c.FLOW_NODE_EVENT.START,{name:this.getName()}),this.checkCanPlayAd())return this.isPreload=!1,this.bindAdEvents(),this.playAd();this.logger.log("".concat(this.getName()," skip exec start")),this.endFlow()},O.prototype.preload=function(){function t(){n.emit(c.FLOW_NODE_EVENT.PRELOAD_NEXT,{forcePreload:!0,name:n.getName()})}var e,n=this;this.logger.log("".concat(this.getName()," exec preload")),this.emit(c.FLOW_NODE_EVENT.PRELOAD,{name:this.getName()});if(this.checkCanPlayAd())return this.isPreload=!0,this.bindAdEvents(),null==(e=_(this.config.instanceId))?void 0:e.loadAd(this.startParam).then(function(e){!1===e&&t()}).catch(t);this.logger.log("".concat(this.getName()," skip exec preload")),t()},O.prototype.pause=function(){var e;this.logger.log("".concat(this.getName()," exec pause")),null!=(e=_(this.config.instanceId))&&e.pauseAd(this.config.adType)},O.prototype.resume=function(){var e;this.logger.log("".concat(this.getName()," exec resume")),null!=(e=_(this.config.instanceId))&&e.resumeAd(this.config.adType)},O.prototype.destroy=function(){var e=_(this.config.instanceId);e&&(e.off(c.H5_PLAY_EVENT.AD_END,this.onAdEnd),e.off(c.H5_PLAY_EVENT.AD_ASSETS_LOADED,this.onAdAssetsLoaded),e.off(c.H5_PLAY_EVENT.AD_AUTOPLAY_BLOCKED,this.onAdPlayBlocked)),st.prototype.destroy.call(this)},O.prototype.checkCanPlayAd=function(){var e=this.config,t=e.instanceId,e=e.reqInfo;return!(!_(t)||!this.startParam||(e.adCache&&(_(t).setAdInfo(e.adCache),e.adCache=null),0))},O.prototype.bindAdEvents=function(){var e;null!=(e=_(this.config.instanceId))&&e.on(c.H5_PLAY_EVENT.AD_END,this.onAdEnd),null!=(e=_(this.config.instanceId))&&e.on(c.H5_PLAY_EVENT.AD_ASSETS_LOADED,this.onAdAssetsLoaded)},O.prototype.playAd=function(){var e,t=this;return null==(e=_(this.config.instanceId))?void 0:e.playAd(this.startParam).catch(function(){return t.endFlow()})},Object.defineProperty(O.prototype,"startParam",{get:function(){var e=this.config,t=e.reqInfo,e=e.adType;return t.getAdParam(e)},enumerable:!1,configurable:!0}),O.prototype.endFlow=function(){this.emit(c.FLOW_NODE_EVENT.END,{name:this.getName()}),this.destroy()},O.prototype.isInValidAd=function(e){return e.adType!==this.config.adType},u.__decorate([ot,u.__metadata("design:type",Function),u.__metadata("design:paramtypes",[]),u.__metadata("design:returntype",void 0)],O.prototype,"bindAdEvents",null);var st,_t=O;function O(e){var n=this;return(n=st.call(this,e)||this).config=e,n.onAdEnd=function(e){var t,e=e.data;e.adType===c.AD_TYPE.PRE&&(n.config.corePlayer.volume=null==(t=_(n.config.instanceId))?void 0:t.getAdVolume()),n.isInValidAd(e)||n.endFlow()},n.onAdAssetsLoaded=function(e){e=e.data;n.isInValidAd(e)||n.emit(c.FLOW_NODE_EVENT.PRELOAD_NEXT,{name:n.getName()})},n.onAdPlayBlocked=function(e){e=e.data;n.isInValidAd(e)||(n.isPreload=!0)},n.logger=new d.Logger(e.instanceId,"AdFlowNode"),null!=(e=_(e.instanceId))&&e.on(c.H5_PLAY_EVENT.AD_AUTOPLAY_BLOCKED,n.onAdPlayBlocked),n}Object.defineProperty(w.prototype,"onFlowEnd",{get:function(){return this.config.onFlowEnd||function(){}},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onFlowEvts",{get:function(){return this.config.onFlowEvts||function(){}},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"currentFlowNode",{get:function(){return this.flowNodeList[this.currentFlowNodeIndex]},enumerable:!1,configurable:!0}),w.prototype.push=function(){for(var e,t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];n.forEach(function(e){return t.bindNodeEvents(e)}),(e=this.flowNodeList).push.apply(e,n)},w.prototype.setLastNode=function(e){this.lastNodeList.push(e)},w.prototype.clear=function(){this.flowNodeList.forEach(function(e){return e.destroy()}),this.flowNodeList=[],this.lastNodeList=[],this.currentFlowNodeIndex=0},w.prototype.bindNodeEvents=function(n){var e,r=this,o=((e={})[c.FLOW_NODE_EVENT.PRELOAD_NEXT]=function(e){var e=e.data;r.logger.log("".concat(n.getName()," emited: FLOW_NODE_EVENT.PRELOAD_NEXT")),(!r.config.disablePreload||null!=e&&e.forcePreload)&&null!=(e=r.getNextNode(n))&&e.preload()},e[c.FLOW_NODE_EVENT.END]=function(e){var t,e=e.data,e=(r.logger.log("".concat(n.getName()," emited: FLOW_NODE_EVENT.END")),e.videoEndState&&(r.videoEndState=e.videoEndState),n.removeAllListeners(),r.getNextNode(n));if(e){if(r.lastNodeList.includes(n))return t=n.getName(),r.logger.log("lastNodeList includes ".concat(t,", end")),r.onFlowEnd({code:c.ErrorCode.SUC,curFlowNodeName:t});r.currentFlowNodeIndex+=1,r.logger.log("next node start, current index is ".concat(r.currentFlowNodeIndex)),e.start()}else t=n.getName(),r.logger.log("no next node after ".concat(t,", clear")),r.clear(),r.onFlowEnd({code:c.ErrorCode.SUC,endState:r.videoEndState,curFlowNodeName:t}),r.videoEndState=""},e[c.FLOW_NODE_EVENT.ABORT]=function(e){var e=e.data,t=n.getName();r.logger.log("".concat(t," emited: FLOW_NODE_EVENT.ABORT")),r.clear(),r.onFlowEnd(u.__assign(u.__assign({},e),{endState:e.endState||d.END_STATE.ERROR,curFlowNodeName:t}))},e);Object.keys(c.FLOW_NODE_EVENT).forEach(function(e){n.on(e,function(e){var t=e.type,e=e.data;r.onFlowEvts(t,e),o[t]&&o[t]({data:e})})})},w.prototype.getNextNode=function(e){e=this.flowNodeList.indexOf(e);if(-1!==e)return this.flowNodeList[e+1]};var lt=w;function w(e){this.config=e,this.flowNodeList=[],this.currentFlowNodeIndex=0,this.lastNodeList=[],this.logger=new d.Logger(e.playerInstanceId,"FlowManager")}ct=at,u.__extends(dt,ct),dt.prototype.getName=function(){return"PreloadFlowNode"},dt.prototype.start=function(){return u.__awaiter(this,void 0,void 0,function(){var t,n,r,o,i,a,s,_,l=this;return u.__generator(this,function(e){switch(e.label){case 0:return i=this.config,t=i.reqInfo,n=i.videoEndTime,r=i.playerConfig,o=i.corePlayer,i=i.extEvtDispatcher,[4,t.getOutputData()];case 1:return(a=e.sent())&&a.kernelName&&!a.error?(i.emit(c.H5_EXT_EVENT.PRELOAD_GETINFO_OVER,a),s=a.kernelName,_=a.urlConfig,this.preloadKernel=s,d.kernelEvtBus.emit(d.PRELOAD_EVENT.START,{kernelName:s,urlConfig:_,videoLoadParam:t.videoLoadParam,playerConfig:r}),this.logger.log("start; kernelName=".concat(s)),this.preloadLoop=new d.TaskLoop(function(){var e=n||o.duration,e=Math.max(e-o.playtime,0);d.kernelEvtBus.emit(d.PRELOAD_EVENT.UPDATE,{kernelName:s,remainTime:e}),l.logger.log("update; kernelName=".concat(s,", remainTime=").concat(e)),e||l.preloadLoop.destroy()},d.LoopMode.Timer),this.preloadLoop.start(ft)):this.logger.error("preload() error; urlConfig=".concat(d.jsonTool.safelyStringify(a))),[2]}})})},dt.prototype.destroy=function(){var e;ct.prototype.destroy.call(this),d.kernelEvtBus.emit(d.PRELOAD_EVENT.STOP,{kernelName:this.preloadKernel}),this.logger.log("stop; kernelName=".concat(this.preloadKernel)),null!=(e=this.preloadLoop)&&e.destroy()};var ct,ut=dt;function dt(e){var t=ct.call(this,u.__assign(u.__assign({},e),{flowid:e.reqInfo.flowid}))||this;return t.config=e,t.logger=new d.Logger(e.instanceId,"PreloadFlowNode"),t}var pt,ft=1e3,Et=(pt=at,u.__extends(M,pt),M.prototype.getName=function(){return"RequestFlowNode.".concat(this.config.adType)},M.prototype.start=function(){return u.__awaiter(this,void 0,void 0,function(){return u.__generator(this,function(e){switch(e.label){case 0:return(this.logger.log("".concat(this.getName()," start")),this.emit(c.FLOW_NODE_EVENT.START,{name:this.getName()}),this.loadDefer)?[4,this.loadDefer]:[3,2];case 1:return e.sent(),[3,4];case 2:return[4,this.request()];case 3:e.sent(),e.label=4;case 4:return this.endFlow(),[2]}})})},M.prototype.preload=function(){var e=this;return this.emit(c.FLOW_NODE_EVENT.PRELOAD,{name:this.getName()}),this.isPreload=!0,this.loadDefer=this.request().then(function(){e.emit(c.FLOW_NODE_EVENT.PRELOAD_NEXT,{forcePreload:e.config.adType===c.AD_TYPE.PRE,name:e.getName()})}),this.loadDefer},M.prototype.request=function(){return u.__awaiter(this,void 0,void 0,function(){var t,n;return u.__generator(this,function(e){return this.logger.log("".concat(this.getName()," request")),t=this.config,n=t.reqInfo,t.adType===c.AD_TYPE.PRE&&n.requestRawVod(),[2]})})},M.prototype.destroy=function(){pt.prototype.destroy.call(this)},M.prototype.endFlow=function(){this.logger.log("".concat(this.getName()," end")),this.emit(c.FLOW_NODE_EVENT.END,{name:this.getName()}),this.destroy()},M);function M(e){var t=pt.call(this,u.__assign(u.__assign({},e),{flowid:e.reqInfo.flowid}))||this;return t.config=e,t.logger=new d.Logger(e.instanceId,"RequestFlowNode"),t}ht=at,u.__extends(x,ht),Object.defineProperty(x.prototype,"isLive",{get:function(){return this.corePlayer.config.type===d.PLAY_MODE.LIVE},enumerable:!1,configurable:!0}),x.prototype.getName=function(){return"VideoFlowNode"},x.prototype.start=function(){return u.__awaiter(this,void 0,void 0,function(){var t,n;return u.__generator(this,function(e){switch(e.label){case 0:return(this.logger.log("".concat(this.getName()," exec start")),this.emit(c.FLOW_NODE_EVENT.START,{name:this.getName()}),this.isPreload)?(this.isPreload=!1,this.logger.log("".concat(this.getName()," exec start on preloaded")),[4,this.loadDefer]):[3,2];case 1:return e.sent(),this.isLive&&this.corePlayer.resize({width:"100%"}),this.corePlayer.play(),[2];case 2:return this.isPreload=!1,[4,this.getVideoRsp()];case 3:return n=e.sent(),t=n.urlConfig,n=n.kernelName,this.updateKernel(n),"function"==typeof this.config.videoLoadParamModifier&&(this.startParam.videoLoadParam=this.config.videoLoadParamModifier(this.startParam.videoLoadParam)),this.corePlayer.play(t,this.startParam.videoLoadParam),[2]}})})},x.prototype.preload=function(){return u.__awaiter(this,void 0,void 0,function(){var t,n;return u.__generator(this,function(e){switch(e.label){case 0:return this.logger.log("".concat(this.getName()," exec preload")),this.emit(c.FLOW_NODE_EVENT.PRELOAD,{name:this.getName()}),this.isPreload=!0,this.loadDefer=this.getVideoRsp(),[4,this.loadDefer];case 1:return(n=e.sent(),t=n.urlConfig,n=n.kernelName,this.updateKernel(n),this.isLive)?(this.corePlayer.volume=0,[4,this.corePlayer.play(t,this.startParam.videoLoadParam)]):[3,3];case 2:return e.sent(),this.corePlayer.resize({width:0}),[3,4];case 3:this.corePlayer.load(t,this.startParam.videoLoadParam),e.label=4;case 4:return[2]}})})},x.prototype.pause=function(e){this.logger.log("".concat(this.getName()," exec pause")),this.corePlayer.pause(e)},x.prototype.resume=function(){this.logger.log("".concat(this.getName()," exec resume")),this.corePlayer.play()},x.prototype.setLevel=function(o,i){var a;return void 0===i&&(i={}),u.__awaiter(this,void 0,void 0,function(){var t,n,r=this;return u.__generator(this,function(e){switch(e.label){case 0:return t=null==(a=this.corePlayer.currentVideoInfo)?void 0:a.config,this.emitFromVideoNode(c.H5_PLAY_EVENT.VIDEO_SETLEVEL_START,{level:o}),[4,this.getLevelUrlConfig(o)];case 1:if((n=e.sent())&&n.url)return i.setLevelMode?n.setLevelMode=i.setLevelMode:null!=t&&t.drmConfig||n.drmConfig||n.chachaParam?n.setLevelMode=d.SET_LEVEL_MODE.HARD:n.setLevelMode=void 0,[2,null==(a=this.corePlayer.setLevel(n.url,n.backupUrls,n))?void 0:a.catch(function(e){throw r.emitFromVideoNode(c.H5_PLAY_EVENT.VIDEO_SETLEVEL_END,{code:(null==e?void 0:e.code)||c.ErrorCode.UNKNOWN,message:null==e?void 0:e.message,level:o}),e})];throw new Error("setLevel url is empty")}})})},x.prototype.updatePlayParam=function(e){var t=u.__assign(u.__assign({},this.startParam.videoReqInfoParam),null==e?void 0:e.videoReqInfoParam),e=u.__assign(u.__assign({},this.startParam.videoLoadParam),null==e?void 0:e.videoLoadParam);this.startParam=u.__assign(u.__assign({},this.startParam),{videoReqInfoParam:t,videoLoadParam:e})},x.prototype.replay=function(r,o){return u.__awaiter(this,void 0,void 0,function(){var t,n;return u.__generator(this,function(e){switch(e.label){case 0:return(this.updatePlayParam(o),a(r))?(this.logger.log("replay(), start request video info: ",this.startParam.videoReqInfoParam),[4,this.requestVideoInfo({emitFlowEvent:!1})]):(this.logger.log("replay(), start replay urlConfig: ",r),this.isReplaying=!0,[2,this.corePlayer.play(r,this.startParam.videoLoadParam)]);case 1:if(n=e.sent(),this.isDestroyed)return[2];if(t=(n=n||{}).error,n=n.urlConfig,t)throw t;return this.isReplaying=!0,[2,this.corePlayer.play(n,this.startParam.videoLoadParam)]}})})},x.prototype.retry=function(e,t){var n=this,t=t||{},r=t.error,o=t.updatePlayParam,i=t.retryTimes,a=t.retryTimesInSession,t=t.degradeReason,t=void 0===t?0:t;e?(this.flowOverHandler(),this.emit(c.FLOW_NODE_EVENT.ABORT,u.__assign(u.__assign({},r),{code:(null==r?void 0:r.code)||c.ErrorCode.UNKNOWN,name:this.getName()}))):(this.logger.log("play retry, retryTimes=".concat(i,", retryTimesInSession=").concat(a)),this.config.extEvtDispatcher.emit(c.H5_EXT_EVENT.RETRY_PLAY,{retryTimes:i,degradeReason:t}),0!==t&&this.config.extEvtDispatcher.emit(c.H5_EXT_EVENT.DEGRADE_CODEC_PLAY,{degradeReason:t}),this.isPreload?(this.updatePlayParam(o),this.preload()):this.replay(this.startParam.vid,o).catch(function(e){n.logger.log("retry replay err=".concat(null==e?void 0:e.code,", ").concat(null==e?void 0:e.message)),n.flowOverHandler(),n.emit(c.FLOW_NODE_EVENT.ABORT,u.__assign(u.__assign({},e),{code:(null==e?void 0:e.code)||c.ErrorCode.UNKNOWN,name:n.getName()}))}))},x.prototype.destroy=function(){this.isDestroyed=!0,this.setPlayerEvents(!1),ht.prototype.destroy.call(this)},x.prototype.emitPreloadNext=function(){this.emit(c.FLOW_NODE_EVENT.PRELOAD_NEXT,{forcePreload:!0,name:this.getName()})},x.prototype.updateKernel=function(e){e&&(this.startParam.videoLoadParam=u.__assign({kernelName:e},this.startParam.videoLoadParam))},x.prototype.requestVideoInfo=function(s){var _;return void 0===s&&(s={}),u.__awaiter(this,void 0,void 0,function(){var t,n,r,o,i,a=this;return u.__generator(this,function(e){switch(e.label){case 0:return(t=this.config.reqInfo,n=s.extraData,n=void 0===n?{}:n,r=s.emitFlowEvent,r=void 0===r||r,t.shouldRequest())?r?(this.tryEmit(function(){return a.emitFromVideoNode(c.H5_PLAY_EVENT.VIDEO_REQ_INFO_START)}),[4,t.setVideoInfo()]):[3,2]:[2];case 1:e.sent(),e.label=2;case 2:return this.tryEmit(function(){return a.config.extEvtDispatcher.emit(c.H5_EXT_EVENT.GETINFO_START)}),[4,t.requestVod(n)];case 3:return o=e.sent(),this.tryEmit(function(){return a.config.extEvtDispatcher.emit(c.H5_EXT_EVENT.GETINFO_OVER,o)}),i=(null==(_=null==o?void 0:o.error)?void 0:_.code)||c.ErrorCode.SUC,r&&this.tryEmit(function(){return a.emitFromVideoNode(c.H5_PLAY_EVENT.VIDEO_REQ_INFO_END,{code:i,data:o})}),[2,o]}})})},x.prototype.getVideoRsp=function(){return u.__awaiter(this,void 0,void 0,function(){var t,n,r;return u.__generator(this,function(e){switch(e.label){case 0:if(t=this.startParam.urlConfig)return[2,{urlConfig:t}];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.requestVideoInfo()];case 2:if(t=e.sent(),n=(r=t||{}).urlConfig,r=r.error)throw r;if(function(e){if(Array.isArray(e))return e.every(gt);return gt(e)}(n))return[2,t];throw{message:"url config invalid",code:c.ErrorCode.GETINFO_PARSE};case 3:return r=e.sent(),this.logger.error(r),this.flowOverHandler(),this.emit(c.FLOW_NODE_EVENT.ABORT,u.__assign(u.__assign({},r),{code:(null==r?void 0:r.code)||c.ErrorCode.GETINFO_NET,name:this.getName()})),[2,{urlConfig:null}];case 4:return[2]}})})},x.prototype.setPlayerEvents=function(e){var t=this,n=(e=void 0===e?!0:e)?this.corePlayer.on:this.corePlayer.off;Object.keys(this.evtMap).forEach(function(e){n.call(t.corePlayer,e,t.evtMap[e])})},x.prototype.flowOverHandler=function(){},Object.defineProperty(x.prototype,"corePlayer",{get:function(){return this.config.corePlayer},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"emitFromVideoNode",{get:function(){return this.config.emitFromVideoNode},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"startParam",{get:function(){return this.config.reqInfo.startParam},set:function(e){this.config.reqInfo.startParam=e},enumerable:!1,configurable:!0}),x.prototype.getLevelUrlConfig=function(o){var i;return u.__awaiter(this,void 0,void 0,function(){var t,n,r;return u.__generator(this,function(e){switch(e.label){case 0:return gt(o)?(t=o,[3,4]):[3,1];case 1:return"string"!=typeof o?[3,2]:(t={url:o},[3,4]);case 2:return n=u.__assign(u.__assign({},this.startParam.videoReqInfoParam),o),this.startParam=u.__assign(u.__assign({},this.startParam),{videoReqInfoParam:n}),[4,this.requestVideoInfo({emitFlowEvent:!1,extraData:n})];case 3:if(!(n=e.sent()))throw new Error;if(t=n.urlConfig,n.error)throw r=null==(i=null==(i=n.error.data)?void 0:i.params)?void 0:i.msg,this.emitFromVideoNode(c.H5_PLAY_EVENT.VIDEO_SETLEVEL_END,{code:n.error.code||c.ErrorCode.UNKNOWN,message:r||n.error.message,level:o}),n.error;e.label=4;case 4:return[2,t]}})})},x.prototype.tryEmit=function(e){try{e()}catch(e){this.logger.error(e)}},u.__decorate([ot,u.__metadata("design:type",Function),u.__metadata("design:paramtypes",[]),u.__metadata("design:returntype",void 0)],x.prototype,"emitPreloadNext",null);var ht,At=x;function x(e){var n=ht.call(this,e)||this;return n.config=e,n.isReplaying=!1,n.isDestroyed=!1,n.onVideoPlayBlocked=function(){return n.isPreload=!0},n.onVideoTimeUpdate=function(){var e;n.isLive||(e=null!=(e=n.startParam.postAdReqLeftTime)?e:10,Number.isNaN(e))||n.corePlayer.playtime+e>=n.corePlayer.duration&&n.emitPreloadNext()},n.onVideoStop=function(e){var t,e=e.data;n.isReplaying?n.isReplaying=!1:(null==(t=e.videoInfo)?void 0:t.error)||(n.flowOverHandler(),t=e.isUserStop?c.FLOW_NODE_EVENT.ABORT:c.FLOW_NODE_EVENT.END,n.emit(t,{videoEndState:e.endState,name:n.getName()}))},n.onVideoError=function(e){var e=e.data;n.startParam.vid||(e=null==(e=null==e?void 0:e.videoInfo)?void 0:e.error,n.flowOverHandler(),n.emit(c.FLOW_NODE_EVENT.ABORT,u.__assign(u.__assign({},e),{code:(null==e?void 0:e.code)||c.ErrorCode.UNKNOWN,name:n.getName()})))},n.logger=new d.Logger(n.corePlayer.config.instanceId,"VideoFlowNode"),n.evtMap=((e={})[d.PLAY_EVENT.TIME_UPDATE]=n.onVideoTimeUpdate,e[d.PLAY_EVENT.STOPED]=n.onVideoStop,e[d.PLAY_EVENT.ERROR]=n.onVideoError,e[d.PLAY_EVENT.AUTOPLAY_BLOCKED]=n.onVideoPlayBlocked,e),n.setPlayerEvents(!0),n}function gt(e){return"string"==typeof(null==e?void 0:e.url)}mt=C,u.__extends(R,mt),R.prototype.selectGetinfoModule=function(e){return null==e?void 0:e.getinfoModule},Object.defineProperty(R.prototype,"videoElementsContainer",{get:function(){return this.corePlayer.videoElementsContainer},enumerable:!1,configurable:!0}),R.prototype.load=function(t,n){var r;return u.__awaiter(this,void 0,void 0,function(){return u.__generator(this,function(e){return t?(this.createFlowNodes(t,n),[2,null==(r=this.flowManager.currentFlowNode)?void 0:r.preload()]):[2,this.corePlayer.load()]})})},R.prototype.play=function(t,n){var r;return u.__awaiter(this,void 0,void 0,function(){return u.__generator(this,function(e){return t?(this.createFlowNodes(t,n),[2,null==(r=this.flowManager.currentFlowNode)?void 0:r.start()]):[2,this.resumePlay()]})})},R.prototype.preload=function(t,n,r){return u.__awaiter(this,void 0,void 0,function(){return u.__generator(this,function(e){return this.log("preload() start; ".concat(d.jsonTool.safelyStringify(t),", ").concat(d.jsonTool.safelyStringify(n))),this.endPreload(),this.nextReqInfo=new et({flowid:d.commonTool.createGUID(),startParam:this.getStartParam(t,n),videoReqInfoPlugin:this.videoReqInfoPlugin,instanceId:this.config.instanceId}),this.nextFlowManager=new lt({playerInstanceId:this.config.instanceId}),this.nextFlowManager.push(this.nodeBeforePreAd(this.nextReqInfo)),this.nextFlowManager.push(new ut({instanceId:this.config.instanceId,corePlayer:this.corePlayer,extEvtDispatcher:this.pluginMsg,reqInfo:this.nextReqInfo,playerConfig:this.config,videoEndTime:r})),this.nextFlowManager.currentFlowNode.start(),[2]})})},R.prototype.setAudioTrack=function(e){return this.corePlayer.setAudioTrack(e)},R.prototype.getAudioTrackList=function(){return this.currentVideoInfo?this.currentVideoInfo.audioTracks:[]},R.prototype.getCurrentAudioTrack=function(){return this.currentVideoInfo?this.currentVideoInfo.currentAudioTrack:NaN},R.prototype.setLevel=function(t,n){return void 0===n&&(n={}),u.__awaiter(this,void 0,void 0,function(){return u.__generator(this,function(e){switch(e.label){case 0:if(!this.checkCanSetLevel())throw new Error("setLevel can't start");this.isSettingLevel=!0,e.label=1;case 1:return e.trys.push([1,3,4,5]),[4,this.videoNode.setLevel(t,n)];case 2:return e.sent(),[3,5];case 3:throw e.sent();case 4:return this.isSettingLevel=!1,[7];case 5:return[2]}})})},R.prototype.preloadVid=function(e){throw new Error("Method not implemented.")},R.prototype.pause=function(e){var t=this.flowManager.currentFlowNode;return(t||this.corePlayer).pause(e)},R.prototype.seek=function(e){return this.corePlayer.seek(e)},R.prototype.stop=function(e){var t,n;this.flowManager.currentFlowNode&&(n=this.flowManager.currentFlowNode.getName(),this.log("stop(), endState=".concat(e,", curFlowNodeName=").concat(n)),this.flowManager.clear(),null!=(t=_(null==(t=this.config)?void 0:t.instanceId))&&t.stopAd(),null!=(t=this.videoReqInfoPlugin)&&t.abort(),this.corePlayer.stop(e),this.emit(c.H5_PLAY_EVENT.PLAY_SESSION_END,{curFlowNodeName:n,code:c.ErrorCode.SUC,endState:e||d.END_STATE.INTERRUPT}))},R.prototype.destroy=function(){this.stop(),this.removeAllListeners(),this.corePlayer.destroy(),this._destroyed=!0},R.prototype.checkCanSetLevel=function(){return this.videoNode&&!this.isSettingLevel},R.prototype.checkUsePreloadCache=function(e){var t;return(null==(t=this.nextReqInfo)?void 0:t.vid)&&e.vid===this.nextReqInfo.vid},R.prototype.loadPostAd=function(){this.videoNode&&this.flowManager.currentFlowNode===this.videoNode&&this.videoNode.emitPreloadNext()},R.prototype.nodeBeforePreAd=function(e){return new Et({reqInfo:e,instanceId:this.config.instanceId,adType:c.AD_TYPE.PRE})},R.prototype.nodeBeforePostAd=function(e){return new Et({reqInfo:e,instanceId:this.config.instanceId,adType:c.AD_TYPE.POST})},Object.defineProperty(R.prototype,"videoNode",{get:function(){return this.flowManager.flowNodeList.find(function(e){return e instanceof At})},enumerable:!1,configurable:!0}),R.prototype.proxyAllPlayEvent=function(){var n=this;Object.keys(d.PLAY_EVENT).forEach(function(t){n.corePlayer.on(d.PLAY_EVENT[t],function(e){e=e.data;return n.emit(d.PLAY_EVENT[t],e)})})},R.prototype.proxyStateChange=function(){var e,n=this,r=((e={})[d.VIDEO_STATE.LOAD_START]=c.H5_PLAY_EVENT.VIDEO_LOAD_START,e[d.VIDEO_STATE.CANPLAY]=c.H5_PLAY_EVENT.VIDEO_CANPLAY,e[d.VIDEO_STATE.BUFFERING]=c.H5_PLAY_EVENT.VIDEO_BUFFERING,e[d.VIDEO_STATE.SEEKING]=c.H5_PLAY_EVENT.VIDEO_SEEKING,e[d.VIDEO_STATE.SEEKED]=c.H5_PLAY_EVENT.VIDEO_SEEKED,e);this.corePlayer.on(d.PLAY_EVENT.STATE_CHANGE,function(e){var e=e.data,t=e.new;if(r[t])return n.emit(r[t],{});t!==d.VIDEO_STATE.PLAYING&&t!==d.VIDEO_STATE.PAUSE||n.proxyPlayPause(t,e)})},R.prototype.proxyVideoStopped=function(){var n=this;this.corePlayer.on(d.PLAY_EVENT.STOPED,function(e){var e=e.data,t=null==(t=null==e?void 0:e.videoInfo)?void 0:t.error,e=u.__assign(u.__assign({},e),{code:(null==t?void 0:t.code)||c.ErrorCode.SUC});n.emit(c.H5_PLAY_EVENT.VIDEO_END,e)})},R.prototype.proxyPlayPause=function(e,t){var n;e===d.VIDEO_STATE.PLAYING?this.emit(c.H5_PLAY_EVENT.VIDEO_PLAYING,{isFirst:!(null!=(n=t.videoInfo)&&n.hasFirstPlaying)}):e===d.VIDEO_STATE.PAUSE&&this.emit(c.H5_PLAY_EVENT.VIDEO_PAUSE,{pauseType:t.pauseType})},R.prototype.resumePlay=function(){var e=this.flowManager.currentFlowNode;e?!1!==e.isPreload?e.start():e.resume():this.corePlayer.play()},R.prototype.getStartParam=function(e,t){t=u.__assign({},t);return a(e)?t.vid=e:t.urlConfig=e,t},R.prototype.createFlowNodes=function(e,t){this.flowManager.currentFlowNode&&(this.log("loadItem(), stop because of currentFlowNode is running"),this.stop()),this.endPreload();var t=this.getStartParam(e,t),n=this.checkUsePreloadCache(t),n=(this.curReqInfo=n?this.nextReqInfo:new et({flowid:d.commonTool.createGUID(),startParam:t,videoReqInfoPlugin:this.videoReqInfoPlugin,instanceId:this.config.instanceId}),this.nextReqInfo=null,this.curReqInfo.startParam=t,this.curReqInfo.flowid);this.emit(c.H5_PLAY_EVENT.PLAY_SESSION_START,{flowid:n,playItem:e}),this._destroyed||(this.flowManager.push(this.nodeBeforePreAd(this.curReqInfo)),t=new _t({flowid:n,instanceId:this.config.instanceId,adType:c.AD_TYPE.PRE,reqInfo:this.curReqInfo,corePlayer:this.corePlayer}),this.flowManager.push(t),e=new At({flowid:n,corePlayer:this.corePlayer,reqInfo:this.curReqInfo,extEvtDispatcher:this.pluginMsg,emitFromVideoNode:this.emitFromVideoNode,videoLoadParamModifier:this.videoLoadParamModifier}),this.flowManager.push(e),this.config.type!==d.PLAY_MODE.LIVE&&(this.flowManager.push(this.nodeBeforePostAd(this.curReqInfo)),t=new _t({flowid:n,instanceId:this.config.instanceId,reqInfo:this.curReqInfo,adType:c.AD_TYPE.POST,corePlayer:this.corePlayer}),this.flowManager.push(t),this.flowManager.setLastNode(t)),this.log("loadItem(), flowNodeList=".concat(null==(e=this.flowManager.flowNodeList)?void 0:e.map(function(e){return e.getName()}))))},R.prototype.endPreload=function(){var e;null!=(e=this.nextFlowManager)&&e.clear(),this.nextFlowManager=null},Object.defineProperty(R.prototype,"config",{get:function(){return this.corePlayer.config},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"useWorker",{get:function(){return this.corePlayer.useWorker},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"kernelName",{get:function(){return this.corePlayer.kernelName},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"videoElements",{get:function(){return this.corePlayer.videoElements},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"currentVideoElement",{get:function(){return this.corePlayer.currentVideoElement},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"supportPreload",{get:function(){return this.corePlayer.supportPreload},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"duration",{get:function(){return this.corePlayer.duration},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"playtime",{get:function(){return this.corePlayer.playtime},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"videoInfos",{get:function(){return this.corePlayer.videoInfos},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"preloadVideoInfos",{get:function(){return this.corePlayer.preloadVideoInfos},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"currentVideoInfo",{get:function(){return this.corePlayer.currentVideoInfo},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"currentVideoInfoIdx",{get:function(){return this.corePlayer.currentVideoInfoIdx},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"totalVideoInfoCount",{get:function(){return this.corePlayer.totalVideoInfoCount},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"supportPlaybackRate",{get:function(){return this.corePlayer.supportPlaybackRate},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"played",{get:function(){return this.corePlayer.played},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"state",{get:function(){return this.corePlayer.state},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"videoSize",{get:function(){return this.corePlayer.videoSize},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"videoBuffered",{get:function(){return this.corePlayer.videoBuffered},enumerable:!1,configurable:!0}),R.prototype.log=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this.logger).log.apply(e,t)},R.prototype.hasAppended=function(e){return this.corePlayer.hasAppended(e)},R.prototype.hasPreloaded=function(e){return this.corePlayer.hasPreloaded(e)},Object.defineProperty(R.prototype,"volume",{get:function(){return this.corePlayer.volume},set:function(e){this.corePlayer.volume=e},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"playbackRate",{get:function(){return this.corePlayer.playbackRate},set:function(e){this.corePlayer.playbackRate=e},enumerable:!1,configurable:!0}),R.prototype.resizeVideoElements=function(e){return this.corePlayer.resizeVideoElements(e)},R.prototype.resize=function(e){return this.corePlayer.resize(e)},R.prototype.playNext=function(e){return this.corePlayer.playNext(e)},R.prototype.captureVideo=function(e,t,n,r,o){return this.corePlayer.captureVideo(e,t,n,r,o)},R.prototype.appendNext=function(e){return this.corePlayer.appendNext(e)},R.prototype.preloadNext=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this.corePlayer).preloadNext.apply(e,t)},R.prototype.clearAllPreload=function(){return this.corePlayer.clearAllPreload()},R.prototype.triggerAutoplay=function(){return this.corePlayer.triggerAutoplay()};var mt,yt=R;function R(e){var o,t,i,a=mt.call(this)||this,n=(a.isSettingLevel=!1,a.emitFromVideoNode=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];a.emit.apply(a,u.__spreadArray([e],t,!1))},a.onFlowEnd=function(e){var t,n=e.code,n=void 0===n?c.ErrorCode.SUC:n,r=e.endState,r=void 0===r?d.END_STATE.NORMAL:r,o=e.curFlowNodeName;a.log("onFlowEnd, code=".concat(n,", endState=").concat(r,", curFlowNodeName=").concat(o)),a.config.type===d.PLAY_MODE.LIVE&&null!=(t=_(a.config.instanceId))&&t.stopAd(),a.emit(c.H5_PLAY_EVENT.PLAY_SESSION_END,u.__assign(u.__assign({},e),{endState:r,code:n,curFlowNodeName:o}))},a.onFlowEvts=function(e,t){var n;(n={})[c.FLOW_NODE_EVENT.PRELOAD]=c.H5_EXT_EVENT.FLOW_NODE_PRELOAD,n[c.FLOW_NODE_EVENT.START]=c.H5_EXT_EVENT.FLOW_NODE_START,n[c.FLOW_NODE_EVENT.END]=c.H5_EXT_EVENT.FLOW_NODE_END,n[c.FLOW_NODE_EVENT.ABORT]=c.H5_EXT_EVENT.FLOW_NODE_ABORT,a.pluginMsg.emit(n[e],t)},e.useSingleVideoElement),n=void 0===n?d.uaTool.mobile:n,e=(a.corePlayer=new d.KernelProxy(u.__assign(u.__assign({},e),{maxVideoNodeCount:n?1:null==e?void 0:e.maxVideoNodeCount,createVideoNodeWhenLoad:n})),a.logger=new d.Logger(a.config.instanceId,"FlowPlayer"),a.selectGetinfoModule(e));return e&&(a.videoReqInfoPlugin=new e(a)),a.flowManager=new lt({playerInstanceId:a.config.instanceId,onFlowEnd:a.onFlowEnd,onFlowEvts:a.onFlowEvts,disablePreload:n}),a.proxyAllPlayEvent(),a.proxyStateChange(),a.proxyVideoStopped(),t=(o=a).corePlayer,(e={})[d.PLAY_EVENT.DURATION_CHANGE]={evt:c.H5_PLAY_EVENT.VIDEO_DURATION_CHANGE,getParam:function(e){return{duration:e.videoInfo.duration}}},e[d.PLAY_EVENT.METADATA_CHANGE]={evt:c.H5_PLAY_EVENT.VIDEO_METADATA_CHANGE,getParam:function(e){return{width:e.videoInfo.videoWidth,height:e.videoInfo.videoHeight}}},e[d.PLAY_EVENT.VIDEO_BUFFER_CHANGE]={evt:c.H5_PLAY_EVENT.VIDEO_LOAD_PROGRESS,getParam:function(){return{bufferRange:o.videoBuffered}}},e[d.PLAY_EVENT.TIME_UPDATE]={evt:c.H5_PLAY_EVENT.VIDEO_TIMEUPDATE,getParam:function(e){return{playtime:e.videoInfo.playtime}}},e[d.PLAY_EVENT.VOLUME_CHANGE]={evt:c.H5_PLAY_EVENT.VIDEO_VOLUME_CHANGE,getParam:function(){return{volume:o.volume}}},e[d.PLAY_EVENT.RATE_CHANGE]={evt:c.H5_PLAY_EVENT.VIDEO_RATE_CHANGE,getParam:function(){return{rate:o.playbackRate}}},e[d.PLAY_EVENT.VIDEO_RESIZE]={evt:c.H5_PLAY_EVENT.VIDEO_RESIZE,getParam:function(e){return{videoWidth:e.videoInfo.videoWidth,videoHeight:e.videoInfo.videoHeight}}},e[d.PLAY_EVENT.AUTOPLAY_BLOCKED]={evt:c.H5_PLAY_EVENT.VIDEO_AUTOPLAY_BLOCKED,getParam:function(){}},e[d.PLAY_EVENT.SETLEVEL_OVER]={evt:c.H5_PLAY_EVENT.VIDEO_SETLEVEL_END,getParam:function(e){var t=null!=(t=null==(t=null==(t=e.videoInfo)?void 0:t.error)?void 0:t.code)?t:c.ErrorCode.UNKNOWN;return{code:e.fail?t:c.ErrorCode.SUC}}},i=e,Object.keys(i).forEach(function(r){t.on(r,function(e){var t=i[r],n=t.evt,t=t.getParam;o.emit(n,t(e.data))})}),a.on(c.H5_PLAY_EVENT.PLAY_SESSION_START,function(){a.isSettingLevel=!1}),a}var C=d.logMethodCallDecoratorCreator("H5Player"),vt=((Tt={})[c.PictureDirection.VERTICAL]="rotateX(180deg)",Tt[c.PictureDirection.HORIZON]="rotateY(180deg)",Tt[c.PictureDirection.NORMAL]="none",Tt);S=yt,u.__extends(N,S),N.registerSavedCommonKey=function(e){o.SETTING_CONFIG[e]||o.SETTING_CONFIG.push({dsKey:e,lsKey:"__thumbplayer_custom_".concat(e,"__")})},N.prototype.load=function(e,t){return e?(this.cacheLoadParam(e,t),this.corePlayer.load(),S.prototype.load.call(this,e,this.getParamWithStartTime(e,t))):S.prototype.load.call(this)},N.prototype.play=function(e,t){return e?(this.cacheLoadParam(e,t),this.corePlayer.load(),S.prototype.play.call(this,e,this.getParamWithStartTime(e,t))):S.prototype.play.call(this)},N.prototype.createPlugin=function(e,t){S.prototype.createPlugin.call(this,e,t=void 0===t?{}:t);var n,r,t=t.pluginName;(void 0===t?e:t)===U&&(r=_((n=this).config.instanceId))&&ae.forEach(function(t){r.on(t,function(e){e=e.data;n.emit(t,e)})})},N.prototype.replay=function(){var e,t=this.vid,n=this.playUrl;return null!=(e=null==(e=this.loadParam)?void 0:e.videoLoadParam)&&delete e.startTime,t?this.play(t,this.loadParam):n?(0<(e=n.lastIndexOf("#"))&&(n=n.slice(0,e)),this.play({url:n},this.loadParam)):void this.log("Current player has no available vid or url to replay")},N.prototype.pause=function(e){return S.prototype.pause.call(this,e)},N.prototype.seek=function(e){var t=this.timeRange,n=t.startTime,t=t.endTime,t=Math.min(t,Math.max(n,e));return S.prototype.seek.call(this,t)},N.prototype.setPictureImage=function(e){void 0===e&&(e=c.PictureDirection.NORMAL),this.pictureDirection=e,this.isPlayingAd?this.setAdVideoStyle({transform:vt[e]}):this.setVideoStyle({transform:vt[e]}),e===c.PictureDirection.NORMAL&&(this.rotateDegree=0)},N.prototype.setRotate=function(e){"number"!=typeof e||Number.isNaN(e)||(this.rotateDegree=e,this.isPlayingAd?this.setAdVideoStyle({transform:"rotate(".concat(e,"deg)")}):this.setVideoStyle({transform:"rotate(".concat(e,"deg)")}))},N.prototype.getRotate=function(){return this.rotateDegree},N.prototype.requestFullScreen=function(t,n){return void 0===t&&(t=!0),u.__awaiter(this,void 0,void 0,function(){return u.__generator(this,function(e){return[2,this.fullscreenLogics.requestFullScreen(t,n)]})})},Object.defineProperty(N.prototype,"fullscreenMode",{get:function(){return this.fullscreenLogics.fullscreenMode},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"volume",{get:function(){return this.corePlayer.volume},set:function(e){var t;this.corePlayer.volume=e,null!=(t=_(this.config.instanceId))&&t.setAdVolume(e)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"timeRange",{get:function(){return this.playtimeLimiter.range},enumerable:!1,configurable:!0}),N.prototype.destroy=function(){var n=this;try{this.stop(),this.pluginMsg.emit(c.H5_EXT_EVENT.DESTROY)}catch(e){this.log(e)}this.plugins&&(Object.keys(this.plugins).forEach(function(e){var t;null!=(t=null==(e=n.plugins[e])?void 0:e.destroy)&&t.call(e)}),delete this.plugins),K(null==(e=this.config)?void 0:e.instanceId,null),this.fullscreenLogics.destroy(),this.removeAllListeners(),this.pluginMsg.removeAllListeners(),this.corePlayer.destroy(),this.container.innerHTML="",null!=(e=this.interactMod)&&e.remove(),this.interactMod=null;var e=this.container.cloneNode();this.container.parentNode.replaceChild(e,this.container),this.container=e,clearTimeout(this.mouseMoveTimer),"none"===this.container.style.cursor&&(this.container.style.cursor="auto"),this._destroyed=!0},Object.defineProperty(N.prototype,"offlineLogPlugin",{get:function(){return this.plugins[De.pluginName]},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"pluginInstances",{get:function(){return this.plugins},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"player",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,Ne.pluginName,{get:function(){return this.plugins[Ne.pluginName]},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,o.pluginName,{get:function(){return this.plugins[o.pluginName]},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,De.pluginName,{get:function(){return this.plugins[De.pluginName]},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"vid",{get:function(){return a(this.currentPlayItem)?this.currentPlayItem:null},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"url",{get:function(){var e;return null==(e=this.currentVideoInfo)?void 0:e.loadingUrl},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"paused",{get:function(){return this.state===d.VIDEO_STATE.PAUSE},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"muted",{get:function(){return 0===this.volume},set:function(e){e?(this.mutedVolume=this.volume,this.volume=0):this.muted&&(this.volume=this.mutedVolume)},enumerable:!1,configurable:!0}),N.prototype.setStateKv=function(e,t,n){this.dataset.writeState(e,t,n)},N.prototype.setCommonKv=function(t,n,e){var r=this;"string"==typeof t?this.dataset.writeCommon(t,n,e):Object.keys(t).forEach(function(e){return r.dataset.writeCommon(e,t[e],n)})},Object.defineProperty(N.prototype,"videoReqParam",{get:function(){var e;return null==(e=this.loadParam)?void 0:e.videoReqInfoParam},enumerable:!1,configurable:!0}),N.prototype.getParamWithStartTime=function(e,t){void 0===t&&(t={});var n,r=this.playtimeLimiter;if(!e)return t;if(null!=(n=t.videoLoadParam)&&n.startTime)return t;if("string"==typeof e||"number"==typeof e)r.clearAllConfig(e);else{if(Array.isArray(e))return t;r.clearAllConfig(e.url)}return t.playTimeLimit&&r.addLimitConfig(t.playTimeLimit),u.__assign(u.__assign({},t),{videoLoadParam:u.__assign(u.__assign({},t.videoLoadParam),{startTime:this.timeRange.startTime})})},N.prototype.createClickMask=function(){var e=this,t=this.config,n=t.enableInteractMod,t=t.type;void 0!==n&&!n||t===d.PLAY_MODE.LIVE||((n=document.createElement("div")).classList.add("thumbplayer-user-mod"),d.domTool.css(n,{width:"100%",height:"100%",position:"absolute","z-index":1}),d.domTool.append(this.container,n),n.addEventListener("click",function(){[d.VIDEO_STATE.PAUSE,d.VIDEO_STATE.CANPLAY].includes(e.state)?e.play():[d.VIDEO_STATE.PLAYING,d.VIDEO_STATE.BUFFERING].includes(e.state)&&e.pause(c.H5_PAUSE_TYPE.USER_CLICK)}),this.interactMod=n)},N.prototype.initContainerStyle=function(){var e=this.container;e.style.outline="0 none",e.style.overflow="hidden",e.style.backgroundColor="#000","static"===getComputedStyle(e).position&&(e.style.position="relative")},N.prototype.forwardPluginEvents=function(){var t=this;this[o.pluginName].on(c.DATA_EVENTS.STATE_UPDATE,function(e){e=e.data;t.pluginMsg.emit(c.H5_EXT_EVENT.DATASET_STATE_UPDATE,e)}),this[o.pluginName].on(c.DATA_EVENTS.UPDATE,function(e){e=e.data;t.pluginMsg.emit(c.H5_EXT_EVENT.DATASET_UPDATE,e)}),this.on(d.PLAY_EVENT.SET_LOADING,function(e){e=e.data;t.pluginMsg.emit(c.H5_EXT_EVENT.SET_LOADING,{value:e.show})})},N.prototype.createInnerPlugins=function(){var e;this.createPlugin(o.pluginName),!De.isEnvSupport||null!=(e=this.config.offlineConfig)&&e.disable||this.createPlugin(De.pluginName),this.createPlugin(Ne.pluginName),this.config.enableQAreporter&&this.createPlugin((this.config.type===d.PLAY_MODE.LIVE?He:Je).pluginName)},N.prototype.cacheLoadParam=function(e,t){e&&(a(e)&&this.pluginMsg.emit(c.H5_EXT_EVENT.VID_CHANGE,{oldVal:this.vid,newVal:e}),this.currentPlayItem=e,t)&&Object.keys(t).length&&(this.loadParam=t)},N.prototype.setupEventFlagData=function(){var e=this;this.on(c.H5_PLAY_EVENT.AD_PLAYING,function(){return e.isPlayingAd=!0}),this.on(c.H5_PLAY_EVENT.AD_END,function(){return e.isPlayingAd=!1})},N.prototype.setupLoopPlay=function(){var t=this;this.on(c.H5_PLAY_EVENT.PLAY_SESSION_END,function(e){e=e.data.endState===d.END_STATE.NORMAL;t.config.loop&&e&&t.replay()}),this.on(c.H5_PLAY_EVENT.VIDEO_PLAYING,function(e){e.data.isFirst&&t.config.loop&&(e=t.currentVideoElement)instanceof HTMLVideoElement&&(e.loop=gt(t.currentPlayItem)&&t.corePlayer.kernelName===d.KERNEL_NAME.ORIGIN)})},Object.defineProperty(N.prototype,"playUrl",{get:function(){var e=this.currentPlayItem;return a(e)||Array.isArray(e)||null==e?void 0:e.url},enumerable:!1,configurable:!0}),N.prototype.checkAutoPlayInMute=function(){var e,t=this;!this.config.autoPlayInMute&&this.config.autoPlayPolicy!==c.AUTO_PLAY_POLICY.IN_MUTED||(e=function(){var e;t.hasMutePlayed||(t.hasMutePlayed=!0,t.muted=!0,null!=(e=_(t.config.instanceId))&&e.setAdVolume(0),t.play())},this.on(c.H5_PLAY_EVENT.AD_AUTOPLAY_BLOCKED,function(){return setTimeout(e)}),this.on(c.H5_PLAY_EVENT.VIDEO_AUTOPLAY_BLOCKED,e))},N.prototype.autoHideMouse=function(){var e=this;this.container.addEventListener("mousemove",function(){"none"===e.container.style.cursor&&(e.container.style.cursor="auto"),clearTimeout(e.mouseMoveTimer),e.mouseMoveTimer=setTimeout(e.hideMouseOnFullscreen.bind(e),5e3)})},N.prototype.hideMouseOnFullscreen=function(){var e=document,e=e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement;(this.config.autoHideMouse||e)&&this.state===d.VIDEO_STATE.PLAYING&&(this.container.style.cursor="none")},N.prototype.setVideoStyle=function(e){d.domTool.css(this.corePlayer.currentVideoElement,e)},N.prototype.setAdVideoStyle=function(t){var e=null==(e=null==(e=_(null==(e=this.config)?void 0:e.instanceId))?void 0:e.videoAdPlayer)?void 0:e.videoElements;e&&e.forEach(function(e){return d.domTool.css(e,t)})},N.prototype.applyStyleOnVideoNodeChange=function(){function t(){if(void 0!==n.pictureDirection||void 0!==n.rotateDegree)return vt[n.pictureDirection]||"rotate(".concat(n.rotateDegree,"deg)")}var n=this;this.corePlayer.on(d.PLAY_EVENT.VIDEONODE_CHANGE,function(){var e=t();e&&n.setVideoStyle({transform:e})}),this.on(c.H5_PLAY_EVENT.AD_REQ_ASSETS_START,function(e){F(e.data)&&(e=t())&&n.setAdVideoStyle({transform:e})}),this.on(c.H5_PLAY_EVENT.AD_END,function(e){F(e.data)&&t()&&n.setAdVideoStyle({transform:"none"})})},N.prototype.initPluginApis=function(){var r=this;this.playerApiProxy.replayInCurFlowNode=function(e,t){var n;return r.log("replayInCurFlowNode(), vid=".concat(e,", param=").concat(d.jsonTool.safelyStringify(t))),null==(n=r.flowManager.currentFlowNode)?void 0:n.replay(e,t)}},N.registerKernel=d.KernelFactory.registerKernel,N.KernelFactory=d.KernelFactory,u.__decorate([C,u.__metadata("design:type",Function),u.__metadata("design:paramtypes",[Object,Object]),u.__metadata("design:returntype",void 0)],N.prototype,"load",null),u.__decorate([C,u.__metadata("design:type",Function),u.__metadata("design:paramtypes",[Object,Object]),u.__metadata("design:returntype",void 0)],N.prototype,"play",null),u.__decorate([C,u.__metadata("design:type",Function),u.__metadata("design:paramtypes",[]),u.__metadata("design:returntype",void 0)],N.prototype,"replay",null),u.__decorate([C,u.__metadata("design:type",Function),u.__metadata("design:paramtypes",[String]),u.__metadata("design:returntype",void 0)],N.prototype,"pause",null),u.__decorate([C,u.__metadata("design:type",Function),u.__metadata("design:paramtypes",[Number]),u.__metadata("design:returntype",void 0)],N.prototype,"seek",null);var S,L=N;function N(e){var r=this,t="npm";try{t="npm"}catch(e){}d.ReferenceReport.getReporter().collectUsage(1,t),(r=S.call(this,u.__assign(u.__assign(u.__assign({},Y),e.coreConfig),e))||this).plugins={},r.interactMod=null,r.getCommonKv=function(e){return r.dataset.commonMap[e]},r.getStateKv=function(e){return r.dataset.stateMap[e]},r.mutedVolume=1,r.hasMutePlayed=!1,r.mixin=function(e){var n="function"==typeof e?e():e;Object.keys(n).forEach(function(e){if(e in r)throw new Error("cannot override existing player method: ".concat(e));var t=n[e];"function"==typeof t&&(r[e]=t)})},r.log("new H5Player(), input config=",d.jsonTool.safelyStringify(e));var t=Date.now(),n=e.container,o=e.plugins,i=e.mixins,e=e.lazyInitPlugins;if(r.container="string"==typeof n?document.querySelector(n):n,!r.container)throw new Error("cannot find container: ".concat(n));r.fullscreenLogics=new pe(r,r.config.fullscreenContainer);return r.setMaxListeners(100),r.createClickMask(),r.createInnerPlugins(),o instanceof Array&&(e?setTimeout(function(){return r.createPlugins(o)}):r.createPlugins(o)),i instanceof Array&&i.forEach(r.mixin),r.initPluginApis(),r.forwardPluginEvents(),r.initContainerStyle(),r.setupEventFlagData(),r.setupLoopPlay(),r.checkAutoPlayInMute(),r.autoHideMouse(),r.applyStyleOnVideoNodeChange(),r.on(c.H5_PLAY_EVENT.PLAY_SESSION_START,function(){r.hasMutePlayed=!1}),r.setStateKv(c.DATA_STATE.INIT,{type:c.LOG_TYPE.CORE_EVENT,ftime:Date.now(),ext:{stime:t}}),r}function bt(e){return new L(e)}L.registerPlugin(o.pluginName,o),L.registerPlugin(Ne.pluginName,Ne),L.registerPlugin(De.pluginName,De),L.registerPlugin(Je.pluginName,Je),L.registerPlugin(He.pluginName,He);var Tt=1669176226195,yt=Object.freeze({__proto__:null,createH5Player:bt,H5Player:L,BUILD_TIME:Tt,VERSION:"1.12.4",BaseReporter:g,kernelEvtBus:d.kernelEvtBus,EvtEmitter:d.EvtEmitter,PLAY_EVENT:d.PLAY_EVENT,VIDEO_STATE:d.VIDEO_STATE,KERNEL_NAME:d.KERNEL_NAME,PLAY_MODE:d.PLAY_MODE,END_STATE:d.END_STATE,PRELOAD_TYPE:d.PRELOAD_TYPE,VIDEO_CODEC:d.VIDEO_CODEC,CONTAINER_FORMAT:d.CONTAINER_FORMAT,AUDIO_CODEC:d.AUDIO_CODEC,get ErrorCode(){return c.ErrorCode},get ErrorMsg(){return c.ErrorMsg},get FullScreenMode(){return c.FullScreenMode},getAdPlugin:_,adEvents:ae,BaseFlowNode:at,get FLOW_NODE_EVENT(){return c.FLOW_NODE_EVENT},BeaconRequest:y,ImageRequest:ke,definePlugins:tt,autobind:nt,logApiInvoke:rt,once:ot,get H5_EXT_EVENT(){return c.H5_EXT_EVENT},get H5_PLAY_EVENT(){return c.H5_PLAY_EVENT},Plugin:X,isFunctionPlugin:J,createPluginFactory:$,getHookMethodName:Z,registerPlugin:q,deregisterPlugin:W,getPlugin:H,getPlugins:j,pluginExists:n,AdPluginName:U,get AD_TYPE(){return c.AD_TYPE},isPreOrPostAd:F,isVideoId:a,DRM_TYPE:e,DRM_VALUE:te,OFFICIAL_PLUGIN:E,PLUGIN_MAP:Ze,get H5_PAUSE_TYPE(){return c.H5_PAUSE_TYPE},get AUTO_PLAY_POLICY(){return c.AUTO_PLAY_POLICY},get PictureDirection(){return c.PictureDirection},get DATA_EVENTS(){return c.DATA_EVENTS},get DATA_STATE(){return c.DATA_STATE},get LOG_TYPE(){return c.LOG_TYPE},get BUFFER_REASON(){return c.BUFFER_REASON},get LOCAL_KEY(){return c.LOCAL_KEY},get PersistedUserSettings(){return c.PersistedUserSettings},DEFAULT_KEY:t,COMMON_DATA_KEY:l});window.ThumbPlayerH5=yt,Object.defineProperty(c,"AUDIO_CODEC",{enumerable:!0,get:function(){return d.AUDIO_CODEC}}),Object.defineProperty(c,"CONTAINER_FORMAT",{enumerable:!0,get:function(){return d.CONTAINER_FORMAT}}),Object.defineProperty(c,"END_STATE",{enumerable:!0,get:function(){return d.END_STATE}}),Object.defineProperty(c,"EvtEmitter",{enumerable:!0,get:function(){return d.EvtEmitter}}),Object.defineProperty(c,"KERNEL_NAME",{enumerable:!0,get:function(){return d.KERNEL_NAME}}),Object.defineProperty(c,"PLAY_EVENT",{enumerable:!0,get:function(){return d.PLAY_EVENT}}),Object.defineProperty(c,"PLAY_MODE",{enumerable:!0,get:function(){return d.PLAY_MODE}}),Object.defineProperty(c,"PRELOAD_TYPE",{enumerable:!0,get:function(){return d.PRELOAD_TYPE}}),Object.defineProperty(c,"VIDEO_CODEC",{enumerable:!0,get:function(){return d.VIDEO_CODEC}}),Object.defineProperty(c,"VIDEO_STATE",{enumerable:!0,get:function(){return d.VIDEO_STATE}}),Object.defineProperty(c,"kernelEvtBus",{enumerable:!0,get:function(){return d.kernelEvtBus}}),c.AdPluginName=U,c.BUILD_TIME=Tt,c.BaseFlowNode=at,c.BaseReporter=g,c.BeaconRequest=y,c.COMMON_DATA_KEY=l,c.DEFAULT_KEY=t,c.DRM_TYPE=e,c.DRM_VALUE=te,c.H5Player=L,c.ImageRequest=ke,c.OFFICIAL_PLUGIN=E,c.PLUGIN_MAP=Ze,c.Plugin=X,c.VERSION="1.12.4",c.VideoReqInfoPluginName="__thumbplayer-video-request",c.adEvents=ae,c.autobind=nt,c.createH5Player=bt,c.createPluginFactory=$,c.definePlugins=tt,c.deregisterPlugin=W,c.getAdPlugin=_,c.getHookMethodName=Z,c.getPlugin=H,c.getPlugins=j,c.isFunctionPlugin=J,c.isPreOrPostAd=F,c.isVideoId=a,c.logApiInvoke=rt,c.once=ot,c.pluginExists=n,c.registerPlugin=q},{"@tencent/thumbplayer-core":2,"js-sha256":22,tslib:24}],4:[function(e,k,o){Object.defineProperty(o,"__esModule",{value:!0});var s=e("@tencent/thumbplayer-h5"),a=e("tslib"),_=e("@tencent/thumbplayer-core");function B(e){return e&&"object"===(void 0===e?"undefined":_typeof(e))&&"default"in e?e:{default:e}}var V=B(e("lodash.throttle"));t.isEnabled=function(e){return!0},Object.defineProperty(t.prototype,"playtime",{get:function(){var e=this.config.timeOffset,t=this.player.playtime;return e?e(t,!1):t},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){var e;null!=(e=this.el)&&e.parentNode&&this.el.remove(),this.setEvts(!0),this.el=null,this.player=null},t.prototype.setEvts=function(e){var t=this,n=(e=void 0===e?!1:e)?this.player.off:this.player.on;Object.keys(this.eventMap).forEach(function(e){n.call(t.player,e,t.eventMap[e])})},t.prototype.showEl=function(e){(e=void 0===e?this.el:e)&&e.classList.remove(t.hideClassName)},t.prototype.hideEl=function(e){(e=void 0===e?this.el:e)&&e.classList.add(t.hideClassName)},t.sel="",t.disabledClassName="txp_disabled",t.curClassName="txp_current",t.hideClassName="txp_none";var i=t;function t(e,t,n){this.player=e,this.config=n,this.CLICK_EVENT_NAME="click",this.eventMap={};var e=e.container;this.el=e.querySelector(t),this.isMobile=null==n?void 0:n.isMobile,this.isLive="live"===(null==(e=this.player.config)?void 0:e.type),this.showEl()}var K,U="txp_none",F="txp_disabled",Y=[s.VIDEO_STATE.END,s.VIDEO_STATE.IDLE,s.VIDEO_STATE.LOAD_START],Q=(K=i,a.__extends(l,K),l.isEnabled=function(e){e=e.isMobile;return _.uaTool.browser.safari&&!e},l.prototype.show=function(){this.el.classList.remove(U)},l.prototype.hide=function(){this.el.classList.add(U)},l.prototype.setBtnState=function(e){if(e)return this.el.classList.remove(F);this.el.classList.add(F)},l.prototype.destroy=function(){var e;this.setupPlayerEvents(!1),null!=(e=this.el)&&e.remove()},l.prototype.setupPlayerEvents=function(e){e=((e=void 0===e?!0:e)?this.player.on:this.player.off).bind(this.player);e(s.H5_PLAY_EVENT.VIDEO_CANPLAY,this.handlePlayerCanPlay),e(s.H5_PLAY_EVENT.PLAY_SESSION_END,this.handlePlayerSessionEnd),e(s.H5_PLAY_EVENT.VIDEO_SETLEVEL_END,this.handleSetLevelEnd)},l.prototype.setupDOMEvents=function(){this.el=this.player.container.querySelector(l.sel),this.el.addEventListener("click",this.handleClick)},l.prototype.hideDependOnKernel=function(){this.player.kernelName===s.KERNEL_NAME.WASM?this.hide():this.show()},l.sel=".plugin_ctrl_airplay_btn",l.compName="AirPlayBtn",l);function l(e,t,n){var r=K.call(this,e,l.sel,t)||this,e=(r.config=t,r.ctrlbar=n,r.handlePlayerCanPlay=function(){r.hideDependOnKernel(),r.setBtnState(!0)},r.handleSetLevelEnd=function(){r.hideDependOnKernel()},r.handlePlayerSessionEnd=function(){r.setBtnState(!1)},r.handleClick=function(){var e,t;null!=(t=null==(e=r.player.currentVideoElement)?void 0:e.webkitShowPlaybackTargetPicker)&&t.call(e)},!Y.includes(r.player.state));return r.setupDOMEvents(),r.setupPlayerEvents(!0),r.show(),r.setBtnState(e),r}(e=L=L||{}).HOT_MOUSE_OVER="ctrl:hotpoint-mouseover",e.HOT_MOUSE_MOVE="ctrl:hotpoint-mousemove",e.HOT_MOUSE_OUT="ctrl:hotpoint-mouseout";function H(e){return e?j:W}var q,c=a.__assign(a.__assign({FULLSCREEN_CHANGE:"windowFullscreenChange",FULLSCREEN_ERROR:"fullscreenError",FAKE_FULLSCREEN_CHANGE:"browserFullscreenChange",CLICK_PIPBTN:"ctrl:click-pipbtn",CLICK_NEXTBTN:"ctrl:click-nextbtn",CLICK_PLAYBTN:"ctrl:click-playbtn",CLICK_REPLAY:"ctrl:click-replay",SET_LANGUAGE:"ctrl:set-language",SET_LEVEL:"ctrl:set-level",SET_AUDIO:"ctrl:set-audio",SET_PLAYRATE:"ctrl:set-playrate",SET_VOLUME:"ctrl:set-volume",TOGGLE_OVERLAY:"ctrl:toggle-overlay",MOUSE_DONW:"ctrl:progress-mousedown",MOUSE_DOWN:"ctrl:progress-mousedown",MOUSE_MOVE:"ctrl:progress-mousemove",MOUSE_UP:"ctrl:progress-mouseup",SHOW:"ctrl:show",HIDE:"ctrl:hide"},L),{TEST_EVENT:"ctrl:inner-test-event",RESIZE:"ctrl:resize",SHOW_LEVELS:"ctrl:show-levels",HOVER_PROGRESS:"ctrl:hover-progress"}),W=".plugin_ctrl_txp_bottom",j=".plugin_ctrl_mobile_txp_bottom",G=".plugin_ctrl_txp_shadow",z=".plugin_ctrl_txp_gradient_bottom",X=(o.CTRL_SIZE=void 0,(e=o.CTRL_SIZE||(o.CTRL_SIZE={})).LARGE="large",e.NORMAL="normal",o.PlayBtnStatus=void 0,(e=o.PlayBtnStatus||(o.PlayBtnStatus={})).PAUSE="pause",e.PLAY="play",e.REPLAY="replay",e.STOP="stop",q=i,a.__extends(n,q),Object.defineProperty(n.prototype,"curClass",{get:function(){return this.isMobile?"current":i.curClassName},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"selected",{get:function(){return this.selectedValue},set:function(t){var e=null==(e=this.popupOptions)?void 0:e.find(function(e){return String(e.value)===String(t)});this.selectedValue=t,e?(this.showEl(),this.setCurrent(e)):(this.label.textContent="",this.hideEl())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"popupOptions",{get:function(){return this.allValue},set:function(e){var t=this,n=e.find(function(e){return String(e.value)===String(t.selectedValue)}),r=(n?(this.setCurrent(n),this.showEl()):this.label.textContent="",this.allValue=e,this.isMobile?"li":"div"),o=/(<([^>]+)>)/;this.popup.querySelector(this.isMobile?".select_list":".txp_popup_content").innerHTML=e.map(function(e){return"<"+r+' \n      class="txp_menuitem '+(e.value===t.selected?t.curClass:"")+'" \n      data-label="'+(o.test(e.label)?"":e.label)+'"\n      data-value="'+e.value+'" \n      data-payload="'+(e.payload||"")+'">'+e.label+"</"+r+">"}).join("")},enumerable:!1,configurable:!0}),n.prototype.setCurrent=function(t){var e,n=this;this.label.innerHTML=null!=(e=null==t?void 0:t.btnLabel)?e:null==t?void 0:t.label,this.popup.querySelectorAll(".txp_menuitem").forEach(function(e){e.getAttribute("data-value")===String(t.value)?e.classList.add(n.curClass):e.classList.remove(n.curClass)})},n.prototype.hookPlaySessionEnd=function(){this.el&&this.el.classList.add(i.disabledClassName)},n.prototype.hookFlowNodeStart=function(e){"VideoFlowNode"===e.data.name&&this.el.classList.remove(i.disabledClassName)},n.prototype.initItemClick=function(){var o=this;this.popup.addEventListener(this.CLICK_EVENT_NAME,function(e){o.player.setStateKv("ctrlbar:"+o.popupName+":"+o.CLICK_EVENT_NAME,{type:s.LOG_TYPE.USER_ACTION});for(var t,n,r=e.target;r&&(null==(t=r.classList)||!t.contains("txp_menuitem"));)r=r.parentNode;o.isMobile&&(o.hideEl(o.popup),o.popup.classList.remove("overlay_flex"),o.ctrlbar.emit(c.TOGGLE_OVERLAY,!1));e=null==r?void 0:r.dataset;null!=e&&e.value&&e.value!==String(o.selected)&&(null!=(n=o.onSelect)&&n.call(o,e),o.config.hidePopupOnClick)&&o.hideEl(o.popup)})},n.compName="popup",n);function n(e,t,n){var r=q.call(this,e,t.selector,t)||this;return r.ctrlbar=n,r.hideEl(),r.popup=r.isMobile?r.player.container.querySelector(t.modSelector):r.el.querySelector(".txp_popup"),r.el&&(r.label=r.el.querySelector(".txp_label"),r.isMobile?r.label.addEventListener(r.CLICK_EVENT_NAME,function(){!r.popup.classList.contains(i.hideClassName)?r.hideEl(r.popup):(r.showEl(r.popup),r.popup.classList.add("overlay_flex")),r.ctrlbar.emit(c.TOGGLE_OVERLAY,!0),r.hideEl(r.ctrlbar.el)}):(r.label.addEventListener("mouseover",function(){return r.showEl(r.popup)}),r.el.addEventListener("mouseleave",function(){r.hideEl(r.popup)})),r.initItemClick()),r}J=X,a.__extends($,J),$.isEnabled=function(e){return!(e.isMobile||e.disableAudioTrack)},$.compName="AudioTrackPopup",$.popupSelector=".txp_right_controls .txp_btn_audio_track";var J,u=$;function $(e,t,n){var r=J.call(this,e,a.__assign(a.__assign({},t),{selector:$.popupSelector}),n)||this;return r.popupName="audiotrack",r.onSelect=function(e){r.ctrlbar.emit(c.SET_AUDIO,e)},r}function Z(e,t){t.isInRequest?e.triggerAutoplay().then(function(){return e.play()}):e.play()}ee=i,a.__extends(r,ee),r.isEnabled=function(e){var t=e.showCenterPlayBtn,e=e.showCenterReplayBtn;return t||e},r.prototype.initDOMEvents=function(){var e=this;this.playBtn.addEventListener("click",function(){e.hideEl(e.playBtn),Z(e.player,e.ctrlbar)}),this.replayBtn.addEventListener("click",function(){e.hideEl(e.replayBtn),e.player.replay()})},r.prototype.initPlayerEvents=function(){function t(){n.config.showCenterPlayBtn&&n.showEl(n.playBtn)}var n=this,e=this.player;t(),e.on(s.H5_PLAY_EVENT.AD_AUTOPLAY_BLOCKED,function(e){e.data.adType===s.AD_TYPE.PRE&&t()}),e.on(s.H5_PLAY_EVENT.AD_PAUSE,function(){n.showEl(n.playBtn)}),e.on(s.H5_PLAY_EVENT.AD_RESUME,function(){n.hideEl(n.playBtn)}),e.on(s.H5_PLAY_EVENT.VIDEO_AUTOPLAY_BLOCKED,t),e.on(s.H5_PLAY_EVENT.AD_PLAYING,function(){return n.hideEl(n.playBtn)}),e.on(s.H5_PLAY_EVENT.VIDEO_PLAYING,function(e){e.data.isFirst&&n.hideEl(n.playBtn)}),e.on(s.H5_PLAY_EVENT.PLAY_SESSION_END,function(e){e=e.data;n.hideEl(n.playBtn),n.config.showCenterReplayBtn&&e.endState===_.END_STATE.NORMAL&&n.showEl(n.replayBtn)}),e.on(s.H5_PLAY_EVENT.PLAY_SESSION_START,function(){n.hideEl(n.replayBtn)})},r.prototype.prepareDOM=function(){var e='<div class="'+r.sel.slice(1)+'">\n      <div class="btn_play '+i.hideClassName+'">\n        <svg class="icon_play" viewBox="0 0 100 100">\n          <circle cx="50" cy="50" r="50" style="fill:#222;fill-opacity:0.75"></circle>\n          <path\n            transform="translate(36, 33)"\n            d="M0.6,2C0.6,2,0,3.5,0,16.9C0,30.3,0.6,32,0.6,32c0,1.5,1.6,2.5,2.9,1.8c0,0,3-0.5,15.2-6.6c12.2-6.1,14.2-8.4,14.2-8.4c1.5-0.7,1.5-2.8,0-3.6c0,0-3.3-3.1-14.2-8.6C7.9,1.1,3.5,0.2,3.5,0.2C2.1-0.5,0.6,0.5,0.6,2z"\n            style="fill:#fff;"\n          />\n        </svg>\n      </div>\n\n      <div class="btn_replay '+i.hideClassName+'">\n        <svg class="icon_replay" viewBox="0 0 30 30">\n          <use xlink:href="#txp_svg_replay"></use>\n        </svg>\n        <div>éæ°æ­æ¾</div>\n      </div>\n    </div>';this.ctrlbar.el.insertAdjacentHTML("beforebegin",e),this.el=this.player.container.querySelector(r.sel),this.playBtn=this.el.querySelector(".btn_play"),this.replayBtn=this.el.querySelector(".btn_replay")},r.sel=".plugin_ctrl_center_btn",r.compName="CenterBtn";var ee,te=r;function r(e,t,n){e=ee.call(this,e,r.sel,t)||this;return e.config=t,e.ctrlbar=n,e.prepareDOM(),e.initDOMEvents(),e.initPlayerEvents(),e}ne=X,a.__extends(p,ne),p.isEnabled=function(){return!0},p.compName="DefinitionPopup",p.popupSelector=".txp_right_controls .txp_btn_definition",p.modSelector=".mod_overlay.definition";var ne,d=p;function p(e,t,n){var r=ne.call(this,e,a.__assign(a.__assign({},t),{selector:p.popupSelector,modSelector:p.modSelector}),n)||this;return r.popupName="definition",r.onSelect=function(e){r.ctrlbar.emit(c.SET_LEVEL,e)},r.onShowLevel=function(){r.ctrlbar.emit(c.SHOW_LEVELS)},r.label.addEventListener("mouseover",r.onShowLevel),r}re=i,a.__extends(f,re),f.isEnabled=function(e){var t=e.disableFakeFullscreen,n=e.useH5FakeFullscreen,e=e.isMobile;return void 0!==n?!!n:void 0!==t?!t:!(!_.uaTool.os.android&&e)},Object.defineProperty(f.prototype,"isFullScreen",{get:function(){return this.player.fullscreenMode===s.FullScreenMode.FAKE_FULLSCREEN},enumerable:!1,configurable:!0}),f.prototype.setTipStatus=function(e){this.el.dataset.status=String(e),this.isMobile||(this.tip.innerText=e?"éåºç½é¡µå¨å±":"ç½é¡µå¨å±")},f.prototype.requestFullScreen=function(e){this.player.requestFullScreen("enter"===(e=void 0===e?"enter":e),s.FullScreenMode.FAKE_FULLSCREEN)},f.prototype.setupDOMEvents=function(){var n=this;this.el.addEventListener(this.CLICK_EVENT_NAME,function(){n.player.setStateKv("ctrlbar:"+f.compName+":"+n.CLICK_EVENT_NAME,{type:s.LOG_TYPE.USER_ACTION}),n.requestFullScreen(n.isFullScreen?"exit":"enter")}),this.isMobile||(this.el.addEventListener("mouseover",function(){n.showEl(n.tip)}),this.el.addEventListener("mouseout",function(){n.hideEl(n.tip)})),this.player.on(s.PLAY_EVENT.FULLSCREEN_CHANGE,function(e){var e=e.data,t=e.mode,e=e.isEnter;t===s.FullScreenMode.FAKE_FULLSCREEN&&(t=n.player.config.fullscreenContainer||n.player.container,n.setTipStatus(e),t.classList.toggle(f.fullscreenClassName,e),n.ctrlbar.emit(c.FAKE_FULLSCREEN_CHANGE,e))})},f.sel=".txp_right_controls .txp_btn_fake",f.fullscreenClassName="plugin_ctrl_txp_mode_fullscreen",f.compName="FakeFullscreen";var re,oe=f;function f(e,t,n){e=re.call(this,e,f.sel,t)||this;return e.ctrlbar=n,e.tip=e.el.querySelector(".txp_tooltip"),e.el.classList.remove(i.hideClassName),e.setupDOMEvents(),e}ie=i,a.__extends(E,ie),E.isEnabled=function(e){var t=e.isMobile,e=e.useH5FakeFullscreen;return void 0!==e?!e:!(!_.uaTool.os.ios&&t)},Object.defineProperty(E.prototype,"isFullScreen",{get:function(){return this.player.fullscreenMode===s.FullScreenMode.FULL_SCREEN},enumerable:!1,configurable:!0}),E.prototype.setDOMStatus=function(e){this.el.dataset.status=e,this.isMobile||(this.tip.innerText=e===ae.Exit?"éåºå¨å±":"å¨å±")},E.prototype.requestFullScreen=function(e){var t=this;return this.player.requestFullScreen("enter"===(e=void 0===e?"enter":e),s.FullScreenMode.FULL_SCREEN).catch(function(e){t.ctrlbar.emit(c.FULLSCREEN_ERROR,e)})},E.prototype.listenDblclick=function(){var t=this;this.player.container.querySelector(G).addEventListener("dblclick",function(){var e;null!=(e=t.ctrlbar.instances.FakeFullscreen)&&e.isFullScreen?t.ctrlbar.instances.FakeFullscreen.requestFullScreen("exit"):t.requestFullScreen(t.isFullScreen?"exit":"enter")})},E.prototype.setupDOMEvents=function(){var e=this;this.el.addEventListener("click",function(){e.el.classList.contains(i.disabledClassName)||(e.player.setStateKv("ctrlbar:"+E.compName+":click",{type:s.LOG_TYPE.USER_ACTION,message:"fullscreen="+e.isFullScreen}),e.requestFullScreen(e.isFullScreen?"exit":"enter"))}),this.isMobile||(this.el.addEventListener("mouseover",function(){return e.showEl(e.tip)}),this.el.addEventListener("mouseout",function(){return e.hideEl(e.tip)})),this.player.on(s.PLAY_EVENT.FULLSCREEN_CHANGE,this.onFullscreenChange),this.player.on(s.H5_PLAY_EVENT.PLAY_SESSION_END,this.onPlaySessionEnd),this.player.on(s.H5_PLAY_EVENT.PLAY_SESSION_START,this.onPlaySessionStart)},E.sel=".txp_right_controls .txp_btn_fullscreen",E.compName="Fullscreen";var ie,ae,se=E;function E(e,t,n){var r=ie.call(this,e,E.sel,t)||this;return r.ctrlbar=n,r.onFullscreenChange=function(e){var e=e.data,t=e.mode,e=e.isEnter;t===s.FullScreenMode.FULL_SCREEN&&(r.setDOMStatus(e?ae.Exit:ae.Enter),r.ctrlbar.emit(c.FULLSCREEN_CHANGE,e),(r.player.config.fullscreenContainer||r.player.container).classList.toggle("thumbplayer-fullscreen",e))},r.onPlaySessionEnd=function(){_.uaTool.os.ios&&r.el.classList.add(i.disabledClassName)},r.onPlaySessionStart=function(){r.el.classList.remove(i.disabledClassName)},r.tip=r.el.querySelector(".txp_tooltip"),r.setupDOMEvents(),r.isMobile||r.listenDblclick(),r}(e=ae=ae||{}).Enter="false",e.Exit="true",o.HOTPOINT_TIP_TYPE=void 0,(e=o.HOTPOINT_TIP_TYPE||(o.HOTPOINT_TIP_TYPE={})).DEFAULT="default",e.WITH_PREVIEW="with-preview",e.NONE="none";var _e,le={mouseover:L.HOT_MOUSE_OVER,mousemove:L.HOT_MOUSE_MOVE,mouseout:L.HOT_MOUSE_OUT},ce=(_e=i,a.__extends(h,_e),h.isEnabled=function(e){return!e.isMobile},h.prototype.clearHotPoints=function(){Object.values(this.hotPointMap).forEach(function(e){e=e.el;e instanceof HTMLElement&&e.remove()}),this.hotPointMap={}},h.prototype.addHotPoints=function(e){var t=this;if(null!=e&&e.length)return e=e.map(function(e){e=a.__assign({},e);return e.uuid=_.commonTool.createGUID(),t.hotPointMap[e.uuid]=e}),this.isReady&&this.renderDom(),e},h.prototype.deleteHotPoints=function(e){var n=this;e.forEach(function(e){var t=n.hotPointMap[e];t&&(null!=(t=t.el)&&t.remove(),delete n.hotPointMap[e])})},h.prototype.setEvts=function(e){var t=this,n=(e=void 0===e?!1:e)?this.el.removeEventListener:this.el.addEventListener;Object.keys(le).forEach(function(e){n.call(t.el,e,t.mouseEvtHandler,!1)}),_e.prototype.setEvts.call(this,e)},h.prototype.isValidHotPoint=function(e){return e.timing<=this.player.duration},h.prototype.renderDom=function(){var r=this;Object.entries(this.hotPointMap).forEach(function(e){var t,n=e[0],e=e[1];e.el instanceof HTMLElement||(t=r.createPointElement(e))&&(r.el.insertAdjacentElement("beforeend",t),r.hotPointMap[n]=a.__assign(a.__assign({},e),{el:t}))})},h.prototype.createPointElement=function(e){var t,n;if(this.isValidHotPoint(e))return t=document.createElement("div"),n=e.timing/this.player.duration*100,t.classList.add(h.defaultPointClass),t.style.left=n+"%",t.dataset.info=JSON.stringify(e),t;this.logger.warn("ctrlbar: hotpoint å¥å¼éæ³ï¼å·²å¿½ç¥",e)},h.prototype.setupTip=function(){var e;this.config.hotPointCustomTipEl?e=this.config.hotPointCustomTipEl:(e=document.createElement("div")).classList.add(h.defaultTipClass),e.classList.add(h.hideClassName),this.el.insertAdjacentElement("beforeend",e),this.tipEl=e},Object.defineProperty(h.prototype,"offsetLeft",{get:function(){return this.player.container.getBoundingClientRect().left},enumerable:!1,configurable:!0}),h.prototype.mouseEvtHandler=function(e){var t,n=e.target.dataset;n.info&&(t=this.config.hotPointTipType,n=JSON.parse(n.info),t===o.HOTPOINT_TIP_TYPE.DEFAULT&&this.mouseEvtFuncMap[e.type]({point:n,mouseEvent:e}),this.ctrlbar.emit(le[e.type],{point:n,mouseEvent:e,hotPointTipType:t}))},h.prototype.onMouseOver=function(e){e=e.point;this.tipEl&&e.text&&(this.tipEl.textContent=e.text,this.tipEl.classList.remove(h.hideClassName))},h.prototype.onMouseMove=function(e){var t,n;this.tipEl&&(e=e.mouseEvent,t=this.player.container,n=this.tipEl.getBoundingClientRect().width,(e=(e=e.clientX-this.offsetLeft-n/2)<0?0:e)>t.clientWidth-n&&(e=t.clientWidth-n),this.tipEl.style.transform="translateX("+e+"px)")},h.prototype.onMouseOut=function(){this.tipEl&&this.tipEl.classList.add(h.hideClassName)},h.sel=".txp_hotpoint",h.compName="HotPoint",h.defaultPointClass="txp_interact_dot",h.defaultTipClass="txp_hotpoint_tip",h);function h(e,t,n){var r=_e.call(this,e,h.sel,t)||this;return r.ctrlbar=n,r.hotPointMap={},r.isReady=!1,r.onVideoCanPlay=function(){r.isReady||(r.isReady=!0,r.renderDom())},r.onPlaySessionEnd=function(){r.isReady=!1,r.tipEl.classList.add(h.hideClassName),r.clearHotPoints()},r.config.hotPointTipType||(r.config.hotPointTipType=o.HOTPOINT_TIP_TYPE.DEFAULT),r.mouseEvtHandler=r.mouseEvtHandler.bind(r),r.mouseEvtFuncMap={mouseover:r.onMouseOver.bind(r),mousemove:V.default(r.onMouseMove.bind(r),16.6,{trailing:!1}),mouseout:r.onMouseOut.bind(r)},r.eventMap=((e={})[s.H5_PLAY_EVENT.VIDEO_CANPLAY]=r.onVideoCanPlay,e[s.H5_PLAY_EVENT.PLAY_SESSION_END]=r.onPlaySessionEnd,e),r.config.hotPointTipType===o.HOTPOINT_TIP_TYPE.DEFAULT&&r.setupTip(),r.setEvts(!1),r.logger=new _.Logger(r.player.config.instanceId,"Ctrl:HotPoints"),r}ue=X,a.__extends(g,ue),g.isEnabled=function(e){return!(e.isMobile||e.disableLang)},g.compName="LanguagePopup",g.modSelector=".mod_overlay.language",g.popupSelector=".txp_right_controls .txp_btn_language";var ue,A=g;function g(e,t,n){var r=ue.call(this,e,a.__assign(a.__assign({},t),{selector:g.popupSelector,modSelector:g.modSelector}),n)||this;return r.popupName="language",r.onSelect=function(e){r.ctrlbar.emit(c.SET_LANGUAGE,e)},r}de=i,a.__extends(m,de),Object.defineProperty(m.prototype,"offsetLeft",{get:function(){return this.el.getBoundingClientRect().left},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"bufferedTime",{get:function(){var s,_=this,l=this.player.videoBuffered,c=l.length;return 1===c?l[0].end:(s=0,l.forEach(function(e,t){var n=e.start,r=e.end,o=_.playtime;if(n<=o&&o<=r)if(t+1<c)for(var i=t+1;i<c;i++){var a=l[i].start-l[i-1].end;if(!(0<=a&&a<=.2)){s=l[i-1].end;break}s=l[i].end}else s=e.end}),s)},enumerable:!1,configurable:!0}),m.prototype.destroy=function(){this.el.removeEventListener("touchstart",this.onMouseDown),this.el.removeEventListener("mousedown",this.onMouseDown),document.removeEventListener("touchmove",this.onMouseMove),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("touchend",this.onMouseUp),document.removeEventListener("mouseup",this.onMouseUp),de.prototype.destroy.call(this)},m.prototype.setActive=function(e){this.isActive!==e&&(this.isActive=e,this.setEvts(!this.isActive),this.isActive?this.showEl():this.hideEl())},m.prototype.setTooltip=function(e){var t=this.tooltip,n=this.tooltipPosLimit,e=(t.innerText=_.commonTool.formatPlayTime(e*this.ctrlbar.duration),Math.max(n,Math.min(100*e,100-n)));t.style.left=e+"%"},m.prototype.updateBufferedBar=function(e){0===(e=void 0===e?this.bufferedTime:e)?this.progressLoaded.style.width="0":this.ctrlbar.duration&&"number"==typeof e&&(e=Math.min(Math.round(100*e/this.ctrlbar.duration),100*this.maxPercent),this.progressLoaded.style.width=(e=99<=e?100:e)+"%")},m.prototype.updateProgress=function(e){Number.isNaN(e)||(this.progressPlayed.style.width=(e=100*e)+"%",this.scrubber.style.left=e+"%")},m.prototype.getPercentByClientX=function(e){e=("touches"in e?e.touches[0]:e).clientX-this.offsetLeft,e=(e=Math.abs(e-this.el.clientWidth)<=1?this.el.clientWidth:e)/this.el.clientWidth;return Math.max(0,Math.min(1,e))},m.prototype.onTimeUpdate=function(){var e;this.isMouseDown||(e=this.playtime/this.ctrlbar.duration,this.updateProgress(e),this.updateBufferedBar())},m.prototype.onStateChange=function(e){e=e.data;-1!==[_.VIDEO_STATE.IDLE,_.VIDEO_STATE.END].indexOf(e.new)&&(this.updateProgress(0),this.updateBufferedBar(0))},m.prototype.setTooltipOnHover=function(){var t=this;this.el.addEventListener("mouseover",function(e){t.config.hideHoverTime||void 0===t.config.hideHoverTime&&t.shouldHideHoverTime||(e=t.getPercentByClientX(e),t.setTooltip(e),t.showEl(t.tooltip),t.tooltip.style.display="flex")}),this.el.addEventListener("mouseout",function(){return t.hideEl(t.tooltip)}),this.el.addEventListener("mousemove",function(e){e=t.getPercentByClientX(e);t.setTooltip(e)})},m.prototype.beforeSeek=function(){var e=this;this.pauseTimer=window.setTimeout(function(){return e.player.pause()},300)},m.prototype.doSeek=function(e){var t=this.config.timeOffset,e=e*this.ctrlbar.duration;this.player.seek(t?t(e,!0):e),this.pauseTimer&&(window.clearTimeout(this.pauseTimer),this.pauseTimer=null),this.player.state!==_.VIDEO_STATE.PAUSE||this.player.config.remainPauseStateAfterSeek||this.player.play()},m.prototype.listenReqInfoEnd=function(){var r=this;this.player.pluginMsg.on(s.H5_EXT_EVENT.GETINFO_OVER,function(e){var e=e.data,t=r.player.plugins,t=t["ui-preview"]||t["ui-preview-list"],n=0<(null==(n=e.parseData)?void 0:n.preview);r.shouldHideHoverTime=!(!t||n||null==(n=null==(t=e.parseData)?void 0:t.previewList)||!n.length)})},m.sel=".txp_progress_bar_container",m.compName="Progress";var de,pe=m;function m(e,t,n){var r=de.call(this,e,m.sel,t)||this;r.ctrlbar=n,r.isMouseDown=!1,r.maxPercent=1,r.isActive=!0,r.shouldHideHoverTime=!1,r.onMouseMove=function(e){var t;e.preventDefault(),r.isMouseDown&&(t=Math.min(r.getPercentByClientX(e),r.maxPercent),r.updateProgress(t),r.ctrlbar.emit(c.MOUSE_MOVE,t),e.preventDefault())},r.onMouseUp=function(e){e.preventDefault(),document.removeEventListener("touchmove",r.onMouseMove),document.removeEventListener("mousemove",r.onMouseMove),document.removeEventListener("touchend",r.onMouseUp),document.removeEventListener("mouseup",r.onMouseUp),r.isMouseDown&&(r.player.setStateKv("ctrlbar:"+m.compName+":"+(r.isMobile?"touchend":"mouseup"),{type:s.LOG_TYPE.USER_ACTION,eventId:r.evtId}),r.isMouseDown=!1,e=parseFloat(r.progressPlayed.style.width)/100,r.doSeek(e),r.ctrlbar.emit(c.MOUSE_UP,e))},r.onMouseDown=function(e){e.preventDefault(),document.addEventListener("touchend",r.onMouseUp),document.addEventListener("mouseup",r.onMouseUp),document.addEventListener("touchmove",r.onMouseMove,{passive:!1}),document.addEventListener("mousemove",r.onMouseMove,{passive:!1}),r.evtId=r.player.dataset.generateEvtId(),r.player.setStateKv("ctrlbar:"+m.compName+":"+(r.isMobile?"touchstart":"mousedown"),{type:s.LOG_TYPE.USER_ACTION,eventId:r.evtId}),r.player.state!==_.VIDEO_STATE.IDLE&&(r.beforeSeek(),r.isMouseDown=!0,e=Math.min(r.getPercentByClientX(e),r.maxPercent),r.updateProgress(e),r.ctrlbar.emit(c.MOUSE_DOWN,e))},r.eventMap=((e={})[_.PLAY_EVENT.TIME_UPDATE]=r.onTimeUpdate.bind(r),e[_.PLAY_EVENT.STATE_CHANGE]=r.onStateChange.bind(r),e[_.PLAY_EVENT.VIDEO_BUFFER_CHANGE]=function(){return r.updateBufferedBar()},e),r.setEvts(),r.progressLoaded=r.el.querySelector(".txp_progress_load"),r.progressPlayed=r.el.querySelector(".txp_progress_play"),r.scrubber=r.el.querySelector(".txp_btn_scrubber"),r.tooltip=r.el.querySelector(".txp_tooltip");return r.tooltipPosLimit=45/r.player.container.clientWidth/2*100+.5,r.isMobile&&r.el.appendChild(r.scrubber),r.el.addEventListener("touchstart",r.onMouseDown),r.el.addEventListener("mousedown",r.onMouseDown),r.isMobile||(r.setTooltipOnHover(),r.el.addEventListener("mouseover",function(){n.emit(c.HOVER_PROGRESS)})),r.listenReqInfoEnd(),r}(e=y=y||{}).IDLE="idle",e.BACK_PLAYING="backPlaying",e.LIVE_PLAYING="livePlaying",fe=pe,a.__extends(v,fe),v.isEnabled=function(e){return!e.isMobile},v.prototype.destroy=function(){var e;null!=(e=this.liveTimeDisplayDom)&&e.parentNode&&(this.liveTimeDisplayDom.remove(),this.liveTimeDisplayDom=null),null!=(e=this.returnLiveBtn)&&e.parentNode&&(this.returnLiveBtn.remove(),this.returnLiveBtn=null),this.playerApiForPlugins=null,this.setTimeupdateTimer(!1),fe.prototype.destroy.call(this)},v.prototype.setActive=function(e){fe.prototype.setActive.call(this,e),this.liveTimeDisplayDom.style.display=e?"flex":"none",this.hideEl(this.returnLiveBtn)},v.prototype.setTooltip=function(e){var t=this.tooltip,n=this.tooltipPosLimit,n=Math.max(n,Math.min(100*e,100-n)),e=this.getTimeTip(e);t.style.left=n+"%",t.innerText=e},v.prototype.updateBufferedBar=function(e){void 0===e&&this.bufferedTime},v.prototype.onTimeUpdate=function(){},v.prototype.onStateChange=function(){},v.prototype.beforeSeek=function(){},v.prototype.doSeek=function(e){this.seek(e)},v.prototype.addLiveTimeDisplay=function(){var e=this.ctrlbar.el.querySelector(".txp_left_controls");this.liveTimeDisplayDom=_.domTool.creatDom('<txpdiv class="txp_time_display txp_time_display_live" style="display: none;">\n      <txpdiv class="txp_live_badge" style="display: block">ç´æ­ä¸­</txpdiv>\n    </txpdiv>'),this.liveBadgeDom=this.liveTimeDisplayDom.querySelector(".txp_live_badge"),e.append(this.liveTimeDisplayDom)},v.prototype.addReturnLiveBtn=function(){var e=this,t=this.ctrlbar.el.querySelector(".txp_left_controls");this.returnLiveBtn=_.domTool.creatDom('<txpdiv class="txp_btn txp_btn_return txp_none">\n      <txpdiv class="txp_label">è¿åç´æ­</txpdiv>\n    </txpdiv>'),t.append(this.returnLiveBtn),this.returnLiveBtn.addEventListener("click",function(){e.seek(1)})},v.prototype.updateLiveTime=function(e,t){_.domTool.text(this.liveBadgeDom,e+" "+(t=void 0===t?"":t))},v.prototype.setPlayBackState=function(e){e?(_.domTool.addClass(this.liveBadgeDom,"txp_live_badge_back"),this.showEl(this.returnLiveBtn)):(_.domTool.removeClass(this.liveBadgeDom,"txp_live_badge_back"),this.hideEl(this.returnLiveBtn))},v.prototype.addPlayerEvts=function(){var t=this;this.player.on(s.H5_PLAY_EVENT.VIDEO_REQ_INFO_END,function(e){var e=e.data.data;e&&!e.error&&(e=(e||{}).resData,t.clientStartTimeMS=Date.now(),t.playbackData=null==(e=e)?void 0:e.playback,t.playbackData?t.playbackState===y.IDLE&&(t.setPlayBackEnabled(!0),0<t.player.loadParam.videoReqInfoParam.playbacktime?t.enterState(y.BACK_PLAYING):t.enterState(y.LIVE_PLAYING)):t.setPlayBackEnabled(!1))}),this.player.on(s.H5_PLAY_EVENT.PLAY_SESSION_END,function(){t.isSwitchBackOp?t.isSwitchBackOp=!1:t.enterState(y.IDLE)}),this.player.on(s.H5_PLAY_EVENT.VIDEO_PLAYING,function(){t.isSwitchBackOp=!1})},v.prototype.setPlayBackEnabled=function(e){this.setActive(e),this.setTimeupdateTimer(e)},v.prototype.enterState=function(e,t){var n,r,o=this;this.playbackData&&this.playbackState!==e&&((n=this.playbackState)===y.IDLE&&e===y.LIVE_PLAYING?this.playbackState=e:n===y.LIVE_PLAYING&&e===y.BACK_PLAYING?(r=t.backDurationMS,t=this.calcBackAbsoluteTimeS(Date.now(),r),this.switchPlay(t,function(){o.curBackDurationMS=r,o.playbackState=e},function(e){o.playbackState=y.LIVE_PLAYING;var t=e.code,n=e.message,e=e.data;null!=t&&t.startsWith(s.ErrorCode.GETINFO_LIVE_SERVER_CODE_PREFIX)?o.emitPlayerEvts("playbackFailed",a.__assign({code:t,message:n},e)):"function"==typeof(null==(t=o.player.plugins.tips)?void 0:t.show)&&t.show("åçåºéï¼è¯·ç¨ååè¯è¯...")})):n===y.BACK_PLAYING&&e===y.LIVE_PLAYING?this.switchPlay(0,function(){o.playbackState=e}):e===y.IDLE&&(this.playbackState=e))},Object.defineProperty(v.prototype,"playbackState",{get:function(){return this.playbackStateInner},set:function(e){this.playbackStateInner=e,this.onPlaybackStateChange(e),this.emitPlayerEvts("playbackStateChange",{state:this.playbackState})},enumerable:!1,configurable:!0}),v.prototype.onPlaybackStateChange=function(e){switch(e){case y.LIVE_PLAYING:this.exitBackPlaying();break;case y.BACK_PLAYING:this.enterBackPlaying();break;case y.IDLE:this.exitBackPlaying(),this.setPlayBackEnabled(!1)}},v.prototype.emitPlayerEvts=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];(t=this.player).emit.apply(t,a.__spreadArray([e],n,!1))},v.prototype.switchPlay=function(e,t,n){var r;this.isSwitchBackOp=!0,null!=(r=this.playerApiForPlugins)&&r.replayInCurFlowNode&&this.playerApiForPlugins.replayInCurFlowNode(this.player.vid,{videoReqInfoParam:{playbacktime:e}}).then(function(){null!=t&&t()}).catch(function(e){null!=n&&n(e)})},v.prototype.seekInBackState=function(e){var e=e.backDurationMS,t=this.calcBackAbsoluteTimeS(Date.now(),e),n=this.player.currentVideoInfo.loadingUrl,n=_.urlTool.updateUrlParam(n,"wsStreamTimeABS",""+t);this.curBackDurationMS=e,this.isSwitchBackOp=!0,null!=(t=this.playerApiForPlugins)&&t.replayInCurFlowNode&&this.playerApiForPlugins.replayInCurFlowNode({url:n})},v.prototype.enterBackPlaying=function(){this.setPlayBackState(!0),this.updateLiveTime("åçä¸­")},v.prototype.exitBackPlaying=function(){this.updateProgress(1),this.setPlayBackState(!1),this.curBackDurationMS=0,this.player.loadParam.videoReqInfoParam.playbacktime=0,this.updateLiveTime("ç´æ­ä¸­")},v.prototype.setTimeupdateTimer=function(e){e?0===this.timeupdateTimerID&&(this.timeupdateTimerID=window.setInterval(this.onTimeupdate.bind(this),200)):0<this.timeupdateTimerID&&(window.clearInterval(this.timeupdateTimerID),this.timeupdateTimerID=0)},v.prototype.calcMaxBackDurationS=function(e){var t=this.playbackData.playbacktime;if(!this.maxBackDurationOverflow){e=this.calcStreamAbsoluteDurationMS(e)/1e3;if(e<t)return this.maxBackDurationOverflow=!1,e;this.maxBackDurationOverflow=!0}return t},v.prototype.calcAbsoluteTimeMS=function(e){return 1e3*this.playbackData.svrtick+(e-this.clientStartTimeMS)},v.prototype.calcStreamAbsoluteDurationMS=function(e){return this.calcAbsoluteTimeMS(e)-1e3*this.playbackData.playbackstart},v.prototype.calcBackAbsoluteTimeS=function(e,t){return Math.round((this.calcAbsoluteTimeMS(e)-t)/1e3)},v.prototype.onTimeupdate=function(){var e,t,n,r,o,i;this.isMouseDown||this.player.state===_.VIDEO_STATE.PLAYING&&(t=e="",i=Date.now(),n=this.calcStreamAbsoluteDurationMS(i),this.playbackState===y.BACK_PLAYING?(r=this.calcMaxBackDurationS(i),o=(n-this.curBackDurationMS)/1e3,i=this.calcBackAbsoluteTimeS(i,this.curBackDurationMS),this.player.loadParam.videoReqInfoParam.playbacktime=i,t="åçä¸­",e=""+_.commonTool.formatPlayTime(o),this.maxBackDurationOverflow||(i=(r-this.curBackDurationMS/1e3)/r,this.updateProgress(i))):(t="ç´æ­ä¸­",e=""+_.commonTool.formatPlayTime(n/1e3)),this.liveStateTimeStr!==e)&&(this.liveStateTimeStr=e,this.updateLiveTime(t,e))},v.prototype.calcPercent2BackTimeS=function(e){return(1-e)*this.calcMaxBackDurationS(Date.now())},v.prototype.getTimeTip=function(e){e=this.calcPercent2BackTimeS(e);return"åé"+_.commonTool.formatPlayTime(e)},v.prototype.seek=function(e){var t=this;0<this.seekIntervalId||(this.seekIntervalId=window.setTimeout(function(){t.seekIntervalId=0},500),1===e?this.enterState(y.LIVE_PLAYING):(e=1e3*this.calcPercent2BackTimeS(e),this.playbackState===y.LIVE_PLAYING?this.enterState(y.BACK_PLAYING,{backDurationMS:e}):this.playbackState===y.BACK_PLAYING&&this.seekInBackState({backDurationMS:e})))};var y,fe,Ee,he=v;function v(e,t,n,r){e=fe.call(this,e,t,n)||this;return e.ctrlbar=n,e.timeupdateTimerID=0,e.playbackStateInner=y.IDLE,e.maxBackDurationOverflow=!1,e.curBackDurationMS=0,e.liveStateTimeStr="",e.isSwitchBackOp=!1,e.seekIntervalId=0,e.playerApiForPlugins=null==r?void 0:r.api,e.addReturnLiveBtn(),e.addLiveTimeDisplay(),e.setActive(!1),e.addPlayerEvts(),e}(L=Ee=Ee||{}).Loop="true",L.NotLoop="false";var Ae,ge="thumbplayer-h5-loop",me=(Ae=i,a.__extends(b,Ae),b.isEnabled=function(e){var t=e.enableLoop,e=e.isMobile;return t&&!e},Object.defineProperty(b.prototype,"isLoopMode",{get:function(){return this.el.dataset.status===Ee.Loop},set:function(e){this.player.config.loop=e,this.el.dataset.status=String(e),this.tip.innerText=e?"å³é­å¾ªç¯æ­æ¾":"æå¼å¾ªç¯æ­æ¾"},enumerable:!1,configurable:!0}),b.prototype.setupDOMEvents=function(){var e=this;this.el.addEventListener(this.CLICK_EVENT_NAME,function(){e.isLoopMode=!e.isLoopMode,_.lsTool.setData(ge,e.isLoopMode?Ee.Loop:Ee.NotLoop)})},b.prototype.initLoopConfig=function(){var e=this.player.config.loop;void 0!==e?this.isLoopMode=!!e:(e=_.lsTool.getData(ge))&&(this.isLoopMode=e===Ee.Loop)},b.compName="Loop",b.sel=".txp_left_controls .txp_btn_loop",b);function b(e,t){e=Ae.call(this,e,b.sel,t)||this;return e.tip=e.el.querySelector(".txp_tooltip"),e.setupDOMEvents(),e.initLoopConfig(),e}ye=i,a.__extends(T,ye),T.isEnabled=function(e){var t=e.isMobile,n=e.disableNextBtn,e=e.showNextBtnUIOnly;return!(t||n&&!e)},T.prototype.onVideoNodeChange=function(){var e=this.player.currentVideoInfoIdx;-1!==e&&e+1<this.player.totalVideoInfoCount?this.el.classList.remove(i.disabledClassName):this.el.classList.add(i.disabledClassName)},T.sel=".txp_left_controls .txp_btn_next",T.compName="NextBtn";var ye,ve=T;function T(e,t,n){var r=ye.call(this,e,T.sel,t)||this,o=(r.ctrlbar=n,t.showNextBtnUIOnly);return o?r.el.classList.remove(i.disabledClassName):(r.onVideoNodeChange=r.onVideoNodeChange.bind(r),r.eventMap=((e={})[s.PLAY_EVENT.VIDEONODE_CHANGE]=r.onVideoNodeChange,e[s.PLAY_EVENT.LIST_CHANGE]=r.onVideoNodeChange,e),r.setEvts()),r.el.addEventListener(r.CLICK_EVENT_NAME,function(){var e;r.player.setStateKv("ctrlbar:"+T.compName+":"+r.CLICK_EVENT_NAME,{type:s.LOG_TYPE.USER_ACTION}),r.ctrlbar.emit(c.CLICK_NEXTBTN),o||-1===(e=r.player.currentVideoInfoIdx)||e>=r.player.totalVideoInfoCount-1||r.player.playNext()}),r}be=i,a.__extends(C,be),C.isEnabled=function(e){return!e.isMobile},C.prototype.enterPicInPic=function(){var e=this.player.currentVideoElement;e&&(e.requestPictureInPicture(),this.setDOMStatus(!1))},C.prototype.leavePicInPic=function(){var e,t;try{null!=(t=null==(e=document.exitPictureInPicture())?void 0:e.catch)&&t.call(e,function(){})}catch(e){}this.setDOMStatus(!0)},C.prototype.destroy=function(){this.setupVideoListener(!1),this.leavePicInPic(),be.prototype.destroy.call(this)},C.prototype.setupDOMEvents=function(){var e=this;this.el.addEventListener("click",function(){e.isPiP?(e.leavePicInPic(),e.isPiP=!1):(e.enterPicInPic(),e.isPiP=!0),e.ctrlbar.emit(c.CLICK_PIPBTN,e.isPiP)})},C.prototype.setupPlayerEvents=function(){var t=this;this.player.on(s.H5_PLAY_EVENT.VIDEO_PLAYING,function(e){e.data.isFirst&&t.setPipSupportStatus(t.isKernelSupport())}),this.player.on(s.H5_PLAY_EVENT.VIDEO_SETLEVEL_END,function(e){e.data.code===s.ErrorCode.SUC&&t.setPipSupportStatus(t.isKernelSupport())})},C.prototype.setPipSupportStatus=function(e){e?(this.el.classList.remove(i.hideClassName),this.setVideoPip()):(this.leavePicInPic(),this.el.classList.add(i.hideClassName))},C.prototype.isKernelSupport=function(){var e=this.player.currentVideoElement;return e instanceof HTMLVideoElement&&"function"==typeof e.requestPictureInPicture},C.prototype.setVideoPip=function(){this.isPiP&&this.enterPicInPic(),this.setupVideoListener(!1),this.setupVideoListener(!0)},C.prototype.setupVideoListener=function(e){void 0===e&&(e=!0);var t=this.player.currentVideoElement;t&&((e=e?t.addEventListener:t.removeEventListener).call(t,"enterpictureinpicture",this.onEnterPiP),e.call(t,"leavepictureinpicture",this.onLeavePiP))},C.prototype.setDOMStatus=function(e){this.el&&(this.tooltip&&(this.tooltip.innerText=e?"ç»ä¸­ç»":"éåºç»ä¸­ç»"),this.el.dataset.status=String(!e))},C.sel=".txp_right_controls .txp_btn_pip",C.compName="PictureInPicture";var be,Te=C;function C(e,t,n){var r=be.call(this,e,C.sel,t)||this;return r.ctrlbar=n,r.isPiP=!1,r.onEnterPiP=function(){r.isPiP=!0,r.setDOMStatus(!1)},r.onLeavePiP=function(){r.isPiP=!1,r.setDOMStatus(!0)},void 0===HTMLVideoElement.prototype.requestPictureInPicture?r.el.classList.add(i.hideClassName):(r.setupDOMEvents(),r.setupPlayerEvents(),r.tooltip=r.el.querySelector(".txp_tooltip")),r}function I(e,t){e=e.plugins.tips;"function"==typeof(null==e?void 0:e.show)&&e.show(t)}function Ce(e){var t=e.flowManager,n=e.videoNode;return!(!s.getAdPlugin(e.config.instanceId)||!n||n===t.currentFlowNode)}Ie=i,a.__extends(P,Ie),P.prototype.setPlayStatus=function(e){this.el.dataset.status=e,this.el.className="txp_btn txp_btn_play play_btn_"+e},P.prototype.addEventListener=function(){var e=this,t=this.player;this.el.addEventListener("click",function(){if(t.setStateKv("ctrlbar:"+P.compName+":"+e.CLICK_EVENT_NAME,{type:s.LOG_TYPE.USER_ACTION}),!e.el.classList.contains(i.disabledClassName))switch(e.ctrlbar.emit(c.CLICK_PLAYBTN,e.el.dataset),e.el.dataset.status){case o.PlayBtnStatus.PAUSE:t.pause(s.H5_PAUSE_TYPE.USER_CLICK);break;case o.PlayBtnStatus.STOP:t.stop();break;case o.PlayBtnStatus.PLAY:if(!e.isLive)return Z(t,e.ctrlbar);e.replay();break;case o.PlayBtnStatus.REPLAY:e.ctrlbar.emit(c.CLICK_REPLAY),e.replay()}})},P.prototype.replay=function(){var e=this.player;e.vid&&e.videoReqInfoPlugin?e.triggerAutoplay().then(function(){return e.replay()}):e.replay()},P.prototype.onVodPlaying=function(){var e=this.tooltip;this.setPlayStatus(o.PlayBtnStatus.PAUSE),e.innerText="æå"},P.prototype.onLivePlaying=function(){function e(){t.setPlayStatus(o.PlayBtnStatus.STOP),n.innerText="åæ­¢"}var t=this,n=this.tooltip;Ce(this.player)?this.player.once(s.H5_PLAY_EVENT.AD_END,e):e()},P.prototype.onPlayerStateChange=function(e){var e=e.data.new,t=this.tooltip;switch(e){case _.VIDEO_STATE.PLAYING:this.isLive?this.onLivePlaying():this.onVodPlaying();break;case _.VIDEO_STATE.PAUSE:case _.VIDEO_STATE.CANPLAY:this.setPlayStatus(o.PlayBtnStatus.PLAY),t.innerText="æ­æ¾"}},P.sel=".txp_left_controls .txp_btn_play",P.compName="PlayBtn";var Ie,Pe=P;function P(e,t,n){var r=Ie.call(this,e,P.sel,t)||this;return r.ctrlbar=n,r.onPlaySessionStart=function(){r.setPlayStatus(o.PlayBtnStatus.PLAY),r.tooltip.innerText="æ­æ¾"},r.onPlaySessionEnd=function(){r.setPlayStatus(r.isLive?o.PlayBtnStatus.PLAY:o.PlayBtnStatus.REPLAY),r.tooltip.innerText="æ­æ¾"},r.eventMap=((e={})[_.PLAY_EVENT.STATE_CHANGE]=r.onPlayerStateChange.bind(r),e[s.H5_PLAY_EVENT.PLAY_SESSION_START]=r.onPlaySessionStart,e[s.H5_PLAY_EVENT.PLAY_SESSION_END]=r.onPlaySessionEnd,e),r.setPlayStatus(o.PlayBtnStatus.PLAY),r.setEvts(),r.tooltip=r.el.querySelector(".txp_tooltip"),r.addEventListener(),r}De=X,a.__extends(O,De),O.isEnabled=function(e){var t=e.isMobile,e=e.enablePlayrate;return!t||e},O.prototype.destroy=function(){this.bindEvts(!1),De.prototype.destroy.call(this)},O.prototype.bindEvts=function(e){(e?this.player.on:this.player.off).bind(this.player)(s.PLAY_EVENT.RESTART,this.onPlayRestart)},O.compName="PlayratePopup",O.popupSelector=".txp_right_controls .txp_btn_playrate",O.modSelector=".mod_overlay.playrate";var De,D=O;function O(e,t,n){var r=De.call(this,e,a.__assign(a.__assign({},t),{selector:O.popupSelector,modSelector:O.modSelector}),n)||this;return r.popupName="playrate",r.onSelect=function(e){var t=r.player,e=(r.ctrlbar.emit(c.SET_PLAYRATE,e),Number(e.value));t.playbackRate!==e&&(t.playbackRate=e,r.selected=e,I(r.player,"æ­£å¨<em>"+e+"</em>åéåº¦æ­æ¾"))},r.onPlayRestart=function(){r.el.classList.toggle(i.hideClassName,!r.player.supportPlaybackRate)},r.popupOptions=[{label:"0.5X",value:.5},{label:"0.75X",value:.75},{label:"1.0X",value:1,btnLabel:"åé"},{label:"1.25X",value:1.25},{label:"1.5X",value:1.5},{label:"1.75X",value:1.75},{label:"2.0X",value:2}],r.selected=1,r.bindEvts(!0),r}Oe=i,a.__extends(w,Oe),w.prototype.bindClickOnMobile=function(){var e=this;this.isMobile&&this.el.addEventListener("click",function(){e.clickCount+=1,5<=e.clickCount&&(e.clickCount=0,e.ctrlbar.emit(c.TEST_EVENT)),e.clickTimer&&clearTimeout(e.clickTimer),e.clickTimer=window.setTimeout(function(){e.clickCount=0},300)})},w.prototype.onPlayerStateChange=function(e){e.data.new===_.VIDEO_STATE.IDLE&&(this.timeCur.innerText="00:00")},w.prototype.onDurationChange=function(){var e=this.ctrlbar.duration;this.timeDur.innerText=_.commonTool.formatPlayTime(e),this.el.classList.toggle("reach_hour",3600<=e)},w.prototype.onTimeUpdate=function(){var e;this.isMouseDown||(e=_.commonTool.formatPlayTime(this.playtime),this.timeCur.innerText!==e&&(this.timeCur.innerText=e))},w.sel=".txp_left_controls .txp_time_display",w.compName="TimeArea";var Oe,we,Me=w;function w(e,t,n){var r,o=Oe.call(this,e,w.sel,t)||this,e=(o.ctrlbar=n,o.clickCount=0,o.clickTimer=0,o.onMouseup=function(){o.isMouseDown=!1},o.onMousemove=function(e){e=e.data;o.timeCur.innerText=_.commonTool.formatPlayTime(e*o.ctrlbar.duration)},o.onMousedown=function(e){e=e.data;o.isMouseDown=!0,o.timeCur.innerText=_.commonTool.formatPlayTime(e*o.ctrlbar.duration)},c.MOUSE_DOWN),i=c.MOUSE_MOVE,a=c.MOUSE_UP;return o.eventMap=((r={})[_.PLAY_EVENT.DURATION_CHANGE]=o.onDurationChange.bind(o),r[_.PLAY_EVENT.TIME_UPDATE]=o.onTimeUpdate.bind(o),r[_.PLAY_EVENT.STATE_CHANGE]=o.onPlayerStateChange.bind(o),r),o.setEvts(),n.on(e,o.onMousedown),n.on(i,o.onMousemove),n.on(a,o.onMouseup),o.timeCur=o.el.querySelector(".txp_time_current"),o.timeDur=o.el.querySelector(".txp_time_duration"),t.disableTestEvent||o.bindClickOnMobile(),o}(e=we=we||{}).Mute="mute",e.Normal="normal";var xe,Re,Se="thumbplayer-h5-volume",Le="thumbplayer-h5-volume:muted",Ne=((L=xe=xe||{}).muted="true",L.unmuted="false",Re=i,a.__extends(M,Re),M.isEnabled=function(e){return!e.isMobile},M.prototype.setVolumeByCache=function(){var e=Number(_.lsTool.getData(Se)),t=_.lsTool.getData(Le);(Number.isNaN(e)||1<e)&&(e=1,_.lsTool.setData(Se,"1")),e&&(this.lastVolume=e),t===xe.muted&&(e=0),this.setVolume(e),this.setUi()},M.prototype.setUi=function(e){void 0===e&&(e=this.getCurrentNodeVolume()),this.el.dataset.status=0===e?we.Mute:we.Normal,this.volumeValue.style.height=100*e+"%",this.volumeText.innerText=String(Math.round(100*e))},M.prototype.getCurrentNodeVolume=function(){var e,t=this.player;return Ce(t)&&null!=(e=null==(e=s.getAdPlugin(t.config.instanceId))?void 0:e.getAdVolume())?e:t.volume},M.prototype.isInLiveAd=function(){return this.isLive&&Ce(this.player)},M.prototype.setPercent=function(e,t){var e=e.clientY,e=(this.clientY=this.volumeRange.getBoundingClientRect().top,this.clientHeight=this.volumeRange.clientHeight,(e-this.clientY)/this.clientHeight),e=Math.floor(100*(1-e)),n=(e=Math.max(Math.min(e,100),0))/100;this.player.volume!==n&&(this.ctrlbar.emit(c.SET_VOLUME,n),this.dragVolume=e),this.setVolume(n),this.setUi(),t&&(_.lsTool.setData(Se,n),_.lsTool.setData(Le,!1))},M.prototype.setVolume=function(e){var t;this.isInLiveAd()?null!=(t=s.getAdPlugin(this.player.config.instanceId))&&t.setAdVolume(e):this.player.volume=e},M.prototype.initDOMEvents=function(){this.setupBtnMouseEvents(),this.setupVolumeClick(),this.setupVolumeRangeMouseEvents()},M.prototype.showVolumeTips=function(){var e=this;-1!==this.dragVolume&&(this.clearTipsTimer(),this.volumeTipsTimer=window.setTimeout(function(){I(e.player,"å½åé³é: <em>"+e.dragVolume.toFixed(0)+"</em>")},500))},M.prototype.clearTipsTimer=function(){this.volumeTipsTimer&&(window.clearTimeout(this.volumeTipsTimer),this.volumeTipsTimer=0)},M.prototype.setupBtnMouseEvents=function(){var e=this;this.el.addEventListener("mouseenter",function(){e.showEl(e.popup),e.dragVolume=-1,e.clearTipsTimer()}),this.el.addEventListener("mouseleave",function(){e.isMouseDown||(e.hideEl(e.popup),e.showVolumeTips())})},M.prototype.setupVolumeRangeMouseEvents=function(){var t=this,e=this.volumeRange,n=this.player;e.addEventListener("mousedown",function(){t.isMouseDown=!0}),e.addEventListener("mousemove",function(e){t.isMouseDown&&t.setPercent(e)}),n.container.addEventListener("mousemove",function(e){t.isMouseDown&&t.setPercent(e)}),e.addEventListener("mouseup",function(e){t.isMouseDown=!1,t.setPercent(e,!0)}),n.container.addEventListener("mouseup",function(e){t.isMouseDown&&(t.isMouseDown=!1,t.setPercent(e,!0),t.hideEl(t.popup),t.showVolumeTips())})},M.prototype.setupVolumeClick=function(){var e=this;this.volumeSvg.addEventListener(this.CLICK_EVENT_NAME,function(){e.el.dataset.status===we.Mute?(e.el.dataset.status=we.Normal,e.setVolume(e.lastVolume),_.lsTool.setData(Le,xe.unmuted),_.lsTool.setData(Se,e.lastVolume)):(e.lastVolume=e.getCurrentNodeVolume(),e.el.dataset.status=we.Mute,e.setVolume(0),_.lsTool.setData(Le,xe.muted)),e.player.played&&-1===[s.VIDEO_STATE.END,s.VIDEO_STATE.IDLE].indexOf(e.player.state)||e.setUi()})},M.compName="Volume",M.sel=".txp_btn_volume",M);function M(e,t,n){var r=Re.call(this,e,M.sel,t)||this;return r.ctrlbar=n,r.lastVolume=.5,r.dragVolume=-1,r.onVideoPlaying=function(e){!e.data.isFirst||r.isInLiveAd()||r.player.muted&&r.setUi(0)},r.onVolumeChange=function(){var e,t;r.isInLiveAd()||(e=r.player.volume,t=r.player.muted,r.setUi(e=t?0:e))},r.onAdVolumeChange=function(e){e=e.data;Ce(r.player)&&r.setUi(e.volume)},r.isMobile||(r.eventMap=((e={})[s.H5_PLAY_EVENT.VIDEO_VOLUME_CHANGE]=r.onVolumeChange,e[s.H5_PLAY_EVENT.AD_VOLUME_CHANGE]=r.onAdVolumeChange,e[s.H5_PLAY_EVENT.VIDEO_PLAYING]=r.onVideoPlaying,e),r.setEvts(),r.popup=r.el.querySelector(".txp_popup_volume"),r.volumeSvg=r.el.querySelector(".txp_icon_volume"),r.volumeValue=r.el.querySelector(".txp_volume_range_current"),r.volumeRange=r.el.querySelector(".txp_volume_range"),r.volumeText=r.el.querySelector(".txp_volume_text"),r.initDOMEvents(),r.config.disableCacheVolume)||r.setVolumeByCache(),r}var ke,x,Be="thumbplayer",Ve="txp_controls",Ke="."+Be+"."+Ve,Ue="0 0 28 28",Fe=(ke=i,a.__extends(R,ke),Object.defineProperty(R.prototype,"isShow",{get:function(){return!this.el.classList.contains(i.hideClassName)},enumerable:!1,configurable:!0}),R.prototype.show=function(){this.autoHide(),this.isShow||(this.showEl(),this.showEl(this.gradientBottom),this.ctrlbar.emit(c.SHOW))},R.prototype.hide=function(e){this.isShow&&(e||!this.isMouseHoverControl&&this.player.state!==_.VIDEO_STATE.PAUSE)&&(this.hideEl(),this.hideEl(this.gradientBottom),this.ctrlbar.emit(c.HIDE))},R.prototype.autohide=function(){this.autoHide()},R.prototype.autoHide=function(){this.clearHideTimer(),this.hideDelay!==1/0&&(this.hideTid=window.setTimeout(this.hide,this.hideDelay))},R.prototype.destroy=function(){this.clearHideTimer(),this.clearClickTimer(),this.clearTouchTimer(),ke.prototype.destroy.call(this)},R.prototype.toggleShadowClickDisabled=function(e){this.shadowClickDisabled=e},R.prototype.addEventListener=function(){var t=this,e=this.ctrlbar,n=this.player,r=this.shadow,n=n.container;this.isMobile?(e.on(c.TOGGLE_OVERLAY,function(e){e=e.data;(t.isMouseHoverControl=e)||t.autoHide()}),e.on(c.MOUSE_DOWN,function(){return t.isMouseHoverControl=!0}),e.on(c.MOUSE_UP,function(){t.autoHide(),t.isMouseHoverControl=!1})):(this.control.addEventListener("mouseenter",function(){return t.isMouseHoverControl=!0}),this.control.addEventListener("mouseleave",function(){return t.isMouseHoverControl=!1}),e.on(c.MOUSE_DOWN,function(){return t.isMouseDown=!0}),e.on(c.MOUSE_UP,function(){return t.isMouseDown=!1}),n.addEventListener("mouseenter",this.show),n.addEventListener("mousemove",this.show),n.addEventListener("mouseleave",function(){t.isMouseDown||t.hide()}),!this.isLive&&r&&(r.addEventListener("click",this.onShadowClick),r.addEventListener("dblclick",this.clearClickTimer)))},R.prototype.toggleControlOnClick=function(){var e,t=this;null!=(e=this.shadow)&&e.addEventListener("click",function(){t.isShow?t.hide():t.show()})},R.prototype.onFullscreenChange=function(){this.isMouseHoverControl=!1,this.hide()},R.prototype.onPlayerStateChange=function(e){e=e.data.new;-1!==[_.VIDEO_STATE.PAUSE,_.VIDEO_STATE.END,_.VIDEO_STATE.IDLE].indexOf(e)?this.show():e===_.VIDEO_STATE.PLAYING&&this.autoHide()},R.prototype.onStartPlay=function(){this.autoHide()},R.compName="CtrlShow",R);function R(e,t,n){var r=ke.call(this,e,H(t.isMobile),t)||this,o=(r.ctrlbar=n,r.isMouseHoverControl=!1,r.isMouseDown=!1,r.shadowClickDisabled=!1,r.onShadowClick=function(e){e.target!==r.shadow||(r.clearClickTimer(),r.shadowClickDisabled)||(r.clickTimer=window.setTimeout(function(){var e=r.player;e.state===_.VIDEO_STATE.PLAYING?e.pause(s.H5_PAUSE_TYPE.USER_CLICK):Z(e,r.ctrlbar)},300))},r.clearClickTimer=function(){r.clickTimer&&(clearTimeout(r.clickTimer),r.clickTimer=null)},r.clearHideTimer=function(){r.hideTid&&(clearTimeout(r.hideTid),r.hideTid=null)},r.clearTouchTimer=function(){r.touchTid&&(clearTimeout(r.touchTid),r.touchTid=null)},r.hideDelay=t.autoHideDelay||3e3,r.show=r.show.bind(r),r.hide=r.hide.bind(r),r.onFullscreenChange=r.onFullscreenChange.bind(r),r.eventMap=((o={})[_.PLAY_EVENT.STATE_CHANGE]=r.onPlayerStateChange.bind(r),o[_.PLAY_EVENT.VIDEONODE_START_PLAY]=r.onStartPlay.bind(r),o),r.setEvts(),r.control=e.container.querySelector(Ke),r.shadow=e.container.querySelector(G),r.gradientBottom=e.container.querySelector(z),n.on(c.FULLSCREEN_CHANGE,r.onFullscreenChange),n.on(c.FAKE_FULLSCREEN_CHANGE,r.onFullscreenChange),t.showCtrlShadow);return void 0===o||o||(r.shadow.remove(),r.shadow=null),r.addEventListener(),r.isMobile&&r.toggleControlOnClick(),r}(e=x=x||{}).ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.Space=" ",e.Escape="Escape",e.LEFT_SQUARE_BRACKET="[",e.LEFT_SQUARE_BRACKET_CN="ã",e.RIGHT_SQUARE_BRACKET="]",e.RIGHT_SQUARE_BRACKET_CN="ã";var Ye=[x.ArrowUp,x.ArrowDown,x.Escape],Qe=(S.prototype.destroy=function(){var e;this.player&&(e=this.player.container,this.cancelPressState(),e.removeEventListener("keyup",this.spyKeyUp),e.removeEventListener("keydown",this.spyKeyDown),null!=(e=this.config.keysListenedOnBody)&&e.length&&(document.body.removeEventListener("keyup",this.spyKeyUpOnBody),document.body.removeEventListener("keydown",this.spyKeyDownOnBody)),this.player=null)},S.prototype.isEvtKeyInConfig=function(e){return this.config.keysListenedOnBody.includes(e.key)&&e.target===document.body},S.prototype.prevent=function(e){var t;null!=(t=e.preventDefault)&&t.call(e),null!=(t=e.stopPropagation)&&t.call(e)},S.prototype.spyKeyUp=function(e){var t,n=e.shiftKey;if(!n&&!this.isDisabled){var r=e.key,o=this.player,i=o.state,n=this.config.seekGap,a=void 0===n?5:n;if(this.pressKey)r===this.pressKey&&this.cancelPressState();else{n=o.config.type===_.PLAY_MODE.LIVE;if(!n||Ye.includes(r))switch(r){case x.ArrowLeft:o.setStateKv("ctrlbar:hotkey:"+r,{type:s.LOG_TYPE.USER_ACTION}),o.seek(o.playtime-a),this.prevent(e),this.showSeekLeftTips();break;case x.ArrowRight:o.setStateKv("ctrlbar:hotkey:"+r,{type:s.LOG_TYPE.USER_ACTION}),o.seek(o.playtime+a),this.prevent(e),this.showSeekRightTips();break;case x.Space:o.setStateKv("ctrlbar:hotkey:space",{type:s.LOG_TYPE.USER_ACTION}),i===_.VIDEO_STATE.PLAYING||i===_.VIDEO_STATE.BUFFERING?o.pause(s.H5_PAUSE_TYPE.USER_CLICK):o.play(),this.prevent(e);break;case x.Escape:null!=(t=this.comps.fakeFullscreen)&&t.isFullScreen&&(this.comps.fakeFullscreen.requestFullScreen("exit"),this.prevent(e));break;case x.LEFT_SQUARE_BRACKET:case x.LEFT_SQUARE_BRACKET_CN:this.setNextPlayBackRate(!0),this.prevent(e);break;case x.RIGHT_SQUARE_BRACKET:case x.RIGHT_SQUARE_BRACKET_CN:this.setNextPlayBackRate(!1),this.prevent(e)}}}},S.prototype.setNextPlayBackRate=function(e){void 0===e&&(e=!1);var t=this.comps.playRate,n=t.popupOptions,r=t.selected,t=n.findIndex(function(e){return e.value===r});-1===t||e&&0===t||!e&&t===n.length-1||(n=Number(n[e?t-1:t+1].value),this.player.playbackRate=n,I(this.player,"æ­£å¨ <em>"+n+"</em> åéæ­æ¾ä¸­"))},S.prototype.enterPressMode=function(e){var t,n,r,o=this;!this.pressKey&&(t=(n=this.config).pressFastBackwardGap,n=n.pressFastForwardGap,r=e?this.fastForwardHandler:this.fastBackwardHandler,e=e?void 0===n?.5:n:void 0===t?.5:t)&&(clearTimeout(this.pressTimer),this.pressTimer=setTimeout(function(){var e=o.player.state;[_.VIDEO_STATE.PAUSE,_.VIDEO_STATE.PLAYING].includes(e)&&r()},1e3*e))},S.prototype.cancelPressState=function(){var e=this.comps.playRate;e&&this.lastPlaybackRate&&(e.selected=this.lastPlaybackRate,this.player.playbackRate=this.lastPlaybackRate),"function"==typeof(null==(e=(e=this.player).plugins.tips)?void 0:e.hide)&&e.hide(),this.lastPlaybackRate=NaN,this.pressKey=null,this.backwardPlaytime=NaN,this.pressKey=null,clearTimeout(this.backwardTimer),clearTimeout(this.pressTimer)},S.prototype.spyKeyDown=function(e){if(e.shiftKey||this.isDisabled||this.pressKey)this.prevent(e);else{var t=e.key,n=e.repeat,r=this.player,o=r.config.type===_.PLAY_MODE.LIVE;if(!o||Ye.includes(t))switch(t){case x.ArrowUp:r.volume=this.volumeToFixedNumber(r.volume+.05),this.prevent(e),this.showVolumeTips();break;case x.ArrowDown:r.volume=this.volumeToFixedNumber(r.volume-.05),this.prevent(e),this.showVolumeTips();break;case x.Space:this.prevent(e);break;case x.ArrowLeft:case x.ArrowRight:this.prevent(e),n&&(this.enterPressMode(t===x.ArrowRight),this.pressKey=t)}}},S.prototype.volumeToFixedNumber=function(e){e=Math.max(Math.min(e,1),0),e=Number(e.toFixed(2));return _.lsTool.setData(Se,e),e},S.prototype.showSeekLeftTips=function(){var e;this.player.state!==_.VIDEO_STATE.IDLE&&(e=this.config.seekGap,e=Math.max(0,this.player.playtime-(void 0===e?5:e)),I(this.player,"å¿«éè³ "+_.commonTool.formatPlayTime(e)))},S.prototype.showSeekRightTips=function(){var e,t,n;this.player.state!==_.VIDEO_STATE.IDLE&&(n=(e=this.player).playtime,e=e.duration,t=this.config.seekGap,n=Math.min(n+(void 0===t?5:t),e),I(this.player,"å¿«è¿è³ "+_.commonTool.formatPlayTime(n)))},S.prototype.showVolumeTips=function(){var e;null!=(e=this.comps.volume)&&e.popup.classList.contains(i.hideClassName)&&I(this.player,"å½åé³é: <em>"+(100*this.player.volume).toFixed(0)+"</em>")},S.compName="HotKeys",S);function S(e,t,n){var o=this,t=(this.player=e,this.config=t,this.comps=n,this.isDisabled=!1,this.spyKeyUpOnBody=function(e){o.isEvtKeyInConfig(e)&&o.spyKeyUp(e)},this.spyKeyDownOnBody=function(e){o.isEvtKeyInConfig(e)&&o.spyKeyDown(e)},this.fastBackwardHandler=function(){function e(){o.backwardPlaytime=Math.max(0,o.backwardPlaytime-2),o.comps.progress.updateProgress(o.backwardPlaytime/n),t.seek(o.backwardPlaytime),I(t,"å¿«éè³ "+_.commonTool.formatPlayTime(o.backwardPlaytime))}var t=o.player,n=t.duration;o.backwardPlaytime=t.playtime;o.backwardTimer=setInterval(e,500),e()},this.fastForwardHandler=function(){var e,t=o.config.pressFastForwardRate,t=void 0===t?3:t,n=o.comps.playRate,r=(n||{}).selected;!r||t<=r||(e={label:t+"X",value:t},o.player.play(),o.lastPlaybackRate=n.selected,o.player.playbackRate=t,I(o.player,"æ­£å¨ <em>"+e.value+"</em> åæ­æ¾ä¸­"),setTimeout(function(){n.setCurrent(e)},0))},this.spyKeyUp=this.spyKeyUp.bind(this),this.spyKeyDown=this.spyKeyDown.bind(this),e.container);_.uaTool.mobile||(t.tabIndex=-1),t.addEventListener("keyup",this.spyKeyUp),t.addEventListener("keydown",this.spyKeyDown),null!=(n=this.config.keysListenedOnBody)&&n.length&&(document.body.addEventListener("keyup",this.spyKeyUpOnBody),document.body.addEventListener("keydown",this.spyKeyDownOnBody))}var He,qe={PlayBtn:Pe,NextBtn:ve,TimeArea:Me,Progress:pe,Fullscreen:se,FakeFullscreen:oe,Volume:Ne,CtrlShow:Fe,HotPoint:ce,Loop:me,PictureInPicture:Te,LiveProgress:he,CenterBtn:te,DefinitionPopup:d,PlayratePopup:D,LanguagePopup:A,AudioTrackPopup:u},L=(He=s.Plugin,a.__extends(N,He),Object.defineProperty(N.prototype,"duration",{get:function(){var e;return null!=(e=this.uiDuration)?e:this.player.duration},set:function(e){isNaN(e)&&void 0!==e||(this.uiDuration=e,this.instances[Me.compName]&&(this.instances[Me.compName].timeDur.innerText=_.commonTool.formatPlayTime(e)))},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"audio",{get:function(){var e;return null==(e=this.instances[u.compName])?void 0:e.selected},set:function(e){this.instances[u.compName]&&(this.instances[u.compName].selected=e)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"audioOpts",{get:function(){var e;return null==(e=this.instances[u.compName])?void 0:e.popupOptions},set:function(e){this.instances[u.compName]&&(this.instances[u.compName].popupOptions=e)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"level",{get:function(){var e;return null==(e=this.instances[d.compName])?void 0:e.selected},set:function(e){this.instances[d.compName]&&(this.instances[d.compName].selected=e)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"levelOpts",{get:function(){var e;return null==(e=this.instances[d.compName])?void 0:e.popupOptions},set:function(e){this.instances[d.compName]&&(this.instances[d.compName].popupOptions=e)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"lang",{get:function(){var e;return null==(e=this.instances[A.compName])?void 0:e.selected},set:function(e){this.instances[A.compName]&&(this.instances[A.compName].selected=e)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"langOpts",{get:function(){var e;return null==(e=this.instances[A.compName])?void 0:e.popupOptions},set:function(e){this.instances[A.compName]&&(this.instances[A.compName].popupOptions=e)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"playrate",{get:function(){var e;return null==(e=this.instances[D.compName])?void 0:e.selected},set:function(e){this.instances[D.compName]&&(this.instances[D.compName].selected=e)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"playrateOpts",{get:function(){var e;return null==(e=this.instances[D.compName])?void 0:e.popupOptions},set:function(e){this.instances[D.compName]&&(this.instances[D.compName].popupOptions=e)},enumerable:!1,configurable:!0}),N.prototype.getIsHotKeysDisabled=function(){return this.hotKeys.isDisabled},N.prototype.prependElementToLevels=function(e){var t;null!=(t=null==(t=null==(t=this.instances)?void 0:t[d.compName])?void 0:t.popup)&&t.firstElementChild.insertAdjacentElement("afterbegin",e)},N.prototype.show=function(e){void 0===e&&(e=!1),this.el.classList.remove(i.hideClassName),this.instances.CtrlShow.gradientBottom.classList.remove(i.hideClassName),e&&(this.el.style.display="",this.instances.CtrlShow.gradientBottom.style.display=""),this.emit(c.SHOW)},N.prototype.hide=function(e){void 0===e&&(e=!1),this.el.classList.add(i.hideClassName),this.instances.CtrlShow.gradientBottom.classList.add(i.hideClassName),e&&(this.el.style.display="none",this.instances.CtrlShow.gradientBottom.style.display="none"),this.emit(c.HIDE)},N.prototype.setHotKeysDisable=function(e){void 0===e&&(e=!0),this.hotKeys&&(this.hotKeys.isDisabled=!!e)},N.prototype.setCompDisable=function(e,t){var n=this;void 0===t&&(t=!0),(Array.isArray(e)?e:[e]).forEach(function(e){"CtrlShow"===e?n.instances.CtrlShow.toggleShadowClickDisabled(t):null!=(e=null==(e=n.instances[e])?void 0:e.el)&&e.classList.toggle(i.disabledClassName,t)})},N.prototype.setCompVisable=function(e,t){var n=this;void 0===t&&(t=!0),(Array.isArray(e)?e:[e]).forEach(function(e){null!=(e=null==(e=n.instances[e])?void 0:e.el)&&e.classList.toggle(i.hideClassName,!t)})},N.prototype.removeComponent=function(e){null!=(e=null==(e=this.instances[e])?void 0:e.el)&&e.remove()},N.prototype.destroy=function(){var e;this.setPluginEvts(!1),this.callAllComponents("destroy"),null!=(e=this.el)&&e.parentNode&&this.el.remove(),(this.el=null)!=(e=this.hotKeys)&&e.destroy(),He.prototype.destroy.call(this)},N.prototype.hookVideoCanplay=function(){this.config.isMobile&&this.show(!0)},N.prototype.hookAdReqInfoStart=function(){this.isInRequest=!0},N.prototype.hookAdReqInfoEnd=function(){this.isInRequest=!1},N.prototype.hookVideoReqInfoStart=function(){this.isInRequest=!0},N.prototype.hookVideoReqInfoEnd=function(){this.isInRequest=!1},N.prototype.hookVideoRateChange=function(e){var t=e.rate;if(null==(e=this.playrateOpts)||!e.find(function(e){return Number(e.value)===t}))return e=a.__spreadArray([],this.playrateOpts||[],!0),this.hotKeys.pressKey?void 0:(this.hasCustomPlayBackRate&&(e=this.deleteCustomPlaybackRate(e)),this.playrateOpts=a.__spreadArray([this.getCustomPlaybackRate(t)],e,!0),this.hasCustomPlayBackRate=!0,void(this.playrate=t));this.hasCustomPlayBackRate&&(this.hasCustomPlayBackRate=!1,this.playrateOpts=this.deleteCustomPlaybackRate(this.playrateOpts)),this.playrate=t},N.prototype.hookVideoPlaying=function(e){e.isFirst&&null!=(e=this.instances.CtrlShow.shadow)&&e.classList.remove(i.hideClassName)},N.prototype.hookPlaySessionEnd=function(e){this.callAllComponents("hookPlaySessionEnd",e)},N.prototype.onFlowNodeStart=function(e){this.callAllComponents("hookFlowNodeStart",e)},N.prototype.callAllComponents=function(n){for(var r=this,o=[],e=1;e<arguments.length;e++)o[e-1]=arguments[e];var i={};Object.keys(this.instances).forEach(function(e){try{var t=r.instances[e];i[t.compName]||(i[t.compName]=!0,"function"==typeof t[n]&&t[n].apply(t,o))}catch(e){r.error("ctrlbar "+n+" err: ",e)}})},N.prototype.setPluginEvts=function(e){var t=this,n=(this.pluginMsgEvtMap||(this.pluginMsgEvtMap={FLOW_NODE_START:this.onFlowNodeStart.bind(this)}),e?this.msg.on:this.msg.off);Object.keys(this.pluginMsgEvtMap).forEach(function(e){n.call(t.msg,e,t.pluginMsgEvtMap[e])})},N.prototype.getCustomPlaybackRate=function(e){return{value:e,label:"èªå®ä¹ï¼"+e+"xï¼",btnLabel:e+"x",payload:{customOpt:!0}}},N.prototype.deleteCustomPlaybackRate=function(e){return e.filter(function(e){return!0!==(null==(e=e.payload)?void 0:e.customOpt)})},N.prototype.insertDom=function(){var e=this.player.container,t=this.config.isMobile,n=(e.classList.add("_mod_thumbplayer_container_"),e.insertAdjacentHTML("beforeend",(n=t,'\n<div class="'+z.slice(1)+'"></div>\n<div class="'+H(n).slice(1)+'">\n    <div class="'+Be+" "+Ve+'">\n        <div class="txp_left_controls">\n            <div class="txp_none txp_btn txp_btn_play" data-status="play" aria-label="æ­æ¾/æå">\n                <svg class="txp_icon txp_icon_play" viewBox="'+Ue+'">\n                    <use class="txp_svg_symbol txp_svg_play" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_play"></use>\n                    <use class="txp_svg_symbol txp_svg_pause" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_pause"></use>\n                    <use class="txp_svg_symbol txp_svg_stop" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_stop"></use>\n                    <use class="txp_svg_symbol txp_svg_replay" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_replay"></use>\n                </svg>\n                <div class="txp_tooltip">æ­æ¾</div>\n            </div>\n            <div class="txp_none txp_btn txp_btn_next txp_disabled" aria-label="ä¸ä¸ä¸ª">\n                <svg class="txp_icon txp_icon_next" viewBox="'+Ue+'">\n                    <use class="txp_svg_symbol txp_svg_next" xlink:href="#txp_svg_next"></use>\n                </svg>\n                <div class="txp_tooltip">ä¸ä¸ä¸ª</div>\n            </div>\n            <div class="txp_btn txp_btn_loop txp_none" data-status="false" aria-label="å¾ªç¯æ­æ¾">   \n                <svg data-role="txp-ui-control-loop-play-btn" class="txp_icon txp_icon_loop" viewBox="'+Ue+'">\n                    <use class="txp_svg_symbol txp_svg_loop" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_loop"></use>\n                    <use class="txp_svg_symbol txp_svg_loop_off" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_loop_off"></use>\n                </svg>\n                <div class="txp_tooltip">æå¼å¾ªç¯æ­æ¾</div> \n            </div>\n\n            <div class="txp_btn txp_btn_volume txp_none" data-status="normal" aria-label="é³é">     \n                <svg class="txp_icon txp_icon_volume" viewBox="'+Ue+'">         \n                    <use class="txp_svg_symbol txp_svg_volume" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_volume"></use> \n                    <use class="txp_svg_symbol txp_svg_volume_mute" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_volume_mute"></use>     \n                </svg>      \n                <div class="txp_popup txp_popup_volume txp_none">\n                    <div class="txp_popup_content">             \n                        <div class="txp_volume_text">100</div>     \n                        <div class="txp_volume_range">                 \n                            <div class="txp_volume_range_current" style="height: 100%;">                     \n                                <div class="txp_volume_handle"></div>                 \n                            </div>             \n                        </div>\n                    </div>\n                </div>\n            </div>  \n\n            <div class="txp_none txp_time_display">\n                <div class="txp_time_current">00:00</div>\n                <div class="txp_time_separator">/</div>\n                <div class="txp_time_duration">00:00</div>\n            </div>\n        </div>\n\n        <div class="txp_none txp_progress_bar_container">\n            <div class="txp_progress_list">\n                <div class="txp_progress_load" style="width: 0;"></div>\n                <div class="txp_progress_play" style="width: 0;">\n                </div>\n                <div class="txp_btn_scrubber" style="left: 0">\n                    <div class="txp_scrubber_indicator"></div>\n                </div>\n            </div>\n            <div class="txp_tooltip txp_none"></div>\n            \x3c!-- è¿åº¦æ¡æ è®°æç¹ --\x3e\n            <div class="txp_hotpoint"></div> \n        </div>\n\n        <div class="txp_center_controls"></div>\n\n        <div class="txp_right_controls">\n            <div class="txp_btn txp_btn_definition txp_none" aria-label="æ¸æ°åº¦">\n                <div class="txp_label">æ¸æ°åº¦</div>\n                <div class="txp_popup txp_popup_definition txp_none">\n                    <div class="txp_popup_content"></div>\n                </div>\n            </div>\n\n            <div class="txp_btn txp_btn_playrate txp_none" aria-label="åé">\n                <div class="txp_label">åé</div>\n                <div class="txp_popup txp_popup_playrate txp_none">\n                    <div class="txp_popup_content"></div>\n                </div>\n            </div>\n\n            <div class="txp_btn txp_btn_language txp_none" aria-label="è¯­è¨">\n                <div class="txp_label">è¯­è¨</div>\n                <div class="txp_popup txp_popup_language txp_none">\n                    <div class="txp_popup_content"></div>\n                </div>\n            </div>\n\n            <div class="txp_btn txp_btn_audio_track txp_none" aria-label="å¤é³è½¨">\n                <div class="txp_label">å¤é³è½¨</div>\n                <div class="txp_popup txp_popup_audio_track txp_none">\n                    <div class="txp_popup_content"></div>\n                </div>\n            </div>\n            \n            <div class="txp_btn plugin_ctrl_airplay_btn txp_air_play txp_none" aria-label="AirPlay">\n                <svg class="txp_icon txp_icon_airplay" viewBox="0 0 1024 1024">\n                    <use class="txp_svg_symbol" xlink:href="#txp_air_play"></use>\n                </svg>\n                <div class="txp_tooltip">AirPlay</div> \n            </div>\n\n            <div class="txp_btn txp_btn_pip txp_none" data-status="false" aria-label="ç»ä¸­ç»">   \n                <svg class="txp_icon txp_icon_pip" viewBox="'+Ue+'">     \n                    <use class="txp_svg_symbol txp_svg_pip" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_pip"></use>   \n                </svg>  \n                <div class="txp_tooltip">ç»ä¸­ç»</div> \n            </div>\n\n            <div class="txp_btn txp_btn_fake txp_none" data-status="false" aria-label="ç½é¡µå¨å±">   \n                <svg class="txp_icon txp_icon_fake" viewBox="'+Ue+'">     \n                    <use class="txp_svg_symbol txp_svg_fake" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_fake"></use>   \n                    <use class="txp_svg_symbol txp_svg_fake_true" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_fake"></use>  \n                </svg>  \n                <div class="txp_tooltip">ç½é¡µå¨å±</div> \n            </div>\n\n            <div class="txp_btn txp_btn_fullscreen txp_none" data-status="false" aria-label="ç³»ç»å¨å±">\n                <svg class="txp_icon txp_icon_fullscreen" viewBox="'+Ue+'">     \n                    <use class="txp_svg_symbol txp_svg_fullscreen" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_fullscreen"></use>     \n                    <use class="txp_svg_symbol txp_svg_fullscreen_true" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_fullscreen_true"></use>   \n                </svg>\n                <div class="txp_tooltip">å¨å±</div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div class="'+G.slice(1)+'"></div>\n')),t?'.plugin_ctrl_txp_shadow{position:absolute;z-index:2;left:0;top:0;width:100%;height:100%}.plugin_ctrl_txp_shadow.txp_none{display:none}.plugin_ctrl_airplay_btn svg{-webkit-transform:scale(.9);transform:scale(.9)}.plugin_ctrl_center_btn{position:absolute;left:0;top:0;width:100%;height:100%;z-index:5;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;pointer-events:none}.plugin_ctrl_center_btn.txp_none{display:none}.plugin_ctrl_center_btn .txp_none{display:none!important}.plugin_ctrl_center_btn .btn_play{width:68px;height:68px;pointer-events:auto;cursor:pointer}.plugin_ctrl_center_btn .btn_play .icon_play{width:100%;height:100%}.plugin_ctrl_center_btn .btn_replay{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:0 22px;line-height:40px;border-radius:99em;color:#fff;font-size:14px;background-color:rgba(59,59,59,.95);pointer-events:auto;cursor:pointer}.plugin_ctrl_center_btn .btn_replay .icon_replay{margin-right:4px;width:15px;height:15px;fill:#fff}.plugin_ctrl_txp_gradient_bottom{position:absolute;z-index:3;left:0;bottom:0;width:100%;height:120px;background-image:-webkit-gradient(linear,left bottom, left top,color-stop(0, rgba(0,0,0,.5)),to(transparent));background-image:linear-gradient(0deg,rgba(0,0,0,.5) 0,transparent);opacity:1;-webkit-transition:opacity .15s ease-out;transition:opacity .15s ease-out;pointer-events:none}.plugin_ctrl_txp_gradient_bottom.txp_none{display:none}.plugin_ctrl_fake_fullscreen{overflow:hidden}._mod_thumbplayer_container_:-webkit-full-screen{width:100%!important;height:100%!important}._mod_thumbplayer_container_.thumbplayer-fullscreen{width:100%!important;height:100%!important}.plugin_ctrl_mobile_txp_bottom{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;position:absolute;z-index:6;bottom:0;left:0;width:100%;height:40px;overflow:initial;line-height:1;max-width:100%;max-height:100%;color:#fff;font-size:14px;font-family:PingFangSC-Regular,Helvetica Neue,Helvetica,Roboto,sans-serif;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-font-smoothing:antialiased;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-touch-callout:none}.plugin_ctrl_mobile_txp_bottom.txp_none{display:none}.plugin_ctrl_mobile_txp_bottom .txp_disabled{opacity:.5;pointer-events:none}.plugin_ctrl_mobile_txp_bottom *,.plugin_ctrl_mobile_txp_bottom :after,.plugin_ctrl_mobile_txp_bottom :before{margin:0;padding:0;-webkit-box-sizing:border-box;box-sizing:border-box}.plugin_ctrl_mobile_txp_bottom a,.plugin_ctrl_mobile_txp_bottom a:hover,.plugin_ctrl_mobile_txp_bottom a:visited{color:#fff;text-decoration:none!important;pointer-events:auto}.plugin_ctrl_mobile_txp_bottom .txp_btn:active,.plugin_ctrl_mobile_txp_bottom .txp_btn:focus,.plugin_ctrl_mobile_txp_bottom a:focus{outline:0 none}.plugin_ctrl_mobile_txp_bottom .txp_icon{position:relative;display:inline-block;fill:#fff}.plugin_ctrl_mobile_txp_bottom .txp_icon:after,.plugin_ctrl_mobile_txp_bottom .txp_icon:before,.plugin_ctrl_mobile_txp_bottom .txp_icon_inner:after,.plugin_ctrl_mobile_txp_bottom .txp_icon_inner:before{content:"";position:absolute;-webkit-box-sizing:content-box;box-sizing:content-box}.plugin_ctrl_mobile_txp_bottom .txp_icon_inner{position:absolute;width:100%;height:100%}.plugin_ctrl_mobile_txp_bottom .txp_left_controls,.plugin_ctrl_mobile_txp_bottom .txp_right_controls{position:relative;float:left;height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.plugin_ctrl_mobile_txp_bottom .txp_left_controls{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start}.plugin_ctrl_mobile_txp_bottom .txp_right_controls{-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.plugin_ctrl_mobile_txp_bottom .txp_btn{position:relative;cursor:pointer;background:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;font-family:PingFangSC-Regular,Helvetica Neue,Helvetica,Roboto,Microsoft Yahei,Arial,sans-serif;border:none;text-align:center;-webkit-box-flex:0;-ms-flex:none;flex:none;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.plugin_ctrl_mobile_txp_bottom .txp_btn_play{width:60px;height:100%}.plugin_ctrl_mobile_txp_bottom .txp_btn_play .txp_icon_play{display:block;width:30px;height:30px;margin:auto;fill:#fff}.plugin_ctrl_mobile_txp_bottom .txp_btn_play use{display:none}.plugin_ctrl_mobile_txp_bottom .txp_btn_play.play_btn_pause .txp_svg_pause,.plugin_ctrl_mobile_txp_bottom .txp_btn_play.play_btn_play .txp_svg_play,.plugin_ctrl_mobile_txp_bottom .txp_btn_play.play_btn_replay .txp_svg_replay,.plugin_ctrl_mobile_txp_bottom .txp_btn_play.play_btn_stop .txp_svg_stop{display:block}.plugin_ctrl_mobile_txp_bottom .txp_time_display{height:100%;padding:4px 8px 0 0;white-space:nowrap;font-size:0;-webkit-box-flex:0;-ms-flex:none;flex:none;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.plugin_ctrl_mobile_txp_bottom .txp_time_display>div{display:inline;font-size:9px}.plugin_ctrl_mobile_txp_bottom .txp_time_display .txp_time_separator{margin:0 1px}.plugin_ctrl_mobile_txp_bottom .txp_btn_fullscreen{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:45px;height:100%;-webkit-box-flex:0;-ms-flex:none;flex:none}.plugin_ctrl_mobile_txp_bottom .txp_icon_fullscreen{display:block;width:30px;height:30px;margin:auto}.plugin_ctrl_mobile_txp_bottom .txp_icon_fullscreen use{display:none}.plugin_ctrl_mobile_txp_bottom .txp_btn_fullscreen[data-status=false] .txp_svg_fullscreen,.plugin_ctrl_mobile_txp_bottom .txp_btn_fullscreen[data-status=true] .txp_svg_fullscreen_true{display:block}.plugin_ctrl_mobile_txp_bottom .txp_unfullscreen .txp_btn_value{background-position:right 0}.plugin_ctrl_mobile_txp_bottom .txp_btn_fullsize{width:45px;height:100%;-webkit-box-flex:0;-ms-flex:none;flex:none;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.plugin_ctrl_mobile_txp_bottom .txp_btn_fullsize[data-status=false] .txp_svg_fullscreen,.plugin_ctrl_mobile_txp_bottom .txp_btn_fullsize[data-status=true] .txp_svg_fullscreen_true{display:block}.plugin_ctrl_mobile_txp_bottom .txp_unfullsize .txp_btn_value{background-position:right 0}.plugin_ctrl_mobile_txp_bottom .txp_progress_bar_container{position:relative;height:100%;padding:0;vertical-align:top;-webkit-box-flex:1000;-ms-flex:1000;flex:1000}.plugin_ctrl_mobile_txp_bottom .txp_progress_list{position:absolute;left:0;top:20px;width:100%;height:2px;background-color:rgba(31,31,31,.9);-webkit-transform:translateZ(0);transform:translateZ(0)}.plugin_ctrl_mobile_txp_bottom .txp_progress_play{position:absolute;left:0;top:0;height:100%;width:2px;background-color:#fd9000}.plugin_ctrl_mobile_txp_bottom .txp_btn_scrubber{position:absolute;width:30px;height:40px;margin-left:-10px}.plugin_ctrl_mobile_txp_bottom .txp_scrubber_indicator{position:absolute;top:16px;left:10px;width:10px;height:10px;border-radius:99em;background-color:#ff7000}.plugin_ctrl_mobile_txp_bottom .txp_scrubber_indicator:before{content:"";position:absolute;left:-4px;top:-4px;width:18px;height:18px;background-color:#ff7000;opacity:.4;border-radius:99em}.plugin_ctrl_mobile_txp_bottom .txp_btn_definition,.plugin_ctrl_mobile_txp_bottom .txp_btn_playrate{position:relative;padding:0 8px;height:44px;color:#fff;white-space:nowrap;text-align:center;-webkit-box-flex:0;-ms-flex:none;flex:none;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.plugin_ctrl_mobile_txp_bottom .txp_btn_definition .txp_label,.plugin_ctrl_mobile_txp_bottom .txp_btn_playrate .txp_label{margin:auto}.plugin_ctrl_mobile_txp_bottom .txp_btn .txp_tooltip{display:none!important}.plugin_ctrl_mobile_txp_bottom .txp_right_controls{min-width:15px}.plugin_ctrl_mobile_txp_bottom .txp_none{display:none}.plugin_ctrl_mobile_txp_bottom~video::-webkit-media-controls,.plugin_ctrl_mobile_txp_bottom~video::-webkit-media-controls-start-playback-button{display:none!important}.plugin_ctrl_mod_overlay_wrapper{position:static}.plugin_ctrl_mod_overlay_wrapper ol,.plugin_ctrl_mod_overlay_wrapper ul{list-style:none}.plugin_ctrl_mod_overlay_wrapper li{vertical-align:top}.plugin_ctrl_mod_overlay_wrapper *{-webkit-box-sizing:border-box;box-sizing:border-box}.plugin_ctrl_mod_overlay_wrapper .mod_overlay{position:absolute;background:rgba(0,0,0,.75);left:0;top:0;right:0;bottom:0;z-index:998;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;color:#fff}.plugin_ctrl_mod_overlay_wrapper .mod_overlay.overlay_flex{display:-webkit-box;display:-ms-flexbox;display:flex}.plugin_ctrl_mod_overlay_wrapper .mod_overlay.txp_none{display:none}.plugin_ctrl_mod_overlay_wrapper .mod_speed_select{width:100%;text-align:center}.plugin_ctrl_mod_overlay_wrapper .mod_speed_select .title{font-size:16px}.plugin_ctrl_mod_overlay_wrapper .mod_speed_select ul{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-flow:row wrap;flex-flow:row wrap;font-size:18px;font-weight:700;padding:0 12px}.plugin_ctrl_mod_overlay_wrapper .mod_speed_select li{height:70px;margin-right:6px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding:0 12px}.plugin_ctrl_mod_overlay_wrapper .mod_speed_select li div:last-child{margin-top:6px;font-size:14px;font-weight:500}.plugin_ctrl_mod_overlay_wrapper .mod_speed_select li.current{color:#ff6022}.plugin_ctrl_mod_overlay_wrapper .mod_speed_select li.current span{position:relative}.plugin_ctrl_mod_overlay_wrapper .mod_speed_select li.current span:after{content:"";width:100%;height:3px;background:#ff6022;position:absolute;bottom:-3px;left:0}.plugin_ctrl_mod_overlay_wrapper .txp_btn_playrate{position:relative;width:55px;height:44px;color:#fff;white-space:nowrap;text-align:center;-webkit-box-flex:0;-ms-flex:none;flex:none;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.plugin_ctrl_txp_mode_fullscreen .plugin_ctrl_mobile_txp_bottom{padding-bottom:env(safe-area-inset-bottom)}':'.plugin_ctrl_txp_shadow{position:absolute;z-index:2;left:0;top:0;width:100%;height:100%}.plugin_ctrl_txp_shadow.txp_none{display:none}.plugin_ctrl_airplay_btn svg{-webkit-transform:scale(.9);transform:scale(.9)}.plugin_ctrl_center_btn{position:absolute;left:0;top:0;width:100%;height:100%;z-index:5;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;pointer-events:none}.plugin_ctrl_center_btn.txp_none{display:none}.plugin_ctrl_center_btn .txp_none{display:none!important}.plugin_ctrl_center_btn .btn_play{width:68px;height:68px;pointer-events:auto;cursor:pointer}.plugin_ctrl_center_btn .btn_play .icon_play{width:100%;height:100%}.plugin_ctrl_center_btn .btn_replay{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:0 22px;line-height:40px;border-radius:99em;color:#fff;font-size:14px;background-color:rgba(59,59,59,.95);pointer-events:auto;cursor:pointer}.plugin_ctrl_center_btn .btn_replay .icon_replay{margin-right:4px;width:15px;height:15px;fill:#fff}.plugin_ctrl_txp_gradient_bottom{position:absolute;z-index:3;left:0;bottom:0;width:100%;height:120px;background-image:-webkit-gradient(linear,left bottom, left top,color-stop(0, rgba(0,0,0,.5)),to(transparent));background-image:linear-gradient(0deg,rgba(0,0,0,.5) 0,transparent);opacity:1;-webkit-transition:opacity .15s ease-out;transition:opacity .15s ease-out;pointer-events:none}.plugin_ctrl_txp_gradient_bottom.txp_none{display:none}.plugin_ctrl_fake_fullscreen{overflow:hidden}._mod_thumbplayer_container_:-webkit-full-screen{width:100%!important;height:100%!important}._mod_thumbplayer_container_.thumbplayer-fullscreen{width:100%!important;height:100%!important}@-webkit-keyframes txp_icon_scale{0%{-webkit-transform:scale(1);transform:scale(1);-webkit-transform-origin:center center;transform-origin:center center}50%{-webkit-transform:scale(1.2);transform:scale(1.2);-webkit-transform-origin:center center;transform-origin:center center}to{-webkit-transform:scale(1);transform:scale(1);-webkit-transform-origin:center center;transform-origin:center center}}@keyframes txp_icon_scale{0%{-webkit-transform:scale(1);transform:scale(1);-webkit-transform-origin:center center;transform-origin:center center}50%{-webkit-transform:scale(1.2);transform:scale(1.2);-webkit-transform-origin:center center;transform-origin:center center}to{-webkit-transform:scale(1);transform:scale(1);-webkit-transform-origin:center center;transform-origin:center center}}.plugin_ctrl_txp_bottom{position:absolute;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:6;bottom:0;left:0;width:100%;height:48px;line-height:1;max-width:100%;max-height:100%;overflow:initial;text-indent:0;text-align:left;white-space:normal;word-break:break-all;color:#fff;font-size:14px;font-family:PingFangSC-Regular,Helvetica Neue,Helvetica,Roboto,Microsoft Yahei,Arial,sans-serif;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-font-smoothing:antialiased;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-touch-callout:none}.plugin_ctrl_txp_bottom.txp_none{display:none}.plugin_ctrl_txp_bottom .txp_btn{position:relative;cursor:pointer;background:none;border:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;font-family:inherit}.plugin_ctrl_txp_bottom .txp_btn:hover .txp_icon{fill:#ff6022;cursor:pointer}.plugin_ctrl_txp_bottom .txp_icon_airplay .txp_icon_pip,.plugin_ctrl_txp_bottom .txp_icon_fake,.plugin_ctrl_txp_bottom .txp_icon_fullscreen,.plugin_ctrl_txp_bottom .txp_icon_volume,.plugin_ctrl_txp_bottom .txp_icon_volume_mute{stroke:#fff}.plugin_ctrl_txp_bottom .txp_btn:hover .txp_icon_airplay,.plugin_ctrl_txp_bottom .txp_btn:hover .txp_icon_fake,.plugin_ctrl_txp_bottom .txp_btn:hover .txp_icon_fullscreen,.plugin_ctrl_txp_bottom .txp_btn:hover .txp_icon_pip,.plugin_ctrl_txp_bottom .txp_btn:hover .txp_icon_volume,.plugin_ctrl_txp_bottom .txp_btn_fake[data-status=true] .txp_icon_fake{stroke:#ff6022}.plugin_ctrl_txp_bottom .txp_btn_pip[data-status=true] .txp_icon_pip{stroke:#ff6022;fill:#ff6022}.plugin_ctrl_txp_bottom .txp_controls{display:-webkit-box;display:-ms-flexbox;display:flex;position:absolute;bottom:0;left:0;width:100%;height:100%}.plugin_ctrl_txp_bottom *,.plugin_ctrl_txp_bottom :after,.plugin_ctrl_txp_bottom :before{margin:0;padding:0;-webkit-box-sizing:border-box;box-sizing:border-box;text-indent:0}.plugin_ctrl_txp_bottom a,.plugin_ctrl_txp_bottom a:hover,.plugin_ctrl_txp_bottom a:visited{color:#fff;text-decoration:none!important}.plugin_ctrl_txp_bottom :focus,.plugin_ctrl_txp_bottom a:active{outline:0 none}.plugin_ctrl_txp_bottom .txp_left_controls,.plugin_ctrl_txp_bottom .txp_right_controls{position:relative;height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.plugin_ctrl_txp_bottom .txp_controls .txp_btn{height:100%;text-align:center;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.plugin_ctrl_txp_bottom .txp_left_controls .txp_btn{margin-right:16px;text-align:center;-webkit-box-flex:0;-ms-flex:none;flex:none}.plugin_ctrl_txp_bottom .txp_left_controls .txp_btn:first-child{margin-left:16px}.plugin_ctrl_txp_bottom .txp_center_controls{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}.plugin_ctrl_txp_bottom .txp_right_controls{z-index:8}.plugin_ctrl_txp_bottom .txp_right_controls .txp_btn{margin-right:16px}.plugin_ctrl_txp_bottom .txp_right_controls .txp_btn_definition,.plugin_ctrl_txp_bottom .txp_right_controls .txp_btn_language,.plugin_ctrl_txp_bottom .txp_right_controls .txp_btn_playrate{margin-right:24px}.plugin_ctrl_txp_bottom .txp_left_controls .txp_icon{display:block;margin:auto}.plugin_ctrl_txp_bottom .txp_left_controls .txp_icon_next{pointer-events:none}.plugin_ctrl_txp_bottom .txp_right_controls .txp_icon{display:block}.plugin_ctrl_txp_bottom .txp_controls .txp_tooltip{position:absolute;z-index:14;height:26px;border-radius:16px;font-size:12px;line-height:18px;display:none;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;top:-30px;padding:4px 12px;white-space:nowrap;background-color:rgba(0,0,0,.8);left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}.plugin_ctrl_txp_bottom .txp_controls .txp_btn_fake .txp_tooltip{left:-15px;-webkit-transform:translate(0);transform:translate(0)}.plugin_ctrl_txp_bottom .txp_controls .txp_btn_play .txp_tooltip{left:-6px;-webkit-transform:translate(0);transform:translate(0)}.plugin_ctrl_txp_bottom .txp_controls .txp_btn_next .txp_tooltip{left:-11px;-webkit-transform:translate(0);transform:translate(0)}.plugin_ctrl_txp_bottom .txp_controls .txp_btn_fullscreen .txp_tooltip{left:auto;right:-10px;-webkit-transform:translate(0);transform:translate(0)}.plugin_ctrl_txp_bottom .txp_btn_setting:hover .txp_icon_setting{-webkit-animation:txp_icon_rotate .3s ease both;animation:txp_icon_rotate .3s ease both}.plugin_ctrl_txp_bottom .txp_air_play:hover .txp_icon,.plugin_ctrl_txp_bottom .txp_btn_fake:hover .txp_icon,.plugin_ctrl_txp_bottom .txp_btn_fullscreen:hover .txp_icon,.plugin_ctrl_txp_bottom .txp_btn_pip:hover .txp_icon{-webkit-animation:txp_icon_scale .4s ease both;animation:txp_icon_scale .4s ease both}.plugin_ctrl_txp_bottom .txp_time_display{height:100%;margin-left:8px;white-space:nowrap;font-size:0;-webkit-box-flex:0;-ms-flex:none;flex:none;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.plugin_ctrl_txp_bottom .txp_time_display.reach_hour{margin-left:-8px}.plugin_ctrl_txp_bottom .txp_time_display.reach_hour .txp_time_current,.plugin_ctrl_txp_bottom .txp_time_display.reach_hour .txp_time_duration{width:50px}.plugin_ctrl_txp_bottom .txp_time_display.reach_hour .txp_time_current{text-align:right}.plugin_ctrl_txp_bottom .txp_time_display.reach_hour .txp_time_duration{text-align:left}.plugin_ctrl_txp_bottom .txp_time_display>div{display:inline;font-size:12px}.plugin_ctrl_txp_bottom .txp_time_display .txp_time_separator{margin:0 3px;color:hsla(0,0%,100%,.5)}.plugin_ctrl_txp_bottom .txp_time_display .txp_time_current,.plugin_ctrl_txp_bottom .txp_time_display .txp_time_duration{width:32px;text-align:center}.plugin_ctrl_txp_bottom .txp_time_display .txp_time_duration{color:hsla(0,0%,100%,.5)}.plugin_ctrl_txp_bottom .txp_time_display .txp_live_badge{position:relative;font-size:12px;display:inline;margin-top:-1px;line-height:40px;padding-left:10px;cursor:default}.plugin_ctrl_txp_bottom .txp_time_display .txp_live_badge:before{content:"";position:absolute;left:0;top:17px;display:inline-block;width:6px;height:6px;border-radius:100%;background-color:#ff7000}.plugin_ctrl_txp_bottom .txp_time_display .txp_live_badge_back:before{background-color:#bbb}.plugin_ctrl_txp_bottom .txp_time_display_live{margin-left:0}.plugin_ctrl_txp_bottom .txp_progress_bar_container{position:absolute;z-index:4;left:0;top:-8px;width:100%;height:8px;padding:0;vertical-align:top;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}.plugin_ctrl_txp_bottom .txp_progress_bar_container:after{content:"";display:block;width:100%;height:12px;position:absolute;bottom:-2px;z-index:-1}.plugin_ctrl_txp_bottom .txp_progress_bar_container:hover{z-index:9;cursor:pointer}.plugin_ctrl_txp_bottom .txp_progress_list{position:absolute;left:0;top:0;height:8px;width:100%}.plugin_ctrl_txp_bottom .txp_progress_list:after{content:"";position:absolute;left:0;top:0;width:100%;height:100%;background-color:hsla(0,0%,100%,.35);-webkit-transform:scaleY(.5);transform:scaleY(.5);-webkit-transition:all .15s ease;transition:all .15s ease;z-index:-1}.plugin_ctrl_txp_bottom .txp_progress_load,.plugin_ctrl_txp_bottom .txp_progress_play{position:absolute;left:0;top:0;height:100%;width:2px;background-color:#ff6429;-webkit-transform:scaleY(.5);transform:scaleY(.5);-webkit-transition:all .15s ease;transition:all .15s ease}.plugin_ctrl_txp_bottom .txp_progress_bar_container:hover .txp_progress_list:after,.plugin_ctrl_txp_bottom .txp_progress_bar_container:hover .txp_progress_load,.plugin_ctrl_txp_bottom .txp_progress_bar_container:hover .txp_progress_play,.plugin_ctrl_txp_bottom .txp_progress_bar_container:hover .txp_progress_role{-webkit-transform:scaleY(1);transform:scaleY(1)}.plugin_ctrl_txp_bottom .txp_progress_load{background-color:hsla(0,0%,100%,.5)}.plugin_ctrl_txp_bottom .txp_progress_role{position:absolute;left:0;top:0;height:100%;width:2px;background-color:rgba(178,250,77,.5);-webkit-transform:scaleY(.5);transform:scaleY(.5);-webkit-transition:all .15s ease;transition:all .15s ease}.plugin_ctrl_txp_bottom .txp_btn_scrubber{position:absolute;width:12px;height:12px;top:-2px;margin-left:-6px;cursor:pointer;-webkit-transform:scale(0);transform:scale(0);-webkit-transition:all .15s ease;transition:all .15s ease}.plugin_ctrl_txp_bottom .txp_scrubber_indicator{position:relative;width:12px;height:12px;border-radius:100%;background-color:#ff6429}.plugin_ctrl_txp_bottom .txp_scrubber_indicator:before{content:"";position:absolute;left:-4px;top:-4px;width:20px;height:20px;border-radius:100%;display:block;background-color:rgba(254,100,41,.3)}.plugin_ctrl_txp_bottom .txp_progress_bar_container:hover .txp_btn_scrubber{-webkit-transform:scale(1);transform:scale(1)}.plugin_ctrl_txp_bottom .txp_btn_scrubber:hover .txp_scrubber_indicator:before{width:24px;height:24px;left:-6px;top:-6px}.plugin_ctrl_txp_bottom .txp_btn_play .txp_svg_symbol{visibility:hidden;opacity:0}.plugin_ctrl_txp_bottom .txp_btn_play[data-status=pause] .txp_svg_pause,.plugin_ctrl_txp_bottom .txp_btn_play[data-status=play] .txp_svg_play,.plugin_ctrl_txp_bottom .txp_btn_play[data-status=replay] .txp_svg_replay,.plugin_ctrl_txp_bottom .txp_btn_play[data-status=stop] .txp_svg_stop{visibility:visible;opacity:1;-webkit-animation:none;animation:none}.plugin_ctrl_txp_bottom .txp_popup{position:absolute;bottom:34px;z-index:20;width:100%;padding-bottom:24px;color:#eee;cursor:default}.plugin_ctrl_txp_bottom .txp_popup_content{background-color:rgba(0,0,0,.8);border-radius:4px}.plugin_ctrl_txp_bottom .txp_popup_audio_track,.plugin_ctrl_txp_bottom .txp_popup_definition,.plugin_ctrl_txp_bottom .txp_popup_language,.plugin_ctrl_txp_bottom .txp_popup_playrate{width:auto;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%);font-size:0}.plugin_ctrl_txp_bottom .txp_popup_audio_track .txp_popup_content,.plugin_ctrl_txp_bottom .txp_popup_definition .txp_popup_content,.plugin_ctrl_txp_bottom .txp_popup_language .txp_popup_content,.plugin_ctrl_txp_bottom .txp_popup_playrate .txp_popup_content{padding-top:10px}.plugin_ctrl_txp_bottom .txp_popup_audio_track .txp_menuitem,.plugin_ctrl_txp_bottom .txp_popup_definition .txp_menuitem,.plugin_ctrl_txp_bottom .txp_popup_language .txp_menuitem,.plugin_ctrl_txp_bottom .txp_popup_playrate .txp_menuitem{min-width:104px;position:relative;padding:10px 22px;font-size:14px;text-align:center;cursor:pointer;white-space:nowrap;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.plugin_ctrl_txp_bottom .txp_popup_audio_track .txp_menuitem:last-of-type,.plugin_ctrl_txp_bottom .txp_popup_definition .txp_menuitem:last-of-type,.plugin_ctrl_txp_bottom .txp_popup_language .txp_menuitem:last-of-type,.plugin_ctrl_txp_bottom .txp_popup_playrate .txp_menuitem:last-of-type{padding-bottom:20px}.plugin_ctrl_txp_bottom .txp_popup_audio_track .txp_menuitem:active,.plugin_ctrl_txp_bottom .txp_popup_audio_track .txp_menuitem:hover,.plugin_ctrl_txp_bottom .txp_popup_definition .txp_menuitem:active,.plugin_ctrl_txp_bottom .txp_popup_definition .txp_menuitem:hover,.plugin_ctrl_txp_bottom .txp_popup_language .txp_menuitem:active,.plugin_ctrl_txp_bottom .txp_popup_language .txp_menuitem:hover,.plugin_ctrl_txp_bottom .txp_popup_playrate .txp_menuitem:active,.plugin_ctrl_txp_bottom .txp_popup_playrate .txp_menuitem:hover{color:#ff6429}.plugin_ctrl_txp_bottom .txp_btn .txp_label{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;padding:1px 4px;cursor:pointer;color:#ececec;white-space:nowrap;border:2px solid #fff;border-radius:4px;font-weight:700}.plugin_ctrl_txp_bottom .txp_btn .txp_label:hover{color:#ff6022;border-color:#ff6022}.plugin_ctrl_txp_bottom .txp_btn_definition{position:relative;height:100%;white-space:nowrap;text-align:center;-webkit-box-flex:0;-ms-flex:none;flex:none}.plugin_ctrl_txp_bottom .txp_volume{position:relative;display:table-cell;width:44px;height:45px;vertical-align:top;color:#fff}.plugin_ctrl_txp_bottom .txp_volume_text{padding-top:8px}.plugin_ctrl_txp_bottom .txp_btn_volume .txp_svg_symbol{display:none}.plugin_ctrl_txp_bottom .txp_btn_volume[data-status=mute] .txp_svg_volume_mute,.plugin_ctrl_txp_bottom .txp_btn_volume[data-status=normal] .txp_svg_volume{display:block}.plugin_ctrl_txp_bottom .txp_popup_volume{width:42px;-webkit-transform:translate(-50%);transform:translate(-50%);left:50%}.plugin_ctrl_txp_bottom .txp_popup_volume .txp_popup_content{overflow:hidden}.plugin_ctrl_txp_bottom .txp_volume_range{position:relative;margin:10px 19px;width:4px;height:90px;background-color:hsla(0,0%,65.1%,.5);border-radius:2px;cursor:pointer}.plugin_ctrl_txp_bottom .txp_volume_range:after{content:"";display:block;width:42px;height:90px;position:absolute;left:-19px;top:0}.plugin_ctrl_txp_bottom .txp_volume_range_current{position:absolute;left:0;bottom:0;width:100%;height:50%;background-color:#ff6429;border-radius:2px;z-index:1}.plugin_ctrl_txp_bottom .txp_volume_handle{position:absolute;top:-4px;left:-2px;width:8px;height:8px;background-color:#fff;border-radius:100%;cursor:pointer}.plugin_ctrl_txp_bottom .txp_volume_handle:before{content:"";display:block;position:absolute;left:-3px;top:-3px;width:14px;height:14px;opacity:0;-webkit-transform:scale(0);transform:scale(0);background-color:hsla(0,0%,100%,.2);border-radius:7px}.plugin_ctrl_txp_bottom .txp_volume_handle:after{content:"";width:32px;height:32px;display:block;position:absolute;left:-12px;top:-12px;z-index:-1;opacity:.5;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAADAUExURQAAAP+ZAP+RAP9/AP+aAP9/AP+OCP//AP9/AP+qAP+QDf+SDP+TDv+TCv+RCP+ZAP+TC/+TCP+QC/+RCv+SCf+SCv+QCv+RCv+TCf+PD/+PCP+RDP+RCf+RCv+PCf+RB/+RCv+RCf6RCv+ZEf+RC/+RCf+RC/+RC/6RCv+OB/+QC/+RC/+RCv+TC/+QC/+SC/+RC/+RCv+RCv+RCv+RC/6RCv6RCv6RCv6SCv6SCv2QC/+RCv+SCv+RC/+RCv2RCn+uAUwAAABAdFJOUwAFBwYIBAsBAgMNExEYOAoWHit4JUtXYhoQHCg1MT4gRmmHD1SlsbaUIi5BIy1DUltIb2VygY+Jm6KYrHyYuqzDURAFAAAB/klEQVQ4y6WVWZeiMBSEhQZmDAgJO7LIIrivuNv2/P9/NTdRp7VlTmfO1BMP36kKl5ui1XrQD9DPm+hzq1lXqn3TlW3mKCXLApMsU7aBpHaUehMlJvGNsq+mzE6mlKEwGZSVX0yZnSBKBkJFoIGCAiFDEgVm+oUDO4Q0FeMOCGNVQ+hq+kAyDuwCFfuE9ECE+FgNwJSRz5yCNMCmdmiCQnsKqIaURxKCKVeone4onMWRDoriWTgiHbWg5D0cDAXRQGqH2GasJ/N0tUrniR6bNpDIEIW7JQtGGnDjKEmdhQtaOGkSjYHU0Gc4GEoowF17rE+c/tKrs6z2ln1noo/tLg6QdLdsyzTYH5nRxHG9bGOBNpnnOpPIHPk0XG5fQUFSNEzCOHHcem1t8/0+31rr2nWSOCRYU6glBekJVX8609O+t37Pd8PTabjL39deP9VnU7CkL85A0SjghGC4zKx8eDiW5fEwzK1sCZZwygKyGSiISgDJ0Xzhbba7Q/mrqs7lYbfdeIt5BNmBAhNiIByx0zMhuQbD47kaDKrzESxryDZ7dELP4MrNrP2prAYfH4OqvOytzF39H/h9NO/LcI/nZeCXS/PAuT8h91Lc1ow0rRl5XDPuxeW+CtyXi/u68hfAn0pRnitFeakU7pJ6rj0E+lvt8RcpfzX/Q9l/8/v4DS6tX+XyhPN2AAAAAElFTkSuQmCC);background-size:32px 32px;pointer-events:none}.plugin_ctrl_txp_bottom .txp_volume_handle:hover:before{opacity:1;-webkit-transform:scale(1);transform:scale(1)}.plugin_ctrl_txp_bottom .txp_volume_handle:hover:after{opacity:1}.plugin_ctrl_txp_bottom .txp_right_controls .txp_btn_popup{width:24px}.plugin_ctrl_txp_bottom .txp_right_controls .txp_icon_popup{width:20px;height:20px;margin-top:0}.plugin_ctrl_txp_bottom .txp_btn_fake .txp_svg_symbol,.plugin_ctrl_txp_bottom .txp_btn_fullscreen .txp_svg_symbol{display:none}.plugin_ctrl_txp_bottom .txp_btn_fake[data-status=false] .txp_svg_fake,.plugin_ctrl_txp_bottom .txp_btn_fake[data-status=true] .txp_svg_fake_true,.plugin_ctrl_txp_bottom .txp_btn_fullscreen[data-status=false] .txp_svg_fullscreen,.plugin_ctrl_txp_bottom .txp_btn_fullscreen[data-status=true] .txp_svg_fullscreen_true{display:block}.plugin_ctrl_txp_bottom .txp_popup .txp_current{color:#ff6429}.plugin_ctrl_txp_bottom .txp_btn_loop .txp_svg_loop,.plugin_ctrl_txp_bottom .txp_btn_loop .txp_svg_loop_off{display:none}.plugin_ctrl_txp_bottom .txp_btn_loop[data-status=false] .txp_svg_loop_off,.plugin_ctrl_txp_bottom .txp_btn_loop[data-status=true] .txp_svg_loop,.plugin_ctrl_txp_bottom .txp_controls .txp_btn:hover .txp_tooltip{display:block}.plugin_ctrl_txp_bottom .txp_controls .txp_btn:visited .txp_tooltip{display:none}.plugin_ctrl_txp_bottom .txp_popup:hover{display:block}.plugin_ctrl_txp_bottom .txp_icon{position:relative;width:28px;height:28px;fill:#fff}.plugin_ctrl_txp_bottom .txp_icon:after,.plugin_ctrl_txp_bottom .txp_icon:before,.plugin_ctrl_txp_bottom .txp_icon_inner:after,.plugin_ctrl_txp_bottom .txp_icon_inner:before{content:"";position:absolute;-webkit-box-sizing:content-box;box-sizing:content-box}.plugin_ctrl_txp_bottom .txp_icon_inner{position:absolute;width:100%;height:100%}.plugin_ctrl_txp_bottom .txp_controls .txp_disabled{cursor:default;opacity:.5;pointer-events:none}.plugin_ctrl_txp_bottom .txp_gradient_top{display:none}.plugin_ctrl_txp_bottom .txp_btn_scrubber,.plugin_ctrl_txp_bottom .txp_progress_load,.plugin_ctrl_txp_bottom .txp_progress_play{-webkit-transition:-webkit-transform .15s ease;transition:-webkit-transform .15s ease;transition:transform .15s ease;transition:transform .15s ease, -webkit-transform .15s ease}.plugin_ctrl_txp_bottom .txp_none{display:none!important}.plugin_ctrl_txp_mode_fullscreen .txp_controls .txp_btn_fullscreen .txp_tooltip{left:auto;right:0;-webkit-transform:translate(0);transform:translate(0)}.plugin_ctrl_txp_mode_fullscreen .txp_controls .txp_btn_fake .txp_tooltip{left:-26px;-webkit-transform:translate(0);transform:translate(0)}.plugin_ctrl--large .plugin_ctrl_txp_gradient_bottom{height:100px}.plugin_ctrl--large .plugin_ctrl_txp_bottom{height:88px}.plugin_ctrl--large .plugin_ctrl_txp_bottom .txp_popup{bottom:64px}.plugin_ctrl--large .plugin_ctrl_txp_bottom .txp_left_controls .txp_btn,.plugin_ctrl--large .plugin_ctrl_txp_bottom .txp_right_controls .txp_btn{margin-right:24px}.plugin_ctrl--large .plugin_ctrl_txp_bottom .txp_left_controls .txp_btn .txp_label,.plugin_ctrl--large .plugin_ctrl_txp_bottom .txp_right_controls .txp_btn .txp_label{height:26px;font-size:16px}.plugin_ctrl--large .plugin_ctrl_txp_bottom .txp_left_controls .txp_icon,.plugin_ctrl--large .plugin_ctrl_txp_bottom .txp_right_controls .txp_icon{width:40px;height:40px}.plugin_ctrl--large .plugin_ctrl_txp_bottom .txp_left_controls .txp_time_display{margin-left:0}.plugin_ctrl--large .plugin_ctrl_txp_bottom .txp_left_controls .txp_btn:first-child{margin-left:32px}.plugin_ctrl--large .plugin_ctrl_txp_bottom .txp_right_controls .txp_btn_definition,.plugin_ctrl--large .plugin_ctrl_txp_bottom .txp_right_controls .txp_btn_language,.plugin_ctrl--large .plugin_ctrl_txp_bottom .txp_right_controls .txp_btn_playrate{margin-right:32px}.txp_interact_dot{position:absolute;top:2px;width:4px;height:4px;margin-left:-2px;border-radius:100%;background-color:#fff;-webkit-transition:all .1s;transition:all .1s}.txp_interact_dot:after{position:absolute;top:-4px;right:-4px;bottom:-4px;left:-4px;content:""}.txp_interact_dot:hover{-webkit-transform:scale(2);transform:scale(2);-webkit-box-shadow:0 0 2px #ffb821;box-shadow:0 0 2px #ffb821}.txp_hotpoint_tip{color:#fff;position:relative;width:200px;bottom:60px;font-size:12px;line-height:24px;height:50px;padding:0 6px;background-color:rgba(0,0,0,.9);display:-webkit-box;overflow:hidden;text-overflow:ellipsis;-webkit-box-orient:vertical;-webkit-line-clamp:2;word-wrap:break-word}.txp_hotpoint_tip .txp_hotpoint_tip_title{color:#bbb}.txp_hotpoint_tip .txp_hotpoint_tip_detail{max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}'),n=(_.domTool.insertStyle(n,N.styleDataTag),H(t));this.el=e.querySelector(n),document.querySelector(".thumbplayer.txp_svg_sprite")||document.body.insertAdjacentHTML("afterbegin",t?'\n<svg class="thumbplayer txp_svg_sprite" display="none" xmlns="http://www.w3.org/2000/svg">\n\t<symbol id="txp_svg_play" viewBox="0 0 56 56">\n\t\t<path d="M14.569 13.867s-.563 1.42-.563 14.059.563 14.188.563 14.188a1.925 1.925 0 0 0 2.8 1.677s2.938-.442 14.763-6.211 13.8-7.914 13.8-7.914a1.859 1.859 0 0 0 0-3.352s-3.24-2.875-13.8-8.095c-10.444-5.165-14.767-6.029-14.767-6.029a1.924 1.924 0 0 0-2.796 1.677z" style="fill:#fff" />\n\t</symbol>\n    <symbol id="txp_svg_replay" viewBox="0 0 32 32">\n      <path d="M18 30a13.956 13.956 0 0 1-9.9-4.1l2.121-2.121A11 11 0 1 0 7 16h4.006L5.5 22 0 16h4a14 14 0 1 1 14 14z">\n      </path>\n    </symbol>\n    <symbol id="txp_svg_pause" viewBox="0 0 56 56">\n      <path d="M39 49a4 4 0 0 1-4-4V11a4 4 0 0 1 4-4 4 4 0 0 1 4 4v34a4 4 0 0 1-4 4zm-22 0a4 4 0 0 1-4-4V11a4 4 0 0 1 4-4 4 4 0 0 1 4 4v34a4 4 0 0 1-4 4z">\n      </path>\n    </symbol>\n    <symbol id="txp_svg_stop" viewBox="0 0 32 32">\n      <path d="M24 26H12c-1.1 0-2-0.9-2-2V12c0-1.1 0.9-2 2-2h12c1.1 0 2 0.9 2 2v12C26 25.1 25.1 26 24 26z"></path>\n    </symbol>\n\n\t<symbol id="txp_svg_fullscreen" viewBox="0 0 48 48">\n\t\t<path d="M9.5 37h10a1.5 1.5 0 0 1 0 3h-10a1.5 1.5 0 0 1 0-3zm0-10a1.5 1.5 0 0 1 1.5 1.5v10a1.5 1.5 0 0 1-3 0v-10A1.5 1.5 0 0 1 9.5 27zM8.43 37.353L19.353 26.43a1.545 1.545 0 1 1 2.185 2.184L10.614 39.538a1.545 1.545 0 1 1-2.184-2.185zM28.5 8h10a1.5 1.5 0 0 1 0 3h-10a1.5 1.5 0 0 1 0-3zm10 0A1.5 1.5 0 0 1 40 9.5v10a1.5 1.5 0 0 1-3 0v-10A1.5 1.5 0 0 1 38.5 8zM26.43 19.354L37.353 8.43a1.545 1.545 0 0 1 2.185 2.184L28.614 21.538a1.545 1.545 0 0 1-2.184-2.184z"/>\n\t</symbol>\n\t<symbol id="txp_svg_fullscreen_true" viewBox="0 0 48 48">\n\t\t<path d="M39.538 10.615L31.153 19H37.5a1.5 1.5 0 0 1 0 3h-10a1.5 1.5 0 0 1-1.386-.937 1.52 1.52 0 0 1-.114-.735V10.5a1.5 1.5 0 0 1 3 0v6.283l8.353-8.353a1.545 1.545 0 1 1 2.185 2.185zM20.5 39a1.5 1.5 0 0 1-1.5-1.5v-6.347l-8.386 8.385a1.545 1.545 0 1 1-2.184-2.184L16.783 29H10.5a1.5 1.5 0 0 1 0-3h9.828a1.518 1.518 0 0 1 .733.113A1.5 1.5 0 0 1 22 27.5v10a1.5 1.5 0 0 1-1.5 1.5z"/>\n\t</symbol>\n\t<symbol id="txp_svg_pause" viewBox="0 0 56 56">\n\t\t<path d="M39 49a4 4 0 0 1-4-4V11a4 4 0 0 1 4-4 4 4 0 0 1 4 4v34a4 4 0 0 1-4 4zm-22 0a4 4 0 0 1-4-4V11a4 4 0 0 1 4-4 4 4 0 0 1 4 4v34a4 4 0 0 1-4 4z"/>\n\t</symbol>\n\t<symbol id="txp_svg_replay" viewBox="0 0 32 32">\n\t\t<path d="M18 30a13.956 13.956 0 0 1-9.9-4.1l2.121-2.121A11 11 0 1 0 7 16h4.006L5.5 22 0 16h4a14 14 0 1 1 14 14z"/>\n\t</symbol>\n\t<symbol id="txp_svg_next" viewBox="0 0 60 60">\n\t\t<path d="M47.13825,15.0141429 C45.3628929,15.0141429 43.9239643,16.4530714 43.9239643,18.2284286 L43.9239643,41.7998571 C43.9239643,43.5752143 45.3628929,45.0141429 47.13825,45.0141429 C48.9136071,45.0141429 50.3525357,43.5752143 50.3525357,41.7998571 L50.3525357,18.2284286 C50.3525357,16.4530714 48.9136071,15.0141429 47.13825,15.0141429 M39.7389643,28.4327143 C39.7389643,28.4327143 36.7936071,25.737 27.1946786,20.8437857 C17.6986071,16.002 13.7686071,15.192 13.7686071,15.192 C12.6050357,14.5995 11.2261071,15.4502143 11.2261071,16.7637857 C11.2261071,16.7637857 10.7139643,18.0955714 10.7139643,29.9455714 C10.7139643,41.7945 11.2261071,43.2462857 11.2261071,43.2462857 C11.2261071,44.5598571 12.6050357,45.4116429 13.7686071,44.8180714 C13.7686071,44.8180714 16.4396786,44.4034286 27.1893214,38.9948571 C37.9411071,33.5852143 39.7389643,31.5762857 39.7389643,31.5762857 C41.0171786,30.9248571 41.0171786,29.0852143 39.7389643,28.4327143" id="Fill-1"></path>\n\t</symbol>\n</svg>\n':'\n<svg class="thumbplayer txp_svg_sprite" display="none" xmlns="http://www.w3.org/2000/svg">\n    <symbol id="txp_svg_play" viewBox="0 0 28 28">\n        <path d="M6.308 6.057S6 6.857 6 13.964c0 7.108.308 7.978.308 7.978 0 .788.827 1.299 1.526.943 0 0 1.603-.25 8.057-3.493 6.455-3.244 7.534-4.45 7.534-4.45.767-.39.767-1.493 0-1.884 0 0-1.768-1.617-7.531-4.553-5.7-2.904-8.06-3.39-8.06-3.39a1.051 1.051 0 0 0-1.526.942" fill-rule="evenodd"/>\n    </symbol>\n    <symbol id="txp_svg_replay" viewBox="0 0 28 28">\n        <path d="M14 4a9.994 9.994 0 0 1 8.5 4.731V6a1 1 0 0 1 2 0v5a1 1 0 0 1-.883.993L23.5 12h-5a1 1 0 0 1 0-2h2.43a8 8 0 1 0 .816 6.01 1 1 0 0 1 1.936.5A10.003 10.003 0 0 1 14 24C8.477 24 4 19.523 4 14S8.477 4 14 4Z" fill-rule="evenodd"/>\n    </symbol>\n    <symbol id="txp_svg_pause" viewBox="0 0 28 28">\n        <path d="M9 5a1.5 1.5 0 0 1 1.5 1.5v15A1.5 1.5 0 0 1 9 23h-.5A1.5 1.5 0 0 1 7 21.5v-15A1.5 1.5 0 0 1 8.5 5H9Zm10.5 0A1.5 1.5 0 0 1 21 6.5v15a1.5 1.5 0 0 1-1.5 1.5H19a1.5 1.5 0 0 1-1.5-1.5v-15A1.5 1.5 0 0 1 19 5h.5Z" fill-rule="evenodd"/>\n    </symbol>\n    <symbol id="txp_svg_stop" viewBox="0 0 28 28">\n      <rect x="5" y="5" width="18" height="18" rx="4" fill-rule="evenodd"/>\n    </symbol>\n\n    <symbol id="txp_svg_fake" viewBox="0 0 28 28">\n        <rect fill="none" stroke-width="1.75" transform="translate(0 3.5)" x="5.25" y="3.5" width="17.5" height="14" rx="2.042"/>\n    </symbol>\n\n    <symbol id="txp_svg_loop_off" viewBox="0 0 28 28">\n        <g fill-rule="evenodd"><path d="M16.859 14.22c2.738 0 4.958 2.164 4.958 4.834 0 2.67-2.22 4.834-4.958 4.834-2.739 0-4.959-2.164-4.959-4.834 0-2.67 2.22-4.835 4.959-4.835Zm0 .966c-2.19 0-3.967 1.732-3.967 3.868s1.776 3.867 3.967 3.867c2.19 0 3.967-1.731 3.967-3.867s-1.776-3.868-3.967-3.868Zm-1.206 2.02.069.056 2.975 2.9a.475.475 0 0 1 0 .684.506.506 0 0 1-.633.056l-.068-.056-2.975-2.9a.475.475 0 0 1 0-.684.506.506 0 0 1 .632-.056ZM12.591 4.9a.69.69 0 0 1 .456.171l3.812 3.346H11.9v-.001H8.925c-1.584 0-2.88 1.208-2.97 2.731l-.005.17v3.868c0 1.545 1.239 2.808 2.8 2.896l.175.005.992-.001v1.934h-.992c-2.664 0-4.838-2.048-4.953-4.619l-.005-.215v-3.868c0-2.597 2.101-4.717 4.737-4.83l.221-.004H11.9v-.892c0-.382.31-.691.691-.691Zm7.243 1.68c2.19.433 3.856 2.274 3.961 4.512l.006.225v3.868c0 .432-.058.85-.167 1.248l-1.817-2.215v-2.9c0-1.263-.827-2.338-1.982-2.736V6.581Z" fill-rule="nonzero"/></g>\n    </symbol>\n    <symbol id="txp_svg_loop" viewBox="0 0 28 28">\n        <g fill-rule="evenodd"><path d="M9 8.877a3 3 0 0 0-2.995 2.824L6 11.877v4a3 3 0 0 0 2.824 2.995l.176.005a1 1 0 1 1 0 2 5 5 0 0 1-4.995-4.783L4 15.877v-4a5 5 0 0 1 4.783-4.995L9 6.877h3V5.5a.5.5 0 0 1 .834-.372L17 8.878H9Zm11 10a3 3 0 0 0 2.995-2.823l.005-.177v-4a3 3 0 0 0-2.824-2.995L20 8.877a1 1 0 0 1 0-2 5 5 0 0 1 4.995 4.783l.005.217v4a5 5 0 0 1-4.783 4.996l-.217.004h-3v1.378a.5.5 0 0 1-.834.371L12 18.877h8Z" fill-rule="nonzero"/></g>\n    </symbol>\n\n    <symbol id="txp_svg_next" viewBox="0 0 28 28">\n        <path d="M21.5 7A1.5 1.5 0 0 1 23 8.5v11a1.5 1.5 0 0 1-3 0v-11A1.5 1.5 0 0 1 21.5 7Zm-16.261.822a.817.817 0 0 1 1.186-.732s1.835.378 6.266 2.636c4.481 2.282 5.855 3.54 5.855 3.54a.825.825 0 0 1 0 1.467s-.839.936-5.857 3.46c-5.017 2.522-6.264 2.715-6.264 2.715a.817.817 0 0 1-1.186-.732S5 19.498 5 13.97v-.326c.01-5.226.239-5.823.239-5.823Z" fill-rule="evenodd"/>\n    </symbol>\n\n    <symbol id="txp_svg_fullscreen" viewBox="0 0 28 28">   \n        <path d="M7.438 17.063v2.625c0 .483.391.875.875.875h2.624m0-13.125H8.312a.875.875 0 0 0-.875.875v2.624h0m13.126 6.126v2.625a.875.875 0 0 1-.875.875h-2.625 0m0-13.125h2.625c.483 0 .875.391.875.874v2.625h0" stroke-width="2.188" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"/>\n    </symbol>\n    <symbol id="txp_svg_fullscreen_true" viewBox="0 0 28 28">\n        <g stroke-width="2.188" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"><path d="M10.938 20.563v-2.625a.875.875 0 0 0-.875-.875H7.438h0M7.438 10.938h2.625a.875.875 0 0 0 .874-.876V7.438h0M17.063 20.562v-2.625c0-.483.391-.875.875-.875h2.625M20.563 10.938h-2.625a.875.875 0 0 1-.875-.876V7.438h0"/></g>\n    </symbol>\n\n    <symbol id="txp_svg_volume_mute" viewBox="0 0 28 28">\n        <g stroke-width="2" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"><path d="M8.75 10.041H5.749c-.828 0-1.499.671-1.499 1.499v4.92c0 .828.671 1.499 1.499 1.499H8.75l4.143 4.143a.502.502 0 0 0 .857-.355V6.253a.502.502 0 0 0-.857-.355L8.75 10.041ZM17.5 11l6 6M23.5 11l-6 6"/></g>\n    </symbol>\n    <symbol id="txp_svg_volume" viewBox="0 0 28 28">\n        <g stroke-width="2" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"><path d="M8.75 10.041H5.749c-.828 0-1.499.671-1.499 1.499v4.92c0 .828.671 1.499 1.499 1.499H8.75l4.143 4.143a.502.502 0 0 0 .857-.355V6.253a.502.502 0 0 0-.857-.355L8.75 10.041ZM20.786 7a9.717 9.717 0 0 1 2.964 7 9.717 9.717 0 0 1-2.964 7M17.75 9.477c1.235 1.154 2 2.753 2 4.522 0 1.746-.747 3.328-1.955 4.478"/></g>\n    </symbol>\n\n    <symbol id="txp_svg_pip" viewBox="0 0 28 28">\n        <path d="M23.625 15.75c.966 0 1.75.784 1.75 1.75v4.375a1.75 1.75 0 0 1-1.75 1.75H17.5a1.75 1.75 0 0 1-1.75-1.75V17.5c0-.966.784-1.75 1.75-1.75h6.125ZM21 5.25a2.625 2.625 0 0 1 2.62 2.47l.005.155v5.25a.875.875 0 0 1-1.744.102l-.006-.102v-5.25a.875.875 0 0 0-.773-.87L21 7H7a.875.875 0 0 0-.87.773l-.005.102V19.25c0 .449.338.819.773.87l.102.005h6.125a.875.875 0 0 1 .102 1.744l-.102.006H7a2.625 2.625 0 0 1-2.62-2.47l-.005-.155V7.875a2.625 2.625 0 0 1 2.47-2.62L7 5.25h14Z" stroke-width=".5" fill-rule="evenodd"/>\n    </symbol>\n\n    <symbol id="txp_air_play" viewBox="0 0 1024 1024">\n        <path d="M547.413333 573.866667a42.666667 42.666667 0 0 0-70.826666 0l-170.666667 256a42.666667 42.666667 0 0 0 0 42.666666A42.666667 42.666667 0 0 0 341.333333 896h341.333334a42.666667 42.666667 0 0 0 37.546666-22.613333 42.666667 42.666667 0 0 0-2.133333-42.666667zM421.12 810.666667L512 674.133333l90.88 136.533334zM810.666667 128H213.333333a128 128 0 0 0-128 128v384a128 128 0 0 0 128 128h36.266667a42.666667 42.666667 0 1 0 0-85.333333H213.333333a42.666667 42.666667 0 0 1-42.666666-42.666667V256a42.666667 42.666667 0 0 1 42.666666-42.666667h597.333334a42.666667 42.666667 0 0 1 42.666666 42.666667v384a42.666667 42.666667 0 0 1-42.666666 42.666667h-36.266667a42.666667 42.666667 0 0 0 0 85.333333H810.666667a128 128 0 0 0 128-128V256a128 128 0 0 0-128-128z"/>\n    </symbol>\n</svg>\n'),t&&(this.el.innerHTML=this.el.querySelector(Ke).innerHTML,e.querySelector(n+" .txp_right_controls").innerHTML='\n<button class="txp_btn txp_btn_playrate txp_none" aria-label="åé">\n    <div class="txp_label">åé</div>\n</button>\n<button class="txp_btn txp_btn_definition txp_none" data-status="false" aria-label="æ¸æ°åº¦">\n    <div class="txp_label">æ¸æ°åº¦</div>\n</button>\n<button class="txp_btn txp_btn_fullscreen txp_none" data-status="false" aria-label="å¨å±">\n    <svg class="txp_icon txp_icon_fullscreen" viewBox="0 0 24 24">\n        <use class="txp_svg_fullscreen" xlink:href="#txp_svg_fullscreen"></use>     \n        <use class="txp_svg_fullscreen_true" xlink:href="#txp_svg_fullscreen_true"></use>   \n    </svg>\n</button>\n<button class="txp_btn txp_btn_fullscreen txp_none txp_btn_fake" data-status="false" aria-label="ä¼ªå¨å±">\n    <svg class="txp_icon txp_icon_fullscreen" viewBox="0 0 24 24">\n        <use class="txp_svg_fullscreen" xlink:href="#txp_svg_fullscreen"></use>     \n        <use class="txp_svg_fullscreen_true" xlink:href="#txp_svg_fullscreen_true"></use>   \n    </svg>\n</button>\n',e.insertAdjacentHTML("beforeend",'<div class="plugin_ctrl_mod_overlay_wrapper">\n<div class="mod_overlay definition txp_none">\n    <div class="mod_speed_select">\n        <div class="title">ç»è´¨</div>\n        <ul class="select_list"></ul>\n    </div>\n</div>\n<div class="mod_overlay language txp_none">\n    <div class="mod_speed_select">\n        <div class="title">è¯­è¨</div>\n        <ul class="select_list"></ul>\n    </div>\n</div>\n<div class="mod_overlay playrate txp_none">\n    <div class="mod_speed_select">\n        <div class="title">æ­æ¾éåº¦</div>\n        <ul class="select_list"></ul>\n    </div>\n</div>\n</div>\n'))},N.prototype.createSubComponents=function(e){var t,n,r;this.initComps(e),this.config.disableHotKey||(t=(e=this.instances).Volume,n=e.FakeFullscreen,r=e.PlayratePopup,e=e.Progress,this.hotKeys=new Qe(this.player,this.config,{volume:t,fakeFullscreen:n,playRate:r,progress:e}))},N.prototype.initComps=function(n){var r=this,o=this.config,e=o.isMobile,t=o.comps,i=o.removeComps,a="live"===(null==(a=this.player.config)?void 0:a.type),s=a?[Pe,se,oe,he,Ne,te,Q,Fe,d]:[Pe,Me,pe,se,ce,me,ve,oe,Ne,Te,te,Q,Fe,d,A,D,u],_=[];null!=t&&t.length?-1===(_=t.map(function(e){return qe[e]})).indexOf(Fe)&&_.push(Fe):_=(_=_.concat(s)).filter(function(e){var t=!!i&&-1!==i.indexOf(e.compName),e=e.isEnabled(o);return!t&&e}),this.log("readyCompClasses="+_.map(function(e){return e.compName})),_.forEach(function(e){var t=new e(r.player,o,r,n);(r.instances[e.compName]=t)instanceof X&&(r.instances[t.popupName]=t)}),a&&e&&(this.el.style.justifyContent="space-between")},N.prototype.setupResizeEvent=function(){function n(e){e=e.data,r.player.container.classList.toggle("plugin_ctrl--large",e),r.emit(c.RESIZE,{size:e?o.CTRL_SIZE.LARGE:o.CTRL_SIZE.NORMAL})}var r=this;this.on(c.FULLSCREEN_CHANGE,function(e){var t;!e.data&&null!=(t=r.instances.FakeFullscreen)&&t.isFullScreen||n(e)}),this.on(c.FAKE_FULLSCREEN_CHANGE,function(e){var t=e.data;document.body.classList.toggle("plugin_ctrl_fake_fullscreen",t),!t&&null!=(t=r.instances.Fullscreen)&&t.isFullScreen||n(e)}),_.uaTool.mobile&&this.player.container.addEventListener("touchmove",function(e){var t;null!=(t=r.instances.FakeFullscreen)&&t.isFullScreen&&e.preventDefault()})},N.pluginName="ctrlbar",N.styleDataTag="thumb-ctrlbar-style",N);function N(e,t,n){var r,o,i=He.call(this,e,t,n)||this,t=(i.instances={},i.isInRequest=!1,i.hasCustomPlayBackRate=!1,i.config=a.__assign(a.__assign({},e.config.ctrlConfig),t),_.uaTool.mobile);return null==(o=i.config).isMobile&&(o.isMobile=t),null==(o=i.config).showCenterPlayBtn&&(o.showCenterPlayBtn=t),i.setMaxListeners(20),i.insertDom(),i.createSubComponents(n),i.setupResizeEvent(),i.setPluginEvts(!0),r=i,o=e,_.uaTool.mobile&&(o.on(s.H5_PLAY_EVENT.AD_PLAYING,function(){return r.hide(!0)}),o.on(s.H5_PLAY_EVENT.AD_END,function(){return r.el.style.display=""})),i.config.isMobile&&i.hide(!0),i.config.uiDuration&&(i.duration=i.config.uiDuration),i}s.H5Player.registerPlugin(L.pluginName,L),o.CTRL_EVENTS=c,o.CtrlbarPlugin=L},{"@tencent/thumbplayer-core":2,"@tencent/thumbplayer-h5":3,"lodash.throttle":23,tslib:24}],5:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var p=e("@tencent/thumbplayer-h5"),r=e("tslib"),f=e("@tencent/thumbplayer-core"),E=e("@tencent/thumbplayer-plugin-utils");function o(e){if(l)e(l);else if(s.push(e),!_){if(_=!0,"qq.com"!=document.domain)throw new Error("document.domain is not qq.com");e=document.createElement("iframe");e.src="javascript:'<script>window.onload=function(){document.write(\\'<script>document.domain=\\\"qq.com\\\";<\\\\/script>\\');document.close();};<\/script>'",e.style.cssText="display:none;",document.body.appendChild(e),e.getClient=function(e){l=e;for(var t=s.shift();t;)t&&t(e),t=s.shift()},e.src="//v.qq.com/iframe/client.html"}}e=".txp_video_error{position:absolute;top:0;left:0;width:100%;height:100%;z-index:99;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;background-color:#111;color:#fff}.txp_video_error.txp_none,.txp_video_error .txp_none{display:none!important}.txp_video_error a{color:#fff;text-decoration:none}.txp_video_error .txp_error_title{margin:10px 20px;font-size:18px;line-height:1.6;text-align:center}.txp_video_error .txp_error_title .txp_btn{color:#ff6428;font-size:inherit}.txp_video_error .error-noise-bg{position:absolute;width:100%;height:100%;left:0;top:0;z-index:-1}.txp_video_error .txp_error_code{margin:30px 20px 0;line-height:1.5;color:#666;pointer-events:auto;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.txp_video_error .txp_error_code a{cursor:pointer;color:#666;border-bottom:1px solid}.txp_video_error .txp_error_code a:hover{color:#ff6428}.txp_video_error .txp_error_code::-moz-selection, .txp_video_error .txp_error_code ::-moz-selection{color:#fff;background:#eee}.txp_video_error .txp_error_code::selection,.txp_video_error .txp_error_code ::selection{color:#fff;background:#eee}.txp_video_error .txp_error_code::-moz-selection,.txp_video_error .txp_error_code ::-moz-selection{color:#fff;background:#eee}.txp_video_error .none{display:none}.txp_video_error .txp_link_refresh{color:#fc6526}.txp_video_error .txp_link_btn{display:block;margin-bottom:16px;padding:0 20px;border-radius:15px;background:#26262b;color:#fc6526;font-size:14px;line-height:30px;cursor:pointer}.txp_video_error .txp_link_btn:hover{color:#fff;background-color:#fc6526}.txp_video_error .txp_browser a{text-decoration:underline;cursor:pointer}.txp_video_error .txp_browser a:hover{color:#ff6428}",c=(c=void 0===c?{}:c).insertAt,e&&"undefined"!=typeof document&&(a=document.head||document.getElementsByTagName("head")[0],(i=document.createElement("style")).type="text/css","top"===c&&a.firstChild?a.insertBefore(i,a.firstChild):a.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e)));var i,h,a,s=[],_=!1,l=0,c={REPORT_LOG:"error-page:report-log"},u={error:"txp-ui-error",errorMsg:"txp-ui-error-msg",errorHandler:"txp-ui-error-handler",errorRefresh:"txp-ui-error-refresh",errorCode:"txp-ui-error-code",background:"txp-ui-error-background",clientBtn:"txp-ui-error-client-btn",browserTip:"txp-ui-error-browser"},A=((a=h=h||{}).DEFAULT="è¿ä¸ªè§é¢è¢«å¤æäººå«èµ°ï¼ææ¶çä¸äºäº~",a.LIMITED="å¾éæ¾ï¼å¯¹æ­¤è§é¢çè®¿é®ææ¶åé",a.SENSITIVE="æ­¤è§é¢åå«ææä¿¡æ¯ï¼å·²è¢«ç®¡çåææ¿~",a.NO_COPYRIGHT="ææ¶æ²¡æè·å¾è¯¥è§é¢çæï¼åªåä¸ºæ¨äºåä¸­~",a.NO_COPYRIGHT_IN_REGION="å¾æ±æ­ï¼ç±äºçæéå¶ï¼æ¨æå¨çå°åºææ¶æ æ³æ­æ¾è¯¥è§é¢",a.NO_PLAYBACK_COPYRIGHTS="å¾æ±æ­ï¼è¯¥è§é¢ææ æ­æ¾çæ",a.ENV_NOT_SUPPORT_ENCRYPTION="è¯¥è§é¢å çææ¹å®å¨ä¿å¯çº§å«è¾é«ï¼å½åæµè§å¨ä¸æ¯æå å¯æ­æ¾",a.ENV_NOT_SUPPORT_ENCRYPTION_LIVE="è¯¥ç´æ­å çææ¹å®å¨ä¿å¯çº§å«è¾é«ï¼å½åæµè§å¨ä¸æ¯æå å¯æ­æ¾",{default:h.DEFAULT}),g=((i={})[70023097]=h.ENV_NOT_SUPPORT_ENCRYPTION_LIVE,i[70023098]=h.ENV_NOT_SUPPORT_ENCRYPTION_LIVE,i),m=(A[70013051]=A[70013052]=A[70013061]=A[70013062]=A[70013063]=A[70013065]=A[70013066]=A[70013069]=A[70013071]=A[70013073]=A[70013074]=A[70013076]=A[70013077]=A[70013081]=A[70013082]=A[70013086]=A[70013094]=h.DEFAULT,A[70013064]=A[70013100]=h.LIMITED,A[70013080.3]=A["70013080.10"]=A[70013080.11]=A[70013084]=h.SENSITIVE,A[70013080]=A[70013080.7]=A[70013080.9]=A[70013083]=h.NO_COPYRIGHT,A[70013080.1]=h.NO_COPYRIGHT_IN_REGION,A[70013080.2]=h.NO_PLAYBACK_COPYRIGHTS,A[70013069.4]=A["70013097.0"]=A[70013097.2]=A[70013098.1]=A[70013080.14]=h.ENV_NOT_SUPPORT_ENCRYPTION,/^7009\d+(\.?-?\d+)?$/);function d(t){if(t.support&&t.sso){try{e="qqlivechannel=channel1."+(e=t.atag),f.uaTool.browser.ie?((n=new Date).setTime(n.getTime()+864e5),document.cookie=e+";path=/;expires="+n.toUTCString()):(n=document.createElement("input"),document.querySelector("body").append(n),n.style.position="absolute",n.style.top="-9999px",n.value=e,n.style.top=document.querySelector("body").scrollTop+"px",n.focus(),n.setSelectionRange(0,e.length),document.queryCommandSupported("copy")&&document.execCommand("copy",!0),n.remove())}catch(e){}try{o(function(e){e&&e.exist().done(function(){e.open(t.sso),t.success()}).fail(function(){t.error()})})}catch(e){}}var e,n}var y,v={exist:!1,isLatestChromeSupportDrm:function(){var e,t=f.uaTool.os;return t.windows?6<parseFloat(t.version):t.mac?!f.uaTool.browser.qqbrowser&&(e=(t.version||"").split("."),10.1<parseFloat((e[0]||"0")+"."+(e[1]||"0"))):!t.linux&&void 0},detect:function(){var n=new f.SimpleDefer,r=document.createElement("meta");return r.name="referrer",r.content="always",document.head.prepend(r),this.isLatestChromeSupportDrm()?fetch("http://127.0.0.1:28653/api/handle",{method:"POST",body:JSON.stringify({action:"GetQBVersion",cmd:""})}).then(function(e){return e.json()}).then(function(e){r.remove();var t=!1,e=e.result||"";(t=e?-1!==f.commonTool.compareVersion(e,"10.2.2101.400"):t)?(v.exist=!0,n.resolve({exist:!0})):(v.exist=!1,n.resolve({exist:!1}))}).catch(function(){r.remove(),v.exist=!1,n.resolve({exist:!1})}):n.reject(),n},download:function(){try{location.assign("http://dldir1.qq.com/invc/tt/QQBrowser_Setup_DRM.exe")}catch(e){}},open:function(e){var t;v.exist?((t=document.createElement("meta")).name="referrer",t.content="always",document.head.prepend(t),fetch("http://127.0.0.1:28653/api/handle",{method:"POST",body:JSON.stringify({action:"Open",cmd:encodeURIComponent(e)})}).then(function(){t.remove()}).catch(function(){t.remove()})):this.download()}},b={enable:!E.isMobile,interval:150,performanceRatio:5,size:4,opacity:.05},e=(y=p.Plugin,r.__extends(T,y),T.prototype.show=function(e){void 0===e&&(e="åºéå¦");var t,n,r,o=this.player.getCommonKv(p.COMMON_DATA_KEY.flowid),i="object"===(void 0===e?"undefined":_typeof(e))&&Boolean(null==e?void 0:e.img);"string"==typeof e?(this.innerElements.errorMsg.innerHTML=e,this.innerElements.errorCode.innerHTML=o||"",this.innerElements.background.classList.add(E.txpHideClass),this.innerElements.errorRefresh.classList.remove(E.txpHideClass)):(t=e.text,n=void 0===(n=e.code)?"":n,r=void 0===(r=e.img)?"":r,e=void 0!==(e=e.hideRefresh)&&e,this.innerElements.errorMsg.innerHTML=void 0===t?"åºéå¦":t,this.innerElements.errorCode.innerHTML=n?String(n)+"-"+o:o,this.innerElements.background.src=r,this.innerElements.background.classList.toggle(E.txpHideClass,!r),this.innerElements.errorRefresh.classList.toggle(E.txpHideClass,e)),this.rootEl.classList.remove(E.txpHideClass),this.setNoise(!i)},T.prototype.hide=function(){this.rootEl.classList.add(E.txpHideClass),this.setNoise(!1),f.domTool.addClass(this.innerElements.clientBtn,E.txpHideClass),f.domTool.addClass(this.innerElements.browserTip,E.txpHideClass),f.domTool.addClass(this.innerElements.errorRefresh,E.txpHideClass)},T.prototype.destroy=function(){var e;this.setNoise(!1),this.rootEl.parentNode&&this.rootEl.remove(),this.innerElements={},null!=(e=this.noiseBg)&&e.remove(),this.noiseBg=null,this.rootEl=null,y.prototype.destroy.call(this)},T.prototype.insertDOM=function(){var t=this,n=this.player.container,e=this.config.noiseConfig,e='<div data-role="'+u.error+'" class="txp_video_error '+E.txpHideClass+'">\n      '+(e.enable?'<canvas class="error-noise-bg"></canvas>':"")+'\n      <img data-role="'+u.background+'" alt="error-background"/>\n      <div data-role="'+u.errorMsg+'" class="txp_error_title"></div>\n      <div data-role="'+u.errorHandler+'" class="txp_error_desc">\n        <span data-role="'+u.errorRefresh+'">\n          ä½ å¯ä»¥ <a href="javascript:;" class="txp_link_refresh">å·æ°</a> è¯è¯\n        </span>\n      </div>\n      <a data-role="'+u.clientBtn+'" class="txp_link_btn '+E.txpHideClass+'"></a>\n      <div data-role="'+u.browserTip+'" class="txp_browser '+E.txpHideClass+'"></div>\n      <div class="txp_error_code" data-role="'+u.errorCode+'"></div>\n    </div>';n.insertAdjacentHTML("beforeend",e),this.rootEl=n.querySelector('[data-role="'+u.error+'"]'),this.noiseBg=this.rootEl.querySelector("canvas"),Object.keys(u).forEach(function(e){t.innerElements[e]=n.querySelector('[data-role="'+u[e]+'"]')})},T.prototype.setupDOMEvents=function(){var t=this,e=(this.innerElements.errorRefresh.querySelector(".txp_link_refresh").addEventListener("click",function(){t.config.useReplay?t.player.replay():location.reload()}),0),n=0;this.innerElements.errorCode.addEventListener("click",function(){5<=(e+=1)&&(e=0,t.emit(T.Events.REPORT_LOG)),n&&clearTimeout(n),n=window.setTimeout(function(){return e=0},300)}),this.innerElements.clientBtn.addEventListener("click",function(){t.clientExistDefer.promise.then(function(e){t.clickClientBtnOnExist(e)}).catch(function(){t.clickClientBtnOnNoExist()})})},T.prototype.setupPlayerEvents=function(){var u=this,d=this.player;d.on(p.H5_PLAY_EVENT.PLAY_SESSION_END,function(e){e=e.data;if(u.config.showOnError){var t=e.code;if(t!==p.ErrorCode.SUC){var n,r,o=u.config.img,i=u.config.hideRefresh,a=e.message,s=!1,_=d.config.type===p.PLAY_MODE.LIVE;if(_&&e.data){if("setErrorView"!==e.data.name)return;var e=e.data.params,l=e.msg,c=e.hideRefresh,e=e.hideCode;l&&(a=l),g[t]&&(a=g[t]),c?f.domTool.addClass(u.innerElements.errorRefresh,E.txpHideClass):f.domTool.removeClass(u.innerElements.errorRefresh,E.txpHideClass),e?f.domTool.addClass(u.innerElements.errorCode,E.txpHideClass):f.domTool.removeClass(u.innerElements.errorCode,E.txpHideClass)}else t.startsWith(p.ErrorCode.GETINFO_SERVER_CODE_PREFIX)&&(a=u.getVodErrMsg(t));n=t,r=(l=void 0===(l=_)?!1:l)?g:A,(m.test(n)||[h.NO_PLAYBACK_COPYRIGHTS,h.ENV_NOT_SUPPORT_ENCRYPTION,h.ENV_NOT_SUPPORT_ENCRYPTION_LIVE].some(function(e){return r[n]}))&&(u.config.useClientBtn&&(u.checkClientExist(),u.setClientBtn(),s=i=!0),u.config.useBrowserTip&&(u.setBrowserTip(),s=i=!0),s)&&(a=""+(void 0===(c=_)&&(c=!1),(m.test(t)?c?h.ENV_NOT_SUPPORT_ENCRYPTION_LIVE:h.ENV_NOT_SUPPORT_ENCRYPTION:null)||a)+function(e,t){switch(((t=void 0===t?!1:t)?g:A)[e]){case h.ENV_NOT_SUPPORT_ENCRYPTION:case h.ENV_NOT_SUPPORT_ENCRYPTION_LIVE:return"<p>ä¸ºä¿æ¤æ­£çé²æ­¢ççï¼æ¨å¯ä»¥å°è¯</p>";default:return"<p>æ¨å¯ä»¥å°è¯</p>"}}(t,_)),u.show({code:t,text:a,hideRefresh:i,img:o})}}}),d.on(p.PLAY_EVENT.STATE_CHANGE,function(e){e=e.data.new;e!==p.VIDEO_STATE.PLAYING&&e!==p.VIDEO_STATE.CANPLAY||u.hide()}),d.on(p.H5_PLAY_EVENT.PLAY_SESSION_START,function(){return u.hide()})},T.prototype.getVodErrMsg=function(e){return A[e]||A.default},T.prototype.setClientBtn=function(){var e=this,t=f.uaTool.os.mac?"Macå®¢æ·ç«¯è§ç":"PCå®¢æ·ç«¯è§ç";f.uaTool.os.mac?this.innerElements.clientBtn.innerHTML="æå¼"+t:this.clientExistDefer.promise.then(function(){e.innerElements.clientBtn.innerHTML="æå¼"+t}).catch(function(){e.innerElements.clientBtn.innerHTML="ä¸è½½"+t}),f.domTool.removeClass(this.innerElements.clientBtn,E.txpHideClass)},T.prototype.setNoise=function(e){var t,n,r,o=this,i=(void 0===e&&(e=!0),this.config.noiseConfig),a=i.enable,s=i.performanceRatio,_=i.opacity;a&&this.noiseBg&&(clearInterval(this.noiseTimer),f.domTool.css(this.noiseBg,"display",e?"block":"none"),e)&&(t=this.noiseBg.getContext("2d"),this.resizeNoise(),a=this.noiseBg,n=a.width,r=a.height,n)&&r&&(this.noiseAnimation(t,n,r,_,s),this.noiseTimer=setInterval(function(){o.noiseAnimation(t,n,r,_,s)},i.interval))},T.prototype.resizeNoise=function(){var e,t,n;this.noiseBg&&(e=(t=this.player.container).clientWidth,t=t.clientHeight,n=this.config.noiseConfig.size,this.noiseBg.width=e/n,this.noiseBg.height=t/n)},T.prototype.checkClientExist=function(){var t=this;try{o(function(e){e?e.exist().done(function(){t.clientExistDefer.resolve(e)}).fail(function(){t.clientExistDefer.reject()}):t.clientExistDefer.reject()})}catch(e){this.clientExistDefer.reject()}},T.prototype.clickClientBtnOnExist=function(e){var t,n;this.player.config.type===p.PLAY_MODE.LIVE?(t=this.player.getCommonKv(p.COMMON_DATA_KEY.livepid)||"",n=this.player.vid||"",e.open("qqlive://sso/pid="+t+"&projectid="+n)):(e=this.player.vid,d({support:!0,atag:"playererror",sso:"qqlive://sso/vbarid="+(this.player.getCommonKv(p.COMMON_DATA_KEY.cid)||"")+"&videoid="+e+"&start="+Math.max(this.player.playtime-5,0)+"&atag=web.playererror",success:function(){},error:function(){this.openDownLoadLink()}}))},T.prototype.clickClientBtnOnNoExist=function(){this.openDownLoadLink()},T.prototype.openDownLoadLink=function(){window.open("https://v.qq.com/download.html#"+(f.uaTool.os.mac?"Mac":"Windows"),"_blank")},T.prototype.setBrowserTip=function(){this.innerElements.browserTip.removeEventListener("click",this.browserTipClick),f.domTool.removeClass(this.innerElements.browserTip,E.txpHideClass),f.uaTool.os.mac?this.innerElements.browserTip.innerHTML="æä¸è½½ææ° ChromeãSafari æµè§å¨è§ç":this.innerElements.browserTip.innerHTML="æä¸è½½ææ° ChromeãEdge æµè§å¨è§ç"},T.Events=c,T.pluginName="error-page",T);function T(e,t,n){n=y.call(this,e,t,n)||this;return n.innerElements={},n.clientExistDefer=new f.SimpleDefer,n.noiseAnimation=function(e,t,n,r,o){var i=Math.floor(n/o),a=e.createImageData(t,i),s=new Uint32Array(a.data.buffer);e.clearRect(0,0,t,n);for(var _=0;_<s.length;_++)s[_]=16777215+((255*Math.random()*r|0)<<24);for(_=0;_<=o;_++)e.putImageData(a,0,i*_)},n.browserTipClick=function(){v.open(location.href)},n.config=r.__assign(r.__assign({},e.config.errorPageConfig),t),n.config.noiseConfig=r.__assign(r.__assign({},b),null==(e=n.config)?void 0:e.noiseConfig),n.insertDOM(),n.setupDOMEvents(),n.setupPlayerEvents(),n}p.H5Player.registerPlugin(e.pluginName,e),n.ErrorPagePlugin=e},{"@tencent/thumbplayer-core":2,"@tencent/thumbplayer-h5":3,"@tencent/thumbplayer-plugin-utils":13,tslib:24}],6:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var p=e("@tencent/thumbplayer-h5"),i=e("tslib"),a=e("@tencent/thumbplayer-core"),s=e("@tencent/thumbplayer-plugin-utils");e='@charset "UTF-8";.txp_console{position:absolute;top:0;left:0;width:100%;height:100%;z-index:10;color:#fff;font-family:PingFangSC-Regular,Helvetica Neue,Helvetica,Roboto,Microsoft Yahei,Arial,sans-serif;font-size:10px;font-weight:400;pointer-events:none}.txp_console.txp_none,.txp_console .txp_none{display:none}.txp_console .txp_console_header .txp_copy_text,.txp_console .txp_console_header .txp_log_upload{cursor:pointer;background-color:#444;margin:2px;padding:2px 4px;border-radius:2px;-webkit-transition:all .5s;transition:all .5s;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.txp_console .txp_console_header .txp_copy_text:hover,.txp_console .txp_console_header .txp_log_upload:hover{-webkit-filter:contrast(1.5) brightness(.8);filter:contrast(1.5) brightness(.8)}.txp_console .txp_console_header .txp_copy_text:active,.txp_console .txp_console_header .txp_log_upload:active{-webkit-filter:unset;filter:unset}.txp_console .txp_console_header .txp_btn_close{-webkit-appearance:none;-moz-appearance:none;appearance:none;position:relative;border:none;background:0 0;font-family:inherit;cursor:pointer;outline:0 none;font-size:1em;color:#fff}.txp_console .txp_console_inner{position:absolute;margin:10px 0 0 10px;padding:8px 5px;background-color:rgba(28,28,28,.8);pointer-events:auto;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;border-radius:4px}.txp_console .txp_console_inner .txp_line_container{overflow-y:auto;margin-top:8px}.txp_console .txp_console_inner .txp_console_header{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-sizing:border-box;box-sizing:border-box;padding:0 8px}.txp_console .txp_console_inner .txp_console_header .txp_console_header_title{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;font-size:12px;font-weight:900}.txp_console .txp_console_inner .txp_console_header .txp_log_upload{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-right:4px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.txp_console .txp_console_inner .txp_console_header .txp_log_upload .log_upload_text:after{content:"ä¸ä¼ æ¥å¿"}@-webkit-keyframes loading{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes loading{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.txp_console .txp_console_inner .txp_console_header .txp_log_upload .reporting-icon{display:none;-webkit-animation:loading 1s infinite;animation:loading 1s infinite}.txp_console .txp_console_inner .txp_console_header .txp_log_upload[data-reporting=true]{cursor:not-allowed}.txp_console .txp_console_inner .txp_console_header .txp_log_upload[data-reporting=true] .log_upload_text:after{background-color:#444;content:"ä¸ä¼ ä¸­..."}.txp_console .txp_console_inner .txp_console_header .txp_log_upload[data-reporting=true] .reporting-icon{display:inline-block}.txp_console .txp_console_inner .txp_console_header .txp_log_upload.txp_none{display:none}.txp_console .txp_console_inner .txp_line{display:-webkit-box;display:-ms-flexbox;display:flex;line-height:1.6}.txp_console .txp_console_inner .txp_line .txp_compact_label,.txp_console .txp_console_inner .txp_line .txp_label{display:inline-block;-ms-flex-negative:0;flex-shrink:0;width:7em;padding-right:6px;text-align:right}.txp_console .txp_console_inner .txp_line .txp_compact_label:after,.txp_console .txp_console_inner .txp_line .txp_label:after{content:":"}.txp_console .txp_console_inner .txp_line .txp_compact_label{display:none}.txp_console .txp_console_inner .txp_line .txp_value{display:inline-block;text-align:left;vertical-align:text-top;width:30em}.txp_console.fullscreen .txp_console_inner{margin:0;-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden;width:100%;height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.txp_console.fullscreen .txp_console_inner .txp_line{display:none}.txp_console.fullscreen .txp_console_inner .txp_line.line-compact{display:-webkit-box;display:-ms-flexbox;display:flex}.txp_console.fullscreen .txp_console_inner .txp_line.line-compact .txp_compact_label,.txp_console.fullscreen .txp_console_inner .txp_line.line-compact .txp_label{display:none;width:4em}.txp_console.fullscreen .txp_console_inner .txp_line.line-compact .txp_compact_label{display:block}.txp_info_icon{position:absolute;top:8px;right:8px;z-index:4;width:24px;height:24px;fill:#fff;opacity:.5;border-radius:5px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-transition:all .3s;transition:all .3s}.txp_info_icon:hover{opacity:1}.txp_info_icon.small{width:16px;height:16px}.txp_info_icon.txp_none{display:none!important}',o=(o=void 0===o?{}:o).insertAt,e&&"undefined"!=typeof document&&(c=document.head||document.getElementsByTagName("head")[0],(r=document.createElement("style")).type="text/css","top"===o&&c.firstChild?c.insertBefore(r,c.firstChild):c.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e)));var r,o={CLICK_UPLOAD:"contextmenu:click-upload"};function _(e){var t,n;return"function"!=typeof(null==(t=navigator.clipboard)?void 0:t.writeText)||a.uaTool.browser.x5||a.uaTool.browser.mqqbrowser?(t=e,(n=document.createElement("input")).setAttribute("style","position: absolute; clip: rect(0 0 0 0); opacity: 0;"),n.value=t,document.body.appendChild(n),n.select(),document.execCommand("copy",!0),void n.remove()):navigator.clipboard.writeText(e)}l=p.Plugin,i.__extends(u,l),u.prototype.start=function(e){},u.prototype.getItemDom=function(e){return this._el?this._itemDomMap[e]:null},u.prototype.show=function(){this.updateInfoItems(),this.isMiniPanel()?this._el.classList.add("fullscreen"):this._el.classList.remove("fullscreen"),this._showing=!0,this._el.classList.remove("txp_none")},u.prototype.hide=function(){this._showing=!1,this._el.classList.add("txp_none")},u.prototype.toggle=function(){if(this._showing)return this.hide();this.show()},u.prototype.showIcon=function(){this.isMiniPanel()?this._infoIcon.classList.add("small"):this._infoIcon.classList.remove("small"),this._infoIcon.classList.remove("txp_none")},u.prototype.hideIcon=function(){this._infoIcon.classList.add("txp_none")},u.prototype.trigger=function(){this._showing?this.hide():this.show()},Object.defineProperty(u.prototype,"showing",{get:function(){return this._showing},enumerable:!1,configurable:!0}),u.prototype.destroy=function(){clearTimeout(this.copyBtnClearTimer),this._itemDomMap=null,this._el=null,this.infoItems=null,l.prototype.destroy.call(this)},u.prototype.hookPlaySessionStart=function(){var e=this.config.showOnQuery;a.urlTool.getUrlParamByKey(location.href,void 0===e?"show_info_panel":e)&&this.show()},u.prototype.hookVideoPause=function(){var e=this.config.showInfoIconOnPause;void 0!==e&&!e||this.showIcon()},u.prototype.hookVideoPlaying=function(){var e=this.config.showInfoIconOnPause;void 0!==e&&!e||this.hideIcon()},u.prototype.renderInfoIcon=function(){var e=this,t=this.player.container;t.insertAdjacentHTML("beforeend",'<div class="txp_info_icon txp_none">\n  <svg\n  viewBox="0 0 1024 1024"\n  version="1.1"\n  xmlns="http://www.w3.org/2000/svg"\n  >\n  <path\n    d="M512 958.016C266.08 958.016 65.984 757.952 65.984 512 65.984 266.08 266.08 65.984 512 65.984c245.952 0 446.016 200.064 446.016 446.016C958.016 757.952 757.952 958.016 512 958.016zM512 129.984C301.344 129.984 129.984 301.344 129.984 512c0 210.624 171.36 382.016 382.016 382.016 210.624 0 382.016-171.36 382.016-382.016C894.016 301.344 722.624 129.984 512 129.984z"\n  ></path>\n  <path\n    d="M512 304m-48 0a1.5 1.5 0 1 0 96 0 1.5 1.5 0 1 0-96 0Z"\n  ></path>\n  <path\n    d="M512 768c-17.664 0-32-14.304-32-32l0-288c0-17.664 14.336-32 32-32s32 14.336 32 32l0 288C544 753.696 529.664 768 512 768z"\n  ></path>\n  </svg>\n</div>\n'),this._infoIcon=t.querySelector(".txp_info_icon"),this._infoIcon.addEventListener("click",function(){e.toggle()})},u.prototype.renderInfoItems=function(){var n=this,e=this.infoItems,t=this.player.container,r='<div class="txp_console txp_none" style="z-index: 100">\n    <div class="txp_console_inner">\n      <div class="txp_console_header">\n      <span class="txp_console_header_title">æ­æ¾ä¿¡æ¯</span>\n      <span class="txp_copy_text">å¤å¶</span>\n      <span class="txp_log_action txp_log_upload">\n        <span class="log_upload_text"></span>\n        <svg class="reporting-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"\nxmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" fill="#fff">\n<path\n  d="M784 902.4c9.6 19.2 6.4 41.6-12.8 54.4-19.2 9.6-41.6 3.2-51.2-12.8-9.6-19.2-6.4-41.6 12.8-54.4 16-12.8 38.4-8 51.2 12.8z m-233.6 81.6c0 22.4-16 38.4-38.4 38.4s-38.4-16-38.4-38.4V960c0-22.4 19.2-38.4 41.6-38.4 19.2 0 35.2 16 38.4 38.4v25.6h-3.2z m-240-43.2c-9.6 19.2-35.2 25.6-54.4 16-19.2-9.6-25.6-35.2-16-51.2l28.8-51.2c9.6-19.2 35.2-25.6 54.4-16s25.6 35.2 12.8 54.4l-25.6 48zM121.6 784c-19.2 9.6-41.6 3.2-54.4-16-9.6-19.2-6.4-41.6 12.8-54.4l76.8-44.8c19.2-9.6 41.6-3.2 54.4 16 9.6 19.2 3.2 41.6-16 54.4L121.6 784zM38.4 552c-22.4 0-38.4-16-38.4-38.4s16-38.4 38.4-38.4H160c22.4 0 38.4 19.2 38.4 38.4 0 22.4-16 38.4-38.4 38.4H38.4z m44.8-241.6c-19.2-9.6-25.6-35.2-16-51.2 9.6-19.2 35.2-25.6 54.4-16L256 320c19.2 9.6 25.6 35.2 16 54.4s-35.2 25.6-54.4 16l-134.4-80z m160-185.6l92.8 160c9.6 19.2 35.2 25.6 54.4 12.8s25.6-35.2 12.8-54.4l-92.8-160c-12.8-19.2-35.2-22.4-54.4-12.8-16 12.8-22.4 33.6-12.8 54.4z m230.4-84.8c0-22.4 16-38.4 38.4-38.4s38.4 19.2 38.4 38.4V224c0 22.4-19.2 38.4-38.4 38.4-22.4 0-38.4-19.2-38.4-38.4V40z m240 43.2c9.6-19.2 35.2-25.6 54.4-16 19.2 9.6 25.6 35.2 16 51.2l-92.8 160c-9.6 19.2-35.2 25.6-54.4 16-19.2-9.6-25.6-35.2-12.8-54.4l89.6-156.8z m188.8 160l-160 92.8c-19.2 9.6-25.6 35.2-16 54.4 12.8 19.2 35.2 25.6 54.4 12.8l160-92.8c19.2-9.6 25.6-35.2 12.8-54.4-9.6-16-32-25.6-51.2-12.8z m83.2 228.8c22.4 0 38.4 16 38.4 38.4s-16 38.4-38.4 38.4H800c-22.4 0-38.4-19.2-38.4-38.4 0-22.4 19.2-38.4 38.4-38.4h185.6z"\n  />\n</svg>\n      </span>\n      <button class="txp_btn_close" title="å³é­">[X]</button>\n      </div>\n    <div class="txp_line_container">\n      '+e.map(function(e){var t=e.key,n=e.title,r=e.style,o=e.label,i=e.value,e=e.compactLabel;return'<div class="txp_line '+(e?"line-compact":"")+'" data-key="'+t+'" title="'+((void 0===n?"":n)||"")+'" style="'+((void 0===r?"":r)||"")+'">\n            <div class="txp_label">'+o+"</div>\n            "+(e?'<div class="txp_compact_label">'+e+"</div>":"")+'\n            <div class="txp_value">'+i+"</div>\n          </div>"}).join("")+"\n    </div>\n    </div>\n  </div>";t.insertAdjacentHTML("beforeend",r),this._el=t.querySelector(".txp_console"),this._closeBtn=this._el.querySelector(".txp_btn_close"),this._uploadBtn=this._el.querySelector(".txp_log_upload"),this._copyBtn=this._el.querySelector(".txp_copy_text"),this.player.offlineLog||this._uploadBtn.classList.add(s.txpHideClass),e.forEach(function(e){var t={el:null,value:null};t.el=n._el.querySelector('[data-key="'+e.key+'"]'),t.value=t.el.querySelector(".txp_value"),n._itemDomMap[e.key]=t})},u.prototype.addUIEvts=function(){var e=this;this._closeBtn.addEventListener("click",function(){return e.hide()}),this._uploadBtn.addEventListener("click",function(o){return i.__awaiter(e,void 0,void 0,function(){var t,n,r;return i.__generator(this,function(e){switch(e.label){case 0:if(o.stopPropagation(),this.isReporting)return[2];this.isReporting=!0,this._uploadBtn.dataset.reporting="true",e.label=1;case 1:return e.trys.push([1,3,4,5]),[4,null==(n=this.player.offlineLog)?void 0:n.report(!0,"info-panel:click")];case 2:return t=e.sent(),null!=(n=this.player.plugins.tips)&&n.show(null!=t&&t.status?"æ¥å¿ä¸æ¥æå":"æ¥å¿ä¸æ¥å¤±è´¥ "+((null==t?void 0:t.msg)||"")),[3,5];case 3:return e.sent(),null!=(r=this.player.plugins.tips)&&r.show("æ¥å¿ä¸æ¥å¤±è´¥ "+(null==t?void 0:t.msg)),[3,5];case 4:return this.isReporting=!1,this._uploadBtn.dataset.reporting="false",[7];case 5:return[2]}})})}),this._copyBtn.addEventListener("click",function(o){return i.__awaiter(e,void 0,void 0,function(){var t,n,r=this;return i.__generator(this,function(e){switch(e.label){case 0:t=3e3,o.stopPropagation(),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,_(JSON.stringify(this.curInfoMap))];case 2:return e.sent(),this._copyBtn.textContent="å·²å¤å¶",[3,4];case 3:return n=e.sent(),this._copyBtn.textContent="å¤å¶å¤±è´¥",this.log(n),[3,4];case 4:return clearTimeout(this.copyBtnClearTimer),this.copyBtnClearTimer=setTimeout(function(){r._copyBtn.textContent="å¤å¶"},t),[2]}})})}),s.isMobile&&this._el.addEventListener("click",function(){return e.hide()})},u.prototype.createInfoItems=function(){var t,n,e,r=this;this.config.defaultInfo?((e={})[p.COMMON_DATA_KEY.vid]=this.createVidInfoItem,e[p.COMMON_DATA_KEY.flowid]=this.createFlowidInfoItem,e[p.COMMON_DATA_KEY.guid]=this.createGuidInfoItem,e[p.COMMON_DATA_KEY.curcore]=this.createKernelNameInfoItem,e.cdnInfo=this.createCdnInfoItem,e.playerSize=this.createResolutionInfoItem,e.keyFrame=this.createKeyFrameInfoItem,e.bufferRange=this.createBufferRangeInfoItem,e.net=this.createNetInfoItem,e.videoSize=this.createVideoSizeInfoItem,e.codecs=this.createCodecsInfoItem,e.debug=this.createDebugInfoItem,t=e,e=this.config.disableDefaultKey,n=void 0===e?[]:e,e=Object.keys(t).filter(function(e){return!n.includes(e)}),this.infoItems=e.map(function(e){return t[e].apply(r,[e])})):this.infoItems=[]},u.prototype.createNetInfoItem=function(n){function e(){var e,t=r.player.currentVideoInfo;null!=t&&t.performance&&(e=(t=t.performance).speed,t=t.p2pStats,r.setItemTextByKey(n,(void 0===e?0:e)+" KB/s "+(void 0===t?"":t)))}var r=this;return{key:n,updater:e,label:"ç½ç»æ´»å¨",compactLabel:"net",value:"-",listeners:[{event:p.H5_PLAY_EVENT.VIDEO_TIMEUPDATE,cb:e}]}},u.prototype.createVidInfoItem=function(i){function t(){var e,t=a.player,n=t.getCommonKv(p.COMMON_DATA_KEY.vid),r=t.getCommonKv(p.COMMON_DATA_KEY.platform),o=a.getItemDom(i);n||r?(e="-",n&&(e=t.config.type===p.PLAY_MODE.LIVE?n+"-"+(t.getCommonKv(p.COMMON_DATA_KEY.livepid)||0)||"-":n||"-"),e+=" / "+(r||"-"),o.el.classList.remove(s.txpHideClass),a.setItemTextByKey(i,e)):o.el.classList.add(s.txpHideClass)}var a=this;return{key:i,updater:t,label:"è§é¢ID",compactLabel:"VID",value:"-",listeners:[{dispatcher:this.msg,event:p.H5_EXT_EVENT.DATASET_UPDATE,cb:function(e){e.data.key===p.COMMON_DATA_KEY.vid&&t()}}]}},u.prototype.createKernelNameInfoItem=function(o){function t(){var e=null!=(e=a.urlTool.getFileExtension(null==(e=null==(e=i.player)?void 0:e.currentVideoInfo)?void 0:e.loadingUrl))?e:"-",t=null!=(t=i.player.getCommonKv(p.COMMON_DATA_KEY.curcore))?t:"-",n=null!=(n=i.player.getCommonKv(p.COMMON_DATA_KEY.curcorever))?n:a.VERSION,r=i.player.getCommonKv(p.COMMON_DATA_KEY.p2pver);i.setItemTextByKey(o,e+"/"+t+" ("+n+(r?"-p2p-"+r:"")+")")}var i=this;return{key:o,label:"æ­æ¾åæ ¸",compactLabel:"Kernel",value:"-",updater:t,listeners:[{dispatcher:this.msg,event:p.H5_EXT_EVENT.DATASET_UPDATE,cb:function(e){-1<[p.COMMON_DATA_KEY.curcorever,p.COMMON_DATA_KEY.curcore,p.COMMON_DATA_KEY.p2pver].indexOf(e.data.key)&&t()}}]}},u.prototype.createResolutionInfoItem=function(r){var o=this;return{key:r,label:"æ¾ç¤ºå¨ä¿¡æ¯",compactLabel:"Res",value:"-",updater:function(){var e=o.player,t=e.container,e=e.getCommonKv,t=t.clientWidth+"*"+t.clientHeight,e=e(p.COMMON_DATA_KEY.resolution),n=null!=(n=null==(n=window.screen)?void 0:n.isExtended)&&n;o.setItemTextByKey(r,t+" / "+e+" (ext:"+n+")")}}},u.prototype.createVideoSizeInfoItem=function(n){function e(){var e=(t=null!=(t=null==(t=r.player)?void 0:t.currentVideoInfo)?t:{}).videoHeight,t=t.videoWidth;r.setItemTextByKey(n,(void 0===t?0:t)+"*"+(void 0===e?0:e))}var r=this;return{key:n,updater:e,label:"è§é¢åè¾¨ç",value:"-",listeners:[{event:a.PLAY_EVENT.METADATA_CHANGE,cb:e},{event:p.H5_PLAY_EVENT.VIDEO_SETLEVEL_END,cb:e}]}},u.prototype.createCodecsInfoItem=function(r){function e(){var e,t=o.getItemDom(r),n=o.player.currentVideoInfo;n?(t.el.classList.remove(s.txpHideClass),e=(n=void 0===(n=n.codecs)?{video:"",audio:""}:n).video,n=n.audio,e=e&&n?e+" / "+n:"",n="("+(o.player.getCommonKv(p.COMMON_DATA_KEY.codec)||"-")+")",o.setItemTextByKey(r,(e+" "+n).trim())):t.el.classList.add(s.txpHideClass)}var o=this;return{key:r,updater:e,label:"ç¼ç ",compactLabel:"Codec",value:"-",listeners:[{event:a.PLAY_EVENT.METADATA_CHANGE,cb:e}]}},u.prototype.createFlowidInfoItem=function(e){function t(){n.setItemTextByKey(e,n.player.getCommonKv(p.COMMON_DATA_KEY.flowid))}var n=this;return{key:e,label:"æ­æ¾æµæ°´",compactLabel:"Flowid",value:"-",updater:t,listeners:[{dispatcher:this.msg,event:p.H5_EXT_EVENT.DATASET_UPDATE,cb:function(e){e.data.key===p.COMMON_DATA_KEY.flowid&&t()}}]}},u.prototype.createGuidInfoItem=function(e){var t=this;return{key:e,label:"GUID",compactLabel:"GUID",value:"-",updater:function(){t.setItemTextByKey(e,t.player.getCommonKv(p.COMMON_DATA_KEY.guid))}}},u.prototype.createKeyFrameInfoItem=function(r){var o=this;return{key:r,label:"å¸§æ°",value:"-",listeners:[{event:p.H5_PLAY_EVENT.VIDEO_TIMEUPDATE,cb:function(){var e=(null==(e=null==(e=o.player)?void 0:e.currentVideoInfo)?void 0:e.qualityInfo)||{},t=e.totalVideoFrames,t=void 0===t?0:t,e=e.droppedVideoFrames,e=void 0===e?0:e,n=e/t*100;o.setItemTextByKey(r,e+"/"+t+"; "+(isNaN(n)?0:n.toFixed(2))+"%")}}]}},u.prototype.createCdnInfoItem=function(n){function e(){var e,t=r.getItemDom(n);r.player.getCommonKv(p.COMMON_DATA_KEY.vid)?(t.el.classList.remove(s.txpHideClass),r.setItemTextByKey(n,a.urlTool.getDomainOfURL((null==(e=r.player.currentVideoInfo)?void 0:e.loadingUrl)||""))):t.el.classList.add(s.txpHideClass)}var r=this;return{key:n,label:"è§é¢CDN",value:"-",listeners:[{event:p.H5_PLAY_EVENT.VIDEO_LOAD_START,cb:e},{event:a.PLAY_EVENT.RETRY_BACKURL,cb:e},{event:p.H5_PLAY_EVENT.VIDEO_SETLEVEL_END,cb:e}]}},u.prototype.createBufferRangeInfoItem=function(r){function e(){var e=o.player,t=e.videoBuffered,n=e.playtime,t=(null==(e=t.find(function(e){return e.start<=n&&e.end>=n}))?void 0:e.end)-n;o.setItemTextByKey(r,isNaN(t)?"-":t.toFixed(2)+"s")}var o=this;return{key:r,updater:e,label:"ç¼å²å¥åº·åº¦",value:"-",listeners:[{event:p.H5_PLAY_EVENT.VIDEO_TIMEUPDATE,cb:e}]}},u.prototype.createDebugInfoItem=function(l){function t(){var e=c.player.getCommonKv(p.COMMON_DATA_KEY.sessionRetryBackUrlCount)||0,t=c.player.getCommonKv(p.COMMON_DATA_KEY.sessionRetryPlayCount)||0,e=e||t?"r:"+[e,t].join("/"):"",t=(t=c.player.getCommonKv(p.COMMON_DATA_KEY.sessionBufferCount)||0)?"b:"+t:"",n=(n=c.player.videoBuffered.map(function(e){return e.start.toFixed(3)+"-"+e.end.toFixed(3)}).join(","))?"br:"+n:"",r="t:"+c.player.playtime.toFixed(2),o="pg:"+ +!(null==(i=null==(o=null==(o=null==(i=c.player.corePlayer)?void 0:i.getHls)?void 0:o.call(i))?void 0:o.config)||!i.progressive),i="s:"+d.join("->"),a=u?"a:"+u:"",s=(s=null==(s=null==(s=c.player.currentVideoInfo)?void 0:s.performance)?void 0:s.latency)?"lc:"+(s/1e3).toFixed(2):"",_=(_=c.player.getCommonKv(p.COMMON_DATA_KEY.drm))?"enc:"+_:"";c.setItemTextByKey(l,[e,t,n,r,o,i,a,s,_].filter(Boolean).join(" "))}var c=this,u="",d=[];return{key:l,label:"mystery",compactLabel:"mystery",value:"-",listeners:[{dispatcher:this.msg,event:p.H5_EXT_EVENT.DATASET_UPDATE,cb:function(e){-1!==[p.COMMON_DATA_KEY.sessionRetryBackUrlCount,p.COMMON_DATA_KEY.sessionRetryPlayCount,p.COMMON_DATA_KEY.sessionBufferCount,p.COMMON_DATA_KEY.drm].indexOf(e.data.key)&&t()}},{event:a.PLAY_EVENT.STATE_CHANGE,cb:function(){var e=c.player.state,e=e.charAt(0)+e.charAt(e.length-1);d.push(e),d=d.slice(-5),t()}},{event:p.H5_PLAY_EVENT.VIDEO_LOAD_PROGRESS,cb:t},{event:p.H5_PLAY_EVENT.VIDEO_AUTOPLAY_BLOCKED,cb:function(){u="vb"}},{event:p.H5_PLAY_EVENT.VIDEO_TIMEUPDATE,cb:t},{event:p.H5_PLAY_EVENT.AD_AUTOPLAY_BLOCKED,cb:function(){u="ab"}}]}},u.prototype.setItemTextByKey=function(e,t){var n=this.getItemDom(e);this.curInfoMap[e]=t,n&&(n.value.innerText=null!=t?t:"-")},u.prototype.addInfoItemEvts=function(){var t=this;this.infoItems.forEach(function(e){null!=(e=e.listeners)&&e.forEach(function(e){(e.dispatcher||t.player).on(e.event,e.cb)})})},u.prototype.updateInfoItems=function(){this.infoItems.forEach(function(e){var t;null!=(t=e.updater)&&t.call(e)})},u.prototype.isMiniPanel=function(){var e=this.config.smallSizeThreshold;return this.player.container.clientWidth<(void 0===e?400:e)},u.pluginName="info-panel",u.Events=o;var l,c=u;function u(e,t,n){e=l.call(this,e,t,n)||this,e.inited=!0,e._itemDomMap={},e._showing=!1,e.isReporting=!1,e.curInfoMap={},n=e.player.config.infoPanelConfig;return e.config=i.__assign(i.__assign({},void 0===n?{defaultInfo:!1,disableDefaultKey:[]}:n),t),e.renderInfoIcon(),e.createInfoItems(),e.renderInfoItems(),e.addInfoItemEvts(),e.addUIEvts(),e}p.H5Player.registerPlugin(c.pluginName,c),n.InfoPanelPlugin=c},{"@tencent/thumbplayer-core":2,"@tencent/thumbplayer-h5":3,"@tencent/thumbplayer-plugin-utils":13,tslib:24}],7:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0});var a=e("tslib"),r=e("@tencent/thumbplayer-core"),s=e("@tencent/thumbplayer-h5"),_=(n.prototype.start=function(e,t){return this.reqData=e=void 0===e?{}:e,this.errorRetryTimes=0,this.onCallback=t,this.loadInfo()},n.prototype.dispose=function(){this.clearTimer(),this.reqData=null,this.onCallback=null},n.prototype.onCGIError=function(e){var t;this.clearTimer(),this.errorRetryTimes+=1,-1===this.MAX_RETRY_TIMES||this.errorRetryTimes<=this.MAX_RETRY_TIMES?this.pollTimerID=window.setTimeout(this.loadInfo,this.pollInterval):null!=(t=this.onCallback)&&t.call(this,e,null)},n.prototype.clearTimer=function(){0<this.pollTimerID&&(clearTimeout(this.pollTimerID),this.pollTimerID=0)},n);function n(){var n=this;this.MAX_RETRY_TIMES=-1,this.markContext="last=0",this.pollInterval=3e4,this.reqData=null,this.timeout=5e3,this.loadInfo=function(){var e;if(n.reqData)return n.reqData.markContext=encodeURIComponent(n.markContext),n.reqData.tm=+new Date,n.reqData.vappid="31678259",n.reqData.vsecret="1e029a67beb2d7e7e7bb8321fb161a46fe76c7837beb2cee",n.reqData.otype="json",n.reqData.raw="1",e={url:"https://zbaccess.video.qq.com/fcgi/live_poll?"+r.urlTool.object2string(n.reqData,"&")},-1!==n.timeout&&(e.timeout=n.timeout),r.netTool.xhr(e).then(n.onCGIComplete).catch(function(e){throw n.onCGIError(e),e})},this.onCGIComplete=function(e){var t;n.clearTimer(),n.errorRetryTimes=0;try{t=JSON.parse(null==e?void 0:e.data).data}catch(e){n.onCGIError(e)}0===(null==t?void 0:t.errCode)?(e=Number(t.pollTimeOut),!isNaN(e)&&0<e&&(n.pollInterval=1e3*e),n.pollTimerID=window.setTimeout(n.loadInfo,n.pollInterval),null!=(e=n.onCallback)&&e.call(n,null,t),t.markContext&&(n.markContext=t.markContext)):n.onCGIError(t)}}i.LIVE_STATUS=void 0,(e=i.LIVE_STATUS||(i.LIVE_STATUS={}))[e.READY=1]="READY",e[e.PLAYING=2]="PLAYING",e[e.OVER=3]="OVER";var l,c={statusChange:"statusChange"},e=(l=s.Plugin,a.__extends(o,l),o.prototype.request=function(e){if(null!=e&&e.livepid&&(this.livepid=e.livepid),this.poller.dispose(),this.livepid)return this.poller.start({pollDataKey:encodeURIComponent("pid="+this.livepid),needMarkInfo:1,qqlog:(e=r.cookieTool.get("uin")||r.cookieTool.get("luin"),e=parseInt(e.replace(/^o0*/g,""),10),isNaN(e)||e<=1e4?0:e),guid:this.player.getCommonKv("guid")},this.handlerLivePollData)},o.pluginName="live-poll",o);function o(e,t){var n=l.call(this,e)||this,t=(n.status=i.LIVE_STATUS.READY,n.poller=new _,n.destory=function(){return n.poller.dispose()},n.handlerLivePollData=function(e,t){!e&&t&&((e=Number(t.liveStatus))!==n.status&&(n.emit(c.statusChange,{old:n.status,new:e,raw:t}),e===i.LIVE_STATUS.OVER)&&(n.player.stop(),n.destory()),n.status=e)},n.config=a.__assign(a.__assign({},e.config.livepollConfig),t),n.config),r=t.livepid,o=t.autolisten,o=void 0===o||o,t=t.timeout;return n.poller.timeout=void 0===t?5e3:t,r&&(n.livepid=r),o&&(e.addListener(s.PLAY_EVENT.FIRST_PLAYING,function(){return n.request()}),e.addListener(s.PLAY_EVENT.STOPED,n.destory)),n}s.H5Player.registerPlugin(e.pluginName,e),i.LIVE_EVENTS=c,i.LivepollPlugin=e},{"@tencent/thumbplayer-core":2,"@tencent/thumbplayer-h5":3,tslib:24}],8:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("@tencent/thumbplayer-h5"),o=e("tslib"),i=e("@tencent/thumbplayer-core");e=".txp_poster_img{position:absolute;left:0;top:0;width:100%;height:100%;z-index:2;-o-object-fit:contain;object-fit:contain}.txp_poster_img.txp_none{display:none}",d=(d=void 0===d?{}:d).insertAt,e&&"undefined"!=typeof document&&(a=document.head||document.getElementsByTagName("head")[0],(s=document.createElement("style")).type="text/css","top"===d&&a.firstChild?a.insertBefore(s,a.firstChild):a.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e)));var a,s,_="txp_none",l=["496","360","228"];function c(e){var t=e.vid,n=e.resolution,r=e.vidFirstPic,o=e.h5Defn,e=e.dir,e=void 0===e?"hz":e;return void 0!==r&&r?"//puui.qpic.cn/vpic_cover/"+t+"/"+t+"_first.jpg/"+("hz"===e?"640x360":"360x640"):n||l[o]?"//puui.qpic.cn/vpic_cover/"+t+"/"+t+"_hz.jpg/"+(n||l[o]||"0"):"//puui.qpic.cn/vpic_cover/"+t+"/"+t+"_"+e+".jpg"}u=r.Plugin,o.__extends(p,u),p.prototype.destroy=function(){var e;u.prototype.destroy.call(this),null!=(e=this.el)&&e.remove()},p.prototype.show=function(e){this.el&&(e&&(this.el.src=e),this.el.classList.remove(_))},p.prototype.showByVid=function(e){var t=e.vid,n=e.vidFirstPic,r=e.h5Defn,o=e.dir,i=e.resolution;e.pcFmt,t&&(e=c({vid:t,vidFirstPic:n,h5Defn:r,dir:o,resolution:i}),this.show(e))},p.prototype.hide=function(){this.el&&this.el.classList.add(_)},p.prototype.hookAdPlaying=function(){this.hide()},p.prototype.hookVideoPlaying=function(e){e.isFirst&&this.hide()},p.prototype.hookVideoEnd=function(e){e.endState!==i.END_STATE.NORMAL||this.player.config.loop||this.tryShow()},p.prototype.init=function(){var e=this.player.container,t=document.createElement("img");return t.classList.add("txp_poster_img",_),e.prepend(t),t},p.prototype.tryShow=function(){var e;null!=(e=this.config)&&e.vid?this.showByVid(this.config):null!=(e=this.config)&&e.src&&this.show(this.config.src)},p.pluginName="poster";var u,d=p;function p(e,t,n){n=u.call(this,e,t,n)||this;return n.config=o.__assign(o.__assign({},e.config.poster||{}),t),n.el=n.init(),n.tryShow(),n}r.H5Player.registerPlugin(d.pluginName,d),n.DEFAULT_RES=l,n.PosterPlugin=d,n.findPoster=c},{"@tencent/thumbplayer-core":2,"@tencent/thumbplayer-h5":3,tslib:24}],9:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("@tencent/thumbplayer-plugin-error-page"),o=e("@tencent/thumbplayer-plugin-ctrlbar"),i=e("@tencent/thumbplayer-plugin-info-panel"),a=e("@tencent/thumbplayer-plugin-poster"),s=e("@tencent/thumbplayer-plugin-tips"),_=e("@tencent/thumbplayer-plugin-ui-contextmenu"),l=e("@tencent/thumbplayer-plugin-watermark");Object.keys(r).forEach(function(e){"default"===e||n.hasOwnProperty(e)||Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})}),Object.keys(o).forEach(function(e){"default"===e||n.hasOwnProperty(e)||Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})}),Object.keys(i).forEach(function(e){"default"===e||n.hasOwnProperty(e)||Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})}),Object.keys(a).forEach(function(e){"default"===e||n.hasOwnProperty(e)||Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}})}),Object.keys(s).forEach(function(e){"default"===e||n.hasOwnProperty(e)||Object.defineProperty(n,e,{enumerable:!0,get:function(){return s[e]}})}),Object.keys(_).forEach(function(e){"default"===e||n.hasOwnProperty(e)||Object.defineProperty(n,e,{enumerable:!0,get:function(){return _[e]}})}),Object.keys(l).forEach(function(e){"default"===e||n.hasOwnProperty(e)||Object.defineProperty(n,e,{enumerable:!0,get:function(){return l[e]}})})},{"@tencent/thumbplayer-plugin-ctrlbar":4,"@tencent/thumbplayer-plugin-error-page":5,"@tencent/thumbplayer-plugin-info-panel":6,"@tencent/thumbplayer-plugin-poster":8,"@tencent/thumbplayer-plugin-tips":10,"@tencent/thumbplayer-plugin-ui-contextmenu":11,"@tencent/thumbplayer-plugin-watermark":14}],10:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var n=e("@tencent/thumbplayer-h5"),r=e("tslib"),i=e("@tencent/thumbplayer-plugin-utils");e='.txp_alert_info{position:absolute;left:10px;bottom:67px;padding:2px 8px;line-height:24px;font-size:13px;text-align:left;color:#fff;background:rgba(0,0,0,.6);-webkit-transition:bottom .15s ease;transition:bottom .15s ease;z-index:2}.txp_alert_info.txp_none{display:none}.txp_alert_info.ctrl_resize{bottom:107px}.txp_alert_info.ctrl_hide{bottom:20px}.txp_alert_info .txp_btn{-webkit-appearance:none;-moz-appearance:none;appearance:none;position:relative;border:none;background:0 0;font-family:inherit;cursor:pointer;outline:0 none;font-size:1em}.txp_alert_info .txp_btn.txp_btn_close{position:relative;display:inline-block;margin-left:3px;width:14px;height:24px;vertical-align:top;color:#fff;cursor:pointer}.txp_alert_info .txp_btn.txp_btn_close:hover{color:#ff6429}.txp_alert_info .txp_btn.txp_btn_close:hover:before{background:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMiAxMiI+PHBhdGggZmlsbD0iI0ZGNzgwMCIgZD0iTTEwLjUgMTBsLS41LjUtNC00LTQgNC0uNS0uNSA0LTQtNC00IC41LS41IDQgNCA0LTQgLjUuNS00IDQgNCA0eiIvPjwvc3ZnPg==) 50% no-repeat}.txp_alert_info .txp_btn.txp_btn_close:before{content:"";position:absolute;left:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);width:12px;height:12px;background:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMiAxMiI+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTEwLjUgMTBsLS41LjUtNC00LTQgNC0uNS0uNSA0LTQtNC00IC41LS41IDQgNCA0LTQgLjUuNS00IDQgNCA0eiIvPjwvc3ZnPg==) 50% no-repeat;-webkit-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;text-indent:0}.txp_alert_info .txp_btn.txp_none{display:none}.txp_alert_info .txp_alert_content a,.txp_alert_info .txp_alert_content em{padding:0 1px;color:#ff6429;font-style:normal;font-weight:400}.txp_alert_info .txp_alert_content .txp_alert_text{display:inline}.txp_alert_info .txp_none{display:none}',s=(s=void 0===s?{}:s).insertAt,e&&"undefined"!=typeof document&&(l=document.head||document.getElementsByTagName("head")[0],(d=document.createElement("style")).type="text/css","top"===s&&l.firstChild?l.insertBefore(d,l.firstChild):l.appendChild(d),d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e))),(s=a=a||{}).HOT_MOUSE_OVER="ctrl:hotpoint-mouseover",s.HOT_MOUSE_MOVE="ctrl:hotpoint-mousemove",s.HOT_MOUSE_OUT="ctrl:hotpoint-mouseout";var a,s,_,l,c,u=r.__assign(r.__assign({FULLSCREEN_CHANGE:"windowFullscreenChange",FULLSCREEN_ERROR:"fullscreenError",FAKE_FULLSCREEN_CHANGE:"browserFullscreenChange",CLICK_PIPBTN:"ctrl:click-pipbtn",CLICK_NEXTBTN:"ctrl:click-nextbtn",CLICK_PLAYBTN:"ctrl:click-playbtn",CLICK_REPLAY:"ctrl:click-replay",SET_LANGUAGE:"ctrl:set-language",SET_LEVEL:"ctrl:set-level",SET_AUDIO:"ctrl:set-audio",SET_PLAYRATE:"ctrl:set-playrate",SET_VOLUME:"ctrl:set-volume",TOGGLE_OVERLAY:"ctrl:toggle-overlay",MOUSE_DONW:"ctrl:progress-mousedown",MOUSE_DOWN:"ctrl:progress-mousedown",MOUSE_MOVE:"ctrl:progress-mousemove",MOUSE_UP:"ctrl:progress-mouseup",SHOW:"ctrl:show",HIDE:"ctrl:hide"},a),{TEST_EVENT:"ctrl:inner-test-event",RESIZE:"ctrl:resize",SHOW_LEVELS:"ctrl:show-levels",HOVER_PROGRESS:"ctrl:hover-progress"}),d=((l=_=_||{}).LARGE="large",l.NORMAL="normal",c=n.Plugin,r.__extends(p,c),p.prototype.destroy=function(){this.hide(),c.prototype.destroy.call(this)},p.prototype.show=function(e){var t,n=!1,r=3;"string"==typeof e||"number"==typeof e?t=String(e):(t=e.text,n=!!e.showClose,r=e.time||3,this.showOptions=e),this.$text.innerHTML=t,this.$close.classList.toggle(i.txpHideClass,!n),this.el.addEventListener("click",this.clickTips),this.el.classList.remove(i.txpHideClass),clearTimeout(this.timeoutId),-1!==r&&(this.timeoutId=window.setTimeout(this.hide,1e3*r)),this.emit(o.TipsEvents.Show)},p.prototype.prepareDOM=function(){var e=this.player.container,t=document.createElement("div");t.className="txp_alert_info "+i.txpHideClass,t.innerHTML='<div class="txp_alert_content">\n      <div class="txp_alert_text"></div>\n      <button class="txp_btn txp_btn_close" title="å³é­"></button>\n    </div>',e.insertAdjacentElement("beforeend",t),this.el=t},p.prototype.initDOMVars=function(){this.$text=this.el.querySelector(".txp_alert_content .txp_alert_text"),this.$close=this.el.querySelector(".txp_btn_close"),this.$close.addEventListener("click",this.hide),i.isMobile&&(this.el.style.bottom="40px")},p.prototype.followCtrlbar=function(){var t=this;this.msg.on("pluginsetup:ctrlbar",function(){var e=t.player.plugins.ctrlbar;e.on(u.SHOW,function(){t.el.classList.remove("ctrl_hide")}),e.on(u.HIDE,function(){t.el.classList.add("ctrl_hide")}),e.on(u.RESIZE,function(e){e=e.data;t.el.classList.toggle("ctrl_resize",e.size===_.LARGE)})})},p.pluginName="tips",p);function p(e,t,n){var r=c.call(this,e,t,n)||this;return r.hide=function(){r.el.removeEventListener("click",r.clickTips),r.showOptions=null,r.el.classList.add(i.txpHideClass),r.emit(o.TipsEvents.Hide)},r.clickTips=function(e){r.showOptions&&(e=null==(e=e.target)?void 0:e.dataset.callback)&&"function"==typeof r.showOptions[e]&&r.showOptions[e]()},r.prepareDOM(),r.initDOMVars(),!1!==t.followCtrlbar&&r.followCtrlbar(),r}o.TipsEvents=void 0,(e=o.TipsEvents||(o.TipsEvents={})).Show="show",e.Hide="hide",n.H5Player.registerPlugin(d.pluginName,d),o.TipsPlugin=d},{"@tencent/thumbplayer-h5":3,"@tencent/thumbplayer-plugin-utils":13,tslib:24}],11:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("@tencent/thumbplayer-h5"),o=e("tslib"),i=e("@tencent/thumbplayer-plugin-utils");e="@-webkit-keyframes txp_overlay_play{0%{-webkit-transform:scale(.5);transform:scale(.5);opacity:1}to{-webkit-transform:scale(1);transform:scale(1);opacity:0}}@keyframes txp_overlay_play{0%{-webkit-transform:scale(.5);transform:scale(.5);opacity:1}to{-webkit-transform:scale(1);transform:scale(1);opacity:0}}.txp_contextmenu{background:rgba(30,30,32,.9);position:fixed;width:234px;z-index:9999;padding:10px 0;color:#bbb;overflow:hidden;font-size:12px}.txp_contextmenu.txp_none,.txp_contextmenu .txp_none{display:none}.txp_contextmenu .txp_clipboard{top:0;left:100%;position:absolute;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.txp_contextmenu .txp_menuitem{padding-left:20px;height:34px;line-height:34px;cursor:pointer;max-width:100%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.txp_contextmenu .txp_menuitem:hover{background-color:#26262b}.txp_overlay_link{position:absolute;left:0;top:0;width:100%;height:100%;z-index:5;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;visibility:hidden;font-size:14px}.txp_overlay_link.txp_show{display:-webkit-box;display:-ms-flexbox;display:flex;visibility:visible;-webkit-animation:txp_overlay_play 1s ease-out both;animation:txp_overlay_play 1s ease-out both;pointer-events:none}.txp_overlay_link .txp_icon_link{background:rgba(30,30,32,.9);width:60px;height:60px;border-radius:30px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.txp_overlay_link .txp_icon_link .txp_icon{position:relative;width:36px;height:36px;fill:#fff}",l=(l=void 0===l?{}:l).insertAt,e&&"undefined"!=typeof document&&(a=document.head||document.getElementsByTagName("head")[0],(s=document.createElement("style")).type="text/css","top"===l&&a.firstChild?a.insertBefore(s,a.firstChild):a.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))),_=r.Plugin,o.__extends(c,_),c.prototype.start=function(e,t){!e||e.length<=0||(!0!==(null==t?void 0:t.hideVInfo)&&e.unshift({role:"openvinfo",label:"è§é¢ä¿¡æ¯"}),this.menuConfig=e,this.$el?this.$el.innerHTML="\n      "+e.map(function(e){return'<div class="txp_menuitem" data-role="'+(e.role||"")+'">'+e.label+"</div>"}).join("")+'\n      <textarea class="txp_clipboard" style="position: absolute; left: 100%; top: 0;"></textarea>\n      ':(t='\n    <div class="txp_contextmenu '+i.txpHideClass+'" style="overflow:hidden">\n      '+e.map(function(e){return'<div class="txp_menuitem" data-role="'+(e.role||"")+'">'+e.label+"</div>"}).join("")+'\n      <textarea class="txp_clipboard" style="position: absolute; left: 100%; top: 0;"></textarea>\n    </div>\n    <div class="txp_overlay_link '+i.txpHideClass+'">\n        <div class="txp_icon_link">\n            <svg class="txp_icon" viewBox="0 0 36 36" >\n              <path d="M26.5 26h-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5h5c2.5 0 4.5-2 4.5-4.5S29 14 26.5 14h-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5h5c4.1 0 7.5 3.4 7.5 7.5S30.6 26 26.5 26zM12 18.5c0-.8.7-1.5 1.5-1.5h9c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5h-9c-.8 0-1.5-.7-1.5-1.5zm2.5-4.5h-5C7 14 5 16 5 18.5S7 23 9.5 23h5c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5h-5C5.4 26 2 22.6 2 18.5S5.4 11 9.5 11h5c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5z"></path>\n            </svg>\n        </div>\n    </div>\n    ',(e=this.player.container).insertAdjacentHTML("beforeend",t),this.$el=e.querySelector(".txp_contextmenu"),this.$link=e.querySelector(".txp_overlay_link"),this.bindDOMEvent()))},c.prototype.showSuccess=function(){var e,t;i.isMobile||null!=(e=this.config)&&e.disableSuccessTip||null!=(e=this.config)&&e.disableSuccussTip||(t=this.$link,t.classList.remove(i.txpHideClass),t.classList.add("txp_show"),clearTimeout(this.sucTid),this.sucTid=setTimeout(function(){t.classList.add(i.txpHideClass),t.classList.remove("txp_show")},1e3))},c.prototype.destroy=function(){[this.$el,this.$link].forEach(function(e){return(null==e?void 0:e.parentNode)&&e.remove()}),_.prototype.destroy.call(this)},c.prototype.bindDOMEvent=function(){var l=this,e=this.player.container;e.addEventListener("contextmenu",function(e){var t,n,r,o,i,a,s,_;l.player.isPlayingAd||(l.show(),t=(a=l.player.container.getBoundingClientRect()).left,s=a.top,n=a.width,a=a.height,r=e.clientX,o=e.clientY,i=(_=l.$el).clientWidth,a=a+s-_.clientHeight,s=Math.min(n+t-i,r),_=Math.min(a,o),l.$el.style.left=s+"px",l.$el.style.top=_+"px",e.preventDefault())}),e.addEventListener("click",this.hide),this.$el.addEventListener("click",function(e){var t=e.target,e=(l.showSuccess(),null==(e=l.menuConfig)?void 0:e.find(function(e){return e.role===t.dataset.role}));"function"==typeof(null==e?void 0:e.callback)&&e.callback(l),"openvinfo"===t.dataset.role&&null!=(e=l.player.plugins["info-panel"])&&e.trigger(),l.emit("clickContextMenu",t.dataset)})},c.pluginName="context-menu";var a,s,_,l=c;function c(e,t,n){var r=_.call(this,e,t,n)||this;return r.menuConfig=[],r.show=function(){r.$el.classList.remove(i.txpHideClass)},r.hide=function(){r.$el.classList.add(i.txpHideClass)},r.config=o.__assign(o.__assign({},e.config.contextMenuConfig),t),r.start(r.config.menus,{hideVInfo:r.config.hideVInfo}),r}r.H5Player.registerPlugin(l.pluginName,l),n.UIContextMenuPlugin=l},{"@tencent/thumbplayer-h5":3,"@tencent/thumbplayer-plugin-utils":13,tslib:24}],12:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("tslib"),o=e("@tencent/thumbplayer-h5");e="@-webkit-keyframes txp_loading{0%{background-position:0 0}to{background-position:0 -600px}}@keyframes txp_loading{0%{background-position:0 0}to{background-position:0 -600px}}.txp_overlay_loading{position:absolute;left:0;top:0;width:100%;height:100%;z-index:5;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;pointer-events:none}.txp_overlay_loading.txp_none,.txp_overlay_loading .txp_none{display:none}.txp_overlay_loading .txp_icon_loading{display:block;width:54px;height:20px;margin:0 auto 10px;background:url(https://vm.gtimg.cn/tencentvideo/txp/style/img/loading.png) 0 0 no-repeat;background-size:54px 600px;-webkit-animation:txp_loading 1s steps(30) infinite;animation:txp_loading 1s steps(30) infinite}.txp_overlay_loading .txp_icon_loading.mobile{-webkit-transform:scale(.5);transform:scale(.5);margin:0 auto}",l=(l=void 0===l?{}:l).insertAt,e&&"undefined"!=typeof document&&(i=document.head||document.getElementsByTagName("head")[0],(a=document.createElement("style")).type="text/css","top"===l&&i.firstChild?i.insertBefore(a,i.firstChild):i.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e)));var i,a,s,_="txp_none",l=(s=o.Plugin,r.__extends(c,s),c.prototype.prependElement=function(e){var t;null!=(t=this.$el)&&t.insertAdjacentElement("afterbegin",e)},c.prototype.insertDOM=function(){var e=this.player.container;e.insertAdjacentHTML("beforeend",'<div class="txp_overlay_loading txp_none">\n<div class="txp_text" data-role="txp-ui-continue-play"></div>\n<div class="txp_icon_loading" data-role="txp-ui-loading"></div>\n</div>'),this.$el=e.querySelector(".txp_overlay_loading"),this.$continuePlay=e.querySelector('[data-role="txp-ui-continue-play"]'),this.$loading=e.querySelector('[data-role="txp-ui-loading"]'),null!=(e=this.config)&&e.useMobileStyle&&this.$loading.classList.add("mobile")},c.pluginName="ui-loading",c);function c(e,t,n){var r=s.call(this,e,t,n)||this;return r.show=function(e){r.$continuePlay.innerHTML=e=void 0===e?"":e,r.$el.classList.remove(_)},r.hide=function(){r.$el.classList.add(_)},r.insertDOM(),e.on(o.PLAY_EVENT.SET_LOADING,function(e){e=e.data.show;r.player.setStateKv("ui-loading:"+(e?"show":"hide"),{type:o.LOG_TYPE.PLUGIN_ACTION}),e?r.show():r.hide()}),r}o.H5Player.registerPlugin(l.pluginName,l),n.UILoadingPlugin=l},{"@tencent/thumbplayer-h5":3,tslib:24}],13:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("@tencent/thumbplayer-core"),u=e("tslib");var d=1,p="18px sans-serif",f="#fff",e=r.uaTool.mobile,o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},i=/[&<>"'`=]/g;n.captureVideo=function(s,_,c){return u.__awaiter(this,void 0,void 0,function(){var t,n,r,o,i,a,l;return u.__generator(this,function(e){switch(e.label){case 0:return t=_.dx,n=_.dy,r=_.dh,o=_.dw,[4,s.captureVideo(t,n,o,r)];case 1:return(i=e.sent())?(Array.isArray(c)&&(a=document.createElement("canvas"),l=a.getContext("2d"),a.width=o,a.height=r,l.putImageData(i.data,0,0),null!=c&&c.forEach(function(e){if("content"in e)return t=l,r=("stroke"===(n=e).mode?t.strokeText:t.fillText).bind(t),t.font=n.font||p,t.fillStyle=n.color||f,t.strokeStyle=n.color||f,t.globalAlpha=n.alpha||d,void r(n.content,n.dx,n.dy);var t,n,r,s=l,_=e;function o(){var e=_.image,t=_.dx,n=_.dy,r=_.width,o=_.height,i=e.width,a=e.height;s.globalAlpha=_.alpha||d,s.drawImage(e,t,n,r||i,o||a)}_.image.complete?o():_.image.addEventListener("load",o)}),i.data=l.getImageData(0,0,o,r)),[2,i]):[2,{captureX:t,captureY:n,captureWidth:o,captureHeight:r,playtime:s.playtime,data:null}]}})})},n.downloadCapture=function(e,t,n){var r=document.createElement("canvas");r.width=e.captureWidth,r.height=e.captureHeight,r.getContext("2d").putImageData(e.data,0,0),e=r.toDataURL(n),(r=document.createElement("a")).href=e,r.download=t,r.click()},n.isMobile=e,n.txpDisableClass="txp_disabled",n.txpHideClass="txp_none",n.xssFilter=function(e){return i.test(e)?e.replace(i,function(e){return o[e]}):e}},{"@tencent/thumbplayer-core":2,tslib:24}],14:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var i,a=e("@tencent/thumbplayer-h5"),u=e("tslib"),s=e("@tencent/thumbplayer-core"),c="thumbplayer-watermark-cover";function l(r,o){return u.__awaiter(this,void 0,void 0,function(){var t,n;return u.__generator(this,function(e){switch(e.label){case 0:if(!r)return[2,Promise.reject(t)];n=0,e.label=1;case 1:if(!(n<3))return[3,6];e.label=2;case 2:return e.trys.push([2,4,,5]),[4,s.netTool.jsonp(r,{timeout:5e3})];case 3:return[2,function(e,t){for(var _={},l={},n=e.start,r=e.duration,o=e.repeat,c=e.rw,i=0===o?Math.ceil(t/r):o,a=0;a<i;a++)!function(a){var s=n+a*r;e.scenes.forEach(function(e){var t=e.wi,n=e.in,r=e.out,o=e.start,i=e.end;t.forEach(function(e){l[e.id]=u.__assign(u.__assign({},e),{action:!0,rw:c}),_[e.id]||(_[e.id]=[]),o<=a&&(a<=i||0===a)&&_[e.id].push({start:(s+n)/1e3,end:(s+r)/1e3})})})}(a);return{schedules:_,watermarks:l}}(e.sent(),o)];case 4:return e.sent(),t=i.ActionWatermarkRequestFailed,[3,5];case 5:return n++,[3,1];case 6:return[2,Promise.reject(t)]}})})}(i=i||{}).ActionWatermarkRequestFailed="001";r.prototype.destroy=function(){var e;null!=(e=this.el)&&e.parentNode&&this.el.remove(),this.el=null},r.prototype.show=function(){this.el&&(this.el.style.display="block")},r.prototype.hide=function(){this.el&&(this.el.style.display="none")},r.prototype.draw=function(e){var t=e.left,n=e.top,r=e.width,o=e.height,i=e.position,e=e.opacity;this.el&&(this.el.style.left=t,this.el.style.top=n,this.el.style.width=r,this.el.style.height=o,this.el.style.opacity=e,this.el.style.position=i)},r.prototype.createImageNode=function(e){var t=e.left,n=e.top,r=e.width,o=e.height,i=e.position,e=e.opacity,a=new Image;return a.style.left=t,a.style.top=n,a.style.width=r,a.style.height=o,a.style.position=i,a.style.opacity=e,a.style.zIndex="1",a};var _=r;function r(e,t,n){void 0===n&&(n=!1);var r=t.cfg,t=t.css;this.el=this.createImageNode(t),this.el.onload=r.onload,this.el.onerror=r.onerror,this.el.src=r.url,this.el.dataset.id=""+r.id,e.appendChild(this.el),n?this.show():this.hide()}o=a.Plugin,u.__extends(d,o),d.prototype.add=function(e,t){void 0===t&&(t=!1);var n,r=e.url,o=e.id;if(!this.watermarks[o])return n=this.computeCss(e),n=new _(this.$watermarkContainer,{css:n,cfg:{id:o,url:r,onerror:function(){this.remove()}}},t),this.watermarks[o]=[n,e],n},d.prototype.watermarkThis=function(e,t){void 0===t&&(t={}),this.coverWatermarkParam=null;var n=this.player.container,r=(n.querySelectorAll("."+c).forEach(function(e){return e.remove()}),document.createElement("div")),o=document.createElementNS("http://www.w3.org/2000/svg","svg"),i=document.createElementNS("http://www.w3.org/2000/svg","text"),a=t.svg,a=void 0===a?{}:a,s=t.text,s=void 0===s?{}:s,_=(r.classList.add(c),r.style.position="absolute",r.style.width="100%",r.style.height="100%",r.style.userSelect="none",r.style.zIndex="1",o.setAttribute("xmlns","http://www.w3.org/2000/svg"),u.__assign(u.__assign({},{width:"200px",height:"200px"}),a)),l=(Object.keys(_).forEach(function(e){o.setAttribute(e,_[e])}),u.__assign(u.__assign({},{stroke:"black",transform:"translate(20, 120) rotate(-30)",fill:"rgb(222, 222, 222)",opacity:.3,"stroke-opacity":.3,"stroke-width":1,"font-size":"22"}),s));return Object.keys(l).forEach(function(e){i.setAttribute(e,l[e])}),i.textContent=e,o.appendChild(i),r.style.backgroundImage='url("data:image/svg+xml;utf8,'+o.outerHTML.replace(/"/g,"'")+'")',n.appendChild(r),this.coverWatermarkParam=[e,t],r},d.prototype.remove=function(e){var t=(null!=(t=this.watermarks[e])?t:[])[0];t&&(t.destroy(),delete this.watermarks[e],delete this.timeTable[e])},d.prototype.clear=function(){Object.values(this.watermarks).forEach(function(e){return e[0].destroy()}),this.watermarks={},this.timeTable={}},d.prototype.get=function(e){return this.watermarks[e]},d.prototype.schedule=function(e,t,n){this.timeTable[e]?this.timeTable[e].push({start:t,end:n}):this.timeTable[e]=[{start:t,end:n}]},d.prototype.unschedule=function(e){delete this.timeTable[e];e=(null!=(e=this.watermarks[e])?e:[])[0];null!=e&&e.hide()},d.prototype.destroy=function(){var e;window.removeEventListener("resize",this.onResize),this.player.off(a.PLAY_EVENT.FULLSCREEN_CHANGE,this.onResize),o.prototype.destroy.call(this),this.mutationObserver.disconnect(),(this.mutationObserver=null)!=(e=this.$watermarkContainer)&&e.parentNode&&null!=(e=this.$watermarkContainer)&&e.remove()},d.prototype.hookPlaySessionStart=function(){this.clear()},d.prototype.hookVideoTimeupdate=function(e){var n=this,r=e.playtime;Object.entries(this.timeTable).forEach(function(e){var t=e[0],e=e[1],t=n.watermarks[t][0];t&&(e.some(function(e){var t=e.start,e=e.end;return t<r&&r<(void 0===e?1/0:e)})?t.show():t.hide())})},d.prototype.initMutationObserver=function(){var t=this;this.mutationObserver&&this.mutationObserver.disconnect(),this.mutationObserver=new MutationObserver(function(e){t.checkIsCoverWatermarkRemoved()}),this.mutationObserver.observe(this.player.container,{childList:!0,subtree:!0,attributes:!0})},d.prototype.checkIsCoverWatermarkRemoved=function(){var e;!this.coverWatermarkParam||null!=(e=this.player.container.querySelector("."+c))&&e.offsetParent||this.watermarkThis.apply(this,this.coverWatermarkParam)},d.prototype.setupPlayerEvents=function(){var t=this;this.msg.on(a.H5_EXT_EVENT.GETINFO_OVER,function(e){var _=e.data;t.watermarkLoadingDefer=new Promise(function(s){return u.__awaiter(t,void 0,void 0,function(){var t,n,r,o,i,a;return u.__generator(this,function(e){switch(e.label){case 0:if(!(t=_.parseData))return[2];n=t.watermarkList,a=t.supplementaryInfo,a=(a||{}).contentInfo,a=(a||{}).protectionWatermark,this.config.enableProtectionWatermark&&a&&this.watermarkThis(a),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,l(null==(a=n)?void 0:a.action,1e3*t.duration)];case 2:return i=e.sent(),r=Object.keys(i.watermarks).map(function(e){return i.watermarks[e]}),o=i.schedules,[3,4];case 3:return e.sent(),[3,4];case 4:return r=r||t.watermarkList.wi,s([r,o]),[2]}})})})}),this.player.on(a.H5_PLAY_EVENT.VIDEO_PLAYING,function(e){var o=e.data;return u.__awaiter(t,void 0,void 0,function(){var t,n,r;return u.__generator(this,function(e){switch(e.label){case 0:return o.isFirst?this.watermarkLoadingDefer?(n=(t=this.addPendingData).apply,r=[this],[4,this.watermarkLoadingDefer]):[3,2]:[2];case 1:n.apply(t,r.concat([e.sent()])),e.label=2;case 2:return[2]}})})}),this.player.on(a.H5_PLAY_EVENT.VIDEO_SETLEVEL_END,function(e){var o=e.data;return u.__awaiter(t,void 0,void 0,function(){var t,n,r;return u.__generator(this,function(e){switch(e.label){case 0:return o.code!==a.ErrorCode.SUC?[2]:(this.clear(),this.watermarkLoadingDefer?(n=(t=this.addPendingData).apply,r=[this],[4,this.watermarkLoadingDefer]):[3,2]);case 1:n.apply(t,r.concat([e.sent()])),e.label=2;case 2:return[2]}})})})},d.prototype.addPendingData=function(e,n){var r=this;e&&e.forEach(function(e){return r.add(e,!e.action)}),n&&Object.keys(n).forEach(function(t){return n[t].forEach(function(e){return r.schedule(t,e.start,e.end)})}),this.watermarkLoadingDefer=null},d.prototype.prepareDom=function(){var e=this.player.container;e.insertAdjacentHTML("beforeend",'<txpdiv data-role="txp-ui-watermark-mod" class="txp-watermark">\n</txpdiv>'),this.$watermarkContainer=e.querySelector('[data-role="txp-ui-watermark-mod"]')},d.prototype.isInScreen=function(e,t){var n=e.x,r=e.y,o=e.w,e=e.h,i=t.x,a=t.y,s=t.w,t=t.h;return!(i<n||a<r||n+o-s<i)&&a<=r+e-t},d.prototype.listenFakeFullscreen=function(){var e=this;this.msg.on("pluginsetup:ctrlbar",function(){e.player.plugins.ctrlbar.on("browserFullscreenChange",e.onResize)})},d.pluginName="ui-watermark";var o,e=d;function d(e,t,n){var c=o.call(this,e,t,n)||this,n=(c.watermarks={},c.timeTable={},c.onResize=function(){Object.values(c.watermarks).forEach(function(e){var t=e[0],e=e[1],e=c.computeCss(e);t.draw(e)})},c.computeCss=function(e){var t=e.x,n=e.y,r=e.h,o=e.w,i=e.a,e=e.rw,e=void 0===e?0:e,a=c.player,s=a.container,a=a.videoSize,_=a.width,a=a.height,e=(_<=0&&(_=s.clientWidth),a<=0&&(a=s.clientHeight),0<e?Math.min(a,_)/e:1),t=t*e,n=n*e,r=r*e,o=o*e,e=Math.min(s.clientWidth/_,s.clientHeight/a),_=_*e,a=a*e,l=Math.max((s.clientWidth-_)/2,0),s=Math.max((s.clientHeight-a)/2,0),o=o*e,r=r*e,t=l+_-o-t*e,n=s+n*e,e={left:t+"px",top:n+"px",width:o+"px",height:r+"px",position:"absolute",display:"block",opacity:""+i/100};return c.isInScreen({x:l,y:s,w:_,h:a},{x:t,y:n,w:o,h:r})||(e.display="none"),e},c.config=u.__assign(u.__assign({enableProtectionWatermark:!0},c.player.config.watermarkConfig||{}),t),c.prepareDom(),window.addEventListener("resize",c.onResize),e.on(a.PLAY_EVENT.FULLSCREEN_CHANGE,c.onResize,-1),c.config.defaultText);return n&&c.watermarkThis(n),c.initMutationObserver(),c.setupPlayerEvents(),c.listenFakeFullscreen(),c}a.H5Player.registerPlugin(e.pluginName,e),n.WatermarkPlugin=e},{"@tencent/thumbplayer-core":2,"@tencent/thumbplayer-h5":3,tslib:24}],15:[function(e,k,c){Object.defineProperty(c,"__esModule",{value:!0});var A=e("tslib"),h=e("@tencent/thumbplayer-core"),g=e("@tencent/thumbplayer-h5"),e=(t.prototype.log=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.tvk.logger).log.apply(e,A.__spreadArray(["[".concat(this.constructor.moduleName,"]")],t,!1))},t.prototype.warn=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.tvk.logger).warn.apply(e,A.__spreadArray(["[".concat(this.constructor.moduleName,"]")],t,!1))},t.prototype.error=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.tvk.logger).error.apply(e,A.__spreadArray(["[".concat(this.constructor.moduleName,"]")],t,!1))},t.moduleName="base-controller",t);function t(e,t){this.player=e,this.tvk=t,this.config=t.config}B=e,A.__extends(n,B),Object.defineProperty(n.prototype,"ready",{get:function(){return Promise.resolve(!0)},enumerable:!1,configurable:!0}),n.prototype.init=function(){this.setupPlayerEventListeners(),this.log("init success")},n.prototype.configureDataSet=function(e,t){e&&(this.log("setting audioTrack options to player",e),this.player.setCommonKv(g.COMMON_DATA_KEY.currentAudioTrackList,e)),"number"==typeof t&&(this.log("setting current audioTrack to player",t),this.player.setCommonKv(g.COMMON_DATA_KEY.currentAudioTrack,t))},n.prototype.setupPlayerEventListeners=function(){this.player.pluginMsg.on(g.H5_EXT_EVENT.GETINFO_OVER,this.onGetInfoOver),this.player.on(g.PLAY_EVENT.SET_AUDIO_TRACK_START,this.onAudioTrackSwitching),this.player.on(g.PLAY_EVENT.SET_AUDIO_TRACK_OVER,this.onAudioTrackSwitched),this.player.on(g.H5_PLAY_EVENT.VIDEO_CANPLAY,this.onVideoCanPlay),this.player.on(g.H5_PLAY_EVENT.VIDEO_SETLEVEL_END,this.onVideoSetLevelOver)},n.moduleName="audio-track-controller";var B,V=n;function n(){var o=null!==B&&B.apply(this,arguments)||this;return o.audioTrackInfoFromServer=[],o.onGetInfoOver=function(e){var t,e=e.data,n=e.parseData,r=e.error,e=e.resData;r||!n?o.log("no parsed info found from getvinfo",r,e):(r=(e||{}).al)?(n=n.vitem,t=[],r.ai.forEach(function(e){t.push({btnLabel:e.sname,label:e.name,value:NaN,payload:e.name})}),n.ai&&t.push({btnLabel:n.ai.sname,label:n.ai.name,value:-1,payload:n.ai.sname}),o.audioTrackInfoFromServer=t):o.log("no audio track info found from getvinfo",e)},o.onVideoSetLevelOver=function(e){e.data.code===g.ErrorCode.SUC&&o.updateAudioTrackInfo()},o.onVideoCanPlay=function(){var e,t;o.player.currentVideoInfo&&(e=o.player.currentVideoInfo.currentAudioTrack,t=o.updateAudioTrackInfo(),o.configureDataSet(t,e))},o.updateAudioTrackInfo=function(){var e=o.player.currentVideoInfo.audioTracks;if(!e.length)return null;e.forEach(function(t){var e=o.audioTrackInfoFromServer.find(function(e){return e.payload===t.name});e&&(e.value=t.id)});e=o.audioTrackInfoFromServer.filter(function(e){return!isNaN(e.value)});return o.player.currentVideoInfo.audioTracks=e.map(function(e){return{name:e.payload,id:e.value}}),e},o.onAudioTrackSwitching=function(e){o.configureDataSet(null,e.data.id)},o.onAudioTrackSwitched=function(e){e.data.fail||o.configureDataSet(null,e.data.id)},o}function K(e,t,n){var r,o,i,a,s,_,l={prefix:"",suffix:"",content:""};return null!=n&&n.prefix&&(l.prefix="function"==typeof n.prefix?n.prefix(e):void 0),null!=n&&n.suffix&&(l.suffix="function"==typeof n.suffix?n.suffix(e):void 0),null!=n&&n.content&&(l.content="function"==typeof n.content?n.content(e):void 0),t?U(e,!0,l):(n=l,(l=(t=e).name)===c.PAID_FORMAT.HDR10||l===c.PAID_FORMAT.SFR_HDR||l===c.PAID_FORMAT.DOLBY?(l=l,e=n,o=(_=t).name,i=_.resolution,a=_.cname,s=_.lmt,_=_.sname,a=void 0===(a=Q(a,!1)[0])?"":a,s=e.suffix||(s?W:void 0),e=e.prefix||function(e,t){var n=document.createElement("div");n.className="tp-defn-option-icon-container",t&&Object.entries(t).forEach(function(e){var t=e[0],e=e[1];n.style[t]=e});return n.innerHTML=e,n.outerHTML}(j[l],{width:"30px"}),(r={})[c.PAID_FORMAT.DOLBY]=i,r[c.PAID_FORMAT.HDR10]=function(e){var t=Y({alignItems:"center",width:"100%"}),e=(t.textContent=e,Y({transform:"scale(0.8)"}));return e.innerHTML=q,t.insertAdjacentElement("beforeend",e),t.outerHTML}(_.substring(0,2)),r[c.PAID_FORMAT.SFR_HDR]=i,_=r,{label:F(a,e,s),btnLabel:_[l],value:o,payload:i}):U(t,!1,n))}function U(e,t,n){var r,o=e.cname,i=e.name,e=e.lmt,o=Q(o,t),t=o[0],t=void 0===t?"":t,o=o[1],o=void 0===o?"":o,e=n.suffix||(e?W:void 0),a=n.content||"".concat(o," ").concat(t);return{label:h.uaTool.mobile?(r=o,"<div>".concat(t,"<div><div>").concat(r,"</div>")):F(a,n.prefix,e),btnLabel:o,value:i,payload:"".concat(o," ").concat(t)}}function F(e,t,n){var r=Y({alignItems:"center"}),t=(t&&r.insertAdjacentHTML("afterbegin",t),Y());return t.innerHTML=e,r.appendChild(t),n&&r.insertAdjacentHTML("beforeend",n),r.outerHTML}function Y(t){var n=document.createElement("div");return n.style.display="flex",t&&Object.keys(t).forEach(function(e){n.style[e]=t[e]}),n}function Q(e,t){var n;return(t=void 0!==t&&t)?null!=(t=e)&&t.length?(t=t.split(" "),n=t[0],t=t[1],[n,t]):["",""]:null!=e&&e.length?(n=e.match(/(.*);\((.*)\)/))&&3<=n.length?[n[1],n[2]]:["",e]:["",""]}c.PAID_FORMAT=void 0,(r=c.PAID_FORMAT||(c.PAID_FORMAT={})).FHD="fhd",r.UHD="uhd",r.DOLBY="dolby",r.HDR10="hdr10",r.SFR_HDR="sfr_hdr";var H,q='<svg class="tp-hdr-prefix-icon" width="12" height="14" viewBox="0 0 12 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n <path d="M0 14.4449L0.02931 12.2882L8.90291 1.4655H0.271117V0H12L0 14.4449Z" fill="currentColor"/>\n <path d="M11.8315 15.7615H0.102661L11.7925 1.72937L11.7778 4.04974L3.19975 14.296H11.8315V15.7615Z" fill="currentColor"/>\n <path d="M11.9 12.0219H8.03349L11.9 7.40312V5.12915L4.9364 13.4874H11.9V12.0219Z" fill="currentColor"/>\n </svg>',W='<div style="margin-left: 6px; padding: 0 2px;transform: scale(0.8);border: 1px solid #fc3f4c;border-radius: 2px;color: #fc3f4c;font-size: 12px;letter-spacing: 1px;line-height: 14px;text-align: center;">VIP</div>',j=((r={})[c.PAID_FORMAT.DOLBY]='<svg class="tp-dolby-prefix-icon" width="22" height="14" viewBox="0 0 22 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n <path fill-rule="evenodd" clip-rule="evenodd" d="M0.714233 1.14282C0.714233 0.590537 1.16195 0.142822 1.71423 0.142822H20.2857C20.8379 0.142822 21.2857 0.590537 21.2857 1.14282V12.8571C21.2857 13.4094 20.8379 13.8571 20.2857 13.8571H1.71423C1.16195 13.8571 0.714233 13.4094 0.714233 12.8571V1.14282ZM2.42852 1.85711H4.99995C7.84027 1.85711 10.1428 4.15965 10.1428 6.99997C10.1428 9.84028 7.84027 12.1428 4.99995 12.1428H2.42852V1.85711ZM16.9999 1.85711C14.1596 1.85711 11.8571 4.15965 11.8571 6.99997C11.8571 9.84028 14.1596 12.1428 16.9999 12.1428H19.5714V1.85711H16.9999Z" fill="currentColor"/>\n </svg>',r[c.PAID_FORMAT.HDR10]=q,r[c.PAID_FORMAT.SFR_HDR]=q,r),r=(H=e,A.__extends(o,H),Object.defineProperty(o.prototype,"ready",{get:function(){return Promise.resolve(!0)},enumerable:!1,configurable:!0}),o.prototype.init=function(){this.ctrlbarPlugin=this.player.plugins[g.OFFICIAL_PLUGIN.CTRLBAR],this.setupPlayerEventListeners(),this.log("init success")},o.prototype.configureDataSet=function(e,t){e&&(this.log("setting definition options to player",e),this.player.setCommonKv(g.COMMON_DATA_KEY.currentDefnList,e)),t&&(this.log("setting current definition to player",t),this.player.setCommonKv(g.COMMON_DATA_KEY.currentDefn,t))},o.prototype.setupPlayerEventListeners=function(){this.player.pluginMsg.on(g.H5_EXT_EVENT.GETINFO_OVER,this.onGetInfoOver),this.ctrlbarPlugin&&this.ctrlbarPlugin.on(z,this.onCtrlbarSetLevel,Number.MAX_SAFE_INTEGER)},o.prototype.builtUHDClientOption=function(e){return K(e,!1,A.__assign(A.__assign({},this.config.definitionOptionDecorator),{content:function(e){return"å®¢æ·ç«¯ ".concat(e.resolution)}}))},o.prototype.shouldExecuteUHDHijack=function(e){return e===c.PAID_FORMAT.UHD&&this.config.showUHDClientGuide&&!h.videoTool.supportHevc()},o.moduleName="definition-controller",o);function o(){var r=null!==H&&H.apply(this,arguments)||this;return r.onGetInfoOver=function(e){var t,e=e.data,n=e.parseData,e=e.error;e||!n?r.log("no parsed info found from getvinfo",e,n):(e=n.definitionList)?(t=[],n=(null==(n=e.find(function(e){return 1===e.sl}))?void 0:n.name)||null,e.forEach(function(e){r.shouldExecuteUHDHijack(e.name)?t.push(r.builtUHDClientOption(e)):(e=K(e,r.player.config.type===h.PLAY_MODE.LIVE,r.config.definitionOptionDecorator),t.push(e))}),r.configureDataSet(t,n)):r.log("no definitionList found from getvinfo",e)},r.onCtrlbarSetLevel=function(e){e=((null==e?void 0:e.data)||{}).value;if(r.shouldExecuteUHDHijack(e))return r.log("intercept uhd level switch in no hevc support environment, call native client"),r.tvk.emit("tvkRequireClient",{detail:"notSupportUHD"}),h.EvtEmitter.STOP_IMMEDIATE_PROPAGATION},r}var G,z="ctrl:set-level",X={debug:!1,definitionController:r,audioTrackController:V},J=(G=e,A.__extends(i,G),Object.defineProperty(i.prototype,"ready",{get:function(){return Promise.resolve(!0)},enumerable:!1,configurable:!0}),i.prototype.init=function(){this.resetContext(),this.configHlsjsKernel(),this.setupEventListeners()},i.prototype.setupEventListeners=function(){this.player.pluginMsg.on(g.H5_EXT_EVENT.GETINFO_OVER,this.onGetInfoOver),this.player.pluginMsg.on(g.H5_EXT_EVENT.PRELOAD_GETINFO_OVER,this.onGetInfoOver),this.player.on(g.H5_PLAY_EVENT.PLAY_SESSION_END,this.onPlaySessionEnd),g.kernelEvtBus.on("hlsManifestParsed",this.onHlsManifestParsed)},i.prototype.resetContext=function(){this.log("reset context"),this.context={m3u8:{},keyid:{}}},i.prototype.configHlsjsKernel=function(){var e=Object.assign({},this.player.config.hlsjsKernelConfig,{pProxy:this.lookupCache.bind(this)});this.player.config.hlsjsKernelConfig=e},i.prototype.lookupCache=function(e){this.log("proxy download",e,this.context);var t=this.getKeyIdFromUrl(e);return t?this.lookupByKeyId(t):(this.log("no keyid found for url",e),null)},i.prototype.getKeyIdFromUrl=function(e){var t;return null!==(t=$.exec(e))?t[1]:this.context.keyid[e]},i.prototype.lookupByKeyId=function(e){var t=this.context.m3u8[e];return t?(this.log("m3u8 found for keyid, network request skipped",e),t):(this.log("no m3u8 found for keyid",e),null)},i.moduleName="network-controller",i);function i(){var _=null!==G&&G.apply(this,arguments)||this;return _.onGetInfoOver=function(e){var t,n,r,o,i,a,e=e.data,s=e.resData,e=e.parseData;0===(null==s?void 0:s.em)&&(s.play?(i=(o=s.play).master,t=o.keyid,n=void 0===(n=o.audiolist)?[]:n,r=void 0===(r=o.videolist)?[]:r,o=void 0===(o=o.masterurl)?[]:o,_.context.m3u8[t]=i,r.forEach(function(e){_.context.m3u8[e.keyid]=e.m3u8}),n.forEach(function(e){_.context.m3u8[e.keyid]=e.m3u8}),s.vl.vi[0].ul.ui.forEach(function(e){_.context.keyid[e.url]=t}),o.forEach(function(e){_.context.keyid[e]=t})):8===s.dltype&&(i=s.vl.vi[0].ul.m3u8,a=s.vl.vi[0].keyid,_.context.m3u8[a]=i,null!=(r=null==e?void 0:e.urls))&&r.forEach(function(e){_.context.keyid[e.url]=a}))},_.onPlaySessionEnd=function(){_.resetContext()},_.onHlsManifestParsed=function(e){var e=e.data,t=e.audioTracks,t=void 0===t?[]:t,e=e.levels,e=void 0===e?[]:e;t.forEach(function(e){var t=ee(e);t&&(_.context.keyid[e.url]=t)}),e.forEach(function(e){var t=ee(e);t&&(_.context.keyid[e.url]=t)})},_}var $=/keyid:\/\/([0-9a-zA-Z.]+).m3u8/g,Z="EXT-QQHLS-STREAM-KEYID";function ee(e){var e=e.tags;return e?null==(e=e.find(function(e){return e[0]===Z}))?void 0:e[1]:null}function te(){var e=h.cookieTool.get("luin")||h.cookieTool.get("uin");return e=e&&e.replace(/\D/g,"").replace(/^0+/,"")}var ne;function l(e){return h.jsonTool.safelyStringify(e).replace(/,/g,"\\,")}function a(e,t){return void 0===t&&(t=!1),isNaN(e)||!isFinite(e)?0:t?Math.round(+e):+e}(_=ne=ne||{})[_.none=0]="none",_[_.wx=3]="wx",_[_.qq=1]="qq";var s,re="zae00003007",oe="2345779398",ie="zbb00003101",ae="3917576196",se={iQQ:"",sid:g.COMMON_DATA_KEY.vid,pid:g.COMMON_DATA_KEY.livepid,playno:g.COMMON_DATA_KEY.flowid,guid:g.COMMON_DATA_KEY.guid,ctime:"",sdtfrom:g.COMMON_DATA_KEY.sdtfrom,surl:"",sref:"",flashver:"",fplayerver:g.COMMON_DATA_KEY.playerver,P2PVer:"",vurl:"",tpay:"",cpay:"",ptag:"",adid:"",playtime:"",error_code:"",drm:g.COMMON_DATA_KEY.drmtype,rest_preview_cnt:"",hc_main_login:g.COMMON_DATA_KEY.hc_main_login,hc_openid:g.COMMON_DATA_KEY.hc_openid,hc_vuserid:g.COMMON_DATA_KEY.hc_vuserid,hc_appid:g.COMMON_DATA_KEY.hc_appid,extrainfo:"",platform:g.COMMON_DATA_KEY.platform},_=(s=g.BaseReporter,A.__extends(u,s),Object.defineProperty(u.prototype,"reportHeader",{get:function(){var e,t=this.config.paramsKey,t=void 0===t?{}:t,n=this.player.getCommonKv;return{attaid:this.config.id,token:this.config.token,iQQ:n(t.iQQ)||te(),sid:n(t.sid)||"",pid:n(t.pid)||"",playno:n(t.playno),guid:n(t.guid)||"",ctime:h.commonTool.dateFormat(void 0,void 0),sdtfrom:n(t.sdtfrom)||"",surl:n(t.surl)||location.href,sref:n(t.sref)||document.referrer,flashver:n(t.flashver)||"",fplayerver:n(t.fplayerver)||"",P2PVer:n(t.P2PVer)||"",vurl:n(t.vurl)||(null==(e=this.player.currentVideoInfo)?void 0:e.loadingUrl),tpay:n(t.tpay)||0,cpay:n(t.cpay)||0,ptag:n(t.ptag)||"",adid:n(t.adid)||"",playtime:n(t.playtime)||0,error_code:n(t.error_code)||0,rest_preview_cnt:n(t.rest_preview_cnt)||-1,hc_main_login:n(t.hc_main_login)||"",hc_openid:n(t.hc_openid)||"",hc_vuserid:n(t.hc_vuserid)||"",hc_appid:n(t.hc_appid)||"",extrainfo:n(t.extrainfo)||"",platform:n(t.platform)||"",playertype:1,drm:n(t.drm)||0,kernel:this.player.kernelName}},enumerable:!1,configurable:!0}),u.prototype.destroy=function(){s.prototype.destroy.call(this),this.step5Timer&&(clearInterval(this.step5Timer),this.step5Timer=null)},u.prototype.reportAd=function(){this.step7()},u.prototype.report=function(e){this.started&&s.prototype.report.call(this,e)},u.pluginName="live-flow-reporter",u);function u(e,t,n){var r=s.call(this,e,t,n)||this,t=(r.FLOW_DATA_KEY="",r.REPORT_URL="//h.trace.qq.com/bosskv?",r.step5Timer=null,r.started=!1,r.setEvtHandler=function(){r.msg.on(g.H5_EXT_EVENT.DATASET_STATE_UPDATE,r.onStateChange)},r.onStateChange=function(e){var t,e=e.data,n=e.key;(t={})[g.DATA_STATE.LOAD_END]=r.step6,t[g.DATA_STATE.SET_LEVEL_START]=r.step8,t[g.DATA_STATE.GET_INFO_END]=r.step4,t[g.DATA_STATE.SESSION_END]=r.onEnd,t[g.DATA_STATE.SESSION_START]=r.start;t[n]&&t[n](e)},r.start=function(){r.started=!0,r.step3()},r.step3=function(){r.report({step:"3",val:0,val1:0,val2:0}),r.step5Timer=setInterval(function(){r.step5()},6e4)},r.step4=function(e){var t=e.newVal,e=e.startEvent,t={val:(void 0===t?{}:t).ftime-(void 0===e?{}:e).ftime,val1:0,val2:0};r.reportedEvt.step4||(r.reportedEvt.step4=!0,r.report(A.__assign({step:"4"},t))),r.report(A.__assign({step:"1100"},t))},r.step5=function(){r.report({step:"5",val:6e4,val1:0,val2:0})},r.step6=function(e){var t=e.newVal,e=e.startEvent,t={step:"6",val:(void 0===t?{}:t).ftime-(void 0===e?{}:e).ftime,val1:r.reportedEvt.step7?1:0,val2:0};r.report(t)},r.step7=function(){r.report({step:"7",val:0,val1:0,val2:0})},r.step8=function(){r.report({step:"8",val:0,val1:0,val2:0})},r.onEnd=function(){r.step5Timer&&(clearInterval(r.step5Timer),r.step5Timer=null),r.reportedEvt={}},e.config.liveFlowReporterConfig);return r.config=A.__assign({paramsKey:A.__assign(A.__assign({},se),(null==t?void 0:t.paramsKey)||{}),onBeforeReport:t.onBeforeReport,forceImage:t.forceImage},h.uaTool.mobile?{id:ie,token:ae}:{id:re,token:oe}),r.setEvtHandler(),r}var _e,d,le={progid:"",playno:g.COMMON_DATA_KEY.flowid,guid:g.COMMON_DATA_KEY.guid,sip:"",iqq:"",hh_ua:g.COMMON_DATA_KEY.ua,cdn:"",sdtfrom:g.COMMON_DATA_KEY.sdtfrom,loadingtime:"",blocktime:"",blockcount:"",prdlength:"",platform:g.COMMON_DATA_KEY.platform,errorcode:"",dsip:"",durl:"",firstreport:"",sUrl:g.COMMON_DATA_KEY.url,sRef:g.COMMON_DATA_KEY.referrer,fplayerver:g.COMMON_DATA_KEY.playerver,livepid:g.COMMON_DATA_KEY.livepid,viewid:"",seq:"",cmd:"",fullecode:"",live_type:"",geturltime:"",playtime:"",ispay:"",isuserpay:"",switch:"",lookback:"",nettype:"",freetype:"",https:"",downspeed:"",vip_type:"",playertype:"",pvid:"",login_type:"",open_id:g.COMMON_DATA_KEY.hc_openid,live_delay:"",use_p2p:g.COMMON_DATA_KEY.p2p,p2p_play:"",p2pver:g.COMMON_DATA_KEY.p2pver},ce="0AND0F8T5N4N7QT0",ue="0DOU0M38AT4C4UVD",p=(_e=g.BaseReporter,A.__extends(f,_e),Object.defineProperty(f.prototype,"reportHeader",{get:function(){var e=this.player,t=this.keyMapping,n=this.cachedVideoInfo,r=e.currentVideoInfo,r=(null==r?void 0:r.loadingUrl)||"",o=this.getAuthInfo(),i=o.pvid,o=o.loginType;return{progid:n.liveSid||0,playno:e.getCommonKv(t.playno)||"",guid:e.getCommonKv(t.guid)||"",sip:e.getCommonKv(t.sip)||"0.0.0.0",iqq:e.getCommonKv(t.iqq)||0,hh_ua:e.getCommonKv(t.hh_ua)||"",cdn:n.cdnName||"",sdtfrom:e.getCommonKv(t.sdtfrom)||0,loadingtime:this.loadCost,blocktime:this.bufferDuration,blockcount:this.bufferCount,prdlength:0,platform:e.getCommonKv(t.platform),errorcode:this.errCode,dsip:"0.0.0.0",durl:r,firstreport:+!this.reported,sUrl:e.getCommonKv(t.sUrl)||"",sRef:e.getCommonKv(t.sRef)||"",fplayerver:e.getCommonKv(t.fplayerver)||"0.0.0",livepid:e.getCommonKv(t.livepid)||0,viewid:n.liveChid||0,seq:this.seq,cmd:0,fullecode:this.errCode,live_type:n.liveType,geturltime:this.redirectCost,playtime:n.previewLength||-1,ispay:n.ispay||0,isuserpay:n.isuserpay||0,switch:"",lookback:this.isInPlayback,nettype:0,freetype:0,https:+(0===r.indexOf("https://")),downspeed:0,vip_type:e.getCommonKv(t.vip_type)||0,playertype:e.getCommonKv(t.playertype)||0,pvid:i||0,login_type:o,open_id:e.getCommonKv(t.open_id)||"",live_delay:this.delay,use_p2p:e.getCommonKv(t.use_p2p)||0,p2p_play:0,p2pver:e.getCommonKv(t.p2pver)||""}},enumerable:!1,configurable:!0}),f.prototype.report=function(e){!this.player.getCommonKv(g.COMMON_DATA_KEY.vid)||h.uaTool.spider||(_e.prototype.report.call(this,A.__assign(A.__assign({},e),{stepname:de})),this.seq+=1,this.reported=!0)},f.prototype.getAuthInfo=function(){var e=this.player;return{pvid:h.cookieTool.get("pgv_pvid"),loginType:ne[e.getCommonKv(g.COMMON_DATA_KEY.hc_main_login)||"none"]}},f.prototype.getVideoInfo=function(e){var e=e.data.resData,t=0;1===e.stream&&(t|=16),2===e.vcode&&(t|=4),this.cachedVideoInfo={liveChid:e.livechid,liveSid:e.livesid,ispay:e.ispay,isuserpay:e.isuserpay,previewLength:e.playtime,cdnName:e.cdn_name,liveType:t},this.redirectCost=Date.now()-this.redirectStartTime},f.prototype.bindEventHandlers=function(){var e=this;this.msg.on(g.H5_EXT_EVENT.GETINFO_START,function(){e.redirectStartTime=Date.now()}),this.msg.on(g.H5_EXT_EVENT.GETINFO_OVER,this.getVideoInfo.bind(this)),this.msg.on(g.H5_EXT_EVENT.DATASET_STATE_UPDATE,this.onDataSetStateUpdate.bind(this)),this.player.on(g.H5_PLAY_EVENT.PLAY_SESSION_END,this.onSessionEnded.bind(this)),this.player.on(g.H5_PLAY_EVENT.VIDEO_SETLEVEL_START,this.onSetLevelStart.bind(this))},f.prototype.onDataSetStateUpdate=function(e){(t={})[g.DATA_STATE.BUFFER_END]=this.onBufferEnd,t[g.DATA_STATE.LOAD_END]=this.onLoaded,t[g.DATA_STATE.SET_LEVEL_END]=this.onSetLevelEnd;var t;t[e.data.key]&&t[e.data.key].call(this,e)},f.prototype.onLoaded=function(e){var e=e.data,t=e.newVal,e=e.startEvent,n=t.ftime,t=t.code,e=e.ftime;this.loadCost=n-e,this.errCode=t,this.report({cmd:t===g.ErrorCode.SUC?d.load:d.error}),this.startTick()},f.prototype.onBufferEnd=function(e){var e=e.data,t=e.newVal,e=e.startEvent,t=t.ftime,e=e.ftime;this.bufferDuration+=t-e,this.bufferCount+=1},f.prototype.onSetLevelStart=function(){this.lastSid=this.cachedVideoInfo.liveSid,this.tickImmediate()},f.prototype.onSetLevelEnd=function(e){var e=e.data,t=e.newVal,e=e.startEvent,n=t.ftime,t=t.code,e=e.ftime;t===g.ErrorCode.SUC&&(this.loadCost=n-e,this.report({cmd:d.load,switch:this.lastSid}),this.startTick())},f.prototype.onSessionEnded=function(e){e=e.data.code;this.errCode=e,this.tickImmediate(),this.clearSessionData()},f.prototype.tick=function(){var e=this.errCode,t=this.player,n=this.currentPeriodStartTime;t.currentVideoInfo&&(this.delay=t.currentVideoInfo.currentDelay||0),this.report({cmd:e===g.ErrorCode.SUC?d.period:d.error,fullecode:e,prdlength:Date.now()-n}),this.onTickEnd()},f.prototype.clearTick=function(){this.periodTickTimer&&(window.clearTimeout(this.periodTickTimer),this.periodTickTimer=null)},f.prototype.onTickEnd=function(){this.bufferCount=0,this.bufferDuration=0,this.currentPeriodStartTime=Date.now()},f.prototype.tickImmediate=function(){this.clearTick(),this.tick()},f.prototype.startTick=function(){this.periodTickTimer||(this.currentPeriodStartTime=Date.now(),this.periodTickTimer=window.setInterval(this.tick.bind(this),pe))},f.prototype.clearSessionData=function(){this.redirectCost=0,this.redirectStartTime=0,this.currentPeriodStartTime=0,this.cachedVideoInfo=fe(),this.loadCost=0,this.reported=!1,this.seq=0,this.delay=0,this.errCode=g.ErrorCode.SUC},f.pluginName="live-fly-reporter",f);function f(e,t,n){t=_e.call(this,e,t,n)||this,t.periodTickTimer=0,t.currentPeriodStartTime=0,t.isInPlayback=0,t.lastSid=0,t.loadCost=0,t.redirectCost=0,t.bufferCount=0,t.redirectStartTime=0,t.bufferDuration=0,t.reported=!1,t.delay=0,t.seq=0,t.errCode=g.ErrorCode.SUC,t.keyMapping=A.__assign(A.__assign({},le),null==(n=e.config.liveFlyReporterConfig)?void 0:n.paramsKey),e=null==(n=e.config.liveFlyReporterConfig)?void 0:n.isOversea,n={appKey:e?ce:ue,isOversea:e};return t.REPORT_KEY=n.appKey,t.bindEventHandlers(),g.BeaconRequest.register(n),t.reporter=g.BeaconRequest.report,t.cachedVideoInfo=fe(),t}(m=d=d||{})[m.load=205]="load",m[m.error=150]="error",m[m.period=263]="period";var E,de="boss_cmd_player_hit_tap_process",pe=6e4,fe=function(){return{liveChid:0,liveSid:0,liveType:0,ispay:0,isuserpay:0,previewLength:0,cdnName:""}},Ee=((m={12e4:3e4,12e5:6e4})[1/0]=3e5,m),he={uin:"",vid:g.COMMON_DATA_KEY.vid,coverid:g.COMMON_DATA_KEY.cid,pid:g.COMMON_DATA_KEY.flowid,guid:g.COMMON_DATA_KEY.guid,cmid:g.COMMON_DATA_KEY.guid,unid:"",vt:g.COMMON_DATA_KEY.cdnid,type:"",bi:g.COMMON_DATA_KEY.duration,bt:"",version:g.COMMON_DATA_KEY.playerver,platform:g.COMMON_DATA_KEY.platform,format:g.COMMON_DATA_KEY.fmt,defn:g.COMMON_DATA_KEY.currentDefn,ptag:"",isvip:g.COMMON_DATA_KEY.vip,tpid:"",pversion:"",hc_uin:"",hc_main_login:g.COMMON_DATA_KEY.hc_main_login,hc_vuserid:g.COMMON_DATA_KEY.hc_vuserid,hc_openid:g.COMMON_DATA_KEY.hc_openid,hc_appid:g.COMMON_DATA_KEY.hc_appid,hc_access_token:g.COMMON_DATA_KEY.hc_access_token,hc_pvid:"",hc_ssid:"",hc_qq:"",ua:g.COMMON_DATA_KEY.ua,hh_ua:g.COMMON_DATA_KEY.ua,ckey:"",ckeyVer:"",iformat:g.COMMON_DATA_KEY.fmt,hh_ref:g.COMMON_DATA_KEY.topUrl,vurl:"",v_idx:"",rcd_info:"",extrainfo:"",bucket_id:g.COMMON_DATA_KEY.testid,drm:g.COMMON_DATA_KEY.drm,pay_type:"",pcplatform:"",drmtype:g.COMMON_DATA_KEY.drmtype,insert_duration_ms:"",insert_flowid:"",vip_token:"",common_rcd_info:"",common_ext_info:"",common_json_info:"",qimei36:"",format_ua:"",triggerplay:"",tpay:"",cpay:"",dltype:g.COMMON_DATA_KEY.dltype,cginame:"",vtype:"",p2pVer:g.COMMON_DATA_KEY.p2pver,playertype:g.COMMON_DATA_KEY.playertype},m=(E=g.BaseReporter,A.__extends(y,E),Object.defineProperty(y.prototype,"reportHeader",{get:function(){var e=this.player,t=e.getCommonKv,n=e.dataset,r=e.currentVideoInfoIdx,e=e.videoSize,e=void 0===e?{width:0,height:0}:e,o=e.width,e=e.height,i=this.config.paramsKey,n=n.visualStats,a=n.isPlayerInViewport,n=n.isTabFocused,o={uin:t(i.uin)||te(),vid:t(i.vid)||"",coverid:t(i.coverid)||"",pid:t(i.pid)||"",guid:t(i.guid)||"",cmid:t(i.guid)||"",unid:t(i.unid)||"",vt:t(i.vt)||"",type:t(i.type)||"",bi:t(i.bi)||0,bt:t(i.bt)||0,val:0,val1:0,val2:0,version:t(i.version)||"",platform:t(i.platform)||"",format:t(i.format)||"",defn:t(i.defn)||"",ptag:t(i.ptag)||function(){var e,t,n=document.location.toString().toLowerCase();if(!(t=["ptag","adtag","pgv_ref"].find(function(e){return h.urlTool.getUrlParamByKey(n,e)}))){try{t=sessionStorage.getItem("ptag")}catch(e){}t||(e=h.urlTool.getDomainOfURL(document.referrer),t=(t=["v.qq.com","film.qq.com","m.v.qq.com"].includes(e)?t:e.replace(/\./g,"_"))||h.cookieTool.get("ptag"))}return t}(),isvip:t(i.isvip)||-1,tpid:t(i.tpid)||"",pversion:"thumbplayer",hc_uin:t(i.hc_uin)||te(),hc_main_login:t(i.hc_main_login)||"",hc_vuserid:t(i.hc_vuserid)||"",hc_openid:t(i.hc_openid)||"",hc_appid:t(i.hc_appid)||"",hc_pvid:t(i.hc_pvid)||h.cookieTool.get("pgv_pvid"),hc_ssid:t(i.hc_ssid)||"",hc_qq:t(i.hc_qq)||"",hc_access_token:t(i.hc_access_token)||"",ua:t(i.ua)||"",hh_ua:t(i.hh_ua)||"",ckey:t(i.ckey)||"",iformat:t(i.iformat)||"",hh_ref:t(i.hh_ref)||"",rcd_info:t(i.rcd_info)||"",extrainfo:t(i.extrainfo)||"",bucket_id:t(i.bucket_id)||"",pay_type:t(i.pay_type)||0,idx:r||0,diagonal:Math.round(Math.sqrt(Math.pow(o,2)+Math.pow(e,2))),vurl:(null==(r=this.player.currentVideoInfo)?void 0:r.loadingUrl)||t(i.vurl),v_idx:this.player.currentVideoInfoIdx||0,ctime:h.commonTool.dateFormat(void 0,void 0),url:document.URL,attaid:this.config.id,token:this.config.token,isfocustab:n,isvisible:a,format_ua:t(i.format_ua)||function(){var e="other",t=h.uaTool.browser,n=h.uaTool.os;t.qqlive&&(n.iphone?e="iphone_qqlive":n.android&&(e="aphone_qqlive"));return e}(),pcplatform:t(i.pcplatform)||"web",drm:t(i.drm)?1:0,insert_flowid:this.step8Seq,vip_token:t(i.vip_token)||0,kernel:this.player.kernelName||"",drmtype:t(i.drmtype)||0};return this.config.id===ye&&(o.common_rcd_info=t(i.common_rcd_info)||"",o.common_ext_info=t(i.common_ext_info)||"",o.common_json_info=t(i.common_json_info)||"",o.qimei36=t(i.qimei36)||""),this.config.id===ge&&(o.triggerplay=t(i.triggerplay)||1,o.tpay=t(i.tpay)||0,o.cpay=t(i.cpay)||0,o.dltype=t(i.dltype)||0,o.cginame=t(i.cginame)||"",o.vtype=t(i.vtype)||"",o.ckeyVer=t(i.ckeyVer)||"",o.p2pVer=t(i.p2pVer)||"",o.playertype=t(i.playertype)||""),o},enumerable:!1,configurable:!0}),y.prototype.destroy=function(){this.stopSaveData(),document.removeEventListener("visibilitychange",this.onVisibilityChange),E.prototype.destroy.call(this)},y.prototype.report=function(e){if(this.player.getCommonKv(g.COMMON_DATA_KEY.vid))return"function"==typeof this.config.onBeforeReport?E.prototype.report.call(this,this.config.onBeforeReport(e)):E.prototype.report.call(this,e)},y.pluginName="vod-flow-reporter",y);function y(e,t,n){var i=E.call(this,e,t,n)||this,t=(i.FLOW_DATA_KEY="__thumbplayer_vod_flow_report__",i.UNSAFE_KEY=["hh_ref","vurl"],i.REPORT_URL="//h.trace.qq.com/bosskv?",i.startPlayTime=0,i.actualPlayTime=0,i.lastPlayTimeStamp=0,i.saveInterval=0,i.lastStep8PlayTime=0,i.step8Seq=0,i.setEvtHandler=function(){i.msg.on(g.H5_EXT_EVENT.DATASET_STATE_UPDATE,i.onDataStateChange),i.player.on(g.H5_PLAY_EVENT.VIDEO_PLAYING,i.onFirstPlay),i.player.on(g.H5_PLAY_EVENT.AD_PLAYING,i.onAdPlaying),i.player.on(g.H5_PLAY_EVENT.VIDEO_TIMEUPDATE,i.onVideoTimeUpdate),i.player.on(g.PLAY_EVENT.STATE_CHANGE,i.onCoreStateChange),document.addEventListener("visibilitychange",i.onVisibilityChange)},i.onVisibilityChange=function(){"hidden"===document.visibilityState?i.saveData():i.player&&i.removeFromLS(i.player.getCommonKv(g.COMMON_DATA_KEY.flowid))},i.stopSaveData=function(){i.saveInterval&&(window.clearInterval(i.saveInterval),i.saveInterval=0)},i.onAdPlaying=function(){i.step7()},i.onFirstPlay=function(e){var t=Date.now();e.data.isFirst&&(i.startPlayTime=t)},i.onCoreStateChange=function(e){var e=e.data,t=e.new,e=e.old,n=Date.now();t===g.VIDEO_STATE.PLAYING?i.lastPlayTimeStamp=n:e===g.VIDEO_STATE.PLAYING&&i.lastPlayTimeStamp&&(i.actualPlayTime+=n-i.lastPlayTimeStamp)},i.onVideoTimeUpdate=function(){i.step8()},i.saveData=function(){var e,t=i.player.getCommonKv(g.COMMON_DATA_KEY.flowid);t&&!i.reportedEvt.step5&&(e=Date.now(),e={step:"5",val:a(i.startPlayTime?e-i.startPlayTime:0,!0),val1:2,bi:a(.001*i.actualPlayTime,!0),bt:a(i.player.getCommonKv(g.COMMON_DATA_KEY.duration),!0),heartbeat:e},i.saveToLS(t,A.__assign(A.__assign({},i.reportHeader),e)))},i.onDataStateChange=function(e){var t,e=e.data,n=e.key;(t={})[g.DATA_STATE.GET_INFO_END]=i.step4,t[g.DATA_STATE.LOAD_END]=i.step6,t[g.DATA_STATE.SESSION_END]=i.step5,t[g.DATA_STATE.SESSION_START]=i.onSessionStart;t[n]&&t[n](e)},i.onSessionStart=function(){i.actualPlayTime=0,i.lastPlayTimeStamp=0,i.startPlayTime=0,i.reportedEvt={},i.reportPrev(),i.step3(),i.stopSaveData(),i.saveInterval=window.setInterval(i.saveData,5e3)},i.step3=function(){var e=i.player.currentVideoInfoIdx;i.report({step:"3",val:0===e?1:2})},i.step7=function(){i.reportedEvt.step7||(i.reportedEvt.step7=!0,i.report({step:"7",val:0,val1:0}))},i.step4=function(){var e;i.reportedEvt.step4||(i.reportedEvt.step4=!0,e={step:"4",val:1,val1:1,bi:g.H5Player.pluginExists(g.AdPluginName)?2:1},i.report(e))},i.step5=function(e){var t;i.reportedEvt.step5||(i.reportedEvt.step5=!0,e=e.newVal.code,t=i.startPlayTime?Date.now()-i.startPlayTime:0,t={step:"5",val:Math.round(t),val1:e!==g.ErrorCode.SUC?2:1,val2:1,bi:a(.001*i.actualPlayTime,!0),bt:a(i.player.getCommonKv(g.COMMON_DATA_KEY.duration),!0)},i.report(t),i.step8(!0),i.removeFromLS(i.player.getCommonKv(g.COMMON_DATA_KEY.flowid)),i.stopSaveData())},i.step6=function(e){var t;i.reportedEvt.step6||(i.reportedEvt.step6=!0,i.startPlayTime=Date.now(),t=e.startEvent,e={step:"6",val:a(e.newVal.ftime-(null==t?void 0:t.ftime)),val1:i.reportedEvt.step7?0:1,val2:1,bi:0,bt:a(i.player.getCommonKv(g.COMMON_DATA_KEY.duration),!0)},i.report(e))},i.step8=function(e){var t,n,r,o;void 0===e&&(e=!1),i.lastPlayTimeStamp&&(o=(t=Date.now())-i.lastPlayTimeStamp,n=e?i.actualPlayTime:i.actualPlayTime+o,o=+Object.keys(Ee).find(function(e){return n<+e}),r=n-i.lastStep8PlayTime,e||Ee[o]<=r)&&(o={step:"8",val:a(t-i.startPlayTime),val1:e?1:4,bi:a(.001*n,!0),bt:a(i.player.getCommonKv(g.COMMON_DATA_KEY.duration),!0),insert_duration_ms:r},i.lastStep8PlayTime=n,i.step8Seq+=1,i.report(o))},e.config.vodFlowReporterConfig);return null!=t&&t.releaseDelay&&(i.RELEASE_DELAY=t.releaseDelay),i.config=A.__assign({paramsKey:A.__assign(A.__assign({},he),(null==t?void 0:t.paramsKey)||{}),onBeforeReport:t.onBeforeReport,forceImage:t.forceImage},h.uaTool.mobile?{id:ye,token:ve}:{id:ge,token:me}),i.setEvtHandler(),i.reportPrev(),i}var Ae,ge="z4900004298",me="4973349567",ye="z3000002865",ve="4135796792",be=(Ae=g.BaseReporter,A.__extends(v,Ae),Object.defineProperty(v.prototype,"reportHeader",{get:function(){var n=this,e=Object.keys(this.keyMapping).reduce(function(e,t){return n.keyMapping[t]&&(e[t]=n.player.getCommonKv(n.keyMapping[t])||""),e},{});return A.__assign(A.__assign(A.__assign(A.__assign(A.__assign({},e),this.videoInfoParams),this.firstLoadVideoInfoParam),this.getAuthInfo()),{downloadkit:+!!this.player.config.enableP2P,seq:this.seq,stepname:Oe})},enumerable:!1,configurable:!0}),v.prototype.report=function(e){!this.player.getCommonKv(g.COMMON_DATA_KEY.vid)||h.uaTool.spider||(Ae.prototype.report.call(this,e),this.seq+=1)},Object.defineProperty(v.prototype,"currentUrlInfo",{get:function(){var e,t,n;return this.player.currentVideoInfo&&this.rawGetinfoData?(e=(null==(e=null==(e=null==(e=this.rawGetinfoData.vl)?void 0:e.vi[0])?void 0:e.ul)?void 0:e.ui)||[],t=h.urlTool.getDomainOfURL(this.player.currentVideoInfo.loadingUrl),[n=null==e?void 0:e.findIndex(function(e){return h.urlTool.getDomainOfURL(e.url)===t}),e[n]]):[-1,null]},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"currentFmtId",{get:function(){var e;return this.rawGetinfoData&&null!=(e=null==(e=null==(e=null==(e=this.rawGetinfoData.fl)?void 0:e.fi)?void 0:e.find(function(e){return e.sl}))?void 0:e.id)?e:0},enumerable:!1,configurable:!0}),v.prototype.bindEventHandlers=function(){var e=this;this.msg.on(g.H5_EXT_EVENT.DATASET_STATE_UPDATE,this.onDataSetStateUpdate),this.msg.on(g.H5_EXT_EVENT.GETINFO_OVER,this.step15.bind(this)),this.msg.on(g.H5_EXT_EVENT.GETINFO_START,function(){e.getinfoStartTime=Date.now()})},v.prototype.step5=function(e){var e=e.data.newVal,t=e.ftime,e=e.ext.stime;this.report({step:"5",data:l({stime:e,etime:t,code:g.ErrorCode.SUC})})},v.prototype.step10=function(){},v.prototype.step15=function(e){var e=e.data,t=e.parseData,e=e.resData,n=t||{},r=n.definitionList,r=void 0===r?[]:r,n=n.vitem,n=void 0===n?{}:n,o=n.fc,o=void 0===o?0:o,i=n.br,i=void 0===i?0:i,a=n.vst,a=void 0===a?0:a,n=n.type,n=void 0===n?0:n,r=null!=(r=null==(r=null==r?void 0:r.find(function(e){return e.sl}))?void 0:r.id)?r:-1;this.videoInfoParams={dltype:null==e?void 0:e.dltype,duration:null==t?void 0:t.duration,type:n,clip:o,status:a},this.firstLoadVideoInfoParam||(this.firstLoadVideoInfoParam={fmt:r,rate:i}),this.rawGetinfoData=e,this.report({step:"15",data:l({stime:this.getinfoStartTime,etime:Date.now(),code:"0."+e.em,ip:e.ip})})},v.prototype.step25=function(){},v.prototype.step30=function(e){var e=e.data,t=e.newVal,e=e.startEvent,n=e.ftime,e=e.currentUrl,r=t.ftime,o=this.currentUrlInfo,i=o[0],o=o[1],o=null==o?void 0:o.vt;this.report({step:"30",data:l({stime:n,etime:r,vt:o,urlindex:i,reason:"",code:"0."+t.code,url:e})})},v.prototype.step31=function(e){var e=e.data,t=e.newVal,e=e.startEvent,n=e.ftime,e=e.ext,r=t.ftime,e=e.mode,o=this.currentUrlInfo,i=o[0],o=o[1],o=null==o?void 0:o.vt;this.report({step:"31",data:l({stime:e===h.SET_LEVEL_MODE.SMOOTH?r:n,etime:r,vt:o,urlindex:i,code:"0."+t.code})})},v.prototype.step32=function(e){e=e.data.newVal.ftime;this.report({step:"32",data:l({stime:e,etime:e,code:g.ErrorCode.SUC})})},v.prototype.step33=function(){},v.prototype.recordStep35=function(e){var e=e.data,t=e.newVal,e=e.startEvent,n=e.ftime,r=e.playbackRate,e=e.playtime,o=t.ftime,i=t.currentUrl;this.bufferReportCached.push({stime:n,etime:o,ptime:e,format:this.currentFmtId,url:i,scene:1!==r?2:1,reason:0,code:"0."+t.code})},v.prototype.recordStep40=function(e){var e=e.data,t=e.newVal,e=e.startEvent,n=e.ftime,e=e.playtime,r=t.ftime,o=t.playtime;this.seekReportCached.push({lstime:n,letime:r,pstime:e,petime:o,format:this.currentFmtId,code:"0."+t.code})},v.prototype.step45=function(e){var e=e.data,t=e.newVal,e=e.startEvent,n=e.ftime,r=e.ext,e=e.playtime,o=t.ftime,i=t.playtime,a=t.currentUrl,r=r.mode,s=this.currentUrlInfo,_=s[0],s=s[1],s=null==s?void 0:s.vt;this.report({step:"45",data:l({stime:r===h.SET_LEVEL_MODE.SMOOTH?o:n,etime:o,pstime:e,petime:i,auto:1,format:this.currentFmtId,url:a,vt:s,urlindex:_,code:"0."+t.code})})},v.prototype.step46=function(){},v.prototype.step47=function(e){var e=e.data.newVal,t=e.currentUrl,n=e.ftime,r=this.currentUrlInfo,o=r[0],r=r[1],r=null==r?void 0:r.vt;this.report({step:"47",data:l({url:t,vt:r,urlindex:o,cdnip:"",stime:n,etime:n,code:"0."+e.code})})},v.prototype.step50=function(e){var t,e=e.data.newVal,n=e.ftime,e=e.code,r=this.player.dataset.getStats().playDuration;this.report({step:"50",data:l({etime:n,playduration:r,code:"0."+(t=e,we.find(function(e){return t.startsWith(e)})?g.ErrorCode.SUC:t)})}),this.reportStep35and40(),this.cleanUp()},v.prototype.reportStep35and40=function(){var e,t=this.bufferReportCached,n=this.seekReportCached;t.length&&(e=(t=t.reduce(function(e,t){return t.etime-t.stime<=De?e:[e[0]+1,e[1]+(t.etime-t.stime)]},[0,0]))[0],t=t[1],this.report({step:"35",data:l({tcount:e,tduration:t,val:this.bufferReportCached.slice(0,Ie)})})),n.length&&(e=(t=n.reduce(function(e,t){return t.letime-t.lstime<=De?[e[0]+1,e[1],e[2]]:[e[0]+1,e[1]+1,e[2]+(t.letime-t.lstime)]},[0,0,0]))[0],n=t[1],t=t[2],this.report({step:"40",data:l({tcount:e,tbcount:n,tbduration:t,val:this.seekReportCached.slice(0,Pe)})})),this.bufferReportCached=[],this.seekReportCached=[]},v.prototype.cleanUp=function(){this.bufferReportCached=[],this.seekReportCached=[],this.rawGetinfoData=null,this.firstLoadVideoInfoParam=null,this.videoInfoParams=null,this.seq=0,this.getinfoStartTime=0},v.prototype.runOnce=function(r,o){var i=this,a="";return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=i.player.getCommonKv(g.COMMON_DATA_KEY.flowid);a!==n&&(a=n,r.apply(o,e))}},v.prototype.getAuthInfo=function(){var e=this.player;return{loginid:e.getCommonKv(g.COMMON_DATA_KEY.hc_openid)||"",loginex:e.getCommonKv(g.COMMON_DATA_KEY.hc_vuserid)||"",logintype:ne[e.getCommonKv(g.COMMON_DATA_KEY.hc_main_login)||"none"],vip:+!!e.getCommonKv(g.COMMON_DATA_KEY.vip)}},v.pluginName="vod-fly-reporter",v);function v(e,t,n){var r=Ae.call(this,e,t,n)||this,t=(r.seq=0,r.bufferReportCached=[],r.seekReportCached=[],r.onDataSetStateUpdate=function(e){var t,n=e.data.key;(t={})[g.DATA_STATE.INIT]=r.runOnce(r.step5,r),t[g.DATA_STATE.LOAD_END]=r.runOnce(r.step30,r),t[g.DATA_STATE.SET_LEVEL_END]=function(){r.step45(e),r.step31(e)},t[g.DATA_STATE.SET_LEVEL_START]=function(){r.reportStep35and40()},t[g.DATA_STATE.RETRY_PLAY]=r.step47,t[g.DATA_STATE.BUFFER_END]=r.recordStep35,t[g.DATA_STATE.SEEK_END]=r.recordStep40,t[g.DATA_STATE.FIRST_PLAY]=r.runOnce(r.step32,r),t[g.DATA_STATE.SESSION_END]=r.runOnce(r.step50,r);t[n]&&t[n].call(r,e)},r.keyMapping=A.__assign(A.__assign({},Ce),null==(t=e.config.vodFlyReporterConfig)?void 0:t.paramsKey),null==(n=e.config.vodFlyReporterConfig)?void 0:n.isOversea),e={appKey:t?ue:ce,isOversea:t};return r.REPORT_KEY=e.appKey,r.bindEventHandlers(),g.BeaconRequest.register(e),r.reporter=g.BeaconRequest.report,r}var Te,Ce={stepname:"",seq:"",hc_main_login:g.COMMON_DATA_KEY.hc_main_login,hc_vuserid:g.COMMON_DATA_KEY.hc_vuserid,hc_openid:g.COMMON_DATA_KEY.hc_openid,hc_appid:g.COMMON_DATA_KEY.hc_appid,loginid:"",loginex:"",logintype:"",guid:g.COMMON_DATA_KEY.guid,longitude:"",latitude:"",vip:"",online:"",p2p:g.COMMON_DATA_KEY.p2p,downloadkit:"",resolution:g.COMMON_DATA_KEY.resolution,testid:g.COMMON_DATA_KEY.testid,osver:g.COMMON_DATA_KEY.osver,playerver:g.COMMON_DATA_KEY.playerver,playertype:g.COMMON_DATA_KEY.playertype,uip:g.COMMON_DATA_KEY.uip,confid:g.COMMON_DATA_KEY.confid,cdnip:g.COMMON_DATA_KEY.cdnip,cdnid:g.COMMON_DATA_KEY.cdnid,cdnuip:g.COMMON_DATA_KEY.uip,freetype:"",sstrength:"",network:"",speed:"",device:g.COMMON_DATA_KEY.device,appver:g.COMMON_DATA_KEY.appVer,p2pver:g.COMMON_DATA_KEY.p2pver,flowid:g.COMMON_DATA_KEY.flowid,platform:g.COMMON_DATA_KEY.platform,vid:g.COMMON_DATA_KEY.vid,url:g.COMMON_DATA_KEY.url,refer:g.COMMON_DATA_KEY.referrer,cid:g.COMMON_DATA_KEY.cid,ua:g.COMMON_DATA_KEY.ua,ptag:g.COMMON_DATA_KEY.ptag,dltype:"",fmt:"",rate:"",clip:"",status:"",type:"",duration:"",ext:"",drm:"",purevid:""},Ie=20,Pe=20,De=1200,Oe="boss_cmd_player_quality_feitian",we=[g.ErrorCode.GETINFO_SERVER_CODE_PREFIX+"083"];g.H5Player.registerPlugin(m.pluginName,m),g.H5Player.registerPlugin(_.pluginName,_),g.H5Player.registerPlugin(be.pluginName,be),g.H5Player.registerPlugin(p.pluginName,p),(M=Te=Te||{})[M.AUTO=0]="AUTO",M[M.FLV=1]="FLV",M[M.HLS=2]="HLS",(M=S=S||{})[M.XUEYUAN=4]="XUEYUAN",M[M.CHRISTMAS=5]="CHRISTMAS",M[M.VERIFY=50]="VERIFY",M[M.SPORTS=100]="SPORTS",M[M.MARK=200]="MARK";(M={0:["//infozb6.video.qq.com/?","//bkinfozb6.video.qq.com/?"]})[S.XUEYUAN]="//innerzb.video.qq.com/?",M[S.VERIFY]="//auth.zb.qq.com/?",M[S.MARK]="//infozb.pcg.com:8080/?";var b,T,C,Me,xe=M,Re="//test.zb.video.qq.com",I=((S=b=b||{}).playtime="live-getinfo:playtime",S.livesid="live-getinfo:livesid",S.isuserpay="live-getinfo:isuserpay",S.cpay="live-getinfo:cpay",S.restpreviewcnt="live-getinfo:resetpreviewcnt",new Map([["videoPlayError",{name:"setErrorView",params:{msg:"å¯¹ä¸èµ·ï¼è·åè§é¢ä¿¡æ¯éè¯¯~"}}],["areaLimit",{name:"setErrorView",params:{msg:"å¯¹ä¸èµ·ï¼æ¨æå¨åºåæ æ³è§çæ­¤è§é¢~"}}],["bandWidthLimit",{name:"setErrorView",params:{msg:"ææ¶æ æ³è§çæ­¤è§é¢ï¼è¯·æ¨ç¨ååè¯~"}}],["msgInterrupt",{name:"setErrorView",params:{msg:"å¯¹ä¸èµ·ï¼è§é¢ä¿¡æ¯ä¸­æ­äº~"}}],["msgInterrupt",{name:"setErrorView",params:{msg:"å¯¹ä¸èµ·ï¼è§é¢ä¿¡æ¯ä¸­æ­äº~"}}],["videoNotBegin",{name:"setErrorView",params:{hideRefresh:!0,hideCode:!0,msg:"æ¬æ¬¡ç´æ­æªå¼å§ï¼æ¬è¯·å³æ³¨ï¼"}}],["videoIsOver",{name:"setErrorView",params:{isOver:!0,hideRefresh:!0,hideCode:!0,msg:"æ¬æ¬¡ç´æ­å·²ç»æï¼æ¬è¯·å³æ³¨ï¼"}}],["numOfPeopleLimit",{name:"setQueueFullView"}],["mustLogin",{name:"setErrorView",params:{msg:"ç¼ºä¹ç¨æ·ç»å½ä¿¡æ¯"}}],["isNotInPlayList",{name:"setErrorView",params:{msg:"ç»å½ç¨æ·ä¸å¨ç½åå"}}],["getLoginInfoFailed",{name:"setErrorView",params:{msg:"è·åç»å½ä¿¡æ¯å¤±è´¥ï¼è¯·æ¨å°è¯éæ°ç»å½~"}}],["showPayTip",{name:"showPayTips",params:{cmd:1}}],["copyrightLimit",{name:"setErrorView",params:{msg:"ç±äºçææ¹è¦æ±ï¼æ­¤åå®¹æä¸æ¯ææ­æ¾"}}],["universalTip",{name:"setErrorView",params:{msg:"æ­æ¾éè¯¯ï¼è¯·ç¨ååè¯~"}}],["videoCannotFind",{name:"setErrorView",params:{msg:"å½åæ²¡ææ­£å¨ç´æ­çèç®~"}}],["notSptDrm",{name:"setErrorView",params:{msg:"ä¸ºä¿æ¤çæï¼æ¬åå®¹å·²å å¯ï¼æ­¤æµè§å¨æä¸æ¯æè§ç"}}]])),Se={1:"H264",2:"H265",4:"SDR",22:"DolbyVisionTs",23:"DolbyVisionFmp4"},Le=/.*\.?qq\.com/g.test(h.urlTool.getDomainOfURL(location.href)),Ne={COMMON:["//h5vv6.video.qq.com/getvinfo","//bkh5vv.video.qq.com/getvinfo","//av.video.qq.com/getvinfo"],TEST:"//testvv.video.qq.com/geth5info?"},ke=((M=T=T||{}).CKEY_8="8.1",M.CKEY_9="9.1",(S=C=C||{}).videoType="vod-getinfo:videoType",S.videoCharged="vod-getinfo:videoCharged",S.userPayType="vod-getinfo:userPayType",S.vipToken="vod-getinfo:vipToken",S.ckey="vod-getinfo:ckey",S.ckeyVersion="vod-getinfo:ckeyVersion",S.cginame="vod-getinfo:cginame",S.vurl="vod-getinfo:vurl",{1:"H264",2:"H265",3:"HDR10",4:"DolbyVision",5:"None(Audio Only)",6:"SDR+",7:"SDR",8:"T265",9:"IMax",10:"SFR_HDR(60FPS)",11:"SFR4X_HDR(120FPS)",12:"SFR3X_HDR(90FPS)",13:"AVS3",14:"AV1",15:"TIE_V2",16:"SFR_TIE_V2(60FPS)",17:"SFR3X_TIE_V2(90FPS)",18:"SFR4X_TIE_V2(120FPS)",19:"CUVA-HDR",20:"VVC(O266)",21:"O264",26:"VAV1"}),Be=((M={})[h.PLAY_MODE.VOD]=[m.pluginName,be.pluginName],M[h.PLAY_MODE.LIVE]=[_.pluginName,p.pluginName],M),Ve=(Me=e,A.__extends(P,Me),Object.defineProperty(P.prototype,"ready",{get:function(){return Promise.resolve(!0)},enumerable:!1,configurable:!0}),P.prototype.init=function(){this.mergePlayerConfig(),this.installReporter()},P.prototype.mergePlayerConfig=function(){var e,t={},n=this.player.config,r=n.type;r===h.PLAY_MODE.VOD&&(t.vodFlowReporterConfig=A.__assign(A.__assign({forceImage:!Le},null==n?void 0:n.vodFlowReporterConfig),{paramsKey:A.__assign({tpay:C.videoCharged,vtype:C.videoType,ckeyVer:C.ckeyVersion,pay_type:C.userPayType,vurl:C.vurl},null==(e=null==n?void 0:n.vodFlowReporterConfig)?void 0:e.paramsKey)})),r===h.PLAY_MODE.LIVE&&(t.liveQaReporterConfig=A.__assign(A.__assign({},null==n?void 0:n.liveQaReporterConfig),{paramsKey:A.__assign({sid:b.livesid,isuserpay:b.isuserpay,playtime:b.playtime},null==(e=null==n?void 0:n.liveQaReporterConfig)?void 0:e.paramsKey)}),t.liveFlowReporterConfig=A.__assign(A.__assign({forceImage:!Le},null==n?void 0:n.liveFlowReporterConfig),{paramsKey:A.__assign({sid:b.livesid,cpay:b.cpay,tpay:b.isuserpay,playtime:b.playtime,rest_preview_cnt:b.restpreviewcnt},null==(r=null==n?void 0:n.liveFlowReporterConfig)?void 0:r.paramsKey)})),Object.assign(this.player.config,t)},P.prototype.installReporter=function(){var e;this.player.config.type&&(e=Be[this.player.config.type],this.checkIfReporterExist(e)?this.warn("reporter already detected, skip install, probably due to <1.7.4 version of SuperPlayer"):this.player.createPlugins(e))},P.prototype.checkIfReporterExist=function(e){var t=this;return e.some(function(e){return!!t.player.plugins[e]})},P.moduleName="reporter-controller",P);function P(){return null!==Me&&Me.apply(this,arguments)||this}c.DRM_REQUEST_VALUE=void 0,(S=c.DRM_REQUEST_VALUE||(c.DRM_REQUEST_VALUE={}))[S.NONE=0]="NONE",S[S.FAIRPLAY=16]="FAIRPLAY",S[S.WIDEVINE=32]="WIDEVINE",S[S.CHACHA20=8]="CHACHA20",c.DRM_CODE_FROM_VINFO=void 0,(m=c.DRM_CODE_FROM_VINFO||(c.DRM_CODE_FROM_VINFO={}))[m.NONE=0]="NONE",m[m.FAIRPLAY=4]="FAIRPLAY",m[m.WIDEVINE=5]="WIDEVINE",m[m.CHACHA20=3]="CHACHA20";var Ke=c.DRM_REQUEST_VALUE.NONE;function Ue(r){return A.__awaiter(this,void 0,void 0,function(){var t,n;return A.__generator(this,function(e){switch(e.label){case 0:return void 0!==r?[2,r]:Ke?[2,Ke]:(t=c.DRM_REQUEST_VALUE.NONE,h.uaTool.mobile?[2,t]:(window.WebAssembly&&(t|=c.DRM_REQUEST_VALUE.CHACHA20),(n=h.uaTool.browser.chrome&&0<h.commonTool.compareVersion(h.uaTool.browser.version,"89.0"))?[4,h.videoTool.supportWidevine()]:[3,2]));case 1:n=e.sent(),e.label=2;case 2:return n?(t|=c.DRM_REQUEST_VALUE.WIDEVINE,Ke=t):h.uaTool.browser.safari&&h.videoTool.supportFairplay()&&(t|=c.DRM_REQUEST_VALUE.FAIRPLAY,Ke=t),[2,t]}})})}c.LOGIN_METHOD=void 0,(be=c.LOGIN_METHOD||(c.LOGIN_METHOD={})).QQ="qq",be.WX="wx",c.COOKIE_NAME=void 0,(_=c.COOKIE_NAME||(c.COOKIE_NAME={})).MAIN_LOGIN="main_login",_.GUID="video_guid",_.OPENID="openid",_.APPID="appid",_.VUSERID="vuserid",_.ACCESS_TOKEN="access_token",_.VUSESSION="vusession";var Fe="vqq_";function Ye(e,t){return h.cookieTool.get((t=void 0===t?!1:t)?"".concat(Fe).concat(e):e)}function Qe(e){var t=e.codec,n=e.dltype,e=e.drm,r=void 0;return t===h.CODEC.H265?h.videoTool.supportHevc()?1===n?r=g.KERNEL_NAME.ORIGIN:3!==n&&8!==n||(r=g.KERNEL_NAME.HLS_JS):r=g.KERNEL_NAME.WASM:1===n?r=g.KERNEL_NAME.ORIGIN:8===n&&(r=g.KERNEL_NAME.HLS_JS),e===c.DRM_CODE_FROM_VINFO.WIDEVINE?r=g.KERNEL_NAME.HLS_JS:e===c.DRM_CODE_FROM_VINFO.FAIRPLAY?r=g.KERNEL_NAME.ORIGIN:e===c.DRM_CODE_FROM_VINFO.CHACHA20&&t===h.CODEC.H264&&(r=g.KERNEL_NAME.HLS_JS),r}function D(a){return function(n,r){var o=-1;return i(0);function i(e){if(e<=o)return Promise.reject(new Error("next() called multiple times"));var t=a[o=e];if(!(t=e===a.length?r:t))return Promise.resolve(null);try{return Promise.resolve(t(n,i.bind(null,e+1)))}catch(e){return Promise.reject(e)}}}}qe.prototype.start=function(e,t,n){return h.netTool.jsonp(e,{query:t,timeout:n=void 0===n?qe.timeout:n,charset:"utf-8",name:"".concat(this._jsonpPrefix).concat(Math.floor(1e6*Math.random()))})},qe.timeout=6e3;var He=qe;function qe(e){this._jsonpPrefix=e}var We={path:"",retryCount:3,test:0,timeout:6e3,ckeyVer:T.CKEY_8};function je(e){var t;if("string"==typeof e)return(t=document.createElement("a")).href=e,"".concat(t.protocol,"//").concat(t.host).concat(t.pathname)}function Ge(){try{return window.self!==window.top}catch(e){return 1}}function ze(){return"https:"===location.protocol?1:0}function Xe(e){var e=e||10,t=(+new Date).toString();return t.length>e?t.substring(0,e):"00000000000".concat(t).slice(-1*e)}function Je(_,l){return A.__awaiter(void 0,void 0,void 0,function(){var t,n,r,o,i,a,s;return A.__generator(this,function(e){switch(e.label){case 0:return(t=_.resData,t=void 0===t?{}:t,n=_.player,i=_.isSetPlayerData,i=void 0===i||i,r=void 0===t.em?0:+t.em,o=+t.exem,s=((null==(s=t.vl)?void 0:s.vi)||[])[0],i&&n.setCommonKv(((a={})[g.COMMON_DATA_KEY.uip]=t.ip,a[g.COMMON_DATA_KEY.hh_ip]=t.ip,a[C.vipToken]=function(e,t){e=(e.split("$").map(function(e){return e.split("=")}).find(function(e){return e[0]===t})||[])[1];return+(void 0===e?"0":e)}(t.report||"","vip_token"),a)),s&&i&&n.setCommonKv(((a={})[C.videoCharged]=s.ch,a[C.userPayType]=function(e,t){var n=0;8===e?n=1:2===e&&(0<t?n=2:0===t&&(n=0));return n}(s.st,s.ch),a[C.videoType]=s.videotype,a)),0!==(r=0!==r||!s||8!==s.st&&(isNaN(o)||0==o)||0!=+t.preview?r:83))?(i="".concat(g.ErrorCode.GETINFO_SERVER_CODE_PREFIX).concat("000".concat(r).slice(-3)).concat(isNaN(o)?"":".".concat(o)),_.throw(i,g.ErrorMsg.GETINFO_CODE),[2]):"o"===t.s&&s?[4,l()]:(_.throw(g.ErrorCode.GETINFO_PARSE,g.ErrorMsg.GETINFO_PARSE),[2]);case 1:return e.sent(),[2]}})})}var $e={charge:0,otype:"json",defnpayver:"v.qq.com"===location.hostname||"film.qq.com"===location.hostname?1:0,spau:1,spaudio:1,spwm:1,sphls:h.uaTool.mobile?1:2,host:location.host,refer:function(){var e="";try{e=je(document.location.href),Ge()&&(e=je(document.referrer||""))}catch(e){}return e}(),ehost:function(){var e="";try{e=location.href.replace(location.search,""),Ge()&&(e=je(top.location.href||""))}catch(e){}return e}(),sphttps:ze(),encryptVer:"",cKey:"",clip:4,guid:"",flowid:"",platform:"",sdtfrom:"",appVer:"1.0.0.0",unid:"",auth_from:"",auth_ext:"",vid:"",defn:"",fhdswitch:0,dtype:3,spsrt:2,tm:"",lang_code:0,logintoken:""};function Ze(e,t,n){if(e&&0<(null==(l=null==(l=null==(l=e.vl)?void 0:l.vi[0].ul)?void 0:l.ui)?void 0:l.length)){var r,o,i,a,s,_,l=e.dltype,c=(null==(c=e.vl)?void 0:c.vi)[0],u=c.fn,d=c.fvkey;if(3===l||8===l)return e.play?(_=(a=e).play,[{url:null!=(s=null==(s=_.masterurl)?void 0:s[0])?s:"keyid://".concat(_.keyid,".m3u8"),vt:a.vl.vi[0].ul.ui[0].vt}]):(s=e.vl.vi[0].ul.ui.map(function(e){var t;return e.url&&null!=(t=e.hls)&&t.pt?{url:e.url+e.hls.pt,vt:e.vt}:{url:e.url,vt:e.vt}}),8===l&&(_=(r=e.vl.vi[0].ul.m3u8)&&!(0<r.indexOf("#EXTINF:")||0<r.indexOf("EXT-X-TARGETDURATION:")),o=s[0].url,i={},_?s.forEach(function(e){i[e.url]=(e=e.url,r.replace(o,e))}):i[o]=r,s.m3u8=i),s);if(1===l){l=(null==(e=null==(a=c.cl)?void 0:a.ci)?void 0:e.length)||0,e=c.fvkey&&c.fn&&0<(null==(e=null==(e=c.ul)?void 0:e.ui)?void 0:e.length);if(l<=0&&e){for(var p,f,E=c.ul,h=c.lnk,A=u,g=d,m=t,y=n,v=[],b=E.ui.length,T=0;T<b;T++)f={url:"",vt:0},(p=E.ui[T]).url&&(p.url&&-1===p.url.indexOf("".concat(h,".flv"))&&-1===p.url.indexOf("".concat(h,".mp4"))?f.url=p.url+A:f.url=p.url,p.vt&&(f.vt=parseInt(p.vt,10)),-1===f.url.indexOf("sdtfrom")&&(-1<f.url.indexOf("?")?f.url+="&sdtfrom=".concat(m):f.url+="?sdtfrom=".concat(m),f.url+="&guid=".concat(y,"&vkey=").concat(g)),v.push(f));return v}}}return[]}function et(e){var t=h.CODEC.H264,n=((null==(n=null==e?void 0:e.vl)?void 0:n.vi)||[])[0],e=null==(e=null==(e=null==e?void 0:e.fl)?void 0:e.fi)?void 0:e.find(function(e){return 1===e.sl}),e=null==e?void 0:e.video;return n&&1===n.hevc&&(t=h.CODEC.H265),{vtypeKey:e,vtype:ke[e]||"unknown",codec:t}}function tt(f,E){return A.__awaiter(void 0,void 0,void 0,function(){var i,a,s,_,l,c,u,d,p;return A.__generator(this,function(e){switch(e.label){case 0:return i=f.resData,i=void 0===i?{}:i,a=f.reqParams,a=void 0===a?{}:a,l=(null==(l=i.vl)?void 0:l.vi)[0],c=l.td,u=l.ti,p=l.vh,s=l.vw,d=l.br,_=l.fs,f.parseData={preview:(t=i)&&(n=(null==(n=t.vl)?void 0:n.vi)[0],r=+t.em,o=+t.exem,t=+t.preview,!isNaN(r))&&0==r&&0!=t&&(0<o||8==+n.st)?t:0,vitem:l,duration:c,title:u,byteRate:d,videoHeight:p,videoWidth:s,fileSize:_,urls:Ze(i,a.sdtfrom,a.guid),definitionList:null==(c=i.fl)?void 0:c.fi,subtitleList:null==(u=i.sfl)?void 0:u.fi,watermarkList:l.wl,previewList:l.pl?null==(d=l.pl[0])?void 0:d.pd:[]},null!=(p=f.parseData.definitionList)&&p.reverse(),f.logger.log("parse ",f.parseData),[4,E()];case 1:return e.sent(),[2]}var t,n,r,o})})}var nt,rt,ot=function(){var y,v,s,t,_,b,L,N,k,B,a,V,K,U,r,i,l,F,le=-8290,c=-2285,Y=-9220,T=8126,C=-213,fe=-1731,Q=4359,H=-4191,I=2007,ce=9095,ue=2829,q=-450,W=-4002,j=9852,Ee=-3683,he=8972,Ae=5031,G=-1124,z=847,X=-2667,J=-1169,$=5513,de=(s=Math,n=(o={}).a={},t=n.b={c:function(e){for(var t="",n=0;n<"à¥à¥à¥à¥".length;n++)t+=String.fromCharCode(2348^"à¥à¥à¥à¥".charCodeAt(n));Z.prototype=this;var r=new Z;return e&&r.d(e),r.hasOwnProperty(t)||(r.init=function(){r.$super.init.apply(this,arguments)}),(r.init.prototype=r).$super=this,r},create:function(){var e=this.c();return e.init.apply(e,arguments),e},init:function(){},d:function(e){for(var t,n="",r=0;r<"Í¾Í¥ÍÍ¾Í¸Í£Í¤Í­".length;r++)n+=String.fromCharCode(778^"Í¾Í¥ÍÍ¾Í¸Í£Í¤Í­".charCodeAt(r));for(t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty(n)&&(this.toString=e.toString)},e:function(){return this.init.prototype.c(this)}},_=n.f=t.c({init:function(e,t){e=this.g=e||[],this.h=null!=t?t:(-2630+le+10924)*e.length},toString:function(e){return(e||b).i(this)},concat:function(e){var t=this.g,n=e.g,r=this.h;if(e=e.h,this.j(),r%4)for(var o=0;o<e;o++)t[r+o>>>2]|=(n[o>>>2]>>>24-o%4*8&255)<<24-(r+o)%4*8;else if(65535<n.length)for(o=0;o<e;o+=4)t[r+o>>>2]=n[o>>>2];else t.push.apply(t,n);return this.h+=e,this},j:function(){var e=this.g,t=this.h;e[t>>>2]&=4294967295<<32-t%4*8,e.length=s.ceil(t/4)},e:function(){var e=t.e.call(this);return e.g=this.g.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(4294967296*s.random()|-8555+c+376+10464);return new _.init(t,e)}}),e=o.k={},b=e.l={i:function(e){for(var t="",n=0;n<"".length;n++)t+=String.fromCharCode(368^"".charCodeAt(n));var r=e.g;e=e.h;for(var o=[],i=0;i<e;i++){var a=r[i>>>2]>>>24-i%4*8&255;o.push((a>>>4).toString(16)),o.push((15&a).toString(16))}return o.join(t)},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>Y+9223]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new _.init(n,t/2)}},L=e.m={i:function(e){for(var t="",n=0;n<"".length;n++)t+=String.fromCharCode(2238^"".charCodeAt(n));var r=e.g;e=e.h;for(var o=[],i=0;i<e;i++)o.push(String.fromCharCode(r[i>>>2]>>>24-i%4*8&255));return o.join(t)},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new _.init(n,t)}},N=e.n={i:function(e){for(var t="",n=0,r="ÃÃ´Ã¹Ã³ÃºÃ§Ã¸Ã°Ã±ÂµÃÃÃÂ¸Â­ÂµÃ±Ã´Ã¡Ã´";n<r.length;n++)t+=String.fromCharCode(149^r.charCodeAt(n));try{return decodeURIComponent(escape(L.i(e)))}catch(e){throw Error(t)}},parse:function(e){return L.parse(unescape(encodeURIComponent(e)))}},k=n.o=t.c({p:function(){this.q=new _.init,this.r=0},s:function(e){for(var t="",n=0;n<"à¾§à¾ à¾¦à¾½à¾ºà¾³".length;n++)t+=String.fromCharCode(4052^"à¾§à¾ à¾¦à¾½à¾ºà¾³".charCodeAt(n));t==(void 0===e?"undefined":_typeof(e))&&(e=N.parse(e)),this.q.concat(e),this.r+=e.h},t:function(e){var t=this.q,n=t.g,r=t.h,o=this.u,i=r/(4*o);if(e=(e?s.ceil(i):s.max((0|i)-this.v,0))*o,r=s.min(4*e,r),e){for(var a=0;a<e;a+=o)this.w(n,a);a=n.splice(0,e),t.h-=r}return new _.init(a,r)},e:function(){var e=t.e.call(this);return e.q=this.q.e(),e},v:0}),n.x=k.c({y:t.c(),init:function(e){this.y=this.y.c(e),this.p()},p:function(){k.p.call(this),this.z()},A:function(e){return this.s(e),this.t(),this},B:function(e){return e&&this.s(e),this.C()},u:16,D:function(n){return function(e,t){return new n.init(t).B(e)}},F:function(n){return function(e,t){return new B.HMAC.init(n,t).B(e)}}}),B=o.G={},o);function Z(){}function ge(e){return pe.call(this,$+2097+8214-15822,e)}function pe(N){for(var e="",t=0;t<"à¤".length;t++)e+=String.fromCharCode(2422^"à¤".charCodeAt(t));for(var n="",r=0;r<"Þ­".length;r++)n+=String.fromCharCode(2001^"Þ­".charCodeAt(r));for(var o="",i=0;i<"Ò ".length;i++)o+=String.fromCharCode(-6720+Ee+3198+8449^"Ò ".charCodeAt(i));for(var a="",s=0;s<"à´".length;s++)a+=String.fromCharCode(3451^"à´".charCodeAt(s));for(var k="",_=0;_<"×¿".length;_++)k+=String.fromCharCode(1411^"×¿".charCodeAt(_));for(var B="",l=0;l<"à¢¨".length;l++)B+=String.fromCharCode(2260^"à¢¨".charCodeAt(l));for(var V="",c=0;c<"à¬¶".length;c++)V+=String.fromCharCode(2890^"à¬¶".charCodeAt(c));for(var K="",u=0;u<"Æ¨Æ¢Ç¶Æ¦Ç¶Æ§ÇµÇ±Æ§Æ¤".length;u++)K+=String.fromCharCode(453^"Æ¨Æ¢Ç¶Æ¦Ç¶Æ§ÇµÇ±Æ§Æ¤".charCodeAt(u));for(var U="",d=0;d<"à©¸".length;d++)U+=String.fromCharCode(2564^"à©¸".charCodeAt(d));for(var F="",p=0;p<"à¡".length;p++)F+=String.fromCharCode(2096^"à¡".charCodeAt(p));for(var Y="",f=0;f<"Ù¶".length;f++)Y+=String.fromCharCode(1546^"Ù¶".charCodeAt(f));for(var Q="",E=0;E<"àª".length;E++)Q+=String.fromCharCode(ue+9851-9876^"àª".charCodeAt(E));for(var H="",h=0;h<"È§".length;h++)H+=String.fromCharCode(603^"È§".charCodeAt(h));for(var q="",A=0;A<"Ð¾".length;A++)q+=String.fromCharCode(1090^"Ð¾".charCodeAt(A));for(var W="",g=0;g<"ß¡".length;g++)W+=String.fromCharCode(-8067+Ae+9508-4523^"ß¡".charCodeAt(g));for(var j="",m=0;m<"Ì".length;m++)j+=String.fromCharCode(889^"Ì".charCodeAt(m));for(var G="",y=0;y<"".length;y++)G+=String.fromCharCode(3568^"".charCodeAt(y));for(var z="",v=0;v<"".length;v++)z+=String.fromCharCode(777^"".charCodeAt(v));for(var X="",b=0;b<"".length;b++)X+=String.fromCharCode(2613^"".charCodeAt(b));for(var J="",T=0;T<"Â´Â¹Â²Â¯".length;T++)J+=String.fromCharCode(214^"Â´Â¹Â²Â¯".charCodeAt(T));for(var $="",C=0;C<"ÛÛÛÛ".length;C++)$+=String.fromCharCode(1722^"ÛÛÛÛ".charCodeAt(C));for(var Z="",I=0;I<"Ù¨Ù©Ù¨Ù£".length;I++)Z+=String.fromCharCode(1542^"Ù¨Ù©Ù¨Ù£".charCodeAt(I));for(var ee="",P=0;P<"ÃÃ".length;P++)ee+=String.fromCharCode(168^"ÃÃ".charCodeAt(P));for(var te="",D=0;D<"ÛÛÛ".length;D++)te+=String.fromCharCode(1698^"ÛÛÛ".charCodeAt(D));for(var ne="",O=0,re="à¬¶à¬à­à­à¬à¬à¬à­à­à¬¶";O<re.length;O++)ne+=String.fromCharCode(2921^re.charCodeAt(O));for(var oe="",w=0;w<"××××××".length;w++)oe+=String.fromCharCode(1454^"××××××".charCodeAt(w));switch(N){case 0:var M=[];window[oe]===window?M.push(0):M.push(1);try{var x=ne+Math.floor(1e7*Math.random()),R=document.createElement(te);R.setAttribute(ee,x),R.style.La=Z,(document.body||document.getElementsByTagName($)[0]).appendChild(R),document.getElementById(x)?M.push(0):M.push(1),(document.body||document.getElementsByTagName(J)[0]).removeChild(R)}catch(e){M.push(1)}return M.join(X);case 1:x=arguments[1],R=new de.a.f.init([1332468387,-1641050960,5772+he+2136881301,-1629555948],16),M=new de.a.f.init([22039283,1457920463,776125350,-1941999367],16);return de.Ga.$(x,R,{ra:M,ba:de.ba.la,qa:de.na.ma}).xa.toString().toUpperCase();case 2:return(S=arguments[1])?48<S.length?S.substr(0,48):S:z;case 3:x=window.document.URL,R=window.navigator.userAgent.toLowerCase(),M=G;0<window.document.referrer.length&&(M=window.document.referrer);try{0==M.length&&0<opener.location.href.length&&(M=opener.location.href)}catch(e){}var ie=window.navigator.appCodeName,ae=window.navigator.appName,se=window.navigator.platform,x=ge(x),M=ge(M);return x+j+ge(R)+W+M+q+ie+H+ae+Q+se;case-7188+ce+9587-11490:var S=arguments[1],L=0;if(0!=S.length)for(le=0;le<S.length;le++)L=(L=(L<<5)-L+S.charCodeAt(le))&L;return L;case 5:var _e=Y+arguments[-496+le+8787]+F+arguments[2]+U+K+V+arguments[3]+B+arguments[4]+k+arguments[5]+a+function(){return pe.call(this,3)}()+o+function(){return pe.call(this,0)}()+n;return function(e){return pe.call(this,1,e)}(e+(L=function(){return pe.call(this,fe+1735,_e)}())+_e)}}for(var ee="",te=0,ne="ÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂÂ±Â²Â³Â´ÂµÂ¶Â·Â¸Â¹ÂºÂ»Â¼Â½Â¾Â¿Â Â¡Â¢Â£Â¤Â¥Â¦Â§Â¨Â©ÂªÃ Ã¡Ã¢Ã£Ã¤Ã¥Ã¦Ã§Ã¨Ã©Ã»Ã¿Ã­";te<ne.length;te++)ee+=String.fromCharCode(208^ne.charCodeAt(te));var e=de,re=e.a.f,oe=(e.k.H={i:function(e){for(var t="",n=0;n<"".length;n++)t+=String.fromCharCode(4077^"".charCodeAt(n));var r=e.g,o=e.h,i=this.I;e.j(),e=[];for(var a=0;a<o;a+=3)for(var s=(r[a>>>2]>>>24-a%4*8&255)<<T+-9200+1090|(r[a+(c+7275-4989)>>>2]>>>24-(a+1)%4*8&255)<<8|r[a+2>>>2]>>>24-(a+2)%4*8&255,_=0;_<4&&a+.75*_<o;_++)e.push(i.charAt(s>>>6*(3-_)&63));if(r=i.charAt(64))for(;e.length%4;)e.push(r);return e.join(t)},parse:function(e){var t=e.length,n=this.I;(i=n.charAt(64))&&-1!=(i=e.indexOf(i))&&(t=i);for(var r,o,i=[],a=0,s=0;s<t;s++)s%4&&(r=n.indexOf(e.charAt(s-1))<<s%(C+1860+5724-7367)*2,o=n.indexOf(e.charAt(s))>>>6-s%4*2,i[a>>>T+-6116+4162-6170]|=(r|o)<<24-a%4*8,a++);return re.create(i,a)},I:ee},Math),P=-5616,ie=-7555,D=-458,ae=1071,se=927,_e=-2568,O=6326,me=-4204,ye=4918,ve=7574,be=6160,Te=855,Ce=-9137,Ie=2297,Pe=-9619,De=-8866,Oe=-6091,we=-7050,Me=-1233,xe=-7874,Re=5847,Se=5062,Le=-4552,Ne=4635;function w(e,t,n,r,o,i,a){return Ke.call(this,0,e,t,n,r,o,i,a)}function M(e,t,n,r,o,i,a){return Ke.call(this,1,e,t,n,r,o,i,a)}function x(e,t,n,r,o,i,a){return Ke.call(this,2,e,t,n,r,o,i,a)}function R(e,t,n,r,o,i,a){return Ke.call(this,3,e,t,n,r,o,i,a)}for(var n=de,ke=(o=n.a).f,Be=o.x,o=n.G,S=[],Ve=0;Ve<-12185+c+14534;Ve++)S[Ve]=4294967296*oe.abs(oe.sin(Ve+(-7343+c+-5750+15379)))|0;function Ke(e){switch(e){case 0:var t=arguments[1],n=arguments[ye+7592+7592-20100],r=arguments[be+Te-7012],o=arguments[ve+Ce+1567],i=arguments[-1789+Ie-503],a=arguments[Pe+De+c+20776];return((t=t+(n&r|~n&o)+i+arguments[7])<<a|t>>>32-a)+n;case Oe+P+11708:return t=arguments[we+7051],n=arguments[Q+4673+j-18882],r=arguments[O+ce+Y-6198],o=arguments[Ee+he+Ae-10316],i=arguments[G+H+ie+12875],a=arguments[6],((t=t+(n&o|r&~o)+i+arguments[7])<<a|t>>>-9475+Me+ce+1645-a)+n;case D+460:return t=arguments[I+fe-275],n=arguments[W+z+3157],r=arguments[xe+-6801+14678],o=arguments[O+ae-7393],i=arguments[_e+Re+36-3310],a=arguments[T+ue-10949],((t=t+(n^r^o)+i+arguments[7])<<a|t>>>32-a)+n;case Se+Le+X+2160:return t=arguments[1],n=arguments[7592+J+4673-11094],r=arguments[I+se-2931],o=arguments[5298+q+-4862+18],i=arguments[Ne-4630],a=arguments[ue+-6978+4155],((t=t+(r^(n|~o))+i+arguments[C+220])<<a|t>>>-8328+me+-2734+15298-a)+n}}o=o.J=Be.c({z:function(){this.K=new ke.init([1732584193,4023233417,2562383102,271733878])},w:function(e,t){for(var n=0;n<16;n++){var r=e[a=t+n];e[a]=16711935&(r<<8|r>>>P+5640)|4278255360&(r<<24|r>>>8)}var o,i,n=this.K.g,a=e[t+0],s=(r=e[t+1],e[t+2]),_=e[t+3],l=e[t+4],c=e[t+5],u=e[t+(P+2249+5624-2251)],d=e[t+7],p=e[t+8],f=e[t+9],E=e[t+10],h=e[t+11],A=e[t+12],g=e[t+13],m=e[t+14],y=e[t+15],v=n[0],b=R(b=R(b=R(b=R(b=x(b=x(b=x(b=x(b=M(b=M(b=M(b=M(b=w(b=w(b=w(b=w(b=n[1],i=w(i=n[2],o=w(o=n[3],v=w(v,b,i,o,a,7,S[-2964+T-5162]),b,i,r,12,S[1]),v,b,s,5903+P-270,S[2]),o,v,_,22,S[3]),i=w(i,o=w(o,v=w(v,b,i,o,l,7,S[4]),b,i,c,12,S[5]),v,b,u,17,S[6]),o,v,d,22,S[7]),i=w(i,o=w(o,v=w(v,b,i,o,p,7,S[8]),b,i,f,12,S[9]),v,b,E,4264+P+1369,S[10]),o,v,h,22,S[11]),i=w(i,o=w(o,v=w(v,b,i,o,A,7,S[12]),b,i,g,12,S[13]),v,b,m,17,S[1227+ie+6342]),o,v,y,-8569+C+8804,S[D+-1821+806+1488]),i=M(i,o=M(o,v=M(v,b,i,o,r,-7413+P+13034,S[16]),b,i,u,9,S[17]),v,b,h,fe+-5305+7539-489,S[18]),o,v,a,20,S[19]),i=M(i,o=M(o,v=M(v,b,i,o,c,5,S[ae-1051]),b,i,E,9,S[21]),v,b,y,14,S[22]),o,v,l,20,S[23]),i=M(i,o=M(o,v=M(v,b,i,o,f,5,S[24]),b,i,m,9,S[25]),v,b,_,6600+Q-10945,S[se-901]),o,v,p,12598+_e-10010,S[27]),i=M(i,o=M(o,v=M(v,b,i,o,g,5,S[-4202+O-2096]),b,i,s,9,S[29]),v,b,d,-496+P+O-200,S[30]),o,v,A,_e+9955-7367,S[7539+T+42-15676]),i=x(i,o=x(o,v=x(v,b,i,o,c,4,S[32]),b,i,p,11,S[33]),v,b,h,16,S[34]),o,v,m,23,S[35]),i=x(i,o=x(o,v=x(v,b,i,o,r,-5345+H+9540,S[36]),b,i,l,11,S[37]),v,b,d,16,S[38]),o,v,E,23,S[39]),i=x(i,o=x(o,v=x(v,b,i,o,g,P+D+I+4071,S[40]),b,i,a,11,S[41]),v,b,_,16,S[42]),o,v,u,23,S[43]),i=x(i,o=x(o,v=x(v,b,i,o,f,4,S[44]),b,i,A,11,S[45]),v,b,y,16,S[46]),o,v,s,23,S[47]),i=R(i,o=R(o,v=R(v,b,i,o,a,6,S[48]),b,i,d,10,S[49]),v,b,m,15,S[50]),o,v,c,21,S[51]),i=R(i,o=R(o,v=R(v,b,i,o,A,6,S[52]),b,i,_,10,S[53]),v,b,E,2553+ce+-8569-3064,S[54]),o,v,r,21,S[55]),i=R(i,o=R(o,v=R(v,b,i,o,p,6,S[56]),b,i,y,2260+D-1792,S[-6071+ue+3299]),v,b,u,15,S[-990+me+5252]),o,v,g,21,S[59]),i=R(i,o=R(o,v=R(v,b,i,o,l,6,S[60]),b,i,h,10,S[61]),v,b,s,15,S[62]),o,v,f,21,S[63]);n[0]=n[0]+v|0,n[1]=n[1]+b|0,n[2]=n[2]+i|0,n[3]=n[3]+o|-11860+q+12310},C:function(){var e=this.q,t=e.g,n=(6876+D+-335-6075)*this.r,r=8*e.h,o=(t[r>>>8761+ye+1268-14942]|=128<<H+4215-r%32,oe.floor(n/4294967296));for(t[15+(64+r>>>9<<W+4006)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t[14+(r+(I+-6251+4308)>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.h=4*(t.length+1),this.t(),t=(e=this.K).g,n=0;n<4;n++)r=t[n],t[n]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>2244+ve+2814-12624);return e},e:function(){var e=Be.e.call(this);return e.K=this.K.e(),e}}),n.J=Be.D(o),n.L=Be.F(o),o=(n=(e=de).a).b,y=n.f,v=(n=e.G).M=o.c({y:o.c({N:4,O:n.J,P:1}),init:function(e){this.y=this.y.c(e)},Q:function(e,t){for(var n=(a=this.y).O.create(),r=y.create(),o=r.g,i=a.N,a=a.P;o.length<i;){s&&n.A(s);var s=n.A(e).B(t);n.p();for(var _=1;_<a;_++)s=n.B(s),n.p();r.concat(s)}return r.h=4*i,r}}),e.M=function(e,t,n){return v.create(n).Q(e,t)},de.a.R||(n=(o=de).a,e=n.b,a=n.f,V=n.o,K=o.k.H,U=o.G.M,r=n.R=V.c({y:e.c(),S:function(e,t){return this.create(this.T,e,t)},U:function(e,t){return this.create(this.V,e,t)},init:function(e,t,n){this.y=this.y.c(n),this.W=e,this.X=t,this.p()},p:function(){V.p.call(this),this.z()},Y:function(e){return this.s(e),this.t()},B:function(e){return e&&this.s(e),this.C()},N:4,Z:4,T:1,V:2,D:function(i){return{$:function(e,t,n){for(var r="",o=0;o<"Ç Ç§Ç¡ÇºÇ½Ç´".length;o++)r+=String.fromCharCode(403^"Ç Ç§Ç¡ÇºÇ½Ç´".charCodeAt(o));return(r==(void 0===t?"undefined":_typeof(t))?F:l).$(i,e,t,n)},_:function(e,t,n){for(var r="",o=0;o<"à£à£à£à£à£à£".length;o++)r+=String.fromCharCode(2219^"à£à£à£à£à£à£".charCodeAt(o));return(r==(void 0===t?"undefined":_typeof(t))?F:l)._(i,e,t,n)}}}}),n.aa=r.c({C:function(){return this.t(!0)},u:1}),d=o.ba={},(u=(n.ea=e.c({S:function(e,t){return this.fa.create(e,t)},U:function(e,t){return this.ga.create(e,t)},init:function(e,t){this.ha=e,this.ca=t}})).c()).fa=u.c({ia:function(e,t){var n=this.ha,r=n.u;Ze.call(this,e,t,r),n.ja(e,t),this.da=e.slice(t,t+r)}}),u.ga=u.c({ia:function(e,t){var n=this.ha,r=n.u,o=e.slice(t,t+r);n.ka(e,t),Ze.call(this,e,t,r),this.da=o}}),d=d.la=u,u=(o.na={}).ma={na:function(e,t){for(var n,r=(n=(n=4*t)-e.h%n)<<24|n<<16|n<<8|n,o=[],i=6180+ue+-1259-7750;i<n;i+=4)o.push(r);n=a.create(o,n),e.concat(n)},oa:function(e){e.h-=255&e.g[e.h-1>>>2]}},n.pa=r.c({y:r.y.c({ba:d,qa:u}),p:function(){r.p.call(this);var e,t=(n=this.y).ra,n=n.ba;this.W==this.T?e=n.S:(e=n.U,this.v=1),this.sa=e.call(n,this,t&&t.g)},w:function(e,t){this.sa.ia(e,t)},C:function(){var e,t=this.y.qa;return this.W==this.T?(t.na(this.q,this.u),e=this.t(!0)):(e=this.t(!0),t.oa(e)),e},u:X+-6989+-3440+13100}),i=n.ta=e.c({init:function(e){this.d(e)},toString:function(e){return(e||this.ua).i(this)}}),d=(o.wa={}).va={i:function(e){var t=e.xa;return((e=e.ya)?a.create([1398893684,6475+I+1701068349]).concat(e).concat(t):t).toString(K)},parse:function(e){var t,n=(e=K.parse(e)).g;return 1398893684==n[0]&&1701076831==n[1]&&(t=a.create(n.slice(2,4)),n.splice(0,4),e.h-=16),i.create({xa:e,ya:t})}},l=n.za=e.c({y:e.c({wa:d}),$:function(e,t,n,r){r=this.y.c(r);var o=e.S(n,r);return t=o.B(t),o=o.y,i.create({xa:t,Aa:n,ra:o.ra,Ba:e,ba:o.ba,qa:o.qa,u:e.u,ua:r.wa})},_:function(e,t,n,r){return r=this.y.c(r),t=this.Ca(t,r.wa),e.U(n,r).B(t.xa)},Ca:function(e,t){for(var n="",r=0;r<"à à à à à à ".length;r++)n+=String.fromCharCode(2150^"à à à à à à ".charCodeAt(r));return n==(void 0===e?"undefined":_typeof(e))?t.parse(e,this):e}}),o=(o.Da={}).va={Ea:function(e,t,n,r){return r=r||a.random(8),e=U.create({N:t+n}).Q(e,r),n=a.create(e.g.slice(t),4*n),e.h=4*t,i.create({Aa:e,ra:n,ya:r})}},F=n.Fa=l.c({y:l.y.c({Da:o}),$:function(e,t,n,r){return n=(r=this.y.c(r)).Da.Ea(n,e.N,e.Z),r.ra=n.ra,(e=l.$.call(this,e,t,n.Aa,r)).d(n),e},_:function(e,t,n,r){return r=this.y.c(r),t=this.Ca(t,r.wa),n=r.Da.Ea(n,e.N,e.Z,t.ya),r.ra=n.ra,l._.call(this,e,t,n.Aa,r)}}));for(var u=de,e=u.a.pa,d=u.G,p=[],Ue=[],Fe=[],Ye=[],Qe=[],He=[],qe=[],We=[],je=[],Ge=[],f=[],E=z+2043+-9216+6326;E<256;E++)f[E]=E<128?E<<1:E<<1^283;for(var h=0,A=13770+X-11103,E=0;E<256;E++){var g=(g=A^A<<1^A<<2^A<<3^A<<4)>>>8^255&g^99,ze=f[Ue[p[h]=g]=h],Xe=f[ze],Je=f[Xe],m=257*f[g]^16843008*g;Fe[h]=m<<24|m>>>8,Ye[h]=m<<16|m>>>16,Qe[h]=m<<8|m>>>24,He[h]=m,qe[g]=(m=16843009*Je^65537*Xe^257*ze^16843008*h)<<24|m>>>J+1177,We[g]=m<<16|m>>>16,je[g]=m<<8|m>>>24,Ge[g]=m,h?(h=ze^f[f[f[Je^ze]]],A^=f[f[A]]):h=A=1}var $e=[0,1,2,4,8,16,32,64,128,27,54],d=d.Ga=e.c({z:function(){for(var e,t=(r=this.X).g,n=r.h/4,r=4*((this.Ha=n+6)+1),o=this.Ia=[],i=0;i<r;i++)i<n?o[i]=t[i]:(e=o[i-1],i%n?6<n&&4==i%n&&(e=p[e>>>24]<<24|p[e>>>16&255]<<16|p[e>>>8&255]<<8|p[255&e]):(e=p[(e=e<<8|e>>>24)>>>24]<<24|p[e>>>16&255]<<16|p[e>>>8&255]<<8|p[255&e],e^=$e[i/n|0]<<24),o[i]=o[i-n]^e);for(t=this.Ja=[],n=0;n<r;n++)i=r-n,e=n%4?o[i]:o[i-4],t[n]=n<4||i<=4?e:qe[p[e>>>24]]^We[p[e>>>16&255]]^je[p[e>>>8&255]]^Ge[p[255&e]]},ja:function(e,t){this.Ka(e,t,this.Ia,Fe,Ye,Qe,He,p)},ka:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this.Ka(e,t,this.Ja,qe,We,je,Ge,Ue),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},Ka:function(e,t,n,r,o,i,a,s){for(var _=this.Ha,l=e[t]^n[0],c=e[t+1]^n[1],u=e[t+2]^n[6782+C+2889-9456],d=e[t+3]^n[3],p=4,f=1;f<_;f++)var E=r[l>>>24]^o[c>>>16&255]^i[u>>>8&255]^a[255&d]^n[p++],h=r[c>>>24]^o[u>>>16&255]^i[d>>>8&255]^a[255&l]^n[p++],A=r[u>>>24]^o[d>>>16&255]^i[l>>>8&255]^a[255&c]^n[p++],d=r[d>>>24]^o[l>>>16&255]^i[c>>>-3930+Ee+7621&255]^a[255&u]^n[p++],l=E,c=h,u=A;E=(s[l>>>24]<<24|s[c>>>16&255]<<16|s[u>>>8&255]<<8|s[255&d])^n[p++],h=(s[c>>>24]<<24|s[u>>>16&255]<<16|s[d>>>8&255]<<8|s[255&l])^n[p++],A=(s[u>>>24]<<24|s[d>>>16&255]<<16|s[l>>>8&255]<<8|s[255&c])^n[p++],d=(s[d>>>24]<<24|s[l>>>16&255]<<16|s[c>>>8&255]<<8|s[255&u])^n[p++],e[t]=E,e[t+1]=h,e[t+(-5365+T-2759)]=A,e[t+3]=d},N:8});return u.Ga=e.D(d),function(e,t,n,r,o){return pe.call(this,5,e,t,n,r,o)};function Ze(e,t,n){var r=this.ca;r?this.ca=void 0:r=this.da;for(var o=0;o<n;o++)e[t+o]^=r[o]}}(),it=(nt="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(e){e=e||{},(i=i||(void 0!==e?e:{})).ready=new Promise(function(e,t){n=e,a=t});var i,n,a,t,r={};for(t in i)i.hasOwnProperty(t)&&(r[t]=i[t]);var o,s,_=!1,l=!1,_="object"===("undefined"==typeof window?"undefined":_typeof(window)),l="function"==typeof importScripts,c="",u=((_||l)&&(l?c=self.location.href:"undefined"!=typeof document&&document.currentScript&&(c=document.currentScript.src),c=0!==(c=nt?nt:c).indexOf("blob:")?c.substr(0,c.lastIndexOf("/")+1):"",l)&&(o=function(t){try{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}catch(e){if(t=x(t))return t;throw e}}),i.printErr||console.warn.bind(console));for(t in r)r.hasOwnProperty(t)&&(i[t]=r[t]);r=null,i.wasmBinary&&(s=i.wasmBinary),i.noExitRuntime;var d=!1;function p(e){var t=i["_"+e];return t||I("Assertion failed: Cannot call unknown function "+e+", make sure it is exported"),t}function f(e,s,t,n){var r={string:function(e){var t,n=0;return null!=e&&0!==e&&(t=1+(e.length<<2),h(e,n=L(t),t)),n},array:function(e){var t=L(e.length);return A.set(e,t),t}},o=p(e),i=[];if(e=0,n)for(var a=0;a<n.length;a++){var _=r[t[a]];_?(0===e&&(e=S()),i[a]=_(n[a])):i[a]=n[a]}return t=function(e){if("string"===s)if(e){for(var t=g,n=e+NaN,r=e;t[r]&&!(n<=r);)++r;if(16<r-e&&t.subarray&&E)e=E.decode(t.subarray(e,r));else{for(n="";e<r;){var o,i,a=t[e++];128&a?(o=63&t[e++],192==(224&a)?n+=String.fromCharCode((31&a)<<6|o):(i=63&t[e++],(a=224==(240&a)?(15&a)<<12|o<<6|i:(7&a)<<18|o<<12|i<<6|63&t[e++])<65536?n+=String.fromCharCode(a):(a-=65536,n+=String.fromCharCode(55296|a>>10,56320|1023&a)))):n+=String.fromCharCode(a)}e=n}}else e="";else e="boolean"===s?!!e:e;return e}(t=o.apply(null,i)),0!==e&&V(e),t}var E="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function h(e,t,n){var r=g;if(0<n){n=t+n-1;for(var o=0;o<e.length;++o){var i=e.charCodeAt(o);if((i=55296<=i&&i<=57343?65536+((1023&i)<<10)|1023&e.charCodeAt(++o):i)<=127){if(n<=t)break;r[t++]=i}else{if(i<=2047){if(n<=t+1)break;r[t++]=192|i>>6}else{if(i<=65535){if(n<=t+2)break;r[t++]=224|i>>12}else{if(n<=t+3)break;r[t++]=240|i>>18,r[t++]=128|i>>12&63}r[t++]=128|i>>6&63}r[t++]=128|63&i}}r[t]=0}}var A,g,m,y=[],v=[],b=[];var T=0,C=null;function I(e){throw i.onAbort&&i.onAbort(e),u(e),d=!0,e=new WebAssembly.RuntimeError("abort("+e+"). Build with -s ASSERTIONS=1 for more info."),a(e),e}i.preloadedImages={},i.preloadedAudios={};var P,D="data:application/octet-stream;base64,",O="data:application/octet-stream;base64,AGFzbQEAAAABcBFgAX8Bf2ACf38AYAN/f38AYAF/AGACf38Bf2AAAGADf39+AGAAAX9gA39/fgF/YAZ/f35/fn8Bf2AEf35/fwF/YAR/f39/AGAIf39/f39/f38AYAR/f39+AGACf34AYAN/f38Bf2AGf39/f39/AX8CGQQBYQFhAAUBYQFiAA8BYQFjAAABYQFkAAcDOTgAAQMAAQAAAgALAAECAQECBgQCAwADAQYABQMCAAAADAEAAAABAQECBQ0CAQ4AAAADBxAJCgQIBAQFAXABBgYFBgEBgAKAAgYJAX8BQbCVwAILByEIAWUCAAFmAB0BZwEAAWgANgFpADUBagA0AWsAMwFsACEJCwEAQQELBTs6OTg3CpW1AThkAQF/IwBBEGsiASAANgIMIAEgASgCDC0AADYCCCABIAEoAgggASgCDC0AAUEIdHI2AgggASABKAIIIAEoAgwtAAJBEHRyNgIIIAEgASgCCCABKAIMLQADQRh0cjYCCCABKAIIC3IBAX8jAEEQayICIAA2AgwgAiABNgIIIAIoAgwgAigCCDoAACACIAIoAghBCHY2AgggAigCDCACKAIIOgABIAIgAigCCEEIdjYCCCACKAIMIAIoAgg6AAIgAiACKAIIQQh2NgIIIAIoAgwgAigCCDoAAwsaAQF/IAAQDgRAIAAQJyEBIAAQJhogARAXCwszAQF/IwBBEGsiASQAIAEgADYCDCMAQRBrIgAgASgCDDYCDCAAKAIMIQAgAUEQaiQAIAALagEBfyMAQSBrIgIkACACIAA2AhwgAiABNgIYIAIoAhwiACACQRBqIAJBCGoQHyAAIAIoAhgCfyACKAIYIQEjAEEQayIAJAAgACABNgIMIAAoAgwQICEBIABBEGokACABCxArIAJBIGokAAuuAQEEfyMAQRBrIgQkACAEIAA2AgwgBCgCDCEBIwBBEGsiACQAIAAgATYCDCAAKAIMIQIjAEEQayIBJAAgASACNgIMAn8gASgCDCIDEA5BAXEEQCADEDIMAQsjAEEQayICJAAgAiADNgIMIAIoAgwQBxAHIQMgAkEQaiQAIAMLIQIgAUEQaiQAIAIhASMAQRBrIgIgATYCDCACKAIMIQEgAEEQaiQAIARBEGokACABCyYBAX8jAEEQayIBJAAgASAANgIMIAEoAgwQHCEAIAFBEGokACAAC4UBAQF/IwBBEGsiAyQAIAMgADYCDCADIAE2AgggAyACNgIEIAMoAgQoAgBBBGpBgAhJBEAgAygCDCADKAIEKAIAaiADKAIIIgBBCHRBgID8B3EgAEEYdHIgAEEIdkGA/gNxIABBGHZycjYCACADKAIEIgAgACgCAEEEajYCAAsgA0EQaiQAC08BAn9BlAooAgAiASAAQQNqQXxxIgJqIQACQCACQQAgACABTRsNACAAPwBBEHRLBEAgABACRQ0BC0GUCiAANgIAIAEPC0G4EUEwNgIAQX8LrwEBAX8jAEEQayIEJAAgBCAANgIMIAQgATYCCCAEIAI2AgQgBCADNgIAIAQoAgQgBCgCACgCAEECampBgAhJBEAgBCgCDCAEKAIAKAIAaiAEKAIEQf//A3EiAEEIdCAAQQh2cjsBACAEKAIAIgAgACgCAEECajYCACAEKAIMIAQoAgAoAgBqIAQoAgggBCgCBBAWIAQoAgAiACAEKAIEIAAoAgBqNgIACyAEQRBqJAALMAEBfyMAQRBrIgEkACABIAA2AgwgASgCDBAHLQALQYABcUEARyEAIAFBEGokACAAC4gBAQJ/IwBBEGsiAyQAIwBBEGsiAiADQQhqNgIMIAIoAgwaIwBBEGsiAiAANgIEIAIoAgQaAkAgARAORQRAIAEQByEBIAAQByIAIAEoAgg2AgggACABKQIANwIADAELIAACfyABEDIhACMAQRBrIgIgADYCDCACKAIMCyABEDEQKwsgA0EQaiQACw8AIAIEQCAAIAEgAhAWCwtcAQF/IwBBEGsiAiAANgIMIAIgATYCCCACIAIoAgw2AgQgAkEANgIAA0AgAigCACACKAIIT0UEQCACKAIEIQAgAiACKAIAIgFBAWo2AgAgACABakEAOgAADAELCwvWAgEBfwJAIAFFDQAgACABaiICQQFrQQA6AAAgAEEAOgAAIAFBA0kNACACQQJrQQA6AAAgAEEAOgABIAJBA2tBADoAACAAQQA6AAIgAUEHSQ0AIAJBBGtBADoAACAAQQA6AAMgAUEJSQ0AIABBACAAa0EDcSICaiIAQQA2AgAgACABIAJrQXxxIgJqIgFBBGtBADYCACACQQlJDQAgAEEANgIIIABBADYCBCABQQhrQQA2AgAgAUEMa0EANgIAIAJBGUkNACAAQQA2AhggAEEANgIUIABBADYCECAAQQA2AgwgAUEQa0EANgIAIAFBFGtBADYCACABQRhrQQA2AgAgAUEca0EANgIAIAIgAEEEcUEYciICayIBQSBJDQAgACACaiEAA0AgAEIANwMYIABCADcDECAAQgA3AwggAEIANwMAIABBIGohACABQSBrIgFBH0sNAAsLC3cBA38jAEEQayIFJAACQCACIAAQJSIEIAAQHCIDa00EQCACRQ0BIAAQGCIEIANqIAEgAhAQIAAgAiADaiIAECQgBUEAOgAPIAAgBGogBS0ADzoAAAwBCyAAIAQgAiADaiAEayADIANBACACIAEQIwsgBUEQaiQAC0UBAX8jAEEQayIDJAAgAyAANgIMIAMgATYCCCADIAI3AwAgAygCDCADKAIIIAMpAwBBhAooAgAoAgQRCAAaIANBEGokAAuDAQEBfyMAQSBrIgIgADYCHCACIAE2AhggAkGDATYCFCACQQA2AhAgAkEANgIMA0AgAigCDCACKAIYT0UEQCACKAIQIAIoAhRsIQAgAiACKAIcIgFBAWo2AhwgAiABLQAAIABqNgIQIAIgAigCDEEBajYCDAwBCwsgAigCEEH/////B3EL/wMBAn8gAkGABE8EQCAAIAEgAhABGg8LIAAgAmohAwJAIAAgAXNBA3FFBEACQCAAQQNxRQRAIAAhAgwBCyACQQFIBEAgACECDAELIAAhAgNAIAIgAS0AADoAACABQQFqIQEgAkEBaiICQQNxRQ0BIAIgA0kNAAsLAkAgA0F8cSIAQcAASQ0AIAIgAEFAaiIESw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBE0NAAsLIAAgAk0NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIABJDQALDAELIANBBEkEQCAAIQIMAQsgACADQQRrIgRLBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsLpwwBB38CQCAARQ0AIABBCGsiAyAAQQRrKAIAIgFBeHEiAGohBQJAIAFBAXENACABQQNxRQ0BIAMgAygCACIBayIDQdARKAIASQ0BIAAgAWohACADQdQRKAIARwRAIAFB/wFNBEAgAygCCCICIAFBA3YiBEEDdEHoEWpGGiACIAMoAgwiAUYEQEHAEUHAESgCAEF+IAR3cTYCAAwDCyACIAE2AgwgASACNgIIDAILIAMoAhghBgJAIAMgAygCDCIBRwRAIAMoAggiAiABNgIMIAEgAjYCCAwBCwJAIANBFGoiAigCACIEDQAgA0EQaiICKAIAIgQNAEEAIQEMAQsDQCACIQcgBCIBQRRqIgIoAgAiBA0AIAFBEGohAiABKAIQIgQNAAsgB0EANgIACyAGRQ0BAkAgAyADKAIcIgJBAnRB8BNqIgQoAgBGBEAgBCABNgIAIAENAUHEEUHEESgCAEF+IAJ3cTYCAAwDCyAGQRBBFCAGKAIQIANGG2ogATYCACABRQ0CCyABIAY2AhggAygCECICBEAgASACNgIQIAIgATYCGAsgAygCFCICRQ0BIAEgAjYCFCACIAE2AhgMAQsgBSgCBCIBQQNxQQNHDQBByBEgADYCACAFIAFBfnE2AgQgAyAAQQFyNgIEIAAgA2ogADYCAA8LIAMgBU8NACAFKAIEIgFBAXFFDQACQCABQQJxRQRAIAVB2BEoAgBGBEBB2BEgAzYCAEHMEUHMESgCACAAaiIANgIAIAMgAEEBcjYCBCADQdQRKAIARw0DQcgRQQA2AgBB1BFBADYCAA8LIAVB1BEoAgBGBEBB1BEgAzYCAEHIEUHIESgCACAAaiIANgIAIAMgAEEBcjYCBCAAIANqIAA2AgAPCyABQXhxIABqIQACQCABQf8BTQRAIAUoAggiAiABQQN2IgRBA3RB6BFqRhogAiAFKAIMIgFGBEBBwBFBwBEoAgBBfiAEd3E2AgAMAgsgAiABNgIMIAEgAjYCCAwBCyAFKAIYIQYCQCAFIAUoAgwiAUcEQCAFKAIIIgJB0BEoAgBJGiACIAE2AgwgASACNgIIDAELAkAgBUEUaiICKAIAIgQNACAFQRBqIgIoAgAiBA0AQQAhAQwBCwNAIAIhByAEIgFBFGoiAigCACIEDQAgAUEQaiECIAEoAhAiBA0ACyAHQQA2AgALIAZFDQACQCAFIAUoAhwiAkECdEHwE2oiBCgCAEYEQCAEIAE2AgAgAQ0BQcQRQcQRKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiABNgIAIAFFDQELIAEgBjYCGCAFKAIQIgIEQCABIAI2AhAgAiABNgIYCyAFKAIUIgJFDQAgASACNgIUIAIgATYCGAsgAyAAQQFyNgIEIAAgA2ogADYCACADQdQRKAIARw0BQcgRIAA2AgAPCyAFIAFBfnE2AgQgAyAAQQFyNgIEIAAgA2ogADYCAAsgAEH/AU0EQCAAQQN2IgFBA3RB6BFqIQACf0HAESgCACICQQEgAXQiAXFFBEBBwBEgASACcjYCACAADAELIAAoAggLIQIgACADNgIIIAIgAzYCDCADIAA2AgwgAyACNgIIDwtBHyECIANCADcCECAAQf///wdNBEAgAEEIdiIBIAFBgP4/akEQdkEIcSIBdCICIAJBgOAfakEQdkEEcSICdCIEIARBgIAPakEQdkECcSIEdEEPdiABIAJyIARyayIBQQF0IAAgAUEVanZBAXFyQRxqIQILIAMgAjYCHCACQQJ0QfATaiEBAkACQAJAQcQRKAIAIgRBASACdCIHcUUEQEHEESAEIAdyNgIAIAEgAzYCACADIAE2AhgMAQsgAEEAQRkgAkEBdmsgAkEfRht0IQIgASgCACEBA0AgASIEKAIEQXhxIABGDQIgAkEddiEBIAJBAXQhAiAEIAFBBHFqIgdBEGooAgAiAQ0ACyAHIAM2AhAgAyAENgIYCyADIAM2AgwgAyADNgIIDAELIAQoAggiACADNgIMIAQgAzYCCCADQQA2AhggAyAENgIMIAMgADYCCAtB4BFB4BEoAgBBAWsiAEF/IAAbNgIACwsSACAAEA4EQCAAECcPCyAAEAcLLwEBfyMAQRBrIgEkACABIAA2AgwgASgCDCIAIAFBCGogARAfIAAQHiABQRBqJAALCwAgABAHIAE2AgQL+AgBAX8jAEGAAWsiAyQAIAMgADYCfCADIAE2AnggAyACNwNwIANBAEGAgIAIIAMoAnwtAFAbNgJsIAMgAygCfCgCADYCaCADIAMoAnwoAgQ2AmQgAyADKAJ8KAIINgJgIAMgAygCfCgCDDYCXCADIAMoAnwoAhA2AlggAyADKAJkQQVsNgJUIAMgAygCYEEFbDYCUCADIAMoAlxBBWw2AkwgAyADKAJYQQVsNgJIIAMgAygCfCgCFDYCRCADIAMoAnwoAhg2AkAgAyADKAJ8KAIcNgI8IAMgAygCfCgCIDYCOCADIAMoAnwoAiQ2AjQDQCADKQNwQhBURQRAIAMgAygCeBAEQf///x9xIAMoAkRqNgJEIAMgAygCeEEDahAEQQJ2Qf///x9xIAMoAkBqNgJAIAMgAygCeEEGahAEQQR2Qf///x9xIAMoAjxqNgI8IAMgAygCeEEJahAEQQZ2IAMoAjhqNgI4IAMgAygCeEEMahAEQQh2IAMoAmxyIAMoAjRqNgI0IAMgAygCRK0gAygCaK1+IAMoAkCtIAMoAkitfnwgAygCPK0gAygCTK1+fCADKAI4rSADKAJQrX58IAMoAjStIAMoAlStfnw3AyggAyADKAJErSADKAJkrX4gAygCQK0gAygCaK1+fCADKAI8rSADKAJIrX58IAMoAjitIAMoAkytfnwgAygCNK0gAygCUK1+fDcDICADIAMoAkStIAMoAmCtfiADKAJArSADKAJkrX58IAMoAjytIAMoAmitfnwgAygCOK0gAygCSK1+fCADKAI0rSADKAJMrX58NwMYIAMgAygCRK0gAygCXK1+IAMoAkCtIAMoAmCtfnwgAygCPK0gAygCZK1+fCADKAI4rSADKAJorX58IAMoAjStIAMoAkitfnw3AxAgAyADKAJErSADKAJYrX4gAygCQK0gAygCXK1+fCADKAI8rSADKAJgrX58IAMoAjitIAMoAmStfnwgAygCNK0gAygCaK1+fDcDCCADIAMpAyhCGog+AgQgAyADKQMop0H///8fcTYCRCADIAMpAyAgAygCBK18NwMgIAMgAykDIEIaiD4CBCADIAMpAyCnQf///x9xNgJAIAMgAykDGCADKAIErXw3AxggAyADKQMYQhqIPgIEIAMgAykDGKdB////H3E2AjwgAyADKQMQIAMoAgStfDcDECADIAMpAxBCGog+AgQgAyADKQMQp0H///8fcTYCOCADIAMpAwggAygCBK18NwMIIAMgAykDCEIaiD4CBCADIAMpAwinQf///x9xNgI0IAMgAygCRCADKAIEQQVsajYCRCADIAMoAkRBGnY2AgQgAyADKAJEQf///x9xNgJEIAMgAygCBCADKAJAajYCQCADIAMoAnhBEGo2AnggAyADKQNwQhB9NwNwDAELCyADKAJ8IAMoAkQ2AhQgAygCfCADKAJANgIYIAMoAnwgAygCPDYCHCADKAJ8IAMoAjg2AiAgAygCfCADKAI0NgIkIANBgAFqJAALXAECfyMAQRBrIgIkACACIAA2AgwCfyACKAIMIgEQDkEBcQRAIAEQMQwBCyMAQRBrIgAkACAAIAE2AgwgACgCDBAHLQALIQEgAEEQaiQAIAELIQAgAkEQaiQAIAALAwABC18BAX8jAEEQayIBJAAgASAANgIMIAEgASgCDBAHNgIIIAFBADYCBANAIAEoAgRBA09FBEAgASgCCCABKAIEQQJ0akEANgIAIAEgASgCBEEBajYCBAwBCwsgAUEQaiQAC5gBAQF/IwBBIGsiAyQAIAMgADYCHCADIAE2AhggAyACNgIUIAMoAhwhASMAQRBrIgAgAygCGDYCDCAAKAIMGiMAQRBrIgAgATYCBCAAKAIEGiMAQRBrIgAgAygCFDYCDCAAKAIMGiMAQRBrIgAkACAAIAE2AgQjAEEQayIBIAAoAgQ2AgwgASgCDBogAEEQaiQAIANBIGokAAt/AQN/IAAhAQJAIABBA3EEQANAIAEtAABFDQIgAUEBaiIBQQNxDQALCwNAIAEiAkEEaiEBIAIoAgAiA0F/cyADQYGChAhrcUGAgYKEeHFFDQALIANB/wFxRQRAIAIgAGsPCwNAIAItAAEhAyACQQFqIgEhAiADDQALCyABIABrC5YtAQx/IwBBEGsiDCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB9AFNBEBBwBEoAgAiBUEQIABBC2pBeHEgAEELSRsiCEEDdiICdiIBQQNxBEAgAUF/c0EBcSACaiIDQQN0IgFB8BFqKAIAIgRBCGohAAJAIAQoAggiAiABQegRaiIBRgRAQcARIAVBfiADd3E2AgAMAQsgAiABNgIMIAEgAjYCCAsgBCADQQN0IgFBA3I2AgQgASAEaiIBIAEoAgRBAXI2AgQMDQsgCEHIESgCACIKTQ0BIAEEQAJAQQIgAnQiAEEAIABrciABIAJ0cSIAQQAgAGtxQQFrIgAgAEEMdkEQcSICdiIBQQV2QQhxIgAgAnIgASAAdiIBQQJ2QQRxIgByIAEgAHYiAUEBdkECcSIAciABIAB2IgFBAXZBAXEiAHIgASAAdmoiA0EDdCIAQfARaigCACIEKAIIIgEgAEHoEWoiAEYEQEHAESAFQX4gA3dxIgU2AgAMAQsgASAANgIMIAAgATYCCAsgBEEIaiEAIAQgCEEDcjYCBCAEIAhqIgIgA0EDdCIBIAhrIgNBAXI2AgQgASAEaiADNgIAIAoEQCAKQQN2IgFBA3RB6BFqIQdB1BEoAgAhBAJ/IAVBASABdCIBcUUEQEHAESABIAVyNgIAIAcMAQsgBygCCAshASAHIAQ2AgggASAENgIMIAQgBzYCDCAEIAE2AggLQdQRIAI2AgBByBEgAzYCAAwNC0HEESgCACIGRQ0BIAZBACAGa3FBAWsiACAAQQx2QRBxIgJ2IgFBBXZBCHEiACACciABIAB2IgFBAnZBBHEiAHIgASAAdiIBQQF2QQJxIgByIAEgAHYiAUEBdkEBcSIAciABIAB2akECdEHwE2ooAgAiASgCBEF4cSAIayEDIAEhAgNAAkAgAigCECIARQRAIAIoAhQiAEUNAQsgACgCBEF4cSAIayICIAMgAiADSSICGyEDIAAgASACGyEBIAAhAgwBCwsgASAIaiIJIAFNDQIgASgCGCELIAEgASgCDCIERwRAIAEoAggiAEHQESgCAEkaIAAgBDYCDCAEIAA2AggMDAsgAUEUaiICKAIAIgBFBEAgASgCECIARQ0EIAFBEGohAgsDQCACIQcgACIEQRRqIgIoAgAiAA0AIARBEGohAiAEKAIQIgANAAsgB0EANgIADAsLQX8hCCAAQb9/Sw0AIABBC2oiAEF4cSEIQcQRKAIAIglFDQBBHyEFQQAgCGshAwJAAkACQAJ/IAhB////B00EQCAAQQh2IgAgAEGA/j9qQRB2QQhxIgJ0IgAgAEGA4B9qQRB2QQRxIgF0IgAgAEGAgA9qQRB2QQJxIgB0QQ92IAEgAnIgAHJrIgBBAXQgCCAAQRVqdkEBcXJBHGohBQsgBUECdEHwE2ooAgAiAkULBEBBACEADAELQQAhACAIQQBBGSAFQQF2ayAFQR9GG3QhAQNAAkAgAigCBEF4cSAIayIHIANPDQAgAiEEIAciAw0AQQAhAyACIQAMAwsgACACKAIUIgcgByACIAFBHXZBBHFqKAIQIgJGGyAAIAcbIQAgAUEBdCEBIAINAAsLIAAgBHJFBEBBAiAFdCIAQQAgAGtyIAlxIgBFDQMgAEEAIABrcUEBayIAIABBDHZBEHEiAnYiAUEFdkEIcSIAIAJyIAEgAHYiAUECdkEEcSIAciABIAB2IgFBAXZBAnEiAHIgASAAdiIBQQF2QQFxIgByIAEgAHZqQQJ0QfATaigCACEACyAARQ0BCwNAIAAoAgRBeHEgCGsiASADSSECIAEgAyACGyEDIAAgBCACGyEEIAAoAhAiAQR/IAEFIAAoAhQLIgANAAsLIARFDQAgA0HIESgCACAIa08NACAEIAhqIgYgBE0NASAEKAIYIQUgBCAEKAIMIgFHBEAgBCgCCCIAQdARKAIASRogACABNgIMIAEgADYCCAwKCyAEQRRqIgIoAgAiAEUEQCAEKAIQIgBFDQQgBEEQaiECCwNAIAIhByAAIgFBFGoiAigCACIADQAgAUEQaiECIAEoAhAiAA0ACyAHQQA2AgAMCQsgCEHIESgCACICTQRAQdQRKAIAIQMCQCACIAhrIgFBEE8EQEHIESABNgIAQdQRIAMgCGoiADYCACAAIAFBAXI2AgQgAiADaiABNgIAIAMgCEEDcjYCBAwBC0HUEUEANgIAQcgRQQA2AgAgAyACQQNyNgIEIAIgA2oiACAAKAIEQQFyNgIECyADQQhqIQAMCwsgCEHMESgCACIGSQRAQcwRIAYgCGsiATYCAEHYEUHYESgCACICIAhqIgA2AgAgACABQQFyNgIEIAIgCEEDcjYCBCACQQhqIQAMCwtBACEAIAhBL2oiCQJ/QZgVKAIABEBBoBUoAgAMAQtBpBVCfzcCAEGcFUKAoICAgIAENwIAQZgVIAxBDGpBcHFB2KrVqgVzNgIAQawVQQA2AgBB/BRBADYCAEGAIAsiAWoiBUEAIAFrIgdxIgIgCE0NCkH4FCgCACIEBEBB8BQoAgAiAyACaiIBIANNDQsgASAESw0LC0H8FC0AAEEEcQ0FAkACQEHYESgCACIDBEBBgBUhAANAIAMgACgCACIBTwRAIAEgACgCBGogA0sNAwsgACgCCCIADQALC0EAEAwiAUF/Rg0GIAIhBUGcFSgCACIDQQFrIgAgAXEEQCACIAFrIAAgAWpBACADa3FqIQULIAUgCE0NBiAFQf7///8HSw0GQfgUKAIAIgQEQEHwFCgCACIDIAVqIgAgA00NByAAIARLDQcLIAUQDCIAIAFHDQEMCAsgBSAGayAHcSIFQf7///8HSw0FIAUQDCIBIAAoAgAgACgCBGpGDQQgASEACwJAIABBf0YNACAIQTBqIAVNDQBBoBUoAgAiASAJIAVrakEAIAFrcSIBQf7///8HSwRAIAAhAQwICyABEAxBf0cEQCABIAVqIQUgACEBDAgLQQAgBWsQDBoMBQsgACIBQX9HDQYMBAsAC0EAIQQMBwtBACEBDAULIAFBf0cNAgtB/BRB/BQoAgBBBHI2AgALIAJB/v///wdLDQEgAhAMIQFBABAMIQAgAUF/Rg0BIABBf0YNASAAIAFNDQEgACABayIFIAhBKGpNDQELQfAUQfAUKAIAIAVqIgA2AgBB9BQoAgAgAEkEQEH0FCAANgIACwJAAkACQEHYESgCACIHBEBBgBUhAANAIAEgACgCACIDIAAoAgQiAmpGDQIgACgCCCIADQALDAILQdARKAIAIgBBACAAIAFNG0UEQEHQESABNgIAC0EAIQBBhBUgBTYCAEGAFSABNgIAQeARQX82AgBB5BFBmBUoAgA2AgBBjBVBADYCAANAIABBA3QiA0HwEWogA0HoEWoiAjYCACADQfQRaiACNgIAIABBAWoiAEEgRw0AC0HMESAFQShrIgNBeCABa0EHcUEAIAFBCGpBB3EbIgBrIgI2AgBB2BEgACABaiIANgIAIAAgAkEBcjYCBCABIANqQSg2AgRB3BFBqBUoAgA2AgAMAgsgAC0ADEEIcQ0AIAMgB0sNACABIAdNDQAgACACIAVqNgIEQdgRIAdBeCAHa0EHcUEAIAdBCGpBB3EbIgBqIgI2AgBBzBFBzBEoAgAgBWoiASAAayIANgIAIAIgAEEBcjYCBCABIAdqQSg2AgRB3BFBqBUoAgA2AgAMAQtB0BEoAgAgAUsEQEHQESABNgIACyABIAVqIQJBgBUhAAJAAkACQAJAAkACQANAIAIgACgCAEcEQCAAKAIIIgANAQwCCwsgAC0ADEEIcUUNAQtBgBUhAANAIAcgACgCACICTwRAIAIgACgCBGoiBCAHSw0DCyAAKAIIIQAMAAsACyAAIAE2AgAgACAAKAIEIAVqNgIEIAFBeCABa0EHcUEAIAFBCGpBB3EbaiIJIAhBA3I2AgQgAkF4IAJrQQdxQQAgAkEIakEHcRtqIgUgCCAJaiIGayECIAUgB0YEQEHYESAGNgIAQcwRQcwRKAIAIAJqIgA2AgAgBiAAQQFyNgIEDAMLIAVB1BEoAgBGBEBB1BEgBjYCAEHIEUHIESgCACACaiIANgIAIAYgAEEBcjYCBCAAIAZqIAA2AgAMAwsgBSgCBCIAQQNxQQFGBEAgAEF4cSEHAkAgAEH/AU0EQCAFKAIIIgMgAEEDdiIAQQN0QegRakYaIAMgBSgCDCIBRgRAQcARQcARKAIAQX4gAHdxNgIADAILIAMgATYCDCABIAM2AggMAQsgBSgCGCEIAkAgBSAFKAIMIgFHBEAgBSgCCCIAIAE2AgwgASAANgIIDAELAkAgBUEUaiIAKAIAIgMNACAFQRBqIgAoAgAiAw0AQQAhAQwBCwNAIAAhBCADIgFBFGoiACgCACIDDQAgAUEQaiEAIAEoAhAiAw0ACyAEQQA2AgALIAhFDQACQCAFIAUoAhwiA0ECdEHwE2oiACgCAEYEQCAAIAE2AgAgAQ0BQcQRQcQRKAIAQX4gA3dxNgIADAILIAhBEEEUIAgoAhAgBUYbaiABNgIAIAFFDQELIAEgCDYCGCAFKAIQIgAEQCABIAA2AhAgACABNgIYCyAFKAIUIgBFDQAgASAANgIUIAAgATYCGAsgBSAHaiEFIAIgB2ohAgsgBSAFKAIEQX5xNgIEIAYgAkEBcjYCBCACIAZqIAI2AgAgAkH/AU0EQCACQQN2IgBBA3RB6BFqIQICf0HAESgCACIBQQEgAHQiAHFFBEBBwBEgACABcjYCACACDAELIAIoAggLIQAgAiAGNgIIIAAgBjYCDCAGIAI2AgwgBiAANgIIDAMLQR8hACACQf///wdNBEAgAkEIdiIAIABBgP4/akEQdkEIcSIDdCIAIABBgOAfakEQdkEEcSIBdCIAIABBgIAPakEQdkECcSIAdEEPdiABIANyIAByayIAQQF0IAIgAEEVanZBAXFyQRxqIQALIAYgADYCHCAGQgA3AhAgAEECdEHwE2ohBAJAQcQRKAIAIgNBASAAdCIBcUUEQEHEESABIANyNgIAIAQgBjYCACAGIAQ2AhgMAQsgAkEAQRkgAEEBdmsgAEEfRht0IQAgBCgCACEBA0AgASIDKAIEQXhxIAJGDQMgAEEddiEBIABBAXQhACADIAFBBHFqIgQoAhAiAQ0ACyAEIAY2AhAgBiADNgIYCyAGIAY2AgwgBiAGNgIIDAILQcwRIAVBKGsiA0F4IAFrQQdxQQAgAUEIakEHcRsiAGsiAjYCAEHYESAAIAFqIgA2AgAgACACQQFyNgIEIAEgA2pBKDYCBEHcEUGoFSgCADYCACAHIARBJyAEa0EHcUEAIARBJ2tBB3EbakEvayIAIAAgB0EQakkbIgJBGzYCBCACQYgVKQIANwIQIAJBgBUpAgA3AghBiBUgAkEIajYCAEGEFSAFNgIAQYAVIAE2AgBBjBVBADYCACACQRhqIQADQCAAQQc2AgQgAEEIaiEBIABBBGohACABIARJDQALIAIgB0YNAyACIAIoAgRBfnE2AgQgByACIAdrIgRBAXI2AgQgAiAENgIAIARB/wFNBEAgBEEDdiIAQQN0QegRaiECAn9BwBEoAgAiAUEBIAB0IgBxRQRAQcARIAAgAXI2AgAgAgwBCyACKAIICyEAIAIgBzYCCCAAIAc2AgwgByACNgIMIAcgADYCCAwEC0EfIQAgB0IANwIQIARB////B00EQCAEQQh2IgAgAEGA/j9qQRB2QQhxIgJ0IgAgAEGA4B9qQRB2QQRxIgF0IgAgAEGAgA9qQRB2QQJxIgB0QQ92IAEgAnIgAHJrIgBBAXQgBCAAQRVqdkEBcXJBHGohAAsgByAANgIcIABBAnRB8BNqIQMCQEHEESgCACICQQEgAHQiAXFFBEBBxBEgASACcjYCACADIAc2AgAgByADNgIYDAELIARBAEEZIABBAXZrIABBH0YbdCEAIAMoAgAhAQNAIAEiAigCBEF4cSAERg0EIABBHXYhASAAQQF0IQAgAiABQQRxaiIDKAIQIgENAAsgAyAHNgIQIAcgAjYCGAsgByAHNgIMIAcgBzYCCAwDCyADKAIIIgAgBjYCDCADIAY2AgggBkEANgIYIAYgAzYCDCAGIAA2AggLIAlBCGohAAwFCyACKAIIIgAgBzYCDCACIAc2AgggB0EANgIYIAcgAjYCDCAHIAA2AggLQcwRKAIAIgAgCE0NAEHMESAAIAhrIgE2AgBB2BFB2BEoAgAiAiAIaiIANgIAIAAgAUEBcjYCBCACIAhBA3I2AgQgAkEIaiEADAMLQbgRQTA2AgBBACEADAILAkAgBUUNAAJAIAQoAhwiAkECdEHwE2oiACgCACAERgRAIAAgATYCACABDQFBxBEgCUF+IAJ3cSIJNgIADAILIAVBEEEUIAUoAhAgBEYbaiABNgIAIAFFDQELIAEgBTYCGCAEKAIQIgAEQCABIAA2AhAgACABNgIYCyAEKAIUIgBFDQAgASAANgIUIAAgATYCGAsCQCADQQ9NBEAgBCADIAhqIgBBA3I2AgQgACAEaiIAIAAoAgRBAXI2AgQMAQsgBCAIQQNyNgIEIAYgA0EBcjYCBCADIAZqIAM2AgAgA0H/AU0EQCADQQN2IgBBA3RB6BFqIQICf0HAESgCACIBQQEgAHQiAHFFBEBBwBEgACABcjYCACACDAELIAIoAggLIQAgAiAGNgIIIAAgBjYCDCAGIAI2AgwgBiAANgIIDAELQR8hACADQf///wdNBEAgA0EIdiIAIABBgP4/akEQdkEIcSICdCIAIABBgOAfakEQdkEEcSIBdCIAIABBgIAPakEQdkECcSIAdEEPdiABIAJyIAByayIAQQF0IAMgAEEVanZBAXFyQRxqIQALIAYgADYCHCAGQgA3AhAgAEECdEHwE2ohAgJAAkAgCUEBIAB0IgFxRQRAQcQRIAEgCXI2AgAgAiAGNgIAIAYgAjYCGAwBCyADQQBBGSAAQQF2ayAAQR9GG3QhACACKAIAIQgDQCAIIgEoAgRBeHEgA0YNAiAAQR12IQIgAEEBdCEAIAEgAkEEcWoiAigCECIIDQALIAIgBjYCECAGIAE2AhgLIAYgBjYCDCAGIAY2AggMAQsgASgCCCIAIAY2AgwgASAGNgIIIAZBADYCGCAGIAE2AgwgBiAANgIICyAEQQhqIQAMAQsCQCALRQ0AAkAgASgCHCICQQJ0QfATaiIAKAIAIAFGBEAgACAENgIAIAQNAUHEESAGQX4gAndxNgIADAILIAtBEEEUIAsoAhAgAUYbaiAENgIAIARFDQELIAQgCzYCGCABKAIQIgAEQCAEIAA2AhAgACAENgIYCyABKAIUIgBFDQAgBCAANgIUIAAgBDYCGAsCQCADQQ9NBEAgASADIAhqIgBBA3I2AgQgACABaiIAIAAoAgRBAXI2AgQMAQsgASAIQQNyNgIEIAkgA0EBcjYCBCADIAlqIAM2AgAgCgRAIApBA3YiAEEDdEHoEWohBEHUESgCACECAn9BASAAdCIAIAVxRQRAQcARIAAgBXI2AgAgBAwBCyAEKAIICyEAIAQgAjYCCCAAIAI2AgwgAiAENgIMIAIgADYCCAtB1BEgCTYCAEHIESADNgIACyABQQhqIQALIAxBEGokACAACzIBAX8gAEEBIAAbIQACQANAIAAQISIBDQFBvBEoAgAiAQRAIAERBQAMAQsLEAAACyABC6oCAQV/IwBBEGsiCCQAIAIgAUF/c0ERa00EQCAAEBghCQJ/IAFB5////wdJBEAgCCABQQF0NgIIIAggASACajYCDAJ/IwBBEGsiAiQAIAhBDGoiCigCACAIQQhqIgsoAgBJIQwgAkEQaiQAIAsgCiAMGygCACICQQtPCwR/IAJBEGpBcHEiAiACQQFrIgIgAkELRhsFQQoLDAELQW4LQQFqIgoQIiECIAQEQCACIAkgBBAQCyAGBEAgAiAEaiAHIAYQEAsgAyAEIAVqayIDBEAgAiAEaiAGaiAEIAlqIAVqIAMQEAsgAUEKRwRAIAkQFwsgACACECkgACAKECggACAEIAZqIANqIgAQGiAIQQA6AAcgACACaiAILQAHOgAAIAhBEGokAA8LECwACxYAIAAQDgRAIAAgARAaDwsgACABECoLGQEBf0EKIQEgABAOBH8gABAmQQFrBUEKCwsQACAAEAcoAghB/////wdxCwkAIAAQBygCAAsSACAAEAcgAUGAgICAeHI2AggLCwAgABAHIAE2AgALCwAgABAHIAE6AAsLkAEBA38jAEEQayIEJAAgAkFvTQRAAkAgAkEKTQRAIAAgAhAqIAAQByEDDAELIAAgAkELTwR/IAJBEGpBcHEiAyADQQFrIgMgA0ELRhsFQQoLQQFqIgUQIiIDECkgACAFECggACACEBoLIAMgASACEBAgBEEAOgAPIAIgA2ogBC0ADzoAACAEQRBqJAAPCxAsAAsFABAAAAuOHQEBfyMAQfABayIEJAAgBCAANgLsASAEIAE2AugBIAQgAjYC5AEgBCADNwPYASAEQQA2AlQgBCkD2AFQRQRAIAQpA9gBQsD/////B1YEQBAAAAsgBCAEKALsASgCADYClAEgBCAEKALsASgCBDYCkAEgBCAEKALsASgCCDYCjAEgBCAEKALsASgCDDYCiAEgBCAEKALsASgCEDYChAEgBCAEKALsASgCFDYCgAEgBCAEKALsASgCGDYCfCAEIAQoAuwBKAIcNgJ4IAQgBCgC7AEoAiA2AnQgBCAEKALsASgCJDYCcCAEIAQoAuwBKAIoNgJsIAQgBCgC7AEoAiw2AmggBCAEKALsASgCMDYCZCAEIAQoAuwBKAI0NgJgIAQgBCgC7AEoAjg2AlwgBCAEKALsASgCPDYCWANAIAQpA9gBQsAAVARAIARBEGoiAEIANwMAIABCADcDOCAAQgA3AzAgAEIANwMoIABCADcDICAAQgA3AxggAEIANwMQIABCADcDCCAEQQA2AgwDQCAEKQPYASAEKAIMrVhFBEAgBCgCDCAEQRBqaiAEKALoASAEKAIMai0AADoAACAEIAQoAgxBAWo2AgwMAQsLIAQgBEEQajYC6AEgBCAEKALkATYCVCAEIARBEGo2AuQBCyAEIAQoApQBNgLUASAEIAQoApABNgLQASAEIAQoAowBNgLMASAEIAQoAogBNgLIASAEIAQoAoQBNgLEASAEIAQoAoABNgLAASAEIAQoAnw2ArwBIAQgBCgCeDYCuAEgBCAEKAJ0NgK0ASAEIAQoAnA2ArABIAQgBCgCbDYCrAEgBCAEKAJoNgKoASAEIAQoAmQ2AqQBIAQgBCgCYDYCoAEgBCAEKAJcNgKcASAEIAQoAlg2ApgBIARBFDYCDANAIAQoAgwEQCAEIAQoAtQBIAQoAsQBajYC1AEgBCAEKAKkASAEKALUAXNBEHQgBCgCpAEgBCgC1AFzQRB2cjYCpAEgBCAEKAK0ASAEKAKkAWo2ArQBIAQgBCgCxAEgBCgCtAFzQQx0IAQoAsQBIAQoArQBc0EUdnI2AsQBIAQgBCgC1AEgBCgCxAFqNgLUASAEIAQoAqQBIAQoAtQBc0EIdCAEKAKkASAEKALUAXNBGHZyNgKkASAEIAQoArQBIAQoAqQBajYCtAEgBCAEKALEASAEKAK0AXNBB3QgBCgCxAEgBCgCtAFzQRl2cjYCxAEgBCAEKALQASAEKALAAWo2AtABIAQgBCgCoAEgBCgC0AFzQRB0IAQoAqABIAQoAtABc0EQdnI2AqABIAQgBCgCsAEgBCgCoAFqNgKwASAEIAQoAsABIAQoArABc0EMdCAEKALAASAEKAKwAXNBFHZyNgLAASAEIAQoAtABIAQoAsABajYC0AEgBCAEKAKgASAEKALQAXNBCHQgBCgCoAEgBCgC0AFzQRh2cjYCoAEgBCAEKAKwASAEKAKgAWo2ArABIAQgBCgCwAEgBCgCsAFzQQd0IAQoAsABIAQoArABc0EZdnI2AsABIAQgBCgCzAEgBCgCvAFqNgLMASAEIAQoApwBIAQoAswBc0EQdCAEKAKcASAEKALMAXNBEHZyNgKcASAEIAQoAqwBIAQoApwBajYCrAEgBCAEKAK8ASAEKAKsAXNBDHQgBCgCvAEgBCgCrAFzQRR2cjYCvAEgBCAEKALMASAEKAK8AWo2AswBIAQgBCgCnAEgBCgCzAFzQQh0IAQoApwBIAQoAswBc0EYdnI2ApwBIAQgBCgCrAEgBCgCnAFqNgKsASAEIAQoArwBIAQoAqwBc0EHdCAEKAK8ASAEKAKsAXNBGXZyNgK8ASAEIAQoAsgBIAQoArgBajYCyAEgBCAEKAKYASAEKALIAXNBEHQgBCgCmAEgBCgCyAFzQRB2cjYCmAEgBCAEKAKoASAEKAKYAWo2AqgBIAQgBCgCuAEgBCgCqAFzQQx0IAQoArgBIAQoAqgBc0EUdnI2ArgBIAQgBCgCyAEgBCgCuAFqNgLIASAEIAQoApgBIAQoAsgBc0EIdCAEKAKYASAEKALIAXNBGHZyNgKYASAEIAQoAqgBIAQoApgBajYCqAEgBCAEKAK4ASAEKAKoAXNBB3QgBCgCuAEgBCgCqAFzQRl2cjYCuAEgBCAEKALUASAEKALAAWo2AtQBIAQgBCgCmAEgBCgC1AFzQRB0IAQoApgBIAQoAtQBc0EQdnI2ApgBIAQgBCgCrAEgBCgCmAFqNgKsASAEIAQoAsABIAQoAqwBc0EMdCAEKALAASAEKAKsAXNBFHZyNgLAASAEIAQoAtQBIAQoAsABajYC1AEgBCAEKAKYASAEKALUAXNBCHQgBCgCmAEgBCgC1AFzQRh2cjYCmAEgBCAEKAKsASAEKAKYAWo2AqwBIAQgBCgCwAEgBCgCrAFzQQd0IAQoAsABIAQoAqwBc0EZdnI2AsABIAQgBCgC0AEgBCgCvAFqNgLQASAEIAQoAqQBIAQoAtABc0EQdCAEKAKkASAEKALQAXNBEHZyNgKkASAEIAQoAqgBIAQoAqQBajYCqAEgBCAEKAK8ASAEKAKoAXNBDHQgBCgCvAEgBCgCqAFzQRR2cjYCvAEgBCAEKALQASAEKAK8AWo2AtABIAQgBCgCpAEgBCgC0AFzQQh0IAQoAqQBIAQoAtABc0EYdnI2AqQBIAQgBCgCqAEgBCgCpAFqNgKoASAEIAQoArwBIAQoAqgBc0EHdCAEKAK8ASAEKAKoAXNBGXZyNgK8ASAEIAQoAswBIAQoArgBajYCzAEgBCAEKAKgASAEKALMAXNBEHQgBCgCoAEgBCgCzAFzQRB2cjYCoAEgBCAEKAK0ASAEKAKgAWo2ArQBIAQgBCgCuAEgBCgCtAFzQQx0IAQoArgBIAQoArQBc0EUdnI2ArgBIAQgBCgCzAEgBCgCuAFqNgLMASAEIAQoAqABIAQoAswBc0EIdCAEKAKgASAEKALMAXNBGHZyNgKgASAEIAQoArQBIAQoAqABajYCtAEgBCAEKAK4ASAEKAK0AXNBB3QgBCgCuAEgBCgCtAFzQRl2cjYCuAEgBCAEKALIASAEKALEAWo2AsgBIAQgBCgCnAEgBCgCyAFzQRB0IAQoApwBIAQoAsgBc0EQdnI2ApwBIAQgBCgCsAEgBCgCnAFqNgKwASAEIAQoAsQBIAQoArABc0EMdCAEKALEASAEKAKwAXNBFHZyNgLEASAEIAQoAsgBIAQoAsQBajYCyAEgBCAEKAKcASAEKALIAXNBCHQgBCgCnAEgBCgCyAFzQRh2cjYCnAEgBCAEKAKwASAEKAKcAWo2ArABIAQgBCgCxAEgBCgCsAFzQQd0IAQoAsQBIAQoArABc0EZdnI2AsQBIAQgBCgCDEECazYCDAwBCwsgBCAEKALUASAEKAKUAWo2AtQBIAQgBCgC0AEgBCgCkAFqNgLQASAEIAQoAswBIAQoAowBajYCzAEgBCAEKALIASAEKAKIAWo2AsgBIAQgBCgCxAEgBCgChAFqNgLEASAEIAQoAsABIAQoAoABajYCwAEgBCAEKAK8ASAEKAJ8ajYCvAEgBCAEKAK4ASAEKAJ4ajYCuAEgBCAEKAK0ASAEKAJ0ajYCtAEgBCAEKAKwASAEKAJwajYCsAEgBCAEKAKsASAEKAJsajYCrAEgBCAEKAKoASAEKAJoajYCqAEgBCAEKAKkASAEKAJkajYCpAEgBCAEKAKgASAEKAJgajYCoAEgBCAEKAKcASAEKAJcajYCnAEgBCAEKAKYASAEKAJYajYCmAEgBCAEKALUASAEKALoARAEczYC1AEgBCAEKALQASAEKALoAUEEahAEczYC0AEgBCAEKALMASAEKALoAUEIahAEczYCzAEgBCAEKALIASAEKALoAUEMahAEczYCyAEgBCAEKALEASAEKALoAUEQahAEczYCxAEgBCAEKALAASAEKALoAUEUahAEczYCwAEgBCAEKAK8ASAEKALoAUEYahAEczYCvAEgBCAEKAK4ASAEKALoAUEcahAEczYCuAEgBCAEKAK0ASAEKALoAUEgahAEczYCtAEgBCAEKAKwASAEKALoAUEkahAEczYCsAEgBCAEKAKsASAEKALoAUEoahAEczYCrAEgBCAEKAKoASAEKALoAUEsahAEczYCqAEgBCAEKAKkASAEKALoAUEwahAEczYCpAEgBCAEKAKgASAEKALoAUE0ahAEczYCoAEgBCAEKAKcASAEKALoAUE4ahAEczYCnAEgBCAEKAKYASAEKALoAUE8ahAEczYCmAEgBCAEKAJkQQFqNgJkIAQoAmRFBEAgBCAEKAJgQQFqNgJgCyAEKALkASAEKALUARAFIAQoAuQBQQRqIAQoAtABEAUgBCgC5AFBCGogBCgCzAEQBSAEKALkAUEMaiAEKALIARAFIAQoAuQBQRBqIAQoAsQBEAUgBCgC5AFBFGogBCgCwAEQBSAEKALkAUEYaiAEKAK8ARAFIAQoAuQBQRxqIAQoArgBEAUgBCgC5AFBIGogBCgCtAEQBSAEKALkAUEkaiAEKAKwARAFIAQoAuQBQShqIAQoAqwBEAUgBCgC5AFBLGogBCgCqAEQBSAEKALkAUEwaiAEKAKkARAFIAQoAuQBQTRqIAQoAqABEAUgBCgC5AFBOGogBCgCnAEQBSAEKALkAUE8aiAEKAKYARAFIAQpA9gBQsAAWARAIAQpA9gBQsAAVARAIARBADYCDANAIAQoAgwgBCkD2AGnT0UEQCAEKAJUIAQoAgxqIAQoAuQBIAQoAgxqLQAAOgAAIAQgBCgCDEEBajYCDAwBCwsLIAQoAuwBIAQoAmQ2AjAgBCgC7AEgBCgCYDYCNAUgBCAEKQPYAUJAfDcD2AEgBCAEKALkAUFAazYC5AEgBCAEKALoAUFAazYC6AEMAQsLCyAEQfABaiQAC5EBAQF/IwBBEGsiAyQAIAMgADYCDCADIAE2AgggAyACNgIEIAMoAgQEfyADKAIEEAQFQQALIQAgAygCDCAANgIwIAMoAgQEfyADKAIEQQRqEAQFQQALIQAgAygCDCAANgI0IAMoAggQBCEAIAMoAgwgADYCOCADKAIIQQRqEAQhACADKAIMIAA2AjwgA0EQaiQAC4cCAQF/IwBBEGsiAiQAIAIgADYCDCACIAE2AgggAigCDEHl8MGLBjYCACACKAIMQe7IgZkDNgIEIAIoAgxBstqIywc2AgggAigCDEH0yoHZBjYCDCACKAIIEAQhACACKAIMIAA2AhAgAigCCEEEahAEIQAgAigCDCAANgIUIAIoAghBCGoQBCEAIAIoAgwgADYCGCACKAIIQQxqEAQhACACKAIMIAA2AhwgAigCCEEQahAEIQAgAigCDCAANgIgIAIoAghBFGoQBCEAIAIoAgwgADYCJCACKAIIQRhqEAQhACACKAIMIAA2AiggAigCCEEcahAEIQAgAigCDCAANgIsIAJBEGokAAvaAQEBfyMAQRBrIgIgADYCDCACIAE3AwAgAigCDCACKQMAPAAAIAIgAikDAEIIiDcDACACKAIMIAIpAwA8AAEgAiACKQMAQgiINwMAIAIoAgwgAikDADwAAiACIAIpAwBCCIg3AwAgAigCDCACKQMAPAADIAIgAikDAEIIiDcDACACKAIMIAIpAwA8AAQgAiACKQMAQgiINwMAIAIoAgwgAikDADwABSACIAIpAwBCCIg3AwAgAigCDCACKQMAPAAGIAIgAikDAEIIiDcDACACKAIMIAIpAwA8AAcLKQEBfyMAQRBrIgEkACABIAA2AgwgASgCDBAHKAIEIQAgAUEQaiQAIAALKQEBfyMAQRBrIgEkACABIAA2AgwgASgCDBAHKAIAIQAgAUEQaiQAIAALEAAjACAAa0FwcSIAJAAgAAsGACAAJAALBAAjAAvKHwIGfwJ+IwBBkAJrIgYkACAGIAA2AogCIAYgATYChAIgBiACNgKAAiAGIAM2AvwBIAYgBDYC+AEgBiAFNgL0ASAGEAM2AvABAkAgBigC8AFFBEAgBkGhCTYCjAIMAQsgBkHgAWogBigC8AEQCCAGKALwARAXIAZB0AFqIAZB4AFqEA8gBkHAAWogBigChAIQCCAGQbABaiAGKAKAAhAIIAZBoAFqIAYoAvwBEAggBkGQAWogBigC+AEQCCAGQfAAaiAGQdABahAPIAYoAogCIQkgBkHgAGogBkHAAWoQDyAGQdAAaiAGQbABahAPIAYoAvQBIQogBkFAa0GkCRAIIAZBMGpBpAkQCCAGQSBqIAZBoAFqEA8gBkEQakGkCRAIIAYgBkGQAWoQDyAGQfAAaiEAIAZB4ABqIQEgBkHQAGohAyAGQTBqIQQgBkEgaiEHIAZBEGohCCMAQcAbayICJAAgAiAGQYABaiIFNgK8GyACIAk2ArgbIAJBADYCtBsgAiAKNgKwGyACQQA2AqwbIAJBADYCqBsgAkGYG2oQGSACQYAINgKUGyACQeX7lvYANgKQGyACQYAbakGFCBAIIAJB8BpqQYUIEAggAkHwEmpBgAgQEiACQfAKakGACBASIAIgBkFAayIJEAkgCRAKEBU2AuwKIAIgAkGAG2oQCSACQYAbahAKEBU2AugKIAIgAkHwGmoQCSACQfAaahAKEBU2AuQKAkAgAigCqBtBCkoEQCAFQYsIEAggAkEBNgLgCgwBCyACQQI2AtwKIAJB8BJqIAIoArQbIAJB3ApqEAsgAkHwEmogAigCkBsgAkHcCmoQCyACQfASaiACKAK4GyACQdwKahALIAJB8BJqIAIoAuwKIAJB3ApqEAsgAkHwEmogAigCsBsgAkHcCmoQCyACQfASaiAEEAkgBBAKIAJB3ApqEA0gAkHwEmogBxAJIAcQCiACQdwKahANIAJB8BJqIAEQCSABEAogAkHcCmoQDSACQfASaiADEAkgAxAKIAJB3ApqEA0gAkHwEmogABAJIAAQCiACQdwKahANIAJB8BJqIAIoAuQKIAJB3ApqEAsgAkHwEmogAigC6AogAkHcCmoQCyACQQA2AtgKIAJBADYC1AoDQCACKALUCiACKAKoG0gEQCACKAKsGyACKALUCkECdGooAgBBf0cEQCACIAIoAtgKQQEgAigC1Ap0cjYC2AoLIAIgAigC1ApBAWo2AtQKDAELCyACQfASaiACKALYCiACQdwKahALIAJBADYC0AoDQCACKALQCiACKAKoG0gEQCACKAKsGyACKALQCkECdGooAgBBf0cEQCACQfASaiACKAKsGyACKALQCkECdGooAgAgAkHcCmoQCwsgAiACKALQCkEBajYC0AoMAQsLIAJB8BJqIAgQCSAIEAogAkHcCmoQDSACQfASaiAGEAkgBhAKIAJB3ApqEA0gAiACKALcCkECa0H//wNxIgBBCHQgAEEIdnI7AfASIAIgAkHwEmogAigC3AoQFTYCzAogAkGgCmoiAEIANwMAIABCADcDGCAAQgA3AxAgAEIANwMIIAIoAtwKQYAISwRAIAVBjggQCCACQQE2AuAKDAELIAJBQGtBsAkQEiACQZgKakGVCCkAADcAACACQfAJaiIAQbYIKQAANwAYIABBrggpAAA3ABAgAEGmCCkAADcACCAAQZ4IKQAANwAAIAIoAtwKrSEMIwBB0ABrIgEkACABIAJBQGs2AkwgASACQThqNgJIIAEgAkHwEmo2AkQgASAMNwM4IAFBvwg2AjQgAUIQNwMoIAFBADYCJCABIAJBmApqNgIgIAEgAkHwCWo2AhwgAUIANwMQIAEpAzhCb1YEQBAAAAsgASgCTCEDIAEoAkwgASkDOKdqIQQgASgCRCEHIAEpAzghDCABKAI0IQggASkDKCENIAEoAiQhCSABKAIgIQogASgCHCELIwBBkANrIgAkACAAIAM2AowDIAAgBDYCiAMgAEEANgKEAyAAIAc2AoADIAAgDDcD+AIgACAINgL0AiAAIA03A+gCIAAgCTYC5AIgACAKNgLgAiAAIAs2AtwCIAAoAuACIQQgACgC3AIhByMAQSBrIgMkACADIABBEGo2AhwgA0LAADcDECADIAQ2AgwgAyAHNgIIIAMoAhwgAykDECADKAIMIAMoAghBkAooAgAoAgARCgAaIANBIGokACMAQRBrIgMkACADIABB0ABqNgIMIAMgAEEQajYCCCADKAIMIAMoAghBhAooAgAoAgARBAAaIANBEGokACAAQRBqQcAAEBEgAEHQAGogACgC9AIgACkD6AIQFCAAQQhqIAApA+gCEDAgAEHQAGogAEEIakIIEBQgACgCjAMhBCAAKAKAAyEHIAApA/gCIQwgACgC4AIhCCAAKALcAiEJIwBBMGsiAyQAIAMgBDYCLCADIAc2AiggAyAMNwMgIAMgCDYCHCADQgE3AxAgAyAJNgIMIAMoAiwgAygCKCADKQMgIAMoAhwgAykDECADKAIMQZAKKAIAKAIEEQkAGiADQTBqJAAgAEHQAGogACgCjAMgACkD+AIQFCAAQQhqIAApA/gCEDAgAEHQAGogAEEIakIIEBQgACgCiAMhBCMAQRBrIgMkACADIABB0ABqNgIMIAMgBDYCCCADKAIMIAMoAghBhAooAgAoAggRBAAaIANBEGokACAAQdAAakGAAhARIAAoAoQDBEAgACgChANCEDcDAAsgAEGQA2okACABQQA2AgwgASgCSARAIAEoAgxFBEAgASABKQM4QhB8NwMQCyABKAJIIAEpAxA3AwALIAEoAgwaIAFB0ABqJAAgAkIIIAIpAzhCB4N9PgI0IAJBADYCMANAIAIoAjAgAigCNEkEQCACKQM4pyACQUBraiACKAI0OgAAIAIgAikDOEIBfDcDOCACIAIoAjBBAWo2AjAMAQsLIAIpAzhQBEAgBUHQCBAIIAJBATYC4AoMAQsgAkEANgArIAJBADoALyACQQA2ACYgAkEAOgAqQbARIAIoArAbQQFrrTcDACACQQA2AiADQCACKAIgQQRIBEBBsBFBsBEpAwBCrf7V5NSF/ajYAH5CAXwiDDcDACACIAxCIYinQf8BcDoAHyACKAIgIAJBJmpqIAIoApQbIAIoAiBqLAAAIAItAB9zOgAAIAIoAiAgAkEramogAi0AHzoAACACIAIoAiBBAWo2AiAMAQsLIAJBEGoQGSACQRBqIAJBK2pBBBATIAJBEGogAkEmakEEEBMgAkEQaiACQUBrIAIpAzinEBMgAiACKALMCiIAQQh0QYCA/AdxIABBGHRyIABBCHZBgP4DcSAAQRh2cnI2AgwgAkEQaiACQQxqQQQQEyACQRBqEAkhASACQRBqEAohAyMAQTBrIgAgATYCLCAAIAM2AiggACACQfASajYCJCAAQYAINgIgAkAgACgCKEEASA0AIAAoAiBBAEgNACAAIAAoAiw2AhwgACAAKAIoQQNtNgIYIAAgACgCKCAAKAIYQQNsSjoAFyAAIAAoAiggACgCGEEDbEECakY6ABYgACAAKAIYIAAtABdBAXFqQQJ0NgIQAkAgACgCHARAIAAoAhAgACgCIEwNAQsgACgCJEEAOgAADAELIABBADYCDANAIAAoAgwgACgCGEgEQCAAKAIkIAAoAgxBAnRqIAAoAhwgACgCDEEDbGotAABBAnYtAOAIOgAAIAAoAiQgACgCDEECdEEBamogACgCHCAAKAIMQQNsai0AAEEDcUEEdCAAKAIcIAAoAgxBA2xBAWpqLQAAQQR2ci0A4Ag6AAAgACgCJCAAKAIMQQJ0QQJqaiAAKAIcIAAoAgxBA2xBAWpqLQAAQQJ0IAAoAhwgACgCDEEDbEECamotAABBBnZyQT9xLQDgCDoAACAAKAIkIAAoAgxBAnRBA2pqIAAoAhwgACgCDEEDbEECamotAABBP3EtAOAIOgAAIAAgACgCDEEBajYCDAwBCwsgAC0AF0EBcQRAIAAoAiQgACgCDEECdGogACgCHCAAKAIMQQNsai0AAEECdi0A4Ag6AAACQCAALQAWQQFxBEAgACgCJCAAKAIMQQJ0QQFqaiAAKAIcIAAoAgxBA2xqLQAAQQNxQQR0IAAoAhwgACgCDEEDbEEBamotAABBBHZyLQDgCDoAACAAKAIkIAAoAgxBAnRBAmpqIAAoAhwgACgCDEEDbEEBamotAABBAnRBP3EtAOAIOgAADAELIAAoAiQgACgCDEECdEEBamogACgCHCAAKAIMQQNsai0AAEEDcUEEdC0A4Ag6AAAgACAAKAIQQQFrNgIQCyAAIAAoAhBBAWs2AhALIAAoAiQgACgCEGpBADoAAAsgAhAZIAJB8BJqIQMgAkHwEmoQICEBIwBBEGsiByQAAkAgASACECUiAE0EQCACEBgiCSEEIAEiAARAAkAgAyAERg0AIAMgACAEaiIKa0EAIABBAXRrTQRAIAQgAyAAEBYMAQsgAyAEc0EDcSEIAkACQCADIARLBEAgCA0CIARBA3FFDQEDQCAARQ0EIAQgAy0AADoAACADQQFqIQMgAEEBayEAIARBAWoiBEEDcQ0ACwwBCwJAIAgNACAKQQNxBEADQCAARQ0FIAQgAEEBayIAaiIIIAAgA2otAAA6AAAgCEEDcQ0ACwsgAEEDTQ0AA0AgBCAAQQRrIgBqIAAgA2ooAgA2AgAgAEEDSw0ACwsgAEUNAgNAIAQgAEEBayIAaiAAIANqLQAAOgAAIAANAAsMAgsgAEEDTQ0AA0AgBCADKAIANgIAIANBBGohAyAEQQRqIQQgAEEEayIAQQNLDQALCyAARQ0AA0AgBCADLQAAOgAAIARBAWohBCADQQFqIQMgAEEBayIADQALCwsgB0EAOgAPIAEgCWogBy0ADzoAACACIAEQJAwBCyACIAAgASAAayACEBwiAEEAIAAgASADECMLIAdBEGokACMAQRBrIgAkACAAIAU2AgwgACACNgIIIAAoAgwiAQJ+IwBBEGsiAyAAKAIINgIMIAMoAgwiAykCAAs3AgAgASADKAIINgIIIAAoAggQHiAAQRBqJAAgAkEBNgLgCiACEAYgAkEQahAGCyACQfAaahAGIAJBgBtqEAYgAkGYG2oQBiACQcAbaiQAIAYQBiAGQRBqEAYgBkEgahAGIAZBMGoQBiAGQUBrEAYgBkHQAGoQBiAGQeAAahAGIAZB8ABqEAYgBiAGQYABahAJNgKMAiAGQYABahAGIAZBkAFqEAYgBkGgAWoQBiAGQbABahAGIAZBwAFqEAYgBkHQAWoQBiAGQeABahAGCyAGKAKMAiEAIAZBkAJqJAAgAAvKAQEBfyMAQYABayIGJAAgBiAANgJ4IAYgATYCdCAGIAI3A2ggBiADNgJkIAYgBDcDWCAGIAU2AlQCQCAGKQNoUARADAELIAYgBikDWEIgiD4CBCAGIAYpA1g+AgAgBkEIaiAGKAIAEAUgBkEMaiAGKAIEEAUgBkEQaiAGKAJUEC8gBkEQaiAGKAJkIAZBCGoQLiAGQRBqIAYoAnQgBigCeCAGKQNoEC0gBkEQakHAABARCyAGQQA2AnwgBigCfCEAIAZBgAFqJAAgAAuXAQEBfyMAQeAAayIEJAAgBCAANgJYIAQgATcDUCAEIAI2AkwgBCADNgJIAkAgBCkDUFAEQAwBCyAEQQhqIAQoAkgQLyAEQQhqIAQoAkxBABAuIAQoAlggBCkDUKcQEiAEQQhqIAQoAlggBCgCWCAEKQNQEC0gBEEIakHAABARCyAEQQA2AlwgBCgCXCEAIARB4ABqJAAgAAvVCQICfwF+IwBBEGsiAiQAIAIgADYCDCACIAE2AgggAigCDCEBIAIoAgghAyMAQdAAayIAJAAgACABNgJMIAAgAzYCSCAAKAJMKQM4QgBSBEAgACAAKAJMKQM4NwMAIAAoAkxBQGshASAAIAApAwAiBEIBfDcDACAEpyABakEBOgAAA0AgACkDAEIQVARAIAApAwCnIAAoAkxBQGtqQQA6AAAgACAAKQMAQgF8NwMADAELCyAAKAJMQQE6AFAgACgCTCAAKAJMQUBrQhAQGwsgACAAKAJMKAIUNgJEIAAgACgCTCgCGDYCQCAAIAAoAkwoAhw2AjwgACAAKAJMKAIgNgI4IAAgACgCTCgCJDYCNCAAIAAoAkBBGnY2AjAgACAAKAJAQf///x9xNgJAIAAgACgCMCAAKAI8ajYCPCAAIAAoAjxBGnY2AjAgACAAKAI8Qf///x9xNgI8IAAgACgCMCAAKAI4ajYCOCAAIAAoAjhBGnY2AjAgACAAKAI4Qf///x9xNgI4IAAgACgCMCAAKAI0ajYCNCAAIAAoAjRBGnY2AjAgACAAKAI0Qf///x9xNgI0IAAgACgCRCAAKAIwQQVsajYCRCAAIAAoAkRBGnY2AjAgACAAKAJEQf///x9xNgJEIAAgACgCMCAAKAJAajYCQCAAIAAoAkRBBWo2AiwgACAAKAIsQRp2NgIwIAAgACgCLEH///8fcTYCLCAAIAAoAkAgACgCMGo2AiggACAAKAIoQRp2NgIwIAAgACgCKEH///8fcTYCKCAAIAAoAjwgACgCMGo2AiQgACAAKAIkQRp2NgIwIAAgACgCJEH///8fcTYCJCAAIAAoAjggACgCMGo2AiAgACAAKAIgQRp2NgIwIAAgACgCIEH///8fcTYCICAAIAAoAjQgACgCMGpBgICAIGs2AhwgACAAKAIcQR92QQFrNgIMIAAgACgCDCAAKAIscTYCLCAAIAAoAgwgACgCKHE2AiggACAAKAIMIAAoAiRxNgIkIAAgACgCDCAAKAIgcTYCICAAIAAoAgwgACgCHHE2AhwgACAAKAIMQX9zNgIMIAAgACgCLCAAKAJEIAAoAgxxcjYCRCAAIAAoAiggACgCQCAAKAIMcXI2AkAgACAAKAIkIAAoAjwgACgCDHFyNgI8IAAgACgCICAAKAI4IAAoAgxxcjYCOCAAIAAoAhwgACgCNCAAKAIMcXI2AjQgACAAKAJEIAAoAkBBGnRyNgJEIAAgACgCPEEUdCAAKAJAQQZ2cjYCQCAAIAAoAjhBDnQgACgCPEEMdnI2AjwgACAAKAI0QQh0IAAoAjhBEnZyNgI4IAAgACgCRK0gACgCTCgCKK18NwMQIAAgACkDED4CRCAAIAAoAkCtIAAoAkwoAiytfCAAKQMQQiCIfDcDECAAIAApAxA+AkAgACAAKAI8rSAAKAJMKAIwrXwgACkDEEIgiHw3AxAgACAAKQMQPgI8IAAgACgCOK0gACgCTCgCNK18IAApAxBCIIh8NwMQIAAgACkDED4COCAAKAJIIAAoAkQQBSAAKAJIQQRqIAAoAkAQBSAAKAJIQQhqIAAoAjwQBSAAKAJIQQxqIAAoAjgQBSAAKAJMQdgAEBEgAEHQAGokACACQRBqJABBAAuFBAECfyMAQRBrIgMkACADIAA2AgwgAyABNgIIIAMgAjcDACADKAIMIQEgAygCCCEEIAMpAwAhAiMAQTBrIgAkACAAIAE2AiwgACAENgIoIAAgAjcDIAJAIAAoAiwpAzhCAFIEQCAAQhAgACgCLCkDOH03AxAgACkDECAAKQMgVgRAIAAgACkDIDcDEAsgAEIANwMYA0AgACkDGCAAKQMQVARAIAAoAiwpAzggACkDGHynIAAoAixBQGtqIAAoAiggACkDGKdqLQAAOgAAIAAgACkDGEIBfDcDGAwBCwsgACAAKQMgIAApAxB9NwMgIAAgACgCKCAAKQMQp2o2AiggACgCLCIBIAApAxAgASkDOHw3AzggACgCLCkDOEIQVA0BIAAoAiwgACgCLEFAa0IQEBsgACgCLEIANwM4CyAAKQMgQhBaBEAgACAAKQMgQnCDNwMIIAAoAiwgACgCKCAAKQMIEBsgACAAKAIoIAApAwinajYCKCAAIAApAyAgACkDCH03AyALIAApAyBQDQAgAEIANwMYA0AgACkDGCAAKQMgVARAIAAoAiwpAzggACkDGHynIAAoAixBQGtqIAAoAiggACkDGKdqLQAAOgAAIAAgACkDGEIBfDcDGAwBCwsgACgCLCIBIAApAyAgASkDOHw3AzgLIABBMGokACADQRBqJABBAAuCAwECfyMAQRBrIgIkACACIAA2AgwgAiABNgIIIAIoAgwhASACKAIIIQMjAEEQayIAJAAgACABNgIMIAAgAzYCCCAAKAIIEARB////H3EhASAAKAIMIAE2AgAgACgCCEEDahAEQQJ2QYP+/x9xIQEgACgCDCABNgIEIAAoAghBBmoQBEEEdkH/gf8fcSEBIAAoAgwgATYCCCAAKAIIQQlqEARBBnZB///AH3EhASAAKAIMIAE2AgwgACgCCEEMahAEQQh2Qf//P3EhASAAKAIMIAE2AhAgACgCDEEANgIUIAAoAgxBADYCGCAAKAIMQQA2AhwgACgCDEEANgIgIAAoAgxBADYCJCAAKAIIQRBqEAQhASAAKAIMIAE2AiggACgCCEEUahAEIQEgACgCDCABNgIsIAAoAghBGGoQBCEBIAAoAgwgATYCMCAAKAIIQRxqEAQhASAAKAIMIAE2AjQgACgCDEIANwM4IAAoAgxBADoAUCAAQRBqJAAgAkEQaiQAQQALC5oCAwBBgAgLUvJfTBoANG51bGwALTEAbGVuZXJyADhbO9vHjBtXAADrT+Ic05XnuxTuKB+RT4EzANhcQ63ef1cbfGq6zlKfAKn94gdxx4Wm29kgXlY+wS0ALTIAQeAIC5UBQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODlfLQAtMQAAYmFzaWNfc3RyaW5nAGFsbG9jYXRvcjxUPjo6YWxsb2NhdGUoc2l6ZV90IG4pICduJyBleGNlZWRzIG1heGltdW0gc3VwcG9ydGVkIHNpemUAQfgJCx8BAAAAAgAAAAMAAAD4BAAABAAAAAUAAAAIBQAAsApQ";function w(){var e=O;try{if(e==O&&s)return new Uint8Array(s);var t=x(e);if(t)return t;if(o)return o(e);throw"both async and sync fetching of the wasm failed"}catch(e){I(e)}}function M(e){for(;0<e.length;){var t,n=e.shift();"function"==typeof n?n(i):"number"==typeof(t=n.o)?void 0===n.m?m.get(t)():m.get(t)(n.m):t(void 0===n.m?null:n.m)}}O.startsWith(D)||(P=O,O=i.locateFile?i.locateFile(P,c):c+P);var k="function"==typeof atob?atob:function(e){var t="",n=0;e=e.replace(/[^A-Za-z0-9\+\/=]/g,"");do{var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(n++)),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(n++)),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(n++)),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(n++)),r=r<<2|o>>4,o=(15&o)<<4|i>>2,s=(3&i)<<6|a}while(t+=String.fromCharCode(r),64!==i&&(t+=String.fromCharCode(o)),64!==a&&(t+=String.fromCharCode(s)),n<e.length);return t};function x(e){if(e.startsWith(D)){try{var t=k(e.slice(D.length)),n=new Uint8Array(t.length);for(e=0;e<t.length;++e)n[e]=t.charCodeAt(e)}catch(e){throw Error("Converting base64 string to bytes failed.")}return n}}var R,B={a:function(){I()},b:function(e,t,n){g.copyWithin(e,t,t+n)},c:function(){I("OOM")},d:function(){function a(e){return e?48<e.length?e.substr(0,48):e:""}var e=function(){var e=document.URL,t=window.navigator.userAgent.toLowerCase(),n="";0<document.referrer.length&&(n=document.referrer);try{0==n.length&&0<window.opener.location.href.length&&(n=window.opener.location.href)}catch(e){}var r=window.navigator.appCodeName,o=window.navigator.appName,i=window.navigator.platform,e=a(e),n=a(n);return e+"|"+a(t)+"|"+n+"|"+r+"|"+o+"|"+i}(),t=function(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);(r=55296<=r&&r<=57343?65536+((1023&r)<<10)|1023&e.charCodeAt(++n):r)<=127?++t:t=r<=2047?t+2:r<=65535?t+3:t+4}return t}(e)+1,n=K(t);return h(e,n,t+1),n}},S=(!function(){function t(e){i.asm=e.exports,e=i.asm.e.buffer,i.HEAP8=A=new Int8Array(e),i.HEAP16=new Int16Array(e),i.HEAP32=new Int32Array(e),i.HEAPU8=g=new Uint8Array(e),i.HEAPU16=new Uint16Array(e),i.HEAPU32=new Uint32Array(e),i.HEAPF32=new Float32Array(e),i.HEAPF64=new Float64Array(e),m=i.asm.g,v.unshift(i.asm.f),T--,i.monitorRunDependencies&&i.monitorRunDependencies(T),0==T&&C&&(e=C,C=null,e())}function n(e){t(e.instance)}function r(e){return(s||!_&&!l||"function"!=typeof fetch?Promise.resolve().then(w):fetch(O,{credentials:"same-origin"}).then(function(e){if(e.ok)return e.arrayBuffer();throw"failed to load wasm binary file at '"+O+"'"}).catch(w)).then(function(e){return WebAssembly.instantiate(e,o)}).then(e,function(e){u("failed to asynchronously prepare wasm: "+e),I(e)})}var o={a:B};if(T++,i.monitorRunDependencies&&i.monitorRunDependencies(T),i.instantiateWasm)try{return i.instantiateWasm(o,t)}catch(e){return u("Module.instantiateWasm callback failed with error: "+e)}(s||"function"!=typeof WebAssembly.instantiateStreaming||O.startsWith(D)||"function"!=typeof fetch?r(n):fetch(O,{credentials:"same-origin"}).then(function(e){return WebAssembly.instantiateStreaming(e,o).then(n,function(e){return u("wasm streaming compile failed: "+e),u("falling back to ArrayBuffer instantiation"),r(n)})})).catch(a)}(),i.___wasm_call_ctors=function(){return(i.___wasm_call_ctors=i.asm.f).apply(null,arguments)},i._getckey=function(){return(i._getckey=i.asm.h).apply(null,arguments)},i.stackSave=function(){return(S=i.stackSave=i.asm.i).apply(null,arguments)}),V=i.stackRestore=function(){return(V=i.stackRestore=i.asm.j).apply(null,arguments)},L=i.stackAlloc=function(){return(L=i.stackAlloc=i.asm.k).apply(null,arguments)},K=i._malloc=function(){return(K=i._malloc=i.asm.l).apply(null,arguments)};function N(){function e(){if(!R&&(R=!0,i.calledRun=!0,!d)){if(M(v),n(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),i.postRun)for("function"==typeof i.postRun&&(i.postRun=[i.postRun]);i.postRun.length;){var e=i.postRun.shift();b.unshift(e)}M(b)}}if(!(0<T)){if(i.preRun)for("function"==typeof i.preRun&&(i.preRun=[i.preRun]);i.preRun.length;)t=void 0,t=i.preRun.shift(),y.unshift(t);M(y),0<T||(i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),e()},1)):e())}var t}if(i.ccall=f,i.cwrap=function(e,t,n,r){var o=(n=n||[]).every(function(e){return"number"===e});return"string"!==t&&o&&!r?p(e):function(){return f(e,t,n,arguments)}},C=function e(){R||N(),R||(C=e)},i.run=N,i.preInit)for("function"==typeof i.preInit&&(i.preInit=[i.preInit]);0<i.preInit.length;)i.preInit.pop()();return N(),e.ready});function at(l,c){return A.__awaiter(this,void 0,void 0,function(){var t,n,r,o,i,a,s,_;return A.__generator(this,function(e){switch(e.label){case 0:return a=c.tm,t=c.vid,t=void 0===t?"":t,n=c.appVer,n=void 0===n?"":n,r=c.guid,r=void 0===r?"":r,o=c.platform,o=void 0===o?"":o,a=a||Xe(),l!==T.CKEY_9?[3,3]:rt?[3,2]:[4,it(void 0)];case 1:_=e.sent(),rt=_.cwrap("getckey","string",["int","string","string","string","string","int"]),e.label=2;case 2:return s=rt(+o,n,t,"",r,+a),i=T.CKEY_9,[3,4];case 3:s=ot(t,a,n,r,o),i=T.CKEY_8,e.label=4;case 4:return c.tm=a,c.cKey=s,c.encryptVer=i,[2,c]}})})}function st(a,s){return A.__awaiter(void 0,void 0,void 0,function(){var t,n,r,o,i;return A.__generator(this,function(e){switch(e.label){case 0:return t=a.reqParams,t=void 0===t?{}:t,o=a.config,n=a.player,r=a.isSetPlayerData,r=void 0===r||r,o=o.ckeyVer,[4,Promise.all([at(o,t),Ue(t.drm)])];case 1:return i=e.sent(),i=i[1],t.drm=i,r&&n.setCommonKv(((i={})[C.ckey]=t.cKey,i[C.ckeyVersion]=o,i)),a.logger.log("request params is:",h.jsonTool.safelyStringify(a.reqParams)),[4,s()];case 2:return e.sent(),[2]}})})}function _t(e,t){var n=e.test,e=e.path;return n?Ne.TEST:"string"==typeof(n=e||Ne.COMMON)?n:n[t%n.length]}function lt(p,f){return A.__awaiter(void 0,void 0,void 0,function(){var t,n,r,o,i,a,s,_,l,c,u,d;return A.__generator(this,function(e){switch(e.label){case 0:p.logger.log("doRequest start..."),t=p.requestor,n=p.reqParams,r=p.config,o=r.ckeyVer,i=r.retryCount,i=void 0===i?3:i,a=r.timeout,a=void 0===a?We.timeout:a,s=null,_=0,e.label=1;case 1:if(!(_<i+1))return[3,8];p.logger.log("retry... count is: ",_),e.label=2;case 2:return e.trys.push([2,5,,6]),s=null,p.reqPath=_t(r,_),(c=(l=p).resData)?[3,4]:[4,t.start(p.reqPath,n,a)];case 3:c=e.sent(),e.label=4;case 4:return l.resData=c,[3,6];case 5:return d=e.sent(),p.logger.log("the ".concat(_," retry err:"),d),"jsonp timeout"===(null==d?void 0:d.message)&&(s={code:g.ErrorCode.GETINFO_TIMEOUT,message:g.ErrorMsg.GETINFO_TIMEOUT}),[3,6];case 6:if(p.alreadyRetryCount=_,p.resData)return[3,8];e.label=7;case 7:return _++,[3,1];case 8:return p.resData&&85==+p.resData.em&&-3==+p.resData.exem?(p.reqParams.tm=p.resData.curTime,[4,at(o,n)]):[3,13];case 9:e.sent(),e.label=10;case 10:return e.trys.push([10,12,,13]),p.logger.log("retry ckey... "),p.reqPath=_t(r,0),u=p,[4,t.start(p.reqPath,n,a)];case 11:return u.resData=e.sent(),[3,13];case 12:return d=e.sent(),p.logger.log("retry ckey err:",d),[3,13];case 13:if(p.endTime=+new Date,!p.resData)return p.throw((null==s?void 0:s.code)||g.ErrorCode.GETINFO_NET,(null==s?void 0:s.message)||g.ErrorMsg.GETINFO_NET),[2];try{p.logger.log("sendRequest over... ret is: ",JSON.stringify(p.resData,function(e,t){return"m3u8"===e?"":t}))}catch(e){}return[4,f()];case 14:return e.sent(),[2]}})})}function ct(a,s){return A.__awaiter(void 0,void 0,void 0,function(){var n,r,o,i;return A.__generator(this,function(e){switch(e.label){case 0:return i=a.player,n=a.resData,n=void 0===n?{}:n,r=a.parseData,r=void 0===r?{}:r,o=a.isSetPlayerData,(void 0===o||o)&&i.setCommonKv(((o={})[g.COMMON_DATA_KEY.status]=null==(i=r.vitem)?void 0:i.vst,o[g.COMMON_DATA_KEY.type]=null==(i=r.vitem)?void 0:i.type,o.videoName=r.title,o.byteRate=r.byteRate,o[g.COMMON_DATA_KEY.duration]=r.duration,o.preview=r.preview,o.drm=(t=((null==(t=null==(t=n)?void 0:t.fl)?void 0:t.fi)||[]).find(function(e){return 1==+e.sl}))?+t.drm:0,o[g.COMMON_DATA_KEY.p2p]=n.fp2p?1:0,o[g.COMMON_DATA_KEY.fmt]=null==(i=null==(i=r.definitionList)?void 0:i.find(function(e){return e.sl}))?void 0:i.id,o[g.COMMON_DATA_KEY.testid]=n.tstid,o[g.COMMON_DATA_KEY.cdnid]=null==(i=null==(i=null==(i=null==(i=r.vitem)?void 0:i.ul)?void 0:i.ui)?void 0:i[0])?void 0:i.vt,o[g.COMMON_DATA_KEY.rate]=r.byteRate,o[g.COMMON_DATA_KEY.dltype]=n.dltype,o[C.vurl]=null==(i=r.urls[0])?void 0:i.url,o)),[4,s()];case 1:return e.sent(),[2]}var t})})}O.prototype.getReqParams=function(e,t){var n=this,r=this.prepare(e,t);return D([this._config.prepareRequestMiddleWare||st])(r).then(function(){return n.onMiddlewareExecuteSuccess(r)}).catch(function(e){return n.onMiddlewareExecutionFail(r,e)})},O.prototype.setVideoInfo=function(t,n){return A.__awaiter(this,void 0,void 0,function(){return A.__generator(this,function(e){return n?this.parseExternalVideoInfo(t,n):this.cachedResult[t]=void 0,[2]})})},O.prototype.parseExternalVideoInfo=function(a,s){return A.__awaiter(this,void 0,void 0,function(){var t,n,r,o,i=this;return A.__generator(this,function(e){return(t=this.prepare(a)).resData=s,n=this._config.sendRequestMiddleWare||lt,r=this._config.checkResponseMiddleWare||Je,o=this._config.parseResponseMiddleWare||tt,this.cachedResult[a]=D([n,r,o,ct])(t).then(function(){return i.onMiddlewareExecuteSuccess(t)}).catch(function(e){return i.onMiddlewareExecutionFail(t,e)}),[2]})})},O.prototype.parseVideoInfo=function(a,s,_){return A.__awaiter(this,void 0,void 0,function(){var t,n,r,o,i=this;return A.__generator(this,function(e){return(t=this.prepare(a,_)).resData=s,t.isSetPlayerData=!1,n=this._config.sendRequestMiddleWare||lt,r=this._config.checkResponseMiddleWare||Je,o=this._config.parseResponseMiddleWare||tt,[2,D([n,r,o])(t).then(function(){return i.onMiddlewareExecuteSuccess(t)}).catch(function(e){return i.onMiddlewareExecutionFail(t,e)})]})})},O.prototype.request=function(l,c,u,d){return void 0===d&&(d=!0),A.__awaiter(this,void 0,void 0,function(){var t,n,r,o,i,a,s,_=this;return A.__generator(this,function(e){switch(e.label){case 0:return(t=l,this._abort=!1,this.cachedResult[t])?[4,this.cachedResult[t]]:[3,2];case 1:return r=e.sent(),this.cachedResult[t]=void 0,[2,Promise.resolve(r)];case 2:return((n=this.prepare(t,c)).isSetPlayerData=d,r=this.validateReqParams(n.reqParams))?(n.error={code:g.ErrorCode.GETINFO_INNER,message:"ç¼ºå°å¿è¦æ­æ¾åæ° (".concat(r,") ")},[2,Promise.resolve(this.formatOutputData(n))]):(o=this._config.prepareRequestMiddleWare||st,i=this._config.sendRequestMiddleWare||lt,a=this._config.checkResponseMiddleWare||Je,s=this._config.parseResponseMiddleWare||tt,[2,D(null!=u&&u.length?u:[o,i,a,s,ct])(n).then(function(){return _.onMiddlewareExecuteSuccess(n)}).catch(function(e){return _.onMiddlewareExecutionFail(n,e)})])}})})},O.prototype.abort=function(){this._abort=!0},O.prototype.destroy=function(){this.abort(),this.cachedResult=null,this.player=null},O.prototype.validateReqParams=function(t){return["vid","platform","sdtfrom","flowid","guid"].find(function(e){return!t[e]})},O.prototype.prepare=function(e,t){this._abort=!1,this._seq+=1;var n=this.createBaseContext();return Object.assign(n.reqParams,t,{vid:e}),n},O.prototype.onMiddlewareExecuteSuccess=function(t){return A.__awaiter(this,void 0,void 0,function(){return A.__generator(this,function(e){return this._abort||this._seq!==t.seq?(this.cachedResult[t.vid]=void 0,[2,new Promise(function(){})]):(this.logger.log("getinfo æå: ",t),[2,this.formatOutputData(t)])})})},O.prototype.onMiddlewareExecutionFail=function(r,o){return A.__awaiter(this,void 0,void 0,function(){var t,n;return A.__generator(this,function(e){return this._abort||this._seq!==r.seq?(this.cachedResult[r.vid]=void 0,[2,new Promise(function(){})]):(t=o.code,n=o.message,t||(this.logger.warn("getinfo åé¨éè¯¯: ",o),t=g.ErrorCode.GETINFO_INNER,n="".concat(g.ErrorMsg.GETINFO_INNER,", err (").concat(o,")")),r.error={code:t,message:n},[2,this.formatOutputData(r)])})})},O.prototype.collectBaseRequestParam=function(){return A.__assign(A.__assign({},$e),{appVer:this.player.getCommonKv(g.COMMON_DATA_KEY.appVer),platform:this.player.getCommonKv(g.COMMON_DATA_KEY.platform),sdtfrom:this.player.getCommonKv(g.COMMON_DATA_KEY.sdtfrom),flowid:this.player.getCommonKv(g.COMMON_DATA_KEY.flowid),guid:this.player.getCommonKv(g.COMMON_DATA_KEY.guid)})},O.prototype.createBaseContext=function(){return{player:this.player,startTime:+new Date,endTime:0,alreadyRetryCount:0,config:this._config,reqParams:this.collectBaseRequestParam(),reqPath:void 0,resData:void 0,requestor:new He("getinfo_callback_"),parseData:void 0,error:void 0,throw:function(e,t){var n=new Error("getinfo err");throw n.code=e,n.message=t,n},isSetPlayerData:!0,seq:this._seq,urlConfig:void 0,logger:this.logger}},O.prototype.formatOutputData=function(e){var t,n,r,o,i,a,s=e.reqParams,_=e.resData,l=e.parseData,c=e.isSetPlayerData,u=A.__assign({},e),e=(["requestor","player","throw","isSetPlayerData"].forEach(function(e){delete u[e]}),void 0),d=this.player.getCommonKv(g.COMMON_DATA_KEY.drm),p=et(_),f=p.codec,E=p.vtype,p=p.vtypeKey,h=(n=((h=_)||{}).dltype,t=null==(t=null==(t=null==h?void 0:h.fl)?void 0:t.fi)?void 0:t.find(function(e){return 1===e.sl}),Qe({codec:et(h).codec,dltype:n,drm:null==t?void 0:t.drm}));return _&&l&&(t=(n=null==l?void 0:l.urls.map(function(e){return e.url}))[0],n=n.slice(1),r=(o=(null==(o=null==(o=null==l?void 0:l.vitem)?void 0:o.ckc)?void 0:o.split("|"))||[])[0],o=o[1],i=0<=_.fp2p&&(null==(i=null==(i=null==(i=_.vl)?void 0:i.vi)?void 0:i[0])?void 0:i.keyid),a=_.downloadmode,e={url:t,backupUrls:n,m3u8:null==l?void 0:l.urls.m3u8,p2pConfig:i?this.prepareP2PConfig({keyId:"hls.".concat(i),useP2P:2===_.fp2p,flowId:s.flowid,downloadMode:a,encoding:p}):void 0,drmConfig:r?this.prepareDRMConfig({drmType:d,licenseUrl:r,certificateUrl:o}):void 0,chachaParam:d===g.DRM_TYPE.CHACHA?{linkvid:null==(t=null==l?void 0:l.vitem)?void 0:t.lnk,base:null==(n=null==l?void 0:l.vitem)?void 0:n.base,appVer:s.appVer,tm:null==_?void 0:_.tm,platform:s.platform}:null,drmType:d,kernelName:h,vcodec:f,expireTimeStamp:+new Date+72e5}),c&&this.player.setCommonKv(g.COMMON_DATA_KEY.codec,E),A.__assign(A.__assign({},u),{kernelName:h,urlConfig:e})},O.prototype.prepareDRMConfig=function(e){var t,n,r=e.drmType,o=e.licenseUrl,e=e.certificateUrl,i=this.player.getCommonKv,o=((n={})[g.DRM_TYPE.FAIR_PLAY]=h.DrmKeySystems.FairPlayWebKit,n[g.DRM_TYPE.WIDEVINE]=h.DrmKeySystems.Widevine,{licenseUrl:o,certificate:{},keySystem:n[r],licenseRequestSetup:function(e){var t,n;return e.responseType="json",r===g.DRM_TYPE.FAIR_PLAY&&(t={guid:i(g.COMMON_DATA_KEY.guid),fmt:i(g.COMMON_DATA_KEY.fmt)},n=Object.keys(t).map(function(e){return"".concat(e,"=").concat(t[e])}).join("&"),e.body="".concat(e.body,"&").concat(n)),e},licenseResponseSetup:function(e){var t=e.code,n=e.ckc,e=e.msg;if(0===t)return h.stringTool.base64ToUint8Array(n);throw{code:t,message:e}}});return r===g.DRM_TYPE.FAIR_PLAY&&(o.certificate=((t={})[n[r]]=e,t)),o},O.prototype.prepareP2PConfig=function(e){return A.__assign({playerInfo:this.getPlayerInfo()},e)},O.prototype.getPlayerInfo=function(){var e={platform:this.player.getCommonKv(g.COMMON_DATA_KEY.platform)||"",osVer:this.player.getCommonKv(g.COMMON_DATA_KEY.osver)||"",broVer:this.player.getCommonKv(g.COMMON_DATA_KEY.ua)||"",playerVer:this.player.getCommonKv(g.COMMON_DATA_KEY.playerver)||"",guid:this.player.getCommonKv(g.COMMON_DATA_KEY.guid)||"",qq:"",wx:"",vip:!1},t=this.player.getCommonKv(g.COMMON_DATA_KEY.hc_main_login);return"qq"===t?e.qq=this.player.getCommonKv(g.COMMON_DATA_KEY.hc_vuserid):"wx"===t&&(e.wx=this.player.getCommonKv(g.COMMON_DATA_KEY.hc_vuserid)),e};p=O;function O(e){var t;this.player=e,this._abort=!1,this._seq=0,this.cachedResult={},this._config=A.__assign(A.__assign({},We),(null==(t=e.config)?void 0:t.getinfoConfig)||{}),this.logger=new h.Logger(e.config.instanceId,"GetInfoVod")}var ut={path:"",retryCount:3,zbtype:0,test:0,timeout:6e3},dt={cmd:2,cnlid:"",pla:0,stream:Te.HLS,system:0,appVer:"1.0.0.0",encryptVer:"",qq:0,device:"PC",guid:"",flowid:"",defn:"",host:location.host,livepid:"",logintype:1,vip_status:1,livequeue:1,fntick:"",tm:"",sdtfrom:"10201",platform:"10201",cKey:"",queueStatus:0,sphttps:ze(),vkey:"",user:"",playbacktime:0,auth_from:"",auth_ext:"",logintoken:"",forcedefn:"",defauto:1};function pt(e){return-1!==[0,10,11,13].indexOf(e)}function ft(e){void 0===e&&(e={});var t={},n=(t[1]=I.get("videoPlayError"),t[2]=I.get("areaLimit"),t[3]=I.get("areaLimit"),t[4]=I.get("bandWidthLimit"),t[5]=I.get("areaLimit"),t[6]=I.get("msgInterrupt"),t[7]=I.get("videoNotBegin"),t[8]=I.get("videoIsOver"),t[9]=I.get("numOfPeopleLimit"),t[16]=I.get("mustLogin"),t[18]=I.get("isNotInPlayList"),1!==(n=void 0===(n=e)?{}:n).ispay||1===n.iretdetailcode?1===n.iretdetailcode?{name:"execVIPRight",params:{msg:"æ¬ç´æ­éä»è´¹è§ç",type:"backplay",refer:113}}:{downgradeLevel:!0,name:"unlock1080p",params:{msg:"æ­¤æ¸æ°åº¦éè¦ä»è´¹è§ç",type:"flash.live.1080p"}}:{name:"showPayTips",params:{msg:"æ¬ç´æ­éä»è´¹è§ç",cmd:3}}),n=(t[25]=n,t[28]=I.get("getLoginInfoFailed"),t[30]=n,t[31]=n,t[32]=I.get("getLoginInfoFailed"),t[45]=I.get("showPayTip"),t[51]=I.get("videoCannotFind"),t[67]=I.get("copyrightLimit"),t[97]=I.get("notSptDrm"),e.iretcode);return t[String(n)]||I.get("universalTip")}function Et(e){var t=h.CODEC.H264,e=null==e?void 0:e.vcode;return 2===e&&(t=h.CODEC.H265),{vtypeKey:e,vtype:Se[e]||"unknown",codec:t}}function ht(n,r){return A.__awaiter(void 0,void 0,void 0,function(){var t;return A.__generator(this,function(e){switch(e.label){case 0:return void 0===(t=n.resData.iretcode)?(n.throw(g.ErrorCode.GETINFO_PARSE,g.ErrorMsg.GETINFO_PARSE,ft(n.resData)),[2]):pt(t)?[4,r()]:(t="".concat(g.ErrorCode.GETINFO_LIVE_SERVER_CODE_PREFIX).concat("000".concat(t).slice(-3)),n.throw(t,g.ErrorMsg.GETINFO_CODE,ft(n.resData)),[2]);case 1:return e.sent(),[2]}})})}function At(r,o){return A.__awaiter(void 0,void 0,void 0,function(){var t,n;return A.__generator(this,function(e){switch(e.label){case 0:return n=r.resData,n=(t=void 0===n?{}:n).formats instanceof Array?t.formats:[],r.parseData={preview:+t.playtime,urls:[{url:t.playurl}].concat(t.backurl_list),definitionList:n.map(function(e){return{id:e.id,name:e.fn,cname:e.fnname,sname:e.defnname,resolution:e.defnrate,sl:e.fn===t.defn?1:0,lmt:e.vip||0}}),watermarkList:{wi:t.brandpos?[t.brandpos]:[]},supplementaryInfo:{contentInfo:{},previewList:[],watermarkList:[],definitionList:[],posterList:[]}},null!=(n=r.parseData.definitionList)&&n.reverse(),1===t.fwflag&&t.ukey&&(r.parseData.supplementaryInfo.contentInfo.protectionWatermark=t.ukey),r.logger.log("parse ",r.parseData),[4,o()];case 1:return e.sent(),[2]}})})}var w={};function gt(e,t){var n=e.cnlid,r=e.platform,o=e.sdtfrom,i=(new Date).getDay(),i="7.".concat(0===i?7:i),t=0<(null==t?void 0:t.svrtick)?"".concat(1e3*(null==t?void 0:t.svrtick)).substring(0,10):Xe(),r=w.$xx(r,n,o,1,t,i);e.tm=t,e.fntick=t,e.cKey=r,e.encryptVer=i}w.ha=function(){for(var c=[],e=0;e<64;)c[e]=0|4294967296*Math.abs(Math.sin(++e));function u(e,t){return((e>>1)+(t>>1)<<1)+(1&e)+(1&t)}return function(e){for(var t,n,r,o,i=[],a=unescape(encodeURI(e)),s=a.length,_=[1732584193,-271733879,-1732584194,271733878],l=0;l<=s;)i[l>>2]|=(a.charCodeAt(l)||128)<<l++%4*8;for(i[e=16*(s+8>>6)+14]=8*s,l=0;l<e;l+=16){for(s=_,o=0;o<64;)s=[r=s[3],u(t=s[1],(r=u(u(s[0],[t&(n=s[2])|~t&r,r&t|~r&n,t^n^r,n^(t|~r)][s=o>>4]),u(c[o],i[[o,5*o+1,3*o+5,7*o][s]%16+l])))<<(s=[7,12,17,22,5,9,14,20,4,11,16,23,6,10,15,21][4*s+o++%4])|r>>>32-s),t,n];for(o=4;o;)_[--o]=u(_[o],s[o])}for(e="";o<32;)e+=(_[o>>3]>>4*(1^7&o++)&15).toString(16);return e}}(),w.stringToHex=function(e){for(var t="",n=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"),r=0;r<e.length;r++)t+=n[e.charCodeAt(r)>>4]+n[15&e.charCodeAt(r)];return t},w.hexToString=function(e){for(var t="",n="0x"==e.substr(0,2)?2:0;n<e.length;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return t},w._Seed="#$#@#*ad",w.tempcalc=function(e,t){for(var n="",r=0;r<e.length;r++)n+=String.fromCharCode(e.charCodeAt(r)^t.charCodeAt(r%4));return n},w.u1=function(e,t){for(var n="",r=t;r<e.length;r+=2)n+=e.charAt(r);return n},w._urlStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",w.urlenc=function(e,t,n){for(var r,o,i,a,s,_,l="",c=0;c<e.length;)a=e.charCodeAt(c++),r=e.charCodeAt(c++),o=e.charCodeAt(c++),15==c&&(l=(l="".concat(l,"A"))+t+n),i=a>>2,a=(3&a)<<4|r>>4,s=(15&r)<<2|o>>6,_=63&o,isNaN(r)?s=_=64:isNaN(o)&&(_=64),l=l+w._urlStr.charAt(i)+w._urlStr.charAt(a)+w._urlStr.charAt(s)+w._urlStr.charAt(_);return l},w.$xx=function(e,t,n,r,o,i){var a="123456";return i.length<3||"7."!=i.substr(0,2)?"err":("1"==(i=i.substr(2))&&(a="06fc1464"),"2"==i&&(a="4244ce1b"),"3"==i&&(a="77de31c5"),"4"==i&&(a="e0149fa2"),"5"==i&&(a="60394ced"),"6"==i&&(a="2da639f0"),"7"==i&&(a="c2f0cf9f"),o=o||parseInt(+new Date/1e3),w.ha("".concat(a+t+o,"*#06#").concat(e)))};function mt(r,o){return A.__awaiter(void 0,void 0,void 0,function(){var t,n;return A.__generator(this,function(e){switch(e.label){case 0:return t=r.reqParams,(t=void 0===t?{}:t).queueStatus=(null==(n=r.resData)?void 0:n.queue_status)||0,gt(t,r.resData),[4,Ue(t.livedrm)];case 1:return n=e.sent(),t.livedrm=n,t.playbackdrm=n,r.logger.log("request params is:",h.jsonTool.safelyStringify(r.reqParams)),[4,o()];case 2:return e.sent(),[2]}})})}function yt(f,E){return A.__awaiter(void 0,void 0,void 0,function(){var i,a,s,_,l,c,u,d,p;return A.__generator(this,function(e){switch(e.label){case 0:f.logger.log("doRequest start..."),i=f.requestor,a=f.reqParams,a=void 0===a?{}:a,s=f.config,_=s.retryCount,l=s.timeout,l=void 0===l?ut.timeout:l,c=null,u=0,e.label=1;case 1:if(!(u<_+1))return[3,7];f.logger.log("retry... count is: ",u),e.label=2;case 2:return e.trys.push([2,4,,5]),c=null,f.reqPath=(n=u,r=(t=s).test,o=t.path,t=t.zbtype,r?Re:"string"==typeof(r=o||xe[void 0===t?0:t])?r:r[n%r.length]),d=f,[4,i.start(f.reqPath,a,l)];case 3:return d.resData=e.sent(),[3,5];case 4:return p=e.sent(),f.resData=void 0,f.logger.log("the ".concat(u," retry err:"),p),"jsonp timeout"===(null==p?void 0:p.message)&&(c={code:g.ErrorCode.GETINFO_TIMEOUT,message:g.ErrorMsg.GETINFO_TIMEOUT}),[3,5];case 5:if(f.endTime=+new Date,f.alreadyRetryCount=u,f.resData){if(pt(p=f.resData.iretcode)||-1===[9,23,24,26,27,28,32,44,47,50,52,56,57,62,-80004,-80003].indexOf(p))return[3,7];gt(a,f.resData)}e.label=6;case 6:return u++,[3,1];case 7:return(f.endTime=+new Date,f.resData)?(f.logger.log("sendRequest over... ret is: ",h.jsonTool.safelyStringify(f.resData)),[4,E()]):(f.throw((null==c?void 0:c.code)||g.ErrorCode.GETINFO_NET,(null==c?void 0:c.message)||g.ErrorMsg.GETINFO_NET),[2]);case 8:return e.sent(),[2]}var t,n,r,o})})}function vt(o,i){return A.__awaiter(void 0,void 0,void 0,function(){var t,n,r;return A.__generator(this,function(e){switch(e.label){case 0:return r=o.player,t=o.resData,t=void 0===t?{}:t,n=o.parseData,n=void 0===n?{}:n,r.setCommonKv(((r={preview:n.preview,drm:t.drmtype})[g.COMMON_DATA_KEY.cdnid]=t.cdn_name,r[b.isuserpay]=t.isuserpay,r[b.livesid]=t.livesid,r[b.playtime]=t.playtime,r[b.cpay]=t.ispay,r[b.restpreviewcnt]=t.restpreviewcnt,r)),[4,i()];case 1:return e.sent(),[2]}})})}x.prototype.request=function(e,t){var n,r,o,i=this,a=A.__assign(A.__assign(A.__assign({},dt),{appVer:this.player.getCommonKv(g.COMMON_DATA_KEY.appVer),platform:this.player.getCommonKv(g.COMMON_DATA_KEY.platform),sdtfrom:this.player.getCommonKv(g.COMMON_DATA_KEY.sdtfrom),flowid:this.player.getCommonKv(g.COMMON_DATA_KEY.flowid),guid:this.player.getCommonKv(g.COMMON_DATA_KEY.guid),livepid:this.player.getCommonKv(g.COMMON_DATA_KEY.livepid),cnlid:e}),t),s=(this._abort=!1,this._seq+=1,{player:this.player,startTime:+new Date,endTime:0,alreadyRetryCount:0,config:this._config,reqParams:a,reqPath:void 0,resData:void 0,requestor:new He("livegetinfo_callback_"),parseData:void 0,error:void 0,throw:function(e,t,n){var r=new Error("getinfo err");throw r.code=e,r.message=t,r.data=n,r},seq:this._seq,urlConfig:void 0,logger:this.logger}),e=["cnlid","platform","sdtfrom","guid"].find(function(e){return!a[e]});return e?(s.error={code:g.ErrorCode.GETINFO_INNER,message:"ç¼ºå°å¿è¦æ­æ¾åæ° (".concat(e,") ")},Promise.resolve(this.formatOutputData(s))):(t=this._config.prepareRequestMiddleWare||mt,e=this._config.sendRequestMiddleWare||yt,n=this._config.checkResponseMiddleWare||ht,r=this._config.parseResponseMiddleWare||At,this._middlewares=[t,e,n,r,vt],t=D(this._middlewares),o=new Promise(function(){}),t(s).then(function(){return i._abort||i._seq!==s.seq?o:(i.logger.log("getinfo æå: ",s),i.formatOutputData(s))}).catch(function(e){var t,n;return i._abort||i._seq!==s.seq?o:(t=e.code,n=e.message,t||(i.logger.warn("getinfo åé¨éè¯¯: ",e),t=g.ErrorCode.GETINFO_INNER,n="".concat(g.ErrorMsg.GETINFO_INNER,", err (").concat(e,")")),s.error={code:t,message:n,data:e.data},i.formatOutputData(s))}))},x.prototype.abort=function(){this._abort=!0},x.prototype.destroy=function(){this.abort(),this._middlewares=null,this.player=null},x.prototype.formatOutputData=function(e){var t,n,r,o=e.resData,i=e.parseData,a=A.__assign({},e),s=(["requestor","player","throw"].forEach(function(e){delete a[e]}),void 0),_=this.player.getCommonKv(g.COMMON_DATA_KEY.drm),l=Et(o),c=l.codec,u=l.vtype,l=l.vtypeKey,d=(d=(o||{}).drmtype,Qe({codec:Et(o).codec,dltype:3,drm:d}));return o&&i&&(t=(i=null==i?void 0:i.urls.map(function(e){return e.url}))[0],i=i.slice(1),n=(r=(null==(r=null==o?void 0:o.drmckc)?void 0:r.split("|"))||[])[0],r=r[1],s={url:t,backupUrls:i,drmConfig:n?this.prepareDRMConfig({drmType:_,licenseUrl:n,certificateUrl:r}):void 0,chachaParam:_===g.DRM_TYPE.CHACHA?{cnlid:null==(t=e.reqParams.cnlid)?void 0:t.substring(0,e.reqParams.cnlid.length-2),baseKey:null==o?void 0:o.deckey,randoms:null==o?void 0:o.randoms}:null,p2pConfig:this.prepareP2PConfig({keyId:o.livesid,useP2P:!!o.hlsp2p,downloadMode:0,encoding:l}),drmType:_,vcodec:c}),this.player.setCommonKv(g.COMMON_DATA_KEY.codec,u),A.__assign(A.__assign({},a),{kernelName:d,urlConfig:s})},x.prototype.prepareDRMConfig=function(e){var t,n,r=e.drmType,o=e.licenseUrl,e=e.certificateUrl,i=this.player.getCommonKv,o=((n={})[g.DRM_TYPE.FAIR_PLAY]=h.DrmKeySystems.FairPlayWebKit,n[g.DRM_TYPE.WIDEVINE]=h.DrmKeySystems.Widevine,{licenseUrl:o,certificate:{},keySystem:n[r],licenseRequestSetup:function(e){var t,n;return r===g.DRM_TYPE.FAIR_PLAY&&(e.responseType="text",t={guid:i(g.COMMON_DATA_KEY.guid)},n=Object.keys(t).map(function(e){return"".concat(e,"=").concat(t[e])}).join("&"),e.body="".concat(e.body,"&").concat(n)),e},licenseResponseSetup:function(e){return r===g.DRM_TYPE.FAIR_PLAY?h.stringTool.base64ToUint8Array(e):e}});return r===g.DRM_TYPE.FAIR_PLAY&&(o.certificate=((t={})[n[r]]=e,t)),o},x.prototype.prepareP2PConfig=function(e){return A.__assign({flowId:this.player.getCommonKv(g.COMMON_DATA_KEY.flowid),playerInfo:this.getPlayerInfo()},e)},x.prototype.getPlayerInfo=function(){var e={platform:this.player.getCommonKv(g.COMMON_DATA_KEY.platform)||"",osVer:this.player.getCommonKv(g.COMMON_DATA_KEY.osver)||"",broVer:this.player.getCommonKv(g.COMMON_DATA_KEY.ua)||"",playerVer:this.player.getCommonKv(g.COMMON_DATA_KEY.playerver)||"",guid:this.player.getCommonKv(g.COMMON_DATA_KEY.guid)||"",qq:"",wx:"",vip:!1},t=this.player.getCommonKv(g.COMMON_DATA_KEY.hc_main_login);return"qq"===t?e.qq=this.player.getCommonKv(g.COMMON_DATA_KEY.hc_vuserid):"wx"===t&&(e.wx=this.player.getCommonKv(g.COMMON_DATA_KEY.hc_vuserid)),e};var bt,M=x;function x(e){var t;this.player=e,this._abort=!1,this._seq=0,this._config=A.__assign(A.__assign({},ut),(null==(t=e.config)?void 0:t.getinfoLiveConfig)||{}),this.logger=new h.Logger(e.config.instanceId,"GetInfoLive")}(e=bt=bt||{})[e.AUTO=0]="AUTO",e[e.FLV=1]="FLV",e[e.HLS=2]="HLS",e[e.RTMP=4]="RTMP",e[e.DASH=8]="DASH",e[e.WEB_RTC=16]="WEB_RTC",e[e.T_RTC=32]="T_RTC";var R,S,Tt=["https://infozb6.video.qq.com/cgi-bin/getliveinfo?","https://bkinfozb6.video.qq.com/cgi-bin/getliveinfo?"],Ct="https://test.zb.video.qq.com/cgi-bin/getliveinfo?",It=((S=R=R||{}).playtime="live-getinfo:playtime",S.livesid="live-getinfo:livesid",S.isuserpay="live-getinfo:isuserpay",S.cpay="live-getinfo:cpay",S.restpreviewcnt="live-getinfo:resetpreviewcnt",["flowid","pid","guid"]),Pt={1:"H264",2:"H265",4:"SDR",22:"DolbyVisionTs",23:"DolbyVisionFmp4"},Dt=(Ot.prototype.start=function(e,t,n){e="".concat(e).concat(h.urlTool.object2string(t,"&"));return h.netTool.xhr({url:e,timeout:n,method:"GET",withCredentials:!0,responseType:"json"})},Ot);function Ot(){}var wt={retryCount:3,test:0,timeout:6e3},Mt={flowid:"",cmd:2,roomid:"",anchorid:0,pid:"",chid:"",defn:"auto",ufps:"auto",playbacktime:0,ckey:"",appver:"1.0.0.0",encrypt_ver:"",uin:"",country_code:0,lang_code:0,guid:"",appid:0,platform:"",playbackdrm:0,format_support:bt.HLS,caplv:0,hevclv:0,net_type:0,bandwidth:0,sphttps:ze(),unicomtype:0,unicom:"",telcom:"",cmcc:"",toushe:0,from_platform:0,tm:"",scene:"",spaudio:0,spvideo:0,atmos:9,sdclive_info:"",cnlid:"",host:location.host,sdtfrom:""};function xt(e){var t,n=(e=void 0===e?{}:e).retcode,r=e.errmsg,o=void 0===r?"æ­æ¾éè¯¯ï¼è¯·ç¨ååè¯~":r;switch(+n){case 5:return{name:"setErrorView",params:{msg:o}};case 7:return{name:"setErrorView",params:{msg:o,hideRefresh:!0,hideCode:!0}};case 8:return{name:"setErrorView",params:{msg:o,hideRefresh:!0,hideCode:!0,isOver:!0}};case 16:case 18:return{name:"setErrorView",params:{msg:o}};case 46:return{name:"showPayTips",params:{msg:o}};case 51:case 52:case 67:case 97:return{name:"setErrorView",params:{msg:o}};case 25:case 30:case 45:return 1===(t=void 0===(t=e)?{}:t).iretdetailcode?{name:"execVIPRight",params:{msg:t.errmsg||"æ¬ç´æ­éä»è´¹è§ç",type:"backplay",refer:113}}:{name:"showPayTips",params:{msg:t.errmsg||"æ¬ç´æ­éä»è´¹è§ç",cmd:3}};default:return{name:"setErrorView",params:{msg:o}}}}function Rt(e){var t=h.CODEC.H264,e=null==(e=null==e?void 0:e.codec_param)?void 0:e.vcode;return 2===e&&(t=h.CODEC.H265),{vtype:Pt[e]||"unknown",vtypeKey:e,codec:t}}function St(n,r){return A.__awaiter(void 0,void 0,void 0,function(){var t;return A.__generator(this,function(e){switch(e.label){case 0:return void 0===(t=n.resData.retcode)?(n.throw(g.ErrorCode.GETINFO_PARSE,g.ErrorMsg.GETINFO_PARSE,xt(n.resData)),[2]):0!==t?(t="".concat("70033").concat("000".concat(t).slice(-3)),n.throw(t,g.ErrorMsg.GETINFO_CODE,xt(n.resData)),[2]):[4,r()];case 1:return e.sent(),[2]}})})}function Lt(l,c){return A.__awaiter(void 0,void 0,void 0,function(){var r,o,i,a,s,_;return A.__generator(this,function(e){switch(e.label){case 0:return(r=l.resData,o=(r=void 0===r?{}:r).suggest_defn,i=r.format_list,s=r.play_list,_=r.preview_info,a=r.brandlogo,s=null==s?void 0:s.find(function(e){return e.defn===o}))?(r.playback&&(r.playback.svrtick=r.svrtick),l.parseData={vitem:s,preview:_?+_.playtime:0,urls:(n=s)?(void 0===(n=n.urls)?[]:n).map(function(e){return{url:e}}):[],definitionList:(t=o,(n=i)?n.map(function(e){return{id:e.sid,name:e.defn,cname:"".concat(e.defn_name," ").concat(e.defn_rate),sname:e.defn_name,resolution:e.defn_rate,sl:e.defn===t?1:0,lmt:e.vip||0}}):[]),watermarkList:{wi:(n=a)?[n]:[]},supplementaryInfo:{contentInfo:{},previewList:[],watermarkList:[],definitionList:[],posterList:[]}},1===(null==(_=r.float_mark)?void 0:_.fwflag)&&(l.parseData.supplementaryInfo.contentInfo.protectionWatermark=r.float_mark.uin),l.logger.log("parse ",l.parseData),[4,c()]):(l.throw(g.ErrorCode.GETINFO_PARSE,g.ErrorMsg.GETINFO_PARSE),[2]);case 1:return e.sent(),[2]}var t,n})})}function Nt(e,t){var n=e.roomid,r=e.chid,o=e.cnlid,i=e.platform,a=e.sdtfrom,n=n?r:o,r=(new Date).getDay(),o="7.".concat(0===r?7:r),r=0<(null==t?void 0:t.svrtick)?"".concat(1e3*(null==t?void 0:t.svrtick)).substring(0,10):Xe(),t=w.$xx(i,n,a,1,r,o);e.tm=r,e.ckey=t,e.encrypt_ver=o}function kt(n,r){return A.__awaiter(void 0,void 0,void 0,function(){var t;return A.__generator(this,function(e){switch(e.label){case 0:return t=n.reqParams,Nt(t=void 0===t?{}:t,n.resData),[4,function(n){return A.__awaiter(this,void 0,void 0,function(){var t;return A.__generator(this,function(e){switch(e.label){case 0:return[4,Ue(n.livedrm)];case 1:return t=e.sent(),n.livedrm=t,n.playbackdrm=t,[2]}})})}(t)];case 1:return e.sent(),n.logger.log("request params is:",n.reqParams),[4,r()];case 2:return e.sent(),[2]}})})}function Bt(c,u){return A.__awaiter(void 0,void 0,void 0,function(){var n,r,o,i,a,s,_,l;return A.__generator(this,function(e){switch(e.label){case 0:c.logger.log("doRequest start..."),n=c.requestor,r=c.reqParams,r=void 0===r?{}:r,o=c.config,i=o.retryCount,a=o.timeout,a=void 0===a?wt.timeout:a,s=null,_=0,e.label=1;case 1:if(!(_<i+1))return[3,7];c.logger.log("retry... count is: ",_),e.label=2;case 2:return e.trys.push([2,4,,5]),s=null,c.reqPath=(t=_,o.test?Ct:Tt[t%Tt.length]),[4,n.start(c.reqPath,r,a)];case 3:return l=e.sent(),c.resData=l.data,[3,5];case 4:return l=e.sent(),c.resData=void 0,c.logger.log("the ".concat(_," retry err:"),l),"xhrTimeoutError"===(null==l?void 0:l.error)&&(s={code:g.ErrorCode.GETINFO_TIMEOUT,message:g.ErrorMsg.GETINFO_TIMEOUT}),[3,5];case 5:if(c.endTime=+new Date,c.alreadyRetryCount=_,c.resData){if(32!==c.resData.retcode)return[3,7];Nt(r,c.resData)}e.label=6;case 6:return _++,[3,1];case 7:return(c.endTime=+new Date,c.resData)?(c.logger.log("sendRequest over... ret is: ",c.resData),[4,u()]):(c.throw((null==s?void 0:s.code)||g.ErrorCode.GETINFO_NET,(null==s?void 0:s.message)||g.ErrorMsg.GETINFO_NET),[2]);case 8:return e.sent(),[2]}var t})})}function Vt(a,s){return A.__awaiter(void 0,void 0,void 0,function(){var t,n,r,o,i;return A.__generator(this,function(e){switch(e.label){case 0:return o=a.player,t=a.resData,t=void 0===t?{}:t,n=a.parseData,r=(n=void 0===n?{}:n).vitem,o.setCommonKv(((o={preview:n.preview})[g.COMMON_DATA_KEY.drm]=null==(i=r.crypt_param)?void 0:i.drmtype,o[R.isuserpay]=t.isuserpay,o[R.livesid]=r.sid,o[R.playtime]=n.preview,o[R.restpreviewcnt]=null==(i=t.preview_info)?void 0:i.restpreviewcnt,o)),[4,s()];case 1:return e.sent(),[2]}})})}L.prototype.request=function(e,t){var n,r,o,i=this,a=A.__assign(A.__assign({},Mt),t),t=this.handlerIds(e,a),a=A.__assign(A.__assign({},a),t),s=(this._abort=!1,this._seq+=1,{player:this.player,startTime:+new Date,endTime:0,alreadyRetryCount:0,config:this._config,reqParams:a,reqPath:void 0,resData:void 0,requestor:new Dt,parseData:void 0,error:void 0,throw:function(e,t,n){var r=new Error("getinfo err");throw r.code=e,r.message=t,r.data=n,r},seq:this._seq,urlConfig:void 0,logger:this.logger}),e=It.find(function(e){return!a[e]});return e?(s.error={code:g.ErrorCode.GETINFO_INNER,message:"ç¼ºå°å¿è¦æ­æ¾åæ° (".concat(e,")")},Promise.resolve(this.formatOutputData(s))):(t=this._config.prepareRequestMiddleWare||kt,e=this._config.sendRequestMiddleWare||Bt,n=this._config.checkResponseMiddleWare||St,r=this._config.parseResponseMiddleWare||Lt,this._middlewares=[t,e,n,r,Vt],t=D(this._middlewares),o=new Promise(function(){}),t(s).then(function(){return i._abort||i._seq!==s.seq?o:(i.logger.log("getinfo æå: ",s),i.formatOutputData(s))}).catch(function(e){var t,n;return i._abort||i._seq!==s.seq?o:(t=e.code,n=e.message,t||(i.logger.warn("getinfo åé¨éè¯¯: ",e),t=g.ErrorCode.GETINFO_INNER,n="".concat(g.ErrorMsg.GETINFO_INNER,", err (").concat(e,")")),s.error={code:t,message:n,data:e.data},i.formatOutputData(s))}))},L.prototype.abort=function(){this._abort=!0},L.prototype.destroy=function(){this.abort(),this._middlewares=null,this.player=null},L.prototype.formatOutputData=function(e){var t,n,r,o,i,a,s,_,l,c=e.resData,u=e.parseData,d=A.__assign({},e);return["requestor","player","throw"].forEach(function(e){delete d[e]}),c&&u?(e=u.vitem,u=u.urls,t=e.crypt_param,n=this.player.getCommonKv(g.COMMON_DATA_KEY.drm),r=(i=Rt(e)).codec,o=i.vtype,i=i.vtypeKey,s=null==(s=null==(a=e)?void 0:a.crypt_param)?void 0:s.drmtype,a=Qe({codec:Rt(a).codec,dltype:3,drm:s}),u=(s=u.map(function(e){return e.url}))[0],s=s.slice(1),_=(l=(null==(l=null==t?void 0:t.drmckc)?void 0:l.split("|"))||[])[0],l=l[1],u={url:u,backupUrls:s,headers:null==c?void 0:c.trans_headers,drmConfig:_?this.prepareDRMConfig({drmType:n,licenseUrl:_,certificateUrl:l}):void 0,chachaParam:n===g.DRM_TYPE.CHACHA?{cnlid:e.sid,baseKey:t.deckey,randoms:t.randoms}:null,p2pConfig:this.prepareP2PConfig({keyId:e.sid,useP2P:!!e.usep2p,downloadMode:0,encoding:i}),drmType:n,vcodec:r},this.player.setCommonKv(g.COMMON_DATA_KEY.codec,o),A.__assign(A.__assign({},d),{kernelName:a,urlConfig:u})):A.__assign({},d)},L.prototype.handlerIds=function(e,t){var n,r=t.roomid,o=t.livepid,o=void 0===o?"":o,i=t.anchorid;return r?(n={pid:o,chid:e,roomid:r,anchorid:void 0===i?"":i},delete t.cnlid):n={pid:o,cnlid:e},delete t.livepid,n},L.prototype.prepareDRMConfig=function(e){var t,n,r=e.drmType,o=e.licenseUrl,e=e.certificateUrl,i=this.player.getCommonKv,o=((n={})[g.DRM_TYPE.FAIR_PLAY]=h.DrmKeySystems.FairPlayWebKit,n[g.DRM_TYPE.WIDEVINE]=h.DrmKeySystems.Widevine,{licenseUrl:o,certificate:{},keySystem:n[r],licenseRequestSetup:function(e){var t,n;return r===g.DRM_TYPE.FAIR_PLAY&&(e.responseType="text",t={guid:i(g.COMMON_DATA_KEY.guid)},n=Object.keys(t).map(function(e){return"".concat(e,"=").concat(t[e])}).join("&"),e.body="".concat(e.body,"&").concat(n)),e},licenseResponseSetup:function(e){return r===g.DRM_TYPE.FAIR_PLAY?h.stringTool.base64ToUint8Array(e):e}});return r===g.DRM_TYPE.FAIR_PLAY&&(o.certificate=((t={})[n[r]]=e,t)),o},L.prototype.prepareP2PConfig=function(e){return A.__assign({flowId:this.player.getCommonKv(g.COMMON_DATA_KEY.flowid),playerInfo:this.getPlayerInfo()},e)},L.prototype.getPlayerInfo=function(){var e={platform:this.player.getCommonKv(g.COMMON_DATA_KEY.platform)||"",osVer:this.player.getCommonKv(g.COMMON_DATA_KEY.osver)||"",broVer:this.player.getCommonKv(g.COMMON_DATA_KEY.ua)||"",playerVer:this.player.getCommonKv(g.COMMON_DATA_KEY.playerver)||"",guid:this.player.getCommonKv(g.COMMON_DATA_KEY.guid)||"",qq:"",wx:"",vip:!1},t=this.player.getCommonKv(g.COMMON_DATA_KEY.hc_main_login);return"qq"===t?e.qq=this.player.getCommonKv(g.COMMON_DATA_KEY.hc_vuserid):"wx"===t&&(e.wx=this.player.getCommonKv(g.COMMON_DATA_KEY.hc_vuserid)),e};m=L;function L(e){var t;this.player=e,this._abort=!1,this._seq=0,this._config=A.__assign(A.__assign({},wt),(null==(t=e.config)?void 0:t.getinfoLiveConfig)||{}),this.logger=new h.Logger(e.config.instanceId,"UnifiedLiveGetInfo")}N.prototype.initializeAllControllers=function(){return A.__awaiter(this,void 0,void 0,function(){var t,n=this;return A.__generator(this,function(e){switch(e.label){case 0:return t=[J,Ve,this.config.definitionController,this.config.audioTrackController].map(function(e){return e?new e(n.player,n):null}).filter(function(e){return null!==e}),[4,Promise.all(t.map(function(t){return t.ready.then(function(e){return n.onControllerReady(t)}).catch(function(e){return n.onControllerFailed(t)})}))];case 1:return[2,e.sent()]}})})},N.prototype.onControllerReady=function(e){this.logger.log("".concat(e.constructor.moduleName," ready")),e.init(),this.controllers.push(e)},N.prototype.onControllerFailed=function(e){this.logger.error("".concat(e.constructor.moduleName," failed"))},N.prototype.prepareConfig=function(e){return Object.assign({},X,e)},N.prototype.initDebugMode=function(){var e=!1;try{e=!!h.lsTool.getData("__thumbplayer_tvk_debug")}catch(e){this.logger.log("failed to get debug mode from local storage")}(this.config.debug||e)&&(window.tvk=this)},N.prototype.on=function(e,t){this.message.on(e,t)},N.prototype.off=function(e,t){this.message.off(e,t)},N.prototype.emit=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];(t=this.message).emit.apply(t,A.__spreadArray([e],n,!1)),(t=this.player.pluginMsg).emit.apply(t,A.__spreadArray([e],n,!1))},N.prototype.removeAllListeners=function(){this.message.removeAllListeners()};var Kt=N;function N(e,t){this.controllers=[],this.message=new h.EvtEmitter,this.config=this.prepareConfig(t),this.player=e,this.logger=new h.Logger(e.config.instanceId,"tvk"),this.initializeAllControllers(),this.initDebugMode()}c.AudioTrackController=V,c.DefinitionController=r,c.LiveGetInfo=M,c.TVK=Kt,c.UnifiedLiveGetInfo=m,c.VQQ_COOKIE_PREFIX=Fe,c.VodGetInfo=p,c.commonSelectKernel=Qe,c.enableTVK=function(e,t){return new Kt(e,t=void 0===t?{}:t)},c.getRequestParamForDRM=Ue,c.getRequestParamForPaidFormat=function(e){var t={spsfrhdr:0,spvideo:0,spaudio:0,defnpayver:0};return-1<e.indexOf(c.PAID_FORMAT.FHD)&&(t.defnpayver|=1),-1<e.indexOf(c.PAID_FORMAT.UHD)&&(t.defnpayver|=2),h.videoTool.supportHevc()&&h.videoTool.isHDRSupported()===h.HDR_CAPABILITY.SUPPORTED&&(-1<e.indexOf(c.PAID_FORMAT.HDR10)&&(t.spvideo|=4,t.defnpayver|=4),-1<e.indexOf(c.PAID_FORMAT.SFR_HDR)&&(t.spvideo|=4,t.spaudio|=64,t.spsfrhdr=100,t.defnpayver|=4),h.uaTool.browser.safari)&&!h.uaTool.mobile&&-1<e.indexOf(c.PAID_FORMAT.DOLBY)&&h.videoTool.isDolbyAtomsSupported()&&h.videoTool.isDolbyVisionSupported()&&(t.spaudio|=4,t.spvideo|=16,t.defnpayver|=4),t},c.getUserCookies=function(n){var e,t,r,o,i=h.cookieTool.get(c.COOKIE_NAME.MAIN_LOGIN);return i&&(r=i===c.LOGIN_METHOD.QQ,(e={})[c.COOKIE_NAME.ACCESS_TOKEN]=null!=(t=Ye(c.COOKIE_NAME.ACCESS_TOKEN,r))?t:"",e[c.COOKIE_NAME.APPID]=null!=(t=Ye(c.COOKIE_NAME.APPID,r))?t:"",e[c.COOKIE_NAME.VUSESSION]=null!=(t=Ye(c.COOKIE_NAME.VUSESSION,r))?t:"",e[c.COOKIE_NAME.OPENID]=null!=(t=Ye(c.COOKIE_NAME.OPENID,r))?t:"",e[c.COOKIE_NAME.VUSERID]=null!=(t=Ye(c.COOKIE_NAME.VUSERID,r))?t:"",e[c.COOKIE_NAME.GUID]=null!=(r=h.cookieTool.get(c.COOKIE_NAME.GUID))?r:"",e[c.COOKIE_NAME.MAIN_LOGIN]=i,function(e){if(!e[c.COOKIE_NAME.MAIN_LOGIN])return;if(!(e[c.COOKIE_NAME.MAIN_LOGIN]!==c.LOGIN_METHOD.QQ||e[c.COOKIE_NAME.VUSERID]&&e[c.COOKIE_NAME.ACCESS_TOKEN]))return;return 1}(o=e))?n?Object.keys(n).reduce(function(e,t){return e[n[t]]=o[t],e},{}):o:{}}},{"@tencent/thumbplayer-core":2,"@tencent/thumbplayer-h5":3,tslib:24}],16:[function(e,n,r){!function(oe,Y){!function(e){var t;"object"==(void 0===r?"undefined":_typeof(r))&&void 0!==n?n.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?t=window:void 0!==Y?t=Y:"undefined"!=typeof self&&(t=self),t.Promise=e())}(function(){var e,t,n;return function r(o,i,a){function s(n,e){if(!i[n]){if(!o[n]){var t="function"==typeof _dereq_&&_dereq_;if(!e&&t)return t(n,!0);if(_)return _(n,!0);e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}t=i[n]={exports:{}};o[n][0].call(t.exports,function(e){var t=o[n][1][e];return s(t||e)},t,t.exports,r,o,i,a)}return i[n].exports}for(var _="function"==typeof _dereq_&&_dereq_,e=0;e<a.length;e++)s(a[e]);return s}({1:[function(e,t,n){t.exports=function(e){var n=e._SomePromiseArray;function t(e){var e=new n(e),t=e.promise();return e.setHowMany(1),e.setUnwrap(),e.init(),t}e.any=t,e.prototype.any=function(){return t(this)}}},{}],2:[function(e,t,n){var r;try{throw new Error}catch(e){r=e}var o=e("./schedule"),i=e("./queue");function a(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new i(16),this._normalQueue=new i(16),this._haveDrainedQueues=!1;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=o}function s(e){for(;0<e.length();){t=r=n=void 0;var t,n=e,r=n.shift();"function"!=typeof r?r._settlePromises():(t=n.shift(),n=n.shift(),r.call(t,n))}}a.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},a.prototype.hasCustomScheduler=function(){return this._customScheduler},a.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},a.prototype.fatalError=function(e,t){t?(oe.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),oe.exit(2)):this.throwLater(e)},a.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout(function(){e(t)},0);else try{this._schedule(function(){e(t)})}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},a.prototype.invokeLater=function(e,t,n){this._lateQueue.push(e,t,n),this._queueTick()},a.prototype.invoke=function(e,t,n){this._normalQueue.push(e,t,n),this._queueTick()},a.prototype.settlePromises=function(e){this._normalQueue._pushOne(e),this._queueTick()},a.prototype._drainQueues=function(){s(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,s(this._lateQueue)},a.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},a.prototype._reset=function(){this._isTickUsed=!1},t.exports=a,t.exports.firstLineError=r},{"./queue":26,"./schedule":29}],3:[function(e,t,n){t.exports=function(o,i,a,s){function n(e,t){this._reject(t)}function _(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(n,n,null,this,e)}function l(e,t){0==(50397184&this._bitField)&&this._resolveCallback(t.target)}function c(e,t){t.promiseRejectionQueued||this._reject(e)}var u=!1;o.prototype.bind=function(e){u||(u=!0,o.prototype._propagateFrom=s.propagateFromFunction(),o.prototype._boundValue=s.boundValueFunction());var t,e=a(e),n=new o(i),r=(n._propagateFrom(this,1),this._target());return n._setBoundTo(e),e instanceof o?(r._then(i,_,void 0,n,t={promiseRejectionQueued:!1,promise:n,target:r,bindingPromise:e}),e._then(l,c,void 0,n,t),n._setOnCancel(e)):n._resolveCallback(r),n},o.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=-2097153&this._bitField},o.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},o.bind=function(e,t){return o.resolve(t).bind(e)}}},{}],4:[function(e,t,n){var r;"undefined"!=typeof Promise&&(r=Promise);var o=e("./promise")();o.noConflict=function(){try{Promise===o&&(Promise=r)}catch(e){}return o},t.exports=o},{"./promise":22}],5:[function(e,t,n){var r,o=Object.create;o&&(r=o(null),o=o(null),r[" size"]=o[" size"]=0),t.exports=function(r){var n,o=e("./util"),i=o.canEvaluate;o.isIdentifier;function t(e,t){var n;if("function"!=typeof(n=null!=e?e[t]:n))throw e="Object "+o.classString(e)+" has no method '"+o.toString(t)+"'",new r.TypeError(e);return n}function a(e){return t(e,this.pop()).apply(e,this)}function s(e){return e[this]}function _(e){var t=+this;return e[t=t<0?Math.max(0,t+e.length):t]}r.prototype.call=function(e){var t=[].slice.call(arguments,1);return t.push(e),this._then(a,void 0,void 0,t,void 0)},r.prototype.get=function(e){var t;return t="number"==typeof e?_:i&&null!==(t=n(e))?t:s,this._then(t,void 0,void 0,e,void 0)}}},{"./util":36}],6:[function(_,e,t){e.exports=function(e,t,n,r){var o=_("./util"),i=o.tryCatch,a=o.errorObj,s=e._async;e.prototype.break=e.prototype.cancel=function(){if(!r.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var n=e._cancellationParent;if(null==n||!n._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),t=e,e=n}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),s.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){0<this._length()&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(e,t){var n;if(o.isArray(e))for(var r=0;r<e.length;++r)this._doInvokeOnCancel(e[r],t);else void 0!==e&&("function"==typeof e?t||(n=i(e).call(this._boundValue()))===a&&(this._attachExtraTrace(n.e),s.throwLater(n.e)):e._resultCancelled(this))},e.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),s.invoke(this._doInvokeOnCancel,this,e)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(e,t,n){t.exports=function(u){var d=e("./util"),p=e("./es5").keys,f=d.tryCatch,E=d.errorObj;return function(_,l,c){return function(e){var t=c._boundValue();e:for(var n=0;n<_.length;++n){var r=_[n];if(r===Error||null!=r&&r.prototype instanceof Error){if(e instanceof r)return f(l).call(t,e)}else if("function"==typeof r){var o=f(r).call(t,e);if(o===E)return o;if(o)return f(l).call(t,e)}else if(d.isObject(e)){for(var i=p(r),a=0;a<i.length;++a){var s=i[a];if(r[s]!=e[s])continue e}return f(l).call(t,e)}}return u}}}},{"./es5":13,"./util":36}],8:[function(e,t,n){t.exports=function(i){var a=!1,n=[];function s(){this._trace=new s.CapturedTrace(_())}function _(){var e=n.length-1;if(0<=e)return n[e]}return i.prototype._promiseCreated=function(){},i.prototype._pushContext=function(){},i.prototype._popContext=function(){return null},i._peekContext=i.prototype._peekContext=function(){},s.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,n.push(this._trace))},s.prototype._popContext=function(){var e,t;return void 0!==this._trace?(t=(e=n.pop())._promiseCreated,e._promiseCreated=null,t):null},s.CapturedTrace=null,s.create=function(){if(a)return new s},s.deactivateLongStackTraces=function(){},s.activateLongStackTraces=function(){var e=i.prototype._pushContext,t=i.prototype._popContext,n=i._peekContext,r=i.prototype._peekContext,o=i.prototype._promiseCreated;s.deactivateLongStackTraces=function(){i.prototype._pushContext=e,i.prototype._popContext=t,i._peekContext=n,i.prototype._peekContext=r,i.prototype._promiseCreated=o,a=!1},a=!0,i.prototype._pushContext=s.prototype._pushContext,i.prototype._popContext=s.prototype._popContext,i._peekContext=i.prototype._peekContext=_,i.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},s}},{}],9:[function(re,e,t){e.exports=function(r,o,k,B){var n,i,a,e,t,s=r._async,V=re("./errors").Warning,h=re("./util"),_=re("./es5"),K=h.canAttachTrace,c=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,U=/\((?:timers\.js):\d+:\d+\)/,F=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,l=null,u=null,d=!1,p=!(0==h.env("BLUEBIRD_DEBUG")),f=!(0==h.env("BLUEBIRD_WARNINGS")||!p&&!h.env("BLUEBIRD_WARNINGS")),p=!(0==h.env("BLUEBIRD_LONG_STACK_TRACES")||!p&&!h.env("BLUEBIRD_LONG_STACK_TRACES")),E=0!=h.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(f||!!h.env("BLUEBIRD_W_FORGOTTEN_RETURN"));function A(){for(var e=0;e<t.length;++e)t[e]._notifyUnhandledRejection();g()}function g(){t.length=0}t=[],e=function(e){t.push(e),setTimeout(A,1)},_.defineProperty(r,"_unhandledRejectionCheck",{value:A}),_.defineProperty(r,"_unhandledRejectionClear",{value:g}),r.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=-1048577&e._bitField|524288},r.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),e(this))},r.prototype._notifyUnhandledRejectionIsHandled=function(){Z("rejectionHandled",n,void 0,this)},r.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},r.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},r.prototype._notifyUnhandledRejection=function(){var e;this._isRejectionUnhandled()&&(e=this._settledValue(),this._setUnhandledRejectionIsNotified(),Z("unhandledRejection",i,e,this))},r.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},r.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},r.prototype._isUnhandledRejectionNotified=function(){return 0<(262144&this._bitField)},r.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},r.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},r.prototype._isRejectionUnhandled=function(){return 0<(1048576&this._bitField)},r.prototype._warn=function(e,t,n){return O(e,t,n||this)},r.onPossiblyUnhandledRejection=function(e){var t=r._getContext();i=h.contextBind(t,e)},r.onUnhandledRejectionHandled=function(e){var t=r._getContext();n=h.contextBind(t,e)};var m=function(){},y=(r.longStackTraces=function(){if(s.haveItemsQueued()&&!N.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");var e,t,n;!N.longStackTraces&&x()&&(e=r.prototype._captureStackTrace,t=r.prototype._attachExtraTrace,n=r.prototype._dereferenceTrace,N.longStackTraces=!0,m=function(){if(s.haveItemsQueued()&&!N.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");r.prototype._captureStackTrace=e,r.prototype._attachExtraTrace=t,r.prototype._dereferenceTrace=n,o.deactivateLongStackTraces(),N.longStackTraces=!1},r.prototype._captureStackTrace=z,r.prototype._attachExtraTrace=X,r.prototype._dereferenceTrace=J,o.activateLongStackTraces())},r.hasLongStackTraces=function(){return N.longStackTraces&&x()},{unhandledrejection:{before:function(){var e=h.global.onunhandledrejection;return h.global.onunhandledrejection=null,e},after:function(e){h.global.onunhandledrejection=e}},rejectionhandled:{before:function(){var e=h.global.onrejectionhandled;return h.global.onrejectionhandled=null,e},after:function(e){h.global.onrejectionhandled=e}}}),v=function(){function r(e,t){if(!e)return!h.global.dispatchEvent(t);var n;try{return n=e.before(),!h.global.dispatchEvent(t)}finally{e.after(n)}}var e;try{return"function"==typeof CustomEvent?(e=new CustomEvent("CustomEvent"),h.global.dispatchEvent(e),function(e,t){e=e.toLowerCase();var n=new CustomEvent(e,{detail:t,cancelable:!0});return _.defineProperty(n,"promise",{value:t.promise}),_.defineProperty(n,"reason",{value:t.reason}),r(y[e],n)}):"function"==typeof Event?(e=new Event("CustomEvent"),h.global.dispatchEvent(e),function(e,t){e=e.toLowerCase();var n=new Event(e,{cancelable:!0});return n.detail=t,_.defineProperty(n,"promise",{value:t.promise}),_.defineProperty(n,"reason",{value:t.reason}),r(y[e],n)}):((e=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),h.global.dispatchEvent(e),function(e,t){e=e.toLowerCase();var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!0,t),r(y[e],n)})}catch(e){}return function(){return!1}}(),b=h.isNode?function(){return oe.emit.apply(oe,arguments)}:h.global?function(e){e="on"+e.toLowerCase(),e=h.global[e];return!!e&&(e.apply(h.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function T(e,t){return{promise:t}}var Y={promiseCreated:T,promiseFulfilled:T,promiseRejected:T,promiseResolved:T,promiseCancelled:T,promiseChained:function(e,t,n){return{promise:t,child:n}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,n){return{reason:t,promise:n}},rejectionHandled:T},C=function(e){var t=!1;try{t=b.apply(null,arguments)}catch(e){s.throwLater(e),t=!0}var n=!1;try{n=v(e,Y[e].apply(null,arguments))}catch(e){s.throwLater(e),n=!0}return n||t};function I(){return!1}function Q(e,t,n){var r=this;try{e(t,n,function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+h.toString(e));r._attachCancellationCallback(e)})}catch(e){return e}}function H(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?h.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function q(){return this._onCancelField}function W(e){this._onCancelField=e}function j(){this._cancellationParent=void 0,this._onCancelField=void 0}function P(e,t){var n;0!=(1&t)&&(n=(this._cancellationParent=e)._branchesRemainingToCancel,e._branchesRemainingToCancel=(n=void 0===n?0:n)+1),0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}r.config=function(e){var t;if("longStackTraces"in(e=Object(e))&&(e.longStackTraces?r.longStackTraces():!e.longStackTraces&&r.hasLongStackTraces()&&m()),"warnings"in e&&(t=e.warnings,N.warnings=!!t,E=N.warnings,h.isObject(t))&&"wForgottenReturn"in t&&(E=!!t.wForgottenReturn),"cancellation"in e&&e.cancellation&&!N.cancellation){if(s.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");r.prototype._clearCancellationData=j,r.prototype._propagateFrom=P,r.prototype._onCancel=q,r.prototype._setOnCancel=W,r.prototype._attachCancellationCallback=H,r.prototype._execute=Q,D=P,N.cancellation=!0}return"monitoring"in e&&(e.monitoring&&!N.monitoring?(N.monitoring=!0,r.prototype._fireEvent=C):!e.monitoring&&N.monitoring&&(N.monitoring=!1,r.prototype._fireEvent=I)),"asyncHooks"in e&&h.nodeSupportsAsyncResource&&N.asyncHooks!==(t=!!e.asyncHooks)&&((N.asyncHooks=t)?k:B)(),r},r.prototype._fireEvent=I,r.prototype._execute=function(e,t,n){try{e(t,n)}catch(e){return e}},r.prototype._onCancel=function(){},r.prototype._setOnCancel=function(e){},r.prototype._attachCancellationCallback=function(e){},r.prototype._captureStackTrace=function(){},r.prototype._attachExtraTrace=function(){},r.prototype._dereferenceTrace=function(){},r.prototype._clearCancellationData=function(){},r.prototype._propagateFrom=function(e,t){};var D=function(e,t){0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)};function G(){var e=this._boundTo;return void 0!==e&&e instanceof r?e.isFulfilled()?e.value():void 0:e}function z(){this._trace=new L(this._peekContext())}function X(e,t){var n;K(e)&&(void 0!==(n=void 0!==(n=this._trace)&&t?n._parent:n)?n.attachExtraTrace(e):e.__stackCleaned__||(t=M(e),h.notEnumerableProp(e,"stack",t.message+"\n"+t.stack.join("\n")),h.notEnumerableProp(e,"__stackCleaned__",!0)))}function J(){this._trace=void 0}function O(e,t,n){N.warnings&&(e=new V(e),t?n._attachExtraTrace(e):N.longStackTraces&&(t=r._peekContext())?t.attachExtraTrace(e):(n=M(e),e.stack=n.message+"\n"+n.stack.join("\n")),C("warning",e)||$(e,"",!0))}function w(e){for(var t=[],n=0;n<e.length;++n){var r=e[n],o="    (No stack trace)"===r||l.test(r),i=o&&R(r);o&&!i&&(d&&" "!==r.charAt(0)&&(r="    "+r),t.push(r))}return t}function M(e){var t=e.stack,n=e.toString(),t="string"==typeof t&&0<t.length?function(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),n=0;n<t.length;++n){var r=t[n];if("    (No stack trace)"===r||l.test(r))break}return t=0<n&&"SyntaxError"!=e.name?t.slice(n):t}(e):["    (No stack trace)"];return{message:n,stack:"SyntaxError"==e.name?t:w(t)}}function $(e,t,n){var r;"undefined"!=typeof console&&(r=h.isObject(e)?(r=e.stack,t+u(r,e)):t+String(e),"function"==typeof a?a(r,n):"function"!=typeof console.log&&_typeof(console.log))}function Z(e,t,n,r){var o=!1;try{"function"==typeof t&&(o=!0,"rejectionHandled"===e?t(r):t(n,r))}catch(e){s.throwLater(e)}"unhandledRejection"===e?C(e,n,r)||o||$(n,"Unhandled rejection "):C(e,r)}function ee(e){if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{t=e&&"function"==typeof e.toString?e.toString():h.toString(e);if(/\[object [a-zA-Z0-9$_]+\]/.test(t))try{var t=JSON.stringify(e)}catch(e){}0===t.length&&(t="(empty array)")}return"(<"+function(e){if(e.length<41)return e;return e.substr(0,38)+"..."}(t)+">, no stack trace)"}function x(){return"function"==typeof ne}var R=function(){return!1},te=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function S(e){e=e.match(te);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}function L(e){this._parent=e,this._promisesCreated=0;e=this._length=1+(void 0===e?0:e._length);ne(this,L),32<e&&this.uncycle()}h.inherits(L,Error),(o.CapturedTrace=L).prototype.uncycle=function(){var e=this._length;if(!(e<2)){for(var t=[],n={},r=0,o=this;void 0!==o;++r)t.push(o),o=o._parent;for(r=(e=this._length=r)-1;0<=r;--r){var i=t[r].stack;void 0===n[i]&&(n[i]=r)}for(r=0;r<e;++r){var a=n[t[r].stack];if(void 0!==a&&a!==r){0<a&&(t[a-1]._parent=void 0,t[a-1]._length=1),t[r]._parent=void 0,t[r]._length=1;for(var s=0<r?t[r-1]:this,_=(a<e-1?(s._parent=t[a+1],s._parent.uncycle(),s._length=s._parent._length+1):(s._parent=void 0,s._length=1),s._length+1),l=r-2;0<=l;--l)t[l]._length=_,_++;return}}}},L.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=M(e),n=t.message,r=[t.stack],o=this;void 0!==o;)r.push(w(o.stack.split("\n"))),o=o._parent;for(var i=r,a=i[0],s=1;s<i.length;++s){for(var _=i[s],l=a.length-1,c=a[l],u=-1,d=_.length-1;0<=d;--d)if(_[d]===c){u=d;break}for(d=u;0<=d;--d){var p=_[d];if(a[l]!==p)break;a.pop(),l--}a=_}for(var f=r,E=0;E<f.length;++E)(0===f[E].length||E+1<f.length&&f[E][0]===f[E+1][0])&&(f.splice(E,1),E--);h.notEnumerableProp(e,"stack",function(e,t){for(var n=0;n<t.length-1;++n)t[n].push("From previous event:"),t[n]=t[n].join("\n");return n<t.length&&(t[n]=t[n].join("\n")),e+"\n"+t.join("\n")}(n,r)),h.notEnumerableProp(e,"__stackCleaned__",!0)}};var ne=function(){function e(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():ee(t)}var n,t=/^\s*at\s*/;if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace)return Error.stackTraceLimit+=6,l=t,u=e,n=Error.captureStackTrace,R=function(e){return c.test(e)},function(e,t){Error.stackTraceLimit+=6,n(e,t),Error.stackTraceLimit-=6};var r,o=new Error;if("string"==typeof o.stack&&0<=o.stack.split("\n")[0].indexOf("stackDetection@"))return l=/@/,u=e,d=!0,function(e){e.stack=(new Error).stack};try{throw new Error}catch(e){r="stack"in e}return"stack"in o||!r||"number"!=typeof Error.stackTraceLimit?(u=function(e,t){return"string"==typeof e?e:"object"!==(void 0===t?"undefined":_typeof(t))&&"function"!=typeof t||void 0===t.name||void 0===t.message?ee(t):t.toString()},null):(l=t,u=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6})}(),N=("undefined"!=typeof console&&void 0!==console.warn&&(a=function(e){},h.isNode&&oe.stderr.isTTY?a=function(e,t){}:h.isNode||"string"!=typeof(new Error).stack||(a=function(e,t){})),{warnings:f,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1});return p&&r.longStackTraces(),{asyncHooks:function(){return N.asyncHooks},longStackTraces:function(){return N.longStackTraces},warnings:function(){return N.warnings},cancellation:function(){return N.cancellation},monitoring:function(){return N.monitoring},propagateFromFunction:function(){return D},boundValueFunction:function(){return G},checkForgottenReturns:function(e,t,n,r,o){if(void 0===e&&null!==t&&E&&(void 0===o||!o._returnedNonUndefined())&&0!=(65535&r._bitField)){n&&(n+=" ");var i="",a="";if(t._trace){for(var s=t._trace.stack.split("\n"),_=w(s),l=_.length-1;0<=l;--l){var c=_[l];if(!U.test(c)){c=c.match(F);c&&(i="at "+c[1]+":"+c[2]+":"+c[3]+" ");break}}if(0<_.length)for(var u=_[0],l=0;l<s.length;++l)if(s[l]===u){0<l&&(a="\n"+s[l-1]);break}}r._warn("a promise was created in a "+n+"handler "+i+"but was not returned from it, see http://goo.gl/rRqMUw"+a,!0,t)}},setBounds:function(e,t){if(x()){for(var n,r,o=(e.stack||"").split("\n"),i=(t.stack||"").split("\n"),a=-1,s=-1,_=0;_<o.length;++_)if(l=S(o[_])){n=l.fileName,a=l.line;break}for(var l,_=0;_<i.length;++_)if(l=S(i[_])){r=l.fileName,s=l.line;break}a<0||s<0||!n||!r||n!==r||s<=a||(R=function(e){return!!c.test(e)||!!((e=S(e))&&e.fileName===n&&a<=e.line&&e.line<=s)})}},warn:O,deprecated:function(e,t){return e+=" is deprecated and will be removed in a future version.",t&&(e+=" Use "+t+" instead."),O(e)},CapturedTrace:L,fireDomEvent:v,fireGlobalEvent:b}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(e,t,n){t.exports=function(n){function r(){return this.value}function o(){throw this.reason}n.prototype.return=n.prototype.thenReturn=function(e){return e instanceof n&&e.suppressUnhandledRejections(),this._then(r,void 0,void 0,{value:e},void 0)},n.prototype.throw=n.prototype.thenThrow=function(e){return this._then(o,void 0,void 0,{reason:e},void 0)},n.prototype.catchThrow=function(e){var t;return arguments.length<=1?this._then(void 0,o,void 0,{reason:e},void 0):(t=arguments[1],this.caught(e,function(){throw t}))},n.prototype.catchReturn=function(e){var t;return arguments.length<=1?(e instanceof n&&e.suppressUnhandledRejections(),this._then(void 0,r,void 0,{value:e},void 0)):((t=arguments[1])instanceof n&&t.suppressUnhandledRejections(),this.caught(e,function(){return t}))}}},{}],11:[function(e,t,n){t.exports=function(e,n){var r=e.reduce,t=e.all;function o(){return t(this)}e.prototype.each=function(e){return r(this,e,n,0)._then(o,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(e){return r(this,e,n,n)},e.each=function(e,t){return r(e,t,n,0)._then(o,void 0,void 0,e,void 0)},e.mapSeries=function(e,t){return r(e,t,n,n)}}},{}],12:[function(e,t,n){var r,o,i=e("./es5"),a=i.freeze,e=e("./util"),s=e.inherits,_=e.notEnumerableProp;function l(t,n){function r(e){if(!(this instanceof r))return new r(e);_(this,"message","string"==typeof e?e:n),_(this,"name",t),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return s(r,Error),r}var e=l("Warning","warning"),c=l("CancellationError","cancellation error"),u=l("TimeoutError","timeout error"),d=l("AggregateError","aggregate error");try{r=TypeError,o=RangeError}catch(e){r=l("TypeError","type error"),o=l("RangeError","range error")}for(var p="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),f=0;f<p.length;++f)"function"==typeof Array.prototype[p[f]]&&(d.prototype[p[f]]=Array.prototype[p[f]]);i.defineProperty(d.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),d.prototype.isOperational=!0;var E=0;function h(e){if(!(this instanceof h))return new h(e);_(this,"name","OperationalError"),_(this,"message",e),this.cause=e,this.isOperational=!0,e instanceof Error?(_(this,"message",e.message),_(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}d.prototype.toString=function(){var e="\n"+Array(4*E+1).join(" ")+"AggregateError of:\n";E++;for(var t=Array(4*E+1).join(" "),n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",o=r.split("\n"),i=0;i<o.length;++i)o[i]=t+o[i];e+=(r=o.join("\n"))+"\n"}return E--,e},s(h,Error);var A=Error.__BluebirdErrorTypes__;A||(A=a({CancellationError:c,TimeoutError:u,OperationalError:h,RejectionError:h,AggregateError:d}),i.defineProperty(Error,"__BluebirdErrorTypes__",{value:A,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:r,RangeError:o,CancellationError:A.CancellationError,OperationalError:A.OperationalError,TimeoutError:A.TimeoutError,AggregateError:A.AggregateError,Warning:e}},{"./es5":13,"./util":36}],13:[function(e,t,n){var r,o,i,a=function(){return void 0===this}();a?t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:a,propertyIsWritable:function(e,t){e=Object.getOwnPropertyDescriptor(e,t);return!(e&&!e.writable&&!e.set)}}:(r={}.hasOwnProperty,o={}.toString,i={}.constructor.prototype,t.exports={isArray:function(e){try{return"[object Array]"===o.call(e)}catch(e){return!1}},keys:t=function(e){var t,n=[];for(t in e)r.call(e,t)&&n.push(t);return n},names:t,defineProperty:function(e,t,n){return e[t]=n.value,e},getDescriptor:function(e,t){return{value:e[t]}},freeze:function(e){return e},getPrototypeOf:function(e){try{return Object(e).constructor.prototype}catch(e){return i}},isES5:a,propertyIsWritable:function(){return!0}})},{}],14:[function(e,t,n){t.exports=function(e,r){var o=e.map;e.prototype.filter=function(e,t){return o(this,e,t,r)},e.filter=function(e,t,n){return o(e,t,n,r)}}},{}],15:[function(e,t,n){t.exports=function(a,o,i){var s=e("./util"),_=a.CancellationError,l=s.errorObj,c=e("./catch_filter")(i);function u(e,t,n){this.promise=e,this.type=t,this.handler=n,this.called=!1,this.cancelPromise=null}function d(e){this.finallyHandler=e}function p(e,t){return null!=e.cancelPromise&&(1<arguments.length?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,1)}function f(){return h.call(this,this.promise._target()._settledValue())}function E(e){if(!p(this,e))return l.e=e,l}function h(e){var t=this.promise,n=this.handler;if(!this.called){this.called=!0;n=this.isFinallyHandler()?n.call(t._boundValue()):n.call(t._boundValue(),e);if(n===i)return n;if(void 0!==n){t._setReturnedNonUndefined();var r,n=o(n,t);if(n instanceof a){if(null!=this.cancelPromise){if(n._isCancelled())return r=new _("late cancellation observer"),t._attachExtraTrace(r),l.e=r,l;n.isPending()&&n._attachCancellationCallback(new d(this))}return n._then(f,E,void 0,this,void 0)}}}return t.isRejected()?(p(this),l.e=e,l):(p(this),e)}return u.prototype.isFinallyHandler=function(){return 0===this.type},d.prototype._resultCancelled=function(){p(this.finallyHandler)},a.prototype._passThrough=function(e,t,n,r){return"function"!=typeof e?this.then():this._then(n,r,void 0,new u(this,t,e),void 0)},a.prototype.lastly=a.prototype.finally=function(e){return this._passThrough(e,0,h,h)},a.prototype.tap=function(e){return this._passThrough(e,1,h)},a.prototype.tapCatch=function(e){var t=arguments.length;if(1===t)return this._passThrough(e,1,void 0,h);for(var n=new Array(t-1),r=0,o=0;o<t-1;++o){var i=arguments[o];if(!s.isObject(i))return a.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+s.classString(i)));n[r++]=i}return n.length=r,this._passThrough(c(n,arguments[o],this),1,void 0,h)},u}},{"./catch_filter":7,"./util":36}],16:[function(r,e,t){e.exports=function(a,n,s,_,e,l){var c=r("./errors").TypeError,t=r("./util"),u=t.errorObj,d=t.tryCatch,p=[];function f(e,t,n,r){var o,i;l.cancellation()?(o=new a(s),i=this._finallyPromise=new a(s),this._promise=o.lastly(function(){return i}),o._captureStackTrace(),o._setOnCancel(this)):(this._promise=new a(s))._captureStackTrace(),this._stack=r,this._generatorFunction=e,this._receiver=t,this._generator=void 0,this._yieldHandlers="function"==typeof n?[n].concat(p):p,this._yieldedPromise=null,this._cancellationPhase=!1}t.inherits(f,e),f.prototype._isResolved=function(){return null===this._promise},f.prototype._cleanup=function(){this._promise=this._generator=null,l.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},f.prototype._promiseCancelled=function(){var e;this._isResolved()||(e=void 0!==this._generator.return?(this._promise._pushContext(),d(this._generator.return).call(this._generator,void 0)):(e=new a.CancellationError("generator .return() sentinel"),a.coroutine.returnSentinel=e,this._promise._attachExtraTrace(e),this._promise._pushContext(),d(this._generator.throw).call(this._generator,e)),this._promise._popContext(),this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(e))},f.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();e=d(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(e)},f.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();e=d(this._generator.throw).call(this._generator,e);this._promise._popContext(),this._continue(e)},f.prototype._resultCancelled=function(){var e;this._yieldedPromise instanceof a&&(e=this._yieldedPromise,this._yieldedPromise=null,e.cancel())},f.prototype.promise=function(){return this._promise},f.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},f.prototype._continue=function(e){var t,n=this._promise;return e===u?(this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(e.e,!1)):(t=e.value,!0===e.done?(this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(t)):void((e=_(t,this._promise))instanceof a||null!==(e=function(e,t,n){for(var r=0;r<t.length;++r){n._pushContext();var o=d(t[r])(e);if(n._popContext(),o===u)return n._pushContext(),i=a.reject(u.e),n._popContext(),i;var i=_(o,n);if(i instanceof a)return i}return null}(e,this._yieldHandlers,this._promise))?0==(50397184&(n=(e=e._target())._bitField))?(this._yieldedPromise=e)._proxy(this,null):0!=(33554432&n)?a._async.invoke(this._promiseFulfilled,this,e._value()):0!=(16777216&n)?a._async.invoke(this._promiseRejected,this,e._reason()):this._promiseCancelled():this._promiseRejected(new c("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(t))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))))},a.coroutine=function(r,e){if("function"!=typeof r)throw new c("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var o=Object(e).yieldHandler,i=f,a=(new Error).stack;return function(){var e=r.apply(this,arguments),t=new i(void 0,void 0,o,a),n=t.promise();return t._generator=e,t._promiseFulfilled(void 0),n}},a.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new c("expecting a function but got "+t.classString(e));p.push(e)},a.spawn=function(e){var t;return l.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof e?n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n"):(t=(e=new f(e,this)).promise(),e._run(a.spawn),t)}}},{"./errors":12,"./util":36}],17:[function(a,e,t){e.exports=function(e,n,t,r,o){var i=a("./util");i.canEvaluate,i.tryCatch,i.errorObj;e.join=function(){var e,t=arguments.length-1,t=(0<t&&"function"==typeof arguments[t]&&(e=arguments[t]),[].slice.call(arguments)),t=(e&&t.pop(),new n(t).promise());return void 0!==e?t.spread(e):t}}},{"./util":36}],18:[function(t,e,n){e.exports=function(l,e,i,c,s,u){var _=t("./util"),d=_.tryCatch,p=_.errorObj,f=l._async;function a(e,t,n,r){this.constructor$(e),this._promise._captureStackTrace();var o=l._getContext();if(this._callback=_.contextBind(o,t),this._preservedValues=r===s?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],f.invoke(this._asyncInit,this,void 0),_.isArray(e))for(var i=0;i<e.length;++i){var a=e[i];a instanceof l&&a.suppressUnhandledRejections()}}function n(e,t,n,r){if("function"!=typeof t)return i("expecting a function but got "+_.classString(t));var o=0;if(void 0!==n){if("object"!==(void 0===n?"undefined":_typeof(n))||null===n)return l.reject(new TypeError("options argument must be an object but it is "+_.classString(n)));if("number"!=typeof n.concurrency)return l.reject(new TypeError("'concurrency' must be a number but it is "+_.classString(n.concurrency)));o=n.concurrency}return new a(e,t,o="number"==typeof o&&isFinite(o)&&1<=o?o:0,r).promise()}_.inherits(a,e),a.prototype._asyncInit=function(){this._init$(void 0,-2)},a.prototype._init=function(){},a.prototype._promiseFulfilled=function(e,t){var n=this._values,r=this.length(),o=this._preservedValues,i=this._limit;if(t<0){if(n[t=-1*t-1]=e,1<=i&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(1<=i&&this._inFlight>=i)return n[t]=e,this._queue.push(t),!1;null!==o&&(o[t]=e);var a=this._promise,s=this._callback,_=a._boundValue(),s=(a._pushContext(),d(s).call(_,e,t,r)),_=a._popContext();if(u.checkForgottenReturns(s,_,null!==o?"Promise.filter":"Promise.map",a),s===p)return this._reject(s.e),!0;if((e=c(s,this._promise))instanceof l){_=(e=e._target())._bitField;if(0==(50397184&_))return 1<=i&&this._inFlight++,(n[t]=e)._proxy(this,-1*(t+1)),!1;if(0==(33554432&_))return 0!=(16777216&_)?this._reject(e._reason()):this._cancel(),!0;s=e._value()}n[t]=s}return r<=++this._totalResolved&&(null!==o?this._filter(n,o):this._resolve(n),!0)},a.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,n=this._values;0<e.length&&this._inFlight<t;){if(this._isResolved())return;var r=e.pop();this._promiseFulfilled(n[r],r)}},a.prototype._filter=function(e,t){for(var n=t.length,r=new Array(n),o=0,i=0;i<n;++i)e[i]&&(r[o++]=t[i]);r.length=o,this._resolve(r)},a.prototype.preservedValues=function(){return this._preservedValues},l.prototype.map=function(e,t){return n(this,e,t,null)},l.map=n}},{"./util":36}],19:[function(t,e,n){e.exports=function(o,i,e,a,s){var _=t("./util"),l=_.tryCatch;o.method=function(r){if("function"!=typeof r)throw new o.TypeError("expecting a function but got "+_.classString(r));return function(){var e=new o(i),t=(e._captureStackTrace(),e._pushContext(),l(r).apply(this,arguments)),n=e._popContext();return s.checkForgottenReturns(t,n,"Promise.method",e),e._resolveFromSyncValue(t),e}},o.attempt=o.try=function(e){var t,n,r;return"function"!=typeof e?a("expecting a function but got "+_.classString(e)):((t=new o(i))._captureStackTrace(),t._pushContext(),n=1<arguments.length?(s.deprecated("calling Promise.try with more than 1 argument"),r=arguments[1],n=arguments[2],_.isArray(r)?l(e).apply(n,r):l(e).call(n,r)):l(e)(),r=t._popContext(),s.checkForgottenReturns(n,r,"Promise.try",t),t._resolveFromSyncValue(n),t)},o.prototype._resolveFromSyncValue=function(e){e===_.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":36}],20:[function(e,t,n){var a=e("./util"),o=a.maybeWrapAsError,s=e("./errors").OperationalError,_=e("./es5");var l=/^(?:name|message|stack|cause)$/;function i(e){var t,n;if((n=e)instanceof Error&&_.getPrototypeOf(n)===Error.prototype){(t=new s(e)).name=e.name,t.message=e.message,t.stack=e.stack;for(var r=_.keys(e),o=0;o<r.length;++o){var i=r[o];l.test(i)||(t[i]=e[i])}return t}return a.markAsOriginatingFromRejection(e),e}t.exports=function(n,r){return function(e,t){null!==n&&(e?(e=i(o(e)),n._attachExtraTrace(e),n._reject(e)):r?(e=[].slice.call(arguments,1),n._fulfill(e)):n._fulfill(t),n=null)}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,n){e.exports=function(e){var n=t("./util"),r=e._async,o=n.tryCatch,i=n.errorObj;function a(e,t){if(!n.isArray(e))return s.call(this,e,t);t=o(t).apply(this._boundValue(),[null].concat(e));t===i&&r.throwLater(t.e)}function s(e,t){var n=this._boundValue(),t=void 0===e?o(t).call(n,null):o(t).call(n,null,e);t===i&&r.throwLater(t.e)}function _(e,t){e||((n=new Error(e+"")).cause=e,e=n);var n=o(t).call(this._boundValue(),e);n===i&&r.throwLater(n.e)}e.prototype.asCallback=e.prototype.nodeify=function(e,t){var n;return"function"==typeof e&&(n=s,void 0!==t&&Object(t).spread&&(n=a),this._then(n,_,void 0,this,e)),this}}},{"./util":36}],22:[function(S,L,e){L.exports=function(){function a(){return new E("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")}function s(){return new w.PromiseInspection(this._target())}function _(e){return w.reject(new E(e))}function l(){}function e(){return{domain:n(),async:null}}function t(){return{domain:n(),async:new r("Bluebird::Promise")}}var i={},u=S("./util"),n=(u.setReflectHandler(s),function(){var e=oe.domain;return void 0===e?null:e}),r=u.isNode&&u.nodeSupportsAsyncResource?S("async_hooks").AsyncResource:null,d=u.isNode?e:function(){return null},o=(u.notEnumerableProp(w,"_getContext",d),S("./es5")),c=S("./async"),p=new c,f=(o.defineProperty(w,"_async",{value:p}),S("./errors")),E=w.TypeError=f.TypeError,h=(w.RangeError=f.RangeError,w.CancellationError=f.CancellationError),A=(w.TimeoutError=f.TimeoutError,w.OperationalError=f.OperationalError,w.RejectionError=f.OperationalError,w.AggregateError=f.AggregateError,function(){}),g={},m={},y=S("./thenables")(w,A),v=S("./promise_array")(w,A,y,_,l),f=S("./context")(w),b=f.create,T=S("./debuggability")(w,f,function(){d=t,u.notEnumerableProp(w,"_getContext",t)},function(){d=e,u.notEnumerableProp(w,"_getContext",e)}),C=(T.CapturedTrace,S("./finally")(w,y,m)),I=S("./catch_filter")(m),P=S("./nodeback"),D=u.errorObj,O=u.tryCatch;function w(e){if(e!==A){var t=this,n=e;if(null==t||t.constructor!==w)throw new E("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof n)throw new E("expecting a function but got "+u.classString(n))}this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(e),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function M(e){this.promise._resolveCallback(e)}function x(e){this.promise._rejectCallback(e,!1)}function R(e){var t=new w(A);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}return w.prototype.toString=function(){return"[object Promise]"},w.prototype.caught=w.prototype.catch=function(e){var t=arguments.length;if(1<t){for(var n=new Array(t-1),r=0,o=0;o<t-1;++o){var i=arguments[o];if(!u.isObject(i))return _("Catch statement predicate: expecting an object but got "+u.classString(i));n[r++]=i}if(n.length=r,"function"!=typeof(e=arguments[o]))throw new E("The last argument to .catch() must be a function, got "+u.toString(e));return this.then(void 0,I(n,e,this))}return this.then(void 0,e)},w.prototype.reflect=function(){return this._then(s,s,void 0,this,void 0)},w.prototype.then=function(e,t){var n;return T.warnings()&&0<arguments.length&&"function"!=typeof e&&"function"!=typeof t&&(n=".then() only accepts functions but was passed: "+u.classString(e),1<arguments.length&&(n+=", "+u.classString(t)),this._warn(n)),this._then(e,t,void 0,void 0,void 0)},w.prototype.done=function(e,t){this._then(e,t,void 0,void 0,void 0)._setIsFinal()},w.prototype.spread=function(e){return"function"!=typeof e?_("expecting a function but got "+u.classString(e)):this.all()._then(e,void 0,void 0,g,void 0)},w.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},w.prototype.all=function(){return 0<arguments.length&&this._warn(".all() was passed arguments but it does not take any"),new v(this).promise()},w.prototype.error=function(e){return this.caught(u.originatesFromRejection,e)},w.getNewLibraryCopy=L.exports,w.is=function(e){return e instanceof w},w.fromNode=w.fromCallback=function(e){var t=new w(A),n=(t._captureStackTrace(),1<arguments.length&&!!Object(arguments[1]).multiArgs),e=O(e)(P(t,n));return e===D&&t._rejectCallback(e.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},w.all=function(e){return new v(e).promise()},w.resolve=w.fulfilled=w.cast=function(e){var t=y(e);return t instanceof w||((t=new w(A))._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},w.reject=w.rejected=function(e){var t=new w(A);return t._captureStackTrace(),t._rejectCallback(e,!0),t},w.setScheduler=function(e){if("function"!=typeof e)throw new E("expecting a function but got "+u.classString(e));return p.setScheduler(e)},w.prototype._then=function(e,t,n,r,o){var i,a,s,_=void 0!==o,o=_?o:new w(A),l=this._target(),c=l._bitField,_=(_||(o._propagateFrom(this,3),o._captureStackTrace(),void 0===r&&0!=(2097152&this._bitField)&&(r=0!=(50397184&c)?this._boundValue():l===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,o)),d());return 0!=(50397184&c)?(s=l._settlePromiseCtx,0!=(33554432&c)?(a=l._rejectionHandler0,i=e):0!=(16777216&c)?(a=l._fulfillmentHandler0,i=t,l._unsetRejectionIsUnhandled()):(s=l._settlePromiseLateCancellationObserver,a=new h("late cancellation observer"),l._attachExtraTrace(a),i=t),p.invoke(s,l,{handler:u.contextBind(_,i),promise:o,receiver:r,value:a})):l._addCallbacks(e,t,o,r,_),o},w.prototype._length=function(){return 65535&this._bitField},w.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},w.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},w.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e},w.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},w.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},w.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},w.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},w.prototype._isFinal=function(){return 0<(4194304&this._bitField)},w.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},w.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},w.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},w.prototype._setAsyncGuaranteed=function(){var e;p.hasCustomScheduler()||(e=this._bitField,this._bitField=e|(536870912&e)>>2^134217728)},w.prototype._setNoAsyncGuarantee=function(){this._bitField=-134217729&(536870912|this._bitField)},w.prototype._receiverAt=function(e){e=0===e?this._receiver0:this[4*e-4+3];if(e!==i)return void 0===e&&this._isBound()?this._boundValue():e},w.prototype._promiseAt=function(e){return this[4*e-4+2]},w.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4]},w.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},w.prototype._boundValue=function(){},w.prototype._migrateCallback0=function(e){e._bitField;var t=e._fulfillmentHandler0,n=e._rejectionHandler0,r=e._promise0,e=e._receiverAt(0);this._addCallbacks(t,n,r,e=void 0===e?i:e,null)},w.prototype._migrateCallbackAt=function(e,t){var n=e._fulfillmentHandlerAt(t),r=e._rejectionHandlerAt(t),o=e._promiseAt(t),e=e._receiverAt(t);this._addCallbacks(n,r,o,e=void 0===e?i:e,null)},w.prototype._addCallbacks=function(e,t,n,r,o){var i,a=this._length();return 65531<=a&&this._setLength(a=0),0===a?(this._promise0=n,this._receiver0=r,"function"==typeof e&&(this._fulfillmentHandler0=u.contextBind(o,e)),"function"==typeof t&&(this._rejectionHandler0=u.contextBind(o,t))):(this[2+(i=4*a-4)]=n,this[3+i]=r,"function"==typeof e&&(this[i]=u.contextBind(o,e)),"function"==typeof t&&(this[1+i]=u.contextBind(o,t))),this._setLength(a+1),a},w.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},w.prototype._resolveCallback=function(e,t){if(0==(117506048&this._bitField)){if(e===this)return this._rejectCallback(a(),!1);var n=y(e,this);if(!(n instanceof w))return this._fulfill(e);t&&this._propagateFrom(n,2);var r=n._target();if(r===this)this._reject(a());else{e=r._bitField;if(0==(50397184&e)){var o=this._length();0<o&&r._migrateCallback0(this);for(var i=1;i<o;++i)r._migrateCallbackAt(this,i);this._setFollowing(),this._setLength(0),this._setFollowee(n)}else 0!=(33554432&e)?this._fulfill(r._value()):0!=(16777216&e)?this._reject(r._reason()):(t=new h("late cancellation observer"),r._attachExtraTrace(t),this._reject(t))}}},w.prototype._rejectCallback=function(e,t,n){var r=u.ensureErrorObject(e),o=r===e;o||n||!T.warnings()||(n="a promise was rejected with a non-error: "+u.classString(e),this._warn(n,!0)),this._attachExtraTrace(r,!!t&&o),this._reject(e)},w.prototype._resolveFromExecutor=function(e){var t,n;e!==A&&((t=this)._captureStackTrace(),this._pushContext(),n=!0,e=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,n)}),n=!1,this._popContext(),void 0!==e)&&t._rejectCallback(e,!0)},w.prototype._settlePromiseFromHandler=function(e,t,n,r){var o;0==(65536&r._bitField)&&(r._pushContext(),t===g?n&&"number"==typeof n.length?o=O(e).apply(this._boundValue(),n):(o=D).e=new E("cannot .spread() a non-array: "+u.classString(n)):o=O(e).call(t,n),e=r._popContext(),0==(65536&r._bitField))&&(o===m?r._reject(n):o===D?r._rejectCallback(o.e,!1):(T.checkForgottenReturns(o,e,"",r,this),r._resolveCallback(o)))},w.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},w.prototype._followee=function(){return this._rejectionHandler0},w.prototype._setFollowee=function(e){this._rejectionHandler0=e},w.prototype._settlePromise=function(e,t,n,r){var o=e instanceof w,i=this._bitField,a=0!=(134217728&i);0!=(65536&i)?(o&&e._invokeInternalOnCancel(),n instanceof C&&n.isFinallyHandler()?(n.cancelPromise=e,O(t).call(n,r)===D&&e._reject(D.e)):t===s?e._fulfill(s.call(n)):n instanceof l?n._promiseCancelled(e):o||e instanceof v?e._cancel():n.cancel()):"function"==typeof t?o?(a&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,n,r,e)):t.call(n,r,e):n instanceof l?n._isResolved()||(0!=(33554432&i)?n._promiseFulfilled(r,e):n._promiseRejected(r,e)):o&&(a&&e._setAsyncGuaranteed(),0!=(33554432&i)?e._fulfill(r):e._reject(r))},w.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,n=e.promise,r=e.receiver,e=e.value;"function"==typeof t?n instanceof w?this._settlePromiseFromHandler(t,r,e,n):t.call(r,e,n):n instanceof w&&n._reject(e)},w.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},w.prototype._settlePromise0=function(e,t,n){var r=this._promise0,o=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,e,o,t)},w.prototype._clearCallbackDataAtIndex=function(e){e=4*e-4;this[2+e]=this[3+e]=this[e]=this[1+e]=void 0},w.prototype._fulfill=function(e){var t,n=this._bitField;if(!((117506048&n)>>>16)){if(e===this)return t=a(),this._attachExtraTrace(t),this._reject(t);this._setFulfilled(),this._rejectionHandler0=e,0<(65535&n)&&(0!=(134217728&n)?this._settlePromises():p.settlePromises(this),this._dereferenceTrace())}},w.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=e,this._isFinal())return p.fatalError(e,u.isNode);0<(65535&t)?p.settlePromises(this):this._ensurePossibleRejectionHandled()}},w.prototype._fulfillPromises=function(e,t){for(var n=1;n<e;n++){var r=this._fulfillmentHandlerAt(n),o=this._promiseAt(n),i=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(o,r,i,t)}},w.prototype._rejectPromises=function(e,t){for(var n=1;n<e;n++){var r=this._rejectionHandlerAt(n),o=this._promiseAt(n),i=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(o,r,i,t)}},w.prototype._settlePromises=function(){var e,t=this._bitField,n=65535&t;0<n&&(0!=(16842752&t)?(e=this._fulfillmentHandler0,this._settlePromise0(this._rejectionHandler0,e,t),this._rejectPromises(n,e)):(e=this._rejectionHandler0,this._settlePromise0(this._fulfillmentHandler0,e,t),this._fulfillPromises(n,e)),this._setLength(0)),this._clearCancellationData()},w.prototype._settledValue=function(){var e=this._bitField;return 0!=(33554432&e)?this._rejectionHandler0:0!=(16777216&e)?this._fulfillmentHandler0:void 0},"undefined"!=typeof Symbol&&Symbol.toStringTag&&o.defineProperty(w.prototype,Symbol.toStringTag,{get:function(){return"Object"}}),w.defer=w.pending=function(){return T.deprecated("Promise.defer","new Promise"),{promise:new w(A),resolve:M,reject:x}},u.notEnumerableProp(w,"_makeSelfResolutionError",a),S("./method")(w,A,y,_,T),S("./bind")(w,A,y,T),S("./cancel")(w,v,_,T),S("./direct_resolve")(w),S("./synchronous_inspection")(w),S("./join")(w,v,y,A,p),(w.Promise=w).version="3.7.2",S("./call_get.js")(w),S("./generators.js")(w,_,A,y,l,T),S("./map.js")(w,v,_,y,A,T),S("./nodeify.js")(w),S("./promisify.js")(w,A),S("./props.js")(w,v,y,_),S("./race.js")(w,A,y,_),S("./reduce.js")(w,v,_,y,A,T),S("./settle.js")(w,v,T),S("./some.js")(w,v,_),S("./timers.js")(w,A,T),S("./using.js")(w,_,y,b,A,T),S("./any.js")(w),S("./each.js")(w,A),S("./filter.js")(w,A),u.toFastProperties(w),u.toFastProperties(w.prototype),R({a:1}),R({b:2}),R({c:3}),R(1),R(function(){}),R(void 0),R(!1),R(new w(A)),T.setBounds(c.firstLineError,u.lastLineError),w}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36,async_hooks:void 0}],23:[function(r,e,t){e.exports=function(s,n,_,i,e){var a=r("./util");a.isArray;function t(e){var t=this._promise=new s(n);e instanceof s&&(t._propagateFrom(e,3),e.suppressUnhandledRejections()),t._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return a.inherits(t,e),t.prototype.length=function(){return this._length},t.prototype.promise=function(){return this._promise},t.prototype._init=function e(t,n){if((r=_(this._values,this._promise))instanceof s){var r,o=(r=r._target())._bitField;if(this._values=r,0==(50397184&o))return this._promise._setAsyncGuaranteed(),r._then(e,this._reject,void 0,this,n);if(0==(33554432&o))return 0!=(16777216&o)?this._reject(r._reason()):this._cancel();r=r._value()}null===(r=a.asArray(r))?(o=i("expecting an array or an iterable object but got "+a.classString(r)).reason(),this._promise._rejectCallback(o,!1)):0===r.length?-5===n?this._resolveEmptyArray():this._resolve(function(e){switch(e){case-2:return[];case-3:return{};case-6:return new Map}}(n)):this._iterate(r)},t.prototype._iterate=function(e){for(var t=this.getActualLength(e.length),n=(this._length=t,this._values=this.shouldCopyValues()?new Array(t):this._values,this._promise),r=!1,o=null,i=0;i<t;++i){var a=_(e[i],n),o=a instanceof s?(a=a._target())._bitField:null;r?null!==o&&a.suppressUnhandledRejections():null!==o?0==(50397184&o)?(a._proxy(this,i),this._values[i]=a):r=0!=(33554432&o)?this._promiseFulfilled(a._value(),i):0!=(16777216&o)?this._promiseRejected(a._reason(),i):this._promiseCancelled(i):r=this._promiseFulfilled(a,i)}r||n._setAsyncGuaranteed()},t.prototype._isResolved=function(){return null===this._values},t.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},t.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},t.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},t.prototype._promiseFulfilled=function(e,t){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},t.prototype._promiseCancelled=function(){return this._cancel(),!0},t.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},t.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof s)e.cancel();else for(var t=0;t<e.length;++t)e[t]instanceof s&&e[t].cancel()}},t.prototype.shouldCopyValues=function(){return!0},t.prototype.getActualLength=function(e){return e},t}},{"./util":36}],24:[function(o,e,t){e.exports=function(l,c){var p={},g=o("./util"),u=o("./nodeback"),d=g.withAppended,f=g.maybeWrapAsError,e=g.canEvaluate,m=o("./errors").TypeError,y={__isPromisified__:!0},t=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),v=function(e){return g.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e};function r(e){return!t.test(e)}function b(e){try{return!0===e.__isPromisified__}catch(e){return!1}}function E(e,t,n,r){for(var o,i=g.inheritedDataKeys(e),a=[],s=0;s<i.length;++s){var _=i[s],l=e[_],c=r===v||v(_,l,e);"function"!=typeof l||b(l)||(o=e,(o=g.getDataPropertyOrDefault(o,_+t,y))&&b(o))||!r(_,l,e,c)||a.push(_,l)}for(var u=a,d=t,p=n,f=0;f<u.length;f+=2){var E=u[f];if(p.test(E))for(var h=E.replace(p,""),A=0;A<u.length;A+=2)if(u[A]===h)throw new m("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",d))}return a}var n;var h=e?n:function(o,i,e,t,n,a){var s=function(){return this}(),_=o;function r(){var e=i,t=(i===p&&(e=this),new l(c)),n=(t._captureStackTrace(),"string"==typeof _&&this!==s?this[_]:o),r=u(t,a);try{n.apply(e,d(arguments,r))}catch(e){t._rejectCallback(f(e),!0,!0)}return t._isFateSealed()||t._setAsyncGuaranteed(),t}return"string"==typeof _&&(o=t),g.notEnumerableProp(r,"__isPromisified__",!0),r};function A(e,t,n,r,o){for(var i=new RegExp(t.replace(/([$])/,"\\$")+"$"),a=E(e,t,i,n),s=0,_=a.length;s<_;s+=2){var l,c=a[s],u=a[s+1],d=c+t;r===h?e[d]=h(c,p,c,u,t,o):(l=r(u,function(){return h(c,p,c,u,t,o)}),g.notEnumerableProp(l,"__isPromisified__",!0),e[d]=l)}return g.toFastProperties(e),e}l.promisify=function(e,t){if("function"!=typeof e)throw new m("expecting a function but got "+g.classString(e));var n;return b(e)?e:(n=void 0===(t=Object(t)).context?p:t.context,t=!!t.multiArgs,n=h(e,n,void 0,e,null,t),g.copyDescriptors(e,n,r),n)},l.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!==(void 0===e?"undefined":_typeof(e)))throw new m("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var n=!!(t=Object(t)).multiArgs,r=t.suffix,o=t.filter,i=("function"!=typeof o&&(o=v),t.promisifier);if("function"!=typeof i&&(i=h),!g.isIdentifier(r="string"!=typeof r?"Async":r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var a=g.inheritedDataKeys(e),s=0;s<a.length;++s){var _=e[a[s]];"constructor"!==a[s]&&g.isClass(_)&&(A(_.prototype,r,o,i,n),A(_,r,o,i,n))}return A(e,r,o,i,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(f,e,t){e.exports=function(n,e,r,o){var s,i,a,t=f("./util"),_=t.isObject,l=f("./es5"),c=("function"==typeof Map&&(s=Map),a=0,function(e){i=e.size,a=0;var t=new Array(2*e.size);return e.forEach(u,t),t});function u(e,t){this[a]=e,this[a+i]=t,a++}function d(e){var t=!1;if(void 0!==s&&e instanceof s)o=c(e),t=!0;else for(var n=l.keys(e),r=n.length,o=new Array(2*r),i=0;i<r;++i){var a=n[i];o[i]=e[a],o[i+r]=a}this.constructor$(o),this._isMap=t,this._init$(void 0,t?-6:-3)}function p(e){var t,e=r(e);return _(e)?(t=e instanceof n?e._then(n.props,void 0,void 0,void 0,void 0):new d(e).promise(),e instanceof n&&t._propagateFrom(e,2),t):o("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}t.inherits(d,e),d.prototype._init=function(){},d.prototype._promiseFulfilled=function(e,t){if(this._values[t]=e,++this._totalResolved>=this._length){if(this._isMap)n=function(e){for(var t=new s,n=e.length/2|0,r=0;r<n;++r){var o=e[n+r],i=e[r];t.set(o,i)}return t}(this._values);else for(var n={},r=this.length(),o=0,i=this.length();o<i;++o)n[this._values[o+r]]=this._values[o];return this._resolve(n),!0}return!1},d.prototype.shouldCopyValues=function(){return!1},d.prototype.getActualLength=function(e){return e>>1},n.prototype.props=function(){return p(this)},n.props=p}},{"./es5":13,"./util":36}],26:[function(e,t,n){function r(e){this._capacity=e,this._length=0,this._front=0}r.prototype._willBeOverCapacity=function(e){return this._capacity<e},r.prototype._pushOne=function(e){var t=this.length(),n=(this._checkCapacity(t+1),this._front+t&this._capacity-1);this[n]=e,this._length=t+1},r.prototype.push=function(e,t,n){var r,o,i=this.length()+3;this._willBeOverCapacity(i)?(this._pushOne(e),this._pushOne(t),this._pushOne(n)):(r=this._front+i-3,this._checkCapacity(i),o=this._capacity-1,this[r&o]=e,this[1+r&o]=t,this[2+r&o]=n,this._length=i)},r.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},r.prototype.length=function(){return this._length},r.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},r.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e;for(var e=this._front+this._length&t-1,n=this,r=0,o=this,i=t,a=e,s=0;s<a;++s)o[s+i]=n[s+r],n[s+r]=void 0},t.exports=r},{}],27:[function(e,t,n){t.exports=function(l,c,u,d){function p(t){return t.then(function(e){return n(e,t)})}var f=e("./util");function n(e,t){var n=u(e);if(n instanceof l)return p(n);if(null===(e=f.asArray(e)))return d("expecting an array or an iterable object but got "+f.classString(e));for(var r=new l(c),o=(void 0!==t&&r._propagateFrom(t,3),r._fulfill),i=r._reject,a=0,s=e.length;a<s;++a){var _=e[a];(void 0!==_||a in e)&&l.cast(_)._then(o,i,void 0,r,null)}return r}l.race=function(e){return n(e,void 0)},l.prototype.race=function(){return n(this,void 0)}}},{"./util":36}],28:[function(p,e,t){e.exports=function(s,e,o,t,i,a){var _=p("./util"),l=_.tryCatch;function c(e,t,n,r){this.constructor$(e);e=s._getContext();this._fn=_.contextBind(e,t),void 0!==n&&(n=s.resolve(n))._attachCancellationCallback(this),this._initialValue=n,this._currentCancellable=null,this._eachValues=r===i?Array(this._length):0===r?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function u(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function n(e,t,n,r){return"function"!=typeof t?o("expecting a function but got "+_.classString(t)):new c(e,t,n,r).promise()}function d(e){this.accum=e,this.array._gotAccum(e);e=t(this.value,this.array._promise);return e instanceof s?(this.array._currentCancellable=e)._then(r,void 0,void 0,this,void 0):r.call(this,e)}function r(e){var t=this.array,n=t._promise,r=l(t._fn),e=(n._pushContext(),(r=void 0!==t._eachValues?r.call(n._boundValue(),e,this.index,this.length):r.call(n._boundValue(),this.accum,e,this.index,this.length))instanceof s&&(t._currentCancellable=r),n._popContext());return a.checkForgottenReturns(r,e,void 0!==t._eachValues?"Promise.each":"Promise.reduce",n),r}_.inherits(c,e),c.prototype._gotAccum=function(e){void 0!==this._eachValues&&null!==this._eachValues&&e!==i&&this._eachValues.push(e)},c.prototype._eachComplete=function(e){return null!==this._eachValues&&this._eachValues.push(e),this._eachValues},c.prototype._init=function(){},c.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},c.prototype.shouldCopyValues=function(){return!1},c.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},c.prototype._resultCancelled=function(e){if(e===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof s&&this._currentCancellable.cancel(),this._initialValue instanceof s&&this._initialValue.cancel())},c.prototype._iterate=function(e){var t=(this._values=e).length,n=void 0!==this._initialValue?(a=this._initialValue,0):(a=s.resolve(e[0]),1);this._currentCancellable=a;for(var r=n;r<t;++r){var o=e[r];o instanceof s&&o.suppressUnhandledRejections()}if(!a.isRejected())for(;n<t;++n){var i={accum:null,value:e[n],index:n,length:t,array:this},a=a._then(d,void 0,void 0,i,void 0);0==(127&n)&&a._setNoAsyncGuarantee()}(a=void 0!==this._eachValues?a._then(this._eachComplete,void 0,void 0,this,void 0):a)._then(u,u,void 0,a,this)},s.prototype.reduce=function(e,t){return n(this,e,t,null)},s.reduce=n}},{"./util":36}],29:[function(e,t,n){var r,o,i,e=e("./util"),a=e.getNativePromise();e=e.isNode&&"undefined"==typeof MutationObserver?(r=Y.setImmediate,o=oe.nextTick,e.isRecentNode?function(e){r.call(Y,e)}:function(e){o.call(oe,e)}):"function"==typeof a&&"function"==typeof a.resolve?(i=a.resolve(),function(e){i.then(e)}):"undefined"!=typeof MutationObserver&&("undefined"==typeof window||!window.navigator||!window.navigator.standalone&&!window.cordova)&&"classList"in document.documentElement?function(){var n=document.createElement("div"),r={attributes:!0},o=!1,i=document.createElement("div");new MutationObserver(function(){n.classList.toggle("foo"),o=!1}).observe(i,r);return function(e){var t=new MutationObserver(function(){t.disconnect(),e()});t.observe(n,r),o||(o=!0,i.classList.toggle("foo"))}}():"undefined"!=typeof setImmediate?function(e){setImmediate(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},t.exports=e},{"./util":36}],30:[function(i,e,t){e.exports=function(e,t,n){var r=e.PromiseInspection;function o(e){this.constructor$(e)}i("./util").inherits(o,t),o.prototype._promiseResolved=function(e,t){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},o.prototype._promiseFulfilled=function(e,t){var n=new r;return n._bitField=33554432,n._settledValueField=e,this._promiseResolved(t,n)},o.prototype._promiseRejected=function(e,t){var n=new r;return n._bitField=16777216,n._settledValueField=e,this._promiseResolved(t,n)},e.settle=function(e){return n.deprecated(".settle()",".reflect()"),new o(e).promise()},e.allSettled=function(e){return new o(e).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(c,e,t){e.exports=function(e,t,r){var n=c("./util"),o=c("./errors").RangeError,i=c("./errors").AggregateError,a=n.isArray,s={};function _(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function l(e,t){var n;return(0|t)!==t||t<0?r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n"):(n=(e=new _(e)).promise(),e.setHowMany(t),e.init(),n)}n.inherits(_,t),_.prototype._init=function(){var e;this._initialized&&(0===this._howMany?this._resolve([]):(this._init$(void 0,-5),e=a(this._values),!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))))},_.prototype.init=function(){this._initialized=!0,this._init()},_.prototype.setUnwrap=function(){this._unwrap=!0},_.prototype.howMany=function(){return this._howMany},_.prototype.setHowMany=function(e){this._howMany=e},_.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},_.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},_.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(s),this._checkOutcome())},_.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new i,t=this.length();t<this._values.length;++t)this._values[t]!==s&&e.push(this._values[t]);return 0<e.length?this._reject(e):this._cancel(),!0}return!1},_.prototype._fulfilled=function(){return this._totalResolved},_.prototype._rejected=function(){return this._values.length-this.length()},_.prototype._addRejected=function(e){this._values.push(e)},_.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},_.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},_.prototype._getRangeError=function(e){e="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new o(e)},_.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=l,e.prototype.some=function(e){return l(this,e)},e._SomePromiseArray=_}},{"./errors":12,"./util":36}],32:[function(e,t,n){t.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var n=t.prototype.value=function(){if(this.isFulfilled())return this._settledValue();throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n")},r=t.prototype.error=t.prototype.reason=function(){if(this.isRejected())return this._settledValue();throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n")},o=t.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},i=t.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},a=t.prototype.isPending=function(){return 0==(50397184&this._bitField)},s=t.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},e.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},e.prototype.isPending=function(){return a.call(this._target())},e.prototype.isRejected=function(){return i.call(this._target())},e.prototype.isFulfilled=function(){return o.call(this._target())},e.prototype.isResolved=function(){return s.call(this._target())},e.prototype.value=function(){return n.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),r.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},{}],33:[function(e,t,n){t.exports=function(s,_){var l=e("./util"),c=l.errorObj,u=l.isObject;var d={}.hasOwnProperty;return function(e,t){if(u(e)){if(e instanceof s)return e;var n,r,o,i,a=function(e){try{return e.then}catch(e){return c.e=e,c}}(e);if(a===c)return t&&t._pushContext(),n=s.reject(a.e),t&&t._popContext(),n;if("function"==typeof a)return function(e){try{return d.call(e,"_promise0")}catch(e){}}(e)?(n=new s(_),e._then(n._fulfill,n._reject,void 0,n,null),n):(n=e,a=a,t=t,r=new s(_),o=r,t&&t._pushContext(),r._captureStackTrace(),t&&t._popContext(),i=!0,t=l.tryCatch(a).call(n,function(e){r&&(r._resolveCallback(e),r=null)},function(e){r&&(r._rejectCallback(e,i,!0),r=null)}),i=!1,r&&t===c&&(r._rejectCallback(t.e,!0,!0),r=null),o)}return e}}},{"./util":36}],34:[function(e,t,n){t.exports=function(r,o,a){var s=e("./util"),_=r.TimeoutError;function l(e){this.handle=e}l.prototype._resultCancelled=function(){clearTimeout(this.handle)};function i(e){return t(+this).thenReturn(e)}var t=r.delay=function(e,t){var n;return void 0!==t?(n=r.resolve(t)._then(i,null,null,e,void 0),a.cancellation()&&t instanceof r&&n._setOnCancel(t)):(n=new r(o),t=setTimeout(function(){n._fulfill()},+e),a.cancellation()&&n._setOnCancel(new l(t)),n._captureStackTrace()),n._setAsyncGuaranteed(),n};r.prototype.delay=function(e){return t(e,this)};function n(e){return clearTimeout(this.handle),e}function c(e){throw clearTimeout(this.handle),e}r.prototype.timeout=function(e,r){e=+e;var o,i,e=new l(setTimeout(function(){var e,t,n;o.isPending()&&(e=o,n=i,t="string"!=typeof(t=r)?t instanceof Error?t:new _("operation timed out"):new _(t),s.markAsOriginatingFromRejection(t),e._attachExtraTrace(t),e._reject(t),null!=n)&&n.cancel()},e));return a.cancellation()?(i=this.then(),(o=i._then(n,c,void 0,e,void 0))._setOnCancel(e)):o=this._then(n,c,void 0,e,void 0),o}}},{"./util":36}],35:[function(a,e,t){e.exports=function(u,d,p,t,e,f){var E=a("./util"),n=a("./errors").TypeError,r=a("./util").inherits,h=E.errorObj,A=E.tryCatch,o={};function _(e){setTimeout(function(){throw e},0)}function g(r,o){var i=0,a=r.length,s=new u(e);return function e(){if(a<=i)return s._fulfill();n=r[i++],(t=p(n))!==n&&"function"==typeof n._isDisposable&&"function"==typeof n._getDisposer&&n._isDisposable()&&t._setDisposable(n._getDisposer());var t,n=t;if(n instanceof u&&n._isDisposable()){try{n=p(n._getDisposer().tryDispose(o),r.promise)}catch(e){return _(e)}if(n instanceof u)return n._then(e,_,null,null,null)}e()}(),s}function m(e,t,n){this._data=e,this._promise=t,this._context=n}function i(e,t,n){this.constructor$(e,t,n)}function y(e){return m.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function v(e){this.length=e,this.promise=null,this[e-1]=null}m.prototype.data=function(){return this._data},m.prototype.promise=function(){return this._promise},m.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():o},m.prototype.tryDispose=function(e){var t=this.resource(),n=this._context,t=(void 0!==n&&n._pushContext(),t!==o?this.doDispose(t,e):null);return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,t},m.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},r(i,m),i.prototype.doDispose=function(e,t){return this.data().call(e,e,t)},v.prototype._resultCancelled=function(){for(var e=this.length,t=0;t<e;++t){var n=this[t];n instanceof u&&n.cancel()}},u.using=function(){var e=arguments.length;if(e<2)return d("you must pass at least 2 arguments to Promise.using");var t,i=arguments[e-1];if("function"!=typeof i)return d("expecting a function but got "+E.classString(i));for(var a=!0,n=(2===e&&Array.isArray(arguments[0])?(e=(t=arguments[0]).length,a=!1):(t=arguments,e--),new v(e)),r=0;r<e;++r){var o,s=t[r];m.isDisposer(s)?(s=(o=s).promise())._setDisposable(o):(o=p(s))instanceof u&&(s=o._then(y,null,null,{resources:n,index:r},void 0)),n[r]=s}for(var _=new Array(n.length),r=0;r<_.length;++r)_[r]=u.resolve(n[r]).reflect();var l=u.all(_).then(function(e){for(var t=0;t<e.length;++t){var n=e[t];if(n.isRejected())return h.e=n.error(),h;if(!n.isFulfilled())return void l.cancel();e[t]=n.value()}c._pushContext(),i=A(i);var r=a?i.apply(void 0,e):i(e),o=c._popContext();return f.checkForgottenReturns(r,o,"Promise.using",c),r}),c=l.lastly(function(){var e=new u.PromiseInspection(l);return g(n,e)});return(n.promise=c)._setOnCancel(n),c},u.prototype._setDisposable=function(e){this._bitField=131072|this._bitField,this._disposer=e},u.prototype._isDisposable=function(){return 0<(131072&this._bitField)},u.prototype._getDisposer=function(){return this._disposer},u.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},u.prototype.disposer=function(e){if("function"==typeof e)return new i(e,this,t());throw new n}}},{"./errors":12,"./util":36}],36:[function(e,t,k){var l=e("./es5"),n="undefined"==typeof navigator,r={e:{}},o,i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==Y?Y:void 0!==this?this:null;function a(){try{var e=o;return o=null,e.apply(this,arguments)}catch(e){return r.e=e,r}}function s(e){return o=e,a}var _=function(t,n){var r={}.hasOwnProperty;function e(){for(var e in this.constructor=t,(this.constructor$=n).prototype)r.call(n.prototype,e)&&"$"!==e.charAt(e.length-1)&&(this[e+"$"]=n.prototype[e])}return e.prototype=n.prototype,t.prototype=new e,t.prototype};function c(e){return null==e||!0===e||!1===e||"string"==typeof e||"number"==typeof e}function u(e){return"function"==typeof e||"object"===(void 0===e?"undefined":_typeof(e))&&null!==e}function d(e){return c(e)?new Error(C(e)):e}function p(e,t){for(var n=e.length,r=new Array(n+1),o=0;o<n;++o)r[o]=e[o];return r[o]=t,r}function f(e,t,n){var r;return l.isES5?null!=(r=Object.getOwnPropertyDescriptor(e,t))?null==r.get&&null==r.set?r.value:n:void 0:{}.hasOwnProperty.call(e,t)?e[t]:void 0}function E(e,t,n){return c(e)||l.defineProperty(e,t,{value:n,configurable:!0,enumerable:!1,writable:!0}),e}function h(e){throw e}var A=function(){function s(e){for(var t=0;t<i.length;++t)if(i[t]===e)return 1}var _,o,i=[Array.prototype,Object.prototype,Function.prototype];return l.isES5?(_=Object.getOwnPropertyNames,function(e){for(var t,n=[],r=Object.create(null);null!=e&&!s(e);){try{t=_(e)}catch(e){return n}for(var o=0;o<t.length;++o){var i,a=t[o];r[a]||(r[a]=!0,null!=(i=Object.getOwnPropertyDescriptor(e,a))&&null==i.get&&null==i.set&&n.push(a))}e=l.getPrototypeOf(e)}return n}):(o={}.hasOwnProperty,function(e){if(s(e))return[];var t=[];e:for(var n in e){if(!o.call(e,n))for(var r=0;r<i.length;++r)if(o.call(i[r],n))continue e;t.push(n)}return t})}(),g=/this\s*\.\s*\S+\s*=/;function m(e){try{if("function"==typeof e){var t=l.names(e.prototype),n=l.isES5&&1<t.length,r=0<t.length&&!(1===t.length&&"constructor"===t[0]),o=g.test(e+"")&&0<l.names(e).length;if(n||r||o)return!0}return!1}catch(e){return!1}}function y(e){function t(){}t.prototype=e;var n=new t;function r(){_typeof(n.foo)}return r(),r(),e}var v=/^[a-z$_][a-z$_0-9]*$/i;function b(e){return v.test(e)}function T(e,t,n){for(var r=new Array(e),o=0;o<e;++o)r[o]=t+o+n;return r}function C(e){try{return e+""}catch(e){return"[no string representation]"}}function I(e){return e instanceof Error||null!==e&&"object"===(void 0===e?"undefined":_typeof(e))&&"string"==typeof e.message&&"string"==typeof e.name}function P(e){try{E(e,"isOperational",!0)}catch(e){}}function D(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===e.isOperational)}function O(e){return I(e)&&l.propertyIsWritable(e,"stack")}var w="stack"in new Error?function(e){return O(e)?e:new Error(C(e))}:function(e){if(O(e))return e;try{throw new Error(C(e))}catch(e){return e}};function M(e){return{}.toString.call(e)}function B(e,t,n){for(var r=l.names(e),o=0;o<r.length;++o){var i=r[o];if(n(i))try{l.defineProperty(t,i,l.getDescriptor(e,i))}catch(e){}}}var x=function(e){return l.isArray(e)?e:null},R,x,V=("undefined"!=typeof Symbol&&Symbol.iterator&&(R="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,n=[],r=e[Symbol.iterator]();!(t=r.next()).done;)n.push(t.value);return n},x=function(e){return l.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?R(e):null}),void 0!==oe&&"[object process]"===M(oe).toLowerCase()),S=void 0!==oe&&void 0!==oe.env,L;function K(e){return S?oe.env[e]:void 0}function U(){if("function"==typeof Promise)try{if("[object Promise]"===M(new Promise(function(){})))return Promise}catch(e){}}function F(e,t){var n,r;return null!==e&&"function"==typeof t&&t!==L&&(null!==e.domain&&(t=e.domain.bind(t)),null!==(n=e.async))&&(r=t,t=function(){var e=new Array(2).concat([].slice.call(arguments));return e[0]=r,e[1]=this,n.runInAsyncScope.apply(n,e)}),t}var N={setReflectHandler:function(e){L=e},isClass:m,isIdentifier:b,inheritedDataKeys:A,getDataPropertyOrDefault:f,thrower:h,isArray:l.isArray,asArray:x,notEnumerableProp:E,isPrimitive:c,isObject:u,isError:I,canEvaluate:n,errorObj:r,tryCatch:s,inherits:_,withAppended:p,maybeWrapAsError:d,toFastProperties:y,filledRange:T,toString:C,canAttachTrace:O,ensureErrorObject:w,originatesFromRejection:D,markAsOriginatingFromRejection:P,classString:M,copyDescriptors:B,isNode:V,hasEnvVariables:S,env:K,global:i,getNativePromise:U,contextBind:F};N.isRecentNode=N.isNode&&function(){var e;return oe.versions&&oe.versions.node?e=oe.versions.node.split(".").map(Number):oe.version&&(e=oe.version.split(".").map(Number)),0===e[0]&&10<e[1]||0<e[0]}(),N.nodeSupportsAsyncResource=N.isNode&&function(){var t=!1;try{t="function"==typeof e("async_hooks").AsyncResource.prototype.runInAsyncScope}catch(e){t=!1}return t}(),N.isNode&&N.toFastProperties(oe);try{throw new Error}catch(e){N.lastLineError=e}t.exports=N},{"./es5":13,async_hooks:void 0}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}.call(this,e("hXUCVB"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{hXUCVB:17}],17:[function(e,t,n){var r,o,i,t=t.exports={};function a(){}t.nextTick=(o="undefined"!=typeof window&&window.setImmediate,i="undefined"!=typeof window&&window.postMessage&&window.addEventListener,o?function(e){return window.setImmediate(e)}:i?(r=[],window.addEventListener("message",function(e){var t=e.source;t!==window&&null!==t||"process-tick"!==e.data||(e.stopPropagation(),0<r.length&&r.shift()())},!0),function(e){r.push(e),window.postMessage("process-tick","*")}):function(e){setTimeout(e,0)}),t.title="browser",t.browser=!0,t.env={},t.argv=[],t.on=a,t.addListener=a,t.once=a,t.off=a,t.removeListener=a,t.removeAllListeners=a,t.emit=a,t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")}},{}],18:[function(e,t,n){var r,o;r=window,o=function(o,a,e){function n(e,t){for(var n in t)e[n]=t[n];return e}var r=o.jQuery;function t(e,t){this.element="string"==typeof e?document.querySelector(e):e,r&&(this.$element=r(this.element)),this.options=n({},this.constructor.defaults),this.option(t),this._create()}var e=t.prototype=Object.create(e.prototype),i=(t.defaults={},e.option=function(e){n(this.options,e)},{relative:!0,absolute:!0,fixed:!0});function s(e,t,n){return n=n||"round",t?Math[n](e/t)*t:e}return e._create=function(){this.position={},this._getPosition(),this.startPoint={x:0,y:0},this.dragPoint={x:0,y:0},this.startPosition=n({},this.position);var e=getComputedStyle(this.element);i[e.position]||(this.element.style.position="relative"),this.on("pointerMove",this.onPointerMove),this.on("pointerUp",this.onPointerUp),this.enable(),this.setHandles()},e.setHandles=function(){this.handles=this.options.handle?this.element.querySelectorAll(this.options.handle):[this.element],this.bindHandles()},e.dispatchEvent=function(e,t,n){var r=[t].concat(n);this.emitEvent(e,r),this.dispatchJQueryEvent(e,t,n)},e.dispatchJQueryEvent=function(e,t,n){var r=o.jQuery;r&&this.$element&&((r=r.Event(t)).type=e,this.$element.trigger(r,n))},e._getPosition=function(){var e=getComputedStyle(this.element),t=this._getPositionCoord(e.left,"width"),n=this._getPositionCoord(e.top,"height");this.position.x=isNaN(t)?0:t,this.position.y=isNaN(n)?0:n,this._addTransformPosition(e)},e._getPositionCoord=function(e,t){var n;return-1!=e.indexOf("%")?(n=a(this.element.parentNode))?parseFloat(e)/100*n[t]:0:parseInt(e,10)},e._addTransformPosition=function(e){var t,n,e=e.transform;0===e.indexOf("matrix")&&(n=e.split(","),e=0===e.indexOf("matrix3d")?12:4,t=parseInt(n[e],10),n=parseInt(n[1+e],10),this.position.x+=t,this.position.y+=n)},e.onPointerDown=function(e,t){this.element.classList.add("is-pointer-down"),this.dispatchJQueryEvent("pointerDown",e,[t])},e.pointerDown=function(e,t){this.okayPointerDown(e)&&this.isEnabled?(this.pointerDownPointer={pageX:t.pageX,pageY:t.pageY},e.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(e),this.element.classList.add("is-pointer-down"),this.dispatchEvent("pointerDown",e,[t])):this._pointerReset()},e.dragStart=function(e,t){this.isEnabled&&(this._getPosition(),this.measureContainment(),this.startPosition.x=this.position.x,this.startPosition.y=this.position.y,this.setLeftTop(),this.dragPoint.x=0,this.dragPoint.y=0,this.element.classList.add("is-dragging"),this.dispatchEvent("dragStart",e,[t]),this.animate())},e.measureContainment=function(){var e,t,n,r,o,i=this.getContainer();i&&(e=a(this.element),t=a(i),o=this.element.getBoundingClientRect(),i=i.getBoundingClientRect(),n=t.borderLeftWidth+t.borderRightWidth,r=t.borderTopWidth+t.borderBottomWidth,o=this.relativeStartPosition={x:o.left-(i.left+t.borderLeftWidth),y:o.top-(i.top+t.borderTopWidth)},this.containSize={width:t.width-n-o.x-e.width,height:t.height-r-o.y-e.height})},e.getContainer=function(){var e=this.options.containment;if(e)return e instanceof HTMLElement?e:"string"==typeof e?document.querySelector(e):this.element.parentNode},e.onPointerMove=function(e,t,n){this.dispatchJQueryEvent("pointerMove",e,[t,n])},e.dragMove=function(e,t,n){var r,o,i,a;this.isEnabled&&(i=n.x,a=n.y,r=(o=this.options.grid)&&o[0],o=o&&o[1],i=s(i,r),a=s(a,o),i=this.containDrag("x",i,r),a=this.containDrag("y",a,o),i="y"==this.options.axis?0:i,a="x"==this.options.axis?0:a,this.position.x=this.startPosition.x+i,this.position.y=this.startPosition.y+a,this.dragPoint.x=i,this.dragPoint.y=a,this.dispatchEvent("dragMove",e,[t,n]))},e.containDrag=function(e,t,n){var r;return this.options.containment?(r="x"==e?"width":"height",e=s(-this.relativeStartPosition[e],n,"ceil"),r=s(r=this.containSize[r],n,"floor"),Math.max(e,Math.min(r,t))):t},e.onPointerUp=function(e,t){this.element.classList.remove("is-pointer-down"),this.dispatchJQueryEvent("pointerUp",e,[t])},e.dragEnd=function(e,t){this.isEnabled&&(this.element.style.transform="",this.setLeftTop(),this.element.classList.remove("is-dragging"),this.dispatchEvent("dragEnd",e,[t]))},e.animate=function(){var e;this.isDragging&&(this.positionDrag(),e=this,requestAnimationFrame(function(){e.animate()}))},e.setLeftTop=function(){this.element.style.left=this.position.x+"px",this.element.style.top=this.position.y+"px"},e.positionDrag=function(){this.element.style.transform="translate3d( "+this.dragPoint.x+"px, "+this.dragPoint.y+"px, 0)"},e.staticClick=function(e,t){this.dispatchEvent("staticClick",e,[t])},e.setPosition=function(e,t){this.position.x=e,this.position.y=t,this.setLeftTop()},e.enable=function(){this.isEnabled=!0},e.disable=function(){this.isEnabled=!1,this.isDragging&&this.dragEnd()},e.destroy=function(){this.disable(),this.element.style.transform="",this.element.style.left="",this.element.style.top="",this.element.style.position="",this.unbindHandles(),this.$element&&this.$element.removeData("draggabilly")},e._init=function(){},r&&r.bridget&&r.bridget("draggabilly",t),t},"function"==typeof define&&define.amd?define(["get-size/get-size","unidragger/unidragger"],function(e,t){return o(r,e,t)}):"object"==(void 0===t?"undefined":_typeof(t))&&t.exports?t.exports=o(r,e("get-size"),e("unidragger")):r.Draggabilly=o(r,r.getSize,r.Unidragger)},{"get-size":20,unidragger:25}],19:[function(e,t,n){var r,o;r="undefined"!=typeof window?window:this,o=function(){function e(){}var t=e.prototype;return t.on=function(e,t){var n;if(e&&t)return-1==(n=(n=this._events=this._events||{})[e]=n[e]||[]).indexOf(t)&&n.push(t),this},t.once=function(e,t){var n;if(e&&t)return this.on(e,t),((n=this._onceEvents=this._onceEvents||{})[e]=n[e]||{})[t]=!0,this},t.off=function(e,t){e=this._events&&this._events[e];if(e&&e.length)return-1!=(t=e.indexOf(t))&&e.splice(t,1),this},t.emitEvent=function(e,t){var n=this._events&&this._events[e];if(n&&n.length){n=n.slice(0),t=t||[];for(var r=this._onceEvents&&this._onceEvents[e],o=0;o<n.length;o++){var i=n[o];r&&r[i]&&(this.off(e,i),delete r[i]),i.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e},"function"==typeof define&&define.amd?define(o):"object"==(void 0===t?"undefined":_typeof(t))&&t.exports?t.exports=o():r.EvEmitter=o()},{}],20:[function(e,t,n){var r,o;r=window,o=function(){function h(e){var t=parseFloat(e);return-1==e.indexOf("%")&&!isNaN(t)&&t}var t="undefined"==typeof console?function(){}:function(e){},A=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],g=A.length;function m(e){e=getComputedStyle(e);return e||t("Style returned "+e+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),e}var y,v=!1;function b(e){if(v||(v=!0,(c=document.createElement("div")).style.width="200px",c.style.padding="1px 2px 3px 4px",c.style.borderStyle="solid",c.style.borderWidth="1px 2px 3px 4px",c.style.boxSizing="border-box",(l=document.body||document.documentElement).appendChild(c),i=m(c),y=200==Math.round(h(i.width)),b.isBoxSizeOuter=y,l.removeChild(c)),(e="string"==typeof e?document.querySelector(e):e)&&"object"==(void 0===e?"undefined":_typeof(e))&&e.nodeType){var t=m(e);if("none"==t.display){for(var n={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},r=0;r<g;r++)n[A[r]]=0;return n}for(var o={},i=(o.width=e.offsetWidth,o.height=e.offsetHeight,o.isBorderBox="border-box"==t.boxSizing),a=0;a<g;a++){var s=A[a],_=t[s],_=parseFloat(_);o[s]=isNaN(_)?0:_}var l=o.paddingLeft+o.paddingRight,c=o.paddingTop+o.paddingBottom,e=o.marginLeft+o.marginRight,u=o.marginTop+o.marginBottom,d=o.borderLeftWidth+o.borderRightWidth,p=o.borderTopWidth+o.borderBottomWidth,f=i&&y,E=h(t.width),E=(!1!==E&&(o.width=E+(f?0:l+d)),h(t.height));return!1!==E&&(o.height=E+(f?0:c+p)),o.innerWidth=o.width-(l+d),o.innerHeight=o.height-(c+p),o.outerWidth=o.width+e,o.outerHeight=o.height+u,o}}return b},"function"==typeof define&&define.amd?define(o):"object"==(void 0===t?"undefined":_typeof(t))&&t.exports?t.exports=o():r.getSize=o()},{}],21:[function(e,t,n){var r,o,i,a;r=function(){function s(){for(var e=0,t={};e<arguments.length;e++){var n,r=arguments[e];for(n in r)t[n]=r[n]}return t}function l(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function e(_){function a(){}function n(e,t,n){if("undefined"!=typeof document){"number"==typeof(n=s({path:"/"},a.defaults,n)).expires&&(n.expires=new Date(+new Date+864e5*n.expires)),n.expires=n.expires?n.expires.toUTCString():"";try{var r=JSON.stringify(t);/^[\{\[]/.test(r)&&(t=r)}catch(e){}t=_.write?_.write(t,e):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var o,i="";for(o in n)n[o]&&(i+="; "+o,!0!==n[o])&&(i+="="+n[o].split(";")[0]);return document.cookie=e+"="+t+i}}function t(e,t){if("undefined"!=typeof document){for(var n={},r=document.cookie?document.cookie.split("; "):[],o=0;o<r.length;o++){var i=r[o].split("="),a=i.slice(1).join("=");t||'"'!==a.charAt(0)||(a=a.slice(1,-1));try{var s=l(i[0]),a=(_.read||_)(a,s)||l(a);if(t)try{a=JSON.parse(a)}catch(e){}if(n[s]=a,e===s)break}catch(e){}}return e?n[e]:n}}return a.set=n,a.get=function(e){return t(e,!1)},a.getJSON=function(e){return t(e,!0)},a.remove=function(e,t){n(e,"",s(t,{expires:-1}))},a.defaults={},a.withConverter=e,a}(function(){})},"function"==typeof define&&define.amd&&(define(r),o=!0),"object"===(void 0===n?"undefined":_typeof(n))&&(t.exports=r(),o=!0),o||(i=window.Cookies,(a=window.Cookies=r()).noConflict=function(){return window.Cookies=i,a})},{}],22:[function(require,module,exports){!function(process,global){!function(){var ERROR="input is invalid type",WINDOW="object"===("undefined"==typeof window?"undefined":_typeof(window)),root=WINDOW?window:{},WEB_WORKER=(root.JS_SHA256_NO_WINDOW&&(WINDOW=!1),!WINDOW&&"object"===("undefined"==typeof self?"undefined":_typeof(self))),NODE_JS=!root.JS_SHA256_NO_NODE_JS&&"object"===(void 0===process?"undefined":_typeof(process))&&process.versions&&process.versions.node,COMMON_JS=(NODE_JS?root=global:WEB_WORKER&&(root=self),!root.JS_SHA256_NO_COMMON_JS&&"object"===(void 0===module?"undefined":_typeof(module))&&module.exports),AMD="function"==typeof define&&define.amd,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[],createOutputMethod=(!root.JS_SHA256_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!ARRAY_BUFFER||!root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"===(void 0===e?"undefined":_typeof(e))&&e.buffer&&e.buffer.constructor===ArrayBuffer}),function(t,n){return function(e){return new Sha256(n,!0).update(e)[t]()}}),createMethod=function(e){var t=createOutputMethod("hex",e);(t=NODE_JS?nodeWrap(t,e):t).create=function(){return new Sha256(e)},t.update=function(e){return t.create().update(e)};for(var n=0;n<OUTPUT_TYPES.length;++n){var r=OUTPUT_TYPES[n];t[r]=createOutputMethod(r,e)}return t},nodeWrap=function nodeWrap(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(e){if("string"==typeof e)return crypto.createHash(algorithm).update(e,"utf8").digest("hex");if(null==e)throw new Error(ERROR);return e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(e)).digest("hex"):method(e)};return nodeMethod},createHmacOutputMethod=function(n,r){return function(e,t){return new HmacSha256(e,r,!0).update(t)[n]()}},createHmacMethod=function(t){var n=createHmacOutputMethod("hex",t);n.create=function(e){return new HmacSha256(e,t)},n.update=function(e,t){return n.create(e).update(t)};for(var e=0;e<OUTPUT_TYPES.length;++e){var r=OUTPUT_TYPES[e];n[r]=createHmacOutputMethod(r,t)}return n};function Sha256(e,t){t?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=e}function HmacSha256(e,t,n){var r=void 0===e?"undefined":_typeof(e);if("string"===r){for(var o,i=[],a=e.length,s=0,_=0;_<a;++_)(o=e.charCodeAt(_))<128?i[s++]=o:(o<2048?i[s++]=192|o>>6:(o<55296||57344<=o?i[s++]=224|o>>12:(o=65536+((1023&o)<<10|1023&e.charCodeAt(++_)),i[s++]=240|o>>18,i[s++]=128|o>>12&63),i[s++]=128|o>>6&63),i[s++]=128|63&o);e=i}else{if("object"!==r)throw new Error(ERROR);if(null===e)throw new Error(ERROR);if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw new Error(ERROR)}64<e.length&&(e=new Sha256(t,!0).update(e).array());var l=[],c=[];for(_=0;_<64;++_){var u=e[_]||0;l[_]=92^u,c[_]=54^u}Sha256.call(this,t,n),this.update(c),this.oKeyPad=l,this.inner=!0,this.sharedMemory=n}Sha256.prototype.update=function(e){if(!this.finalized){var t,n=void 0===e?"undefined":_typeof(e);if("string"!==n){if("object"!==n)throw new Error(ERROR);if(null===e)throw new Error(ERROR);if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw new Error(ERROR);t=!0}for(var r,o,i=0,a=e.length,s=this.blocks;i<a;){if(this.hashed&&(this.hashed=!1,s[0]=this.block,s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),t)for(o=this.start;i<a&&o<64;++i)s[o>>2]|=e[i]<<SHIFT[3&o++];else for(o=this.start;i<a&&o<64;++i)(r=e.charCodeAt(i))<128?s[o>>2]|=r<<SHIFT[3&o++]:(r<2048?s[o>>2]|=(192|r>>6)<<SHIFT[3&o++]:(r<55296||57344<=r?s[o>>2]|=(224|r>>12)<<SHIFT[3&o++]:(r=65536+((1023&r)<<10|1023&e.charCodeAt(++i)),s[o>>2]|=(240|r>>18)<<SHIFT[3&o++],s[o>>2]|=(128|r>>12&63)<<SHIFT[3&o++]),s[o>>2]|=(128|r>>6&63)<<SHIFT[3&o++]),s[o>>2]|=(128|63&r)<<SHIFT[3&o++]);this.lastByteIndex=o,this.bytes+=o-this.start,64<=o?(this.block=s[16],this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return 4294967295<this.bytes&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){var e,t;this.finalized||(this.finalized=!0,e=this.blocks,t=this.lastByteIndex,e[16]=this.block,e[t>>2]|=EXTRA[3&t],this.block=e[16],56<=t&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash())},Sha256.prototype.hash=function(){for(var e,t,n,r,o,i,a=this.h0,s=this.h1,_=this.h2,l=this.h3,c=this.h4,u=this.h5,d=this.h6,p=this.h7,f=this.blocks,E=16;E<64;++E)e=((t=f[E-15])>>>7|t<<25)^(t>>>18|t<<14)^t>>>3,t=f[E-2],f[E]=f[E-16]+e+f[E-7]+((t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10)<<0;for(i=s&_,E=0;E<64;E+=4)this.first?(l=this.is224?(n=300032,p=(t=f[0]-1413257819)-150054599<<0,t+24177077<<0):(n=704751109,p=(t=f[0]-210244248)-1521486534<<0,t+143694565<<0),this.first=!1):(p=l+(t=p+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))+(c&u^~c&d)+K[E]+f[E])<<0,l=t+((e=(a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10))+((n=a&s)^a&_^i))<<0),d=_+(t=d+((p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(p&c^~p&u)+K[E+1]+f[E+1])<<0,_=t+((e=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10))+((r=l&a)^l&s^n))<<0,u=s+(t=u+((d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(d&p^~d&c)+K[E+2]+f[E+2])<<0,s=t+((e=(_>>>2|_<<30)^(_>>>13|_<<19)^(_>>>22|_<<10))+((o=_&l)^_&a^r))<<0,c=a+(t=c+((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))+(u&d^~u&p)+K[E+3]+f[E+3])<<0,a=t+((e=(s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+((i=s&_)^s&l^o))<<0;this.h0=this.h0+a<<0,this.h1=this.h1+s<<0,this.h2=this.h2+_<<0,this.h3=this.h3+l<<0,this.h4=this.h4+c<<0,this.h5=this.h5+u<<0,this.h6=this.h6+d<<0,this.h7=this.h7+p<<0},Sha256.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,o=this.h4,i=this.h5,a=this.h6,s=this.h7,e=HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[15&o]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[15&i]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[15&a];return this.is224||(e+=HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[15&s]),e},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,o=this.h4,i=this.h5,a=this.h6,s=this.h7,e=[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24&255,n>>16&255,n>>8&255,255&n,r>>24&255,r>>16&255,r>>8&255,255&r,o>>24&255,o>>16&255,o>>8&255,255&o,i>>24&255,i>>16&255,i>>8&255,255&i,a>>24&255,a>>16&255,a>>8&255,255&a];return this.is224||e.push(s>>24&255,s>>16&255,s>>8&255,255&s),e},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(this.is224?28:32),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),this.is224||t.setUint32(28,this.h7),e},HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){var e;Sha256.prototype.finalize.call(this),this.inner&&(this.inner=!1,e=this.array(),Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(e),Sha256.prototype.finalize.call(this))};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224,AMD&&define(function(){return exports}))}()}.call(this,require("hXUCVB"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{hXUCVB:17}],23:[function(e,d,t){!function(e){var g="Expected a function",n=NaN,r=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt,e="object"==(void 0===e?"undefined":_typeof(e))&&e&&e.Object===Object&&e,t="object"==("undefined"==typeof self?"undefined":_typeof(self))&&self&&self.Object===Object&&self,_=e||t||Function("return this")(),l=Object.prototype.toString,m=Math.max,y=Math.min,v=function(){return _.Date.now()};function c(r,n,e){var o,i,a,s,_,l,c=0,u=!1,d=!1,t=!0;if("function"!=typeof r)throw new TypeError(g);function p(e){var t=o,n=i;return o=i=void 0,c=e,s=r.apply(n,t)}function f(e){var t=e-l;return void 0===l||n<=t||t<0||d&&a<=e-c}function E(){var e,t=v();if(f(t))return h(t);_=setTimeout(E,(e=n-((t=t)-l),d?y(e,a-(t-c)):e))}function h(e){return _=void 0,t&&o?p(e):(o=i=void 0,s)}function A(){var e=v(),t=f(e);if(o=arguments,i=this,l=e,t){if(void 0===_)return c=e=l,_=setTimeout(E,n),u?p(e):s;if(d)return _=setTimeout(E,n),p(l)}return void 0===_&&(_=setTimeout(E,n)),s}return n=T(n)||0,b(e)&&(u=!!e.leading,d="maxWait"in e,a=d?m(T(e.maxWait)||0,n):a,t="trailing"in e?!!e.trailing:t),A.cancel=function(){void 0!==_&&clearTimeout(_),o=l=i=_=void(c=0)},A.flush=function(){return void 0===_?s:h(v())},A}function b(e){var t=void 0===e?"undefined":_typeof(e);return e&&("object"==t||"function"==t)}function u(e){return"symbol"==(void 0===e?"undefined":_typeof(e))||!!(t=e)&&"object"==(void 0===t?"undefined":_typeof(t))&&"[object Symbol]"==l.call(e);var t}function T(e){if("number"==typeof e)return e;if(u(e))return n;if("string"!=typeof(e=b(e)?b(t="function"==typeof e.valueOf?e.valueOf():e)?t+"":t:e))return 0===e?e:+e;e=e.replace(r,"");var t=i.test(e);return t||a.test(e)?s(e.slice(2),t?2:8):o.test(e)?n:+e}d.exports=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError(g);return b(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),c(e,t,{leading:r,maxWait:t,trailing:o})}}.call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],24:[function(e,r,t){!function(e){var t,n,i,a,s,_,l,c,u,d,p,f,E,h,A,g,m,y,v,b,T,C,I,P,D;!function(t){var o="object"===(void 0===e?"undefined":_typeof(e))?e:"object"===("undefined"==typeof self?"undefined":_typeof(self))?self:"object"===_typeof(this)?this:{};function n(n,r){return n!==o&&("function"==typeof Object.create?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(e,t){return n[e]=r?r(e,t):t}}"function"==typeof define&&define.amd?define("tslib",["exports"],function(e){t(n(o,n(e)))}):"object"===(void 0===r?"undefined":_typeof(r))&&"object"===_typeof(r.exports)?t(n(o,n(r.exports))):t(n(o))}(function(e){var r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}),o=(t=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i=function(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n},a=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;0<=s;s--)(o=e[s])&&(a=(i<3?o(a):3<i?o(t,n,a):o(t,n))||a);return 3<i&&a&&Object.defineProperty(t,n,a),a},s=function(n,r){return function(e,t){r(e,t,n)}},_=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(e,a,s,_){return new(s=s||Promise)(function(n,t){function r(e){try{i(_.next(e))}catch(e){t(e)}}function o(e){try{i(_.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}i((_=_.apply(e,a||[])).next())})},c=function(r,o){var i,a,s,_={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},l={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function e(n){return function(e){var t=[n,e];if(i)throw new TypeError("Generator is already executing.");for(;_=l&&t[l=0]?0:_;)try{if(i=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return _.label++,{value:t[1],done:!1};case 5:_.label++,a=t[1],t=[0];continue;case 7:t=_.ops.pop(),_.trys.pop();continue;default:if(!(s=0<(s=_.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){_=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))_.label=t[1];else if(6===t[0]&&_.label<s[1])_.label=s[1],s=t;else{if(!(s&&_.label<s[2])){s[2]&&_.ops.pop(),_.trys.pop();continue}_.label=s[2],_.ops.push(t)}}t=o.call(r,_)}catch(e){t=[6,e],a=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},u=function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||D(t,e,n)},D=Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]},d=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},p=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},f=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e},E=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r},h=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},A=function(e){return this instanceof A?(this.v=e,this):new A(e)},g=function(e,t,n){var o,i,a;if(Symbol.asyncIterator)return o=n.apply(e,t||[]),i=[],a={},r("next"),r("throw"),r("return"),a[Symbol.asyncIterator]=function(){return this},a;throw new TypeError("Symbol.asyncIterator is not defined.");function r(r){o[r]&&(a[r]=function(n){return new Promise(function(e,t){1<i.push([r,n,e,t])||s(r,n)})})}function s(e,t){try{(n=o[e](t)).value instanceof A?Promise.resolve(n.value.v).then(_,l):c(i[0][2],n)}catch(e){c(i[0][3],e)}var n}function _(e){s("next",e)}function l(e){s("throw",e)}function c(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}},m=function(r){var o,e={};return t("next"),t("throw",function(e){throw e}),t("return"),e[Symbol.iterator]=function(){return this},e;function t(t,n){e[t]=r[t]?function(e){return(o=!o)?{value:A(r[t](e)),done:"return"===t}:n?n(e):e}:n}},y=function(a){var e,t;if(Symbol.asyncIterator)return(e=a[Symbol.asyncIterator])?e.call(a):(a=d(a),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);throw new TypeError("Symbol.asyncIterator is not defined.");function n(i){t[i]=a[i]&&function(o){return new Promise(function(e,t){var n,r;o=a[i](o),n=e,e=t,r=o.done,t=o.value,Promise.resolve(t).then(function(e){n({value:e,done:r})},e)})}}},v=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t});b=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&D(t,e,n);return o(t,e),t},T=function(e){return e&&e.__esModule?e:{default:e}},C=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e===t&&r:t.has(e))return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e);throw new TypeError("Cannot read private member from an object whose class did not declare it")},I=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e===t&&o:t.has(e))return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n;throw new TypeError("Cannot write private member to an object whose class did not declare it")},P=function(e,t){if(null===t||"object"!==(void 0===t?"undefined":_typeof(t))&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)},e("__extends",t),e("__assign",n),e("__rest",i),e("__decorate",a),e("__param",s),e("__metadata",_),e("__awaiter",l),e("__generator",c),e("__exportStar",u),e("__createBinding",D),e("__values",d),e("__read",p),e("__spread",f),e("__spreadArrays",E),e("__spreadArray",h),e("__await",A),e("__asyncGenerator",g),e("__asyncDelegator",m),e("__asyncValues",y),e("__makeTemplateObject",v),e("__importStar",b),e("__importDefault",T),e("__classPrivateFieldGet",C),e("__classPrivateFieldSet",I),e("__classPrivateFieldIn",P)})}.call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],25:[function(e,t,n){var r,o;r=window,o=function(i,e){function t(){}var n=t.prototype=Object.create(e.prototype),r=(n.bindHandles=function(){this._bindHandles(!0)},n.unbindHandles=function(){this._bindHandles(!1)},n._bindHandles=function(e){for(var t=(e=void 0===e||e)?"addEventListener":"removeEventListener",n=e?this._touchActionValue:"",r=0;r<this.handles.length;r++){var o=this.handles[r];this._bindStartEvent(o,e),o[t]("click",this),i.PointerEvent&&(o.style.touchAction=n)}},n._touchActionValue="none",n.pointerDown=function(e,t){this.okayPointerDown(e)&&(this.pointerDownPointer={pageX:t.pageX,pageY:t.pageY},e.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(e),this.emitEvent("pointerDown",[e,t]))},{TEXTAREA:!0,INPUT:!0,SELECT:!0,OPTION:!0}),o={radio:!0,checkbox:!0,button:!0,submit:!0,image:!0,file:!0};return n.okayPointerDown=function(e){var t=r[e.target.nodeName],e=o[e.target.type],t=!t||e;return t||this._pointerReset(),t},n.pointerDownBlur=function(){var e=document.activeElement;e&&e.blur&&e!=document.body&&e.blur()},n.pointerMove=function(e,t){var n=this._dragPointerMove(e,t);this.emitEvent("pointerMove",[e,t,n]),this._dragMove(e,t,n)},n._dragPointerMove=function(e,t){var n={x:t.pageX-this.pointerDownPointer.pageX,y:t.pageY-this.pointerDownPointer.pageY};return!this.isDragging&&this.hasDragStarted(n)&&this._dragStart(e,t),n},n.hasDragStarted=function(e){return 3<Math.abs(e.x)||3<Math.abs(e.y)},n.pointerUp=function(e,t){this.emitEvent("pointerUp",[e,t]),this._dragPointerUp(e,t)},n._dragPointerUp=function(e,t){this.isDragging?this._dragEnd(e,t):this._staticClick(e,t)},n._dragStart=function(e,t){this.isDragging=!0,this.isPreventingClicks=!0,this.dragStart(e,t)},n.dragStart=function(e,t){this.emitEvent("dragStart",[e,t])},n._dragMove=function(e,t,n){this.isDragging&&this.dragMove(e,t,n)},n.dragMove=function(e,t,n){e.preventDefault(),this.emitEvent("dragMove",[e,t,n])},n._dragEnd=function(e,t){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(e,t)},n.dragEnd=function(e,t){this.emitEvent("dragEnd",[e,t])},n.onclick=function(e){this.isPreventingClicks&&e.preventDefault()},n._staticClick=function(e,t){this.isIgnoringMouseUp&&"mouseup"==e.type||(this.staticClick(e,t),"mouseup"!=e.type&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400)))},n.staticClick=function(e,t){this.emitEvent("staticClick",[e,t])},t.getPointerPoint=e.getPointerPoint,t},"function"==typeof define&&define.amd?define(["unipointer/unipointer"],function(e){return o(r,e)}):"object"==(void 0===t?"undefined":_typeof(t))&&t.exports?t.exports=o(r,e("unipointer")):r.Unidragger=o(r,r.Unipointer)},{unipointer:26}],26:[function(e,t,n){var r,o;r=window,o=function(r,e){function t(){}var e=t.prototype=Object.create(e.prototype),n=(e.bindStartEvent=function(e){this._bindStartEvent(e,!0)},e.unbindStartEvent=function(e){this._bindStartEvent(e,!1)},e._bindStartEvent=function(e,t){var t=(t=void 0===t||t)?"addEventListener":"removeEventListener",n="mousedown";"ontouchstart"in r?n="touchstart":r.PointerEvent&&(n="pointerdown"),e[t](n,this)},e.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},e.getTouch=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.identifier==this.pointerIdentifier)return n}},e.onmousedown=function(e){var t=e.button;t&&0!==t&&1!==t||this._pointerDown(e,e)},e.ontouchstart=function(e){this._pointerDown(e,e.changedTouches[0])},e.onpointerdown=function(e){this._pointerDown(e,e)},e._pointerDown=function(e,t){e.button||this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=void 0!==t.pointerId?t.pointerId:t.identifier,this.pointerDown(e,t))},e.pointerDown=function(e,t){this._bindPostStartEvents(e),this.emitEvent("pointerDown",[e,t])},{mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]});return e._bindPostStartEvents=function(e){e&&((e=n[e.type]).forEach(function(e){r.addEventListener(e,this)},this),this._boundPointerEvents=e)},e._unbindPostStartEvents=function(){this._boundPointerEvents&&(this._boundPointerEvents.forEach(function(e){r.removeEventListener(e,this)},this),delete this._boundPointerEvents)},e.onmousemove=function(e){this._pointerMove(e,e)},e.onpointermove=function(e){e.pointerId==this.pointerIdentifier&&this._pointerMove(e,e)},e.ontouchmove=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerMove(e,t)},e._pointerMove=function(e,t){this.pointerMove(e,t)},e.pointerMove=function(e,t){this.emitEvent("pointerMove",[e,t])},e.onmouseup=function(e){this._pointerUp(e,e)},e.onpointerup=function(e){e.pointerId==this.pointerIdentifier&&this._pointerUp(e,e)},e.ontouchend=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerUp(e,t)},e._pointerUp=function(e,t){this._pointerDone(),this.pointerUp(e,t)},e.pointerUp=function(e,t){this.emitEvent("pointerUp",[e,t])},e._pointerDone=function(){this._pointerReset(),this._unbindPostStartEvents(),this.pointerDone()},e._pointerReset=function(){this.isPointerDown=!1,delete this.pointerIdentifier},e.pointerDone=function(){},e.onpointercancel=function(e){e.pointerId==this.pointerIdentifier&&this._pointerCancel(e,e)},e.ontouchcancel=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerCancel(e,t)},e._pointerCancel=function(e,t){this._pointerDone(),this.pointerCancel(e,t)},e.pointerCancel=function(e,t){this.emitEvent("pointerCancel",[e,t])},t.getPointerPoint=function(e){return{x:e.pageX,y:e.pageY}},t},"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(e){return o(r,e)}):"object"==(void 0===t?"undefined":_typeof(t))&&t.exports?t.exports=o(r,e("ev-emitter")):r.Unipointer=o(r,r.EvEmitter)},{"ev-emitter":19}],27:[function(e,t,n){function r(){o(d=l-1<=(d+=1)?-1:d),u=setTimeout(r,c)}function o(e){s.hide().eq(e).show(),_.find("span").removeClass("active").eq(e).addClass("active")}var i,a,s,_,l,c,u,d;a=$("#gg-focus1"),s=a.find(".item"),_=a.find(".dot"),l=s.length,c=3e3,d=-1,i=u="",s.each(function(e,t){i+="<span></span>"}),_.html(i),r(),a.on("mouseenter",function(){clearTimeout(u)}).on("mouseleave",function(){u=setTimeout(r,c)}),_.find("span").each(function(e,t){$(t).on("click",function(){o(e),d=e})})},{}],28:[function(e,t,n){var r={};void 0===("undefined"==typeof serverTime?"undefined":_typeof(serverTime))&&(window.serverTime=new Date),r.nowTimeYear=serverTime.getFullYear(),r.nowTimeMonth=serverTime.getMonth()+1,r.nowTimeDay=serverTime.getDate(),r.nowTimeWeek=serverTime.getDay(),r.nowTimeHour=serverTime.getHours(),r.nowTimeMinute=serverTime.getMinutes(),r.nowTimeSecond=serverTime.getSeconds(),r.nowWeek=["æææ¥","ææä¸","ææäº","ææä¸","ææå","ææäº","ææå­"],r.navMap={"ä¸æµ·å¸":"navShanghai","éåºå¸":"navChongqing","å¹¿ä¸ç":"navGuangdong","éè¥¿ç":"navShanxi","åå·ç":"navSichuan","ç¦å»ºç":"navFujian","æ²³åç":"navHenan","æ¹åç":"navHubei","æ¹åç":"navHunan","è¾½å®ç":"navLiaoning","æ±èç":"navJiangsu","æµæ±ç":"navZhejiang"},r.newsMap={"åäº¬å¸":{url:"http://bj.jjj.qq.com/",bossZone:"beijingnewstab",title:"åäº¬æ°é»"},"å¤©æ´¥å¸":{url:"http://tj.jjj.qq.com/",bossZone:"tianjinnewstab",title:"å¤©æ´¥æ°é»"},"æ²³åç":{url:"http://hb.jjj.qq.com/",bossZone:"hebeinewstab",title:"æ²³åæ°é»"},"ä¸æµ·å¸":{url:"http://sh.qq.com/",bossZone:"shnewstab",title:"ä¸æµ·æ°é»"},"éåºå¸":{url:"http://cq.qq.com/",bossZone:"cqnewstab",title:"éåºæ°é»"},"å¹¿ä¸ç":{url:"http://gd.qq.com/",bossZone:"gdnewstab",title:"å¹¿ä¸æ°é»"},"éè¥¿ç":{url:"http://xian.qq.com/",bossZone:"xiannewstab",title:"éè¥¿æ°é»"},"åå·ç":{url:"http://cd.qq.com/",bossZone:"cdnewstab",title:"åå·æ°é»"},"ç¦å»ºç":{url:"http://fj.qq.com/",bossZone:"fjnewstab",title:"ç¦å»ºæ°é»"},"æ²³åç":{url:"http://henan.qq.com/",bossZone:"henannewstab",title:"æ²³åæ°é»"},"æ¹åç":{url:"http://hb.qq.com/",bossZone:"hbnewstab",title:"æ¹åæ°é»"},"æ¹åç":{url:"http://hn.qq.com/",bossZone:"hunannewstab",title:"æ¹åæ°é»"},"è¾½å®ç":{url:"http://ln.qq.com/",bossZone:"lnnewstab",title:"è¾½å®æ°é»"},"æ±èç":{url:"http://js.qq.com/",bossZone:"jsnewstab",title:"æ±èæ°é»"},"æµæ±ç":{url:"http://zj.qq.com/",bossZone:"zjnewstab",title:"æµæ±æ°é»"}},r.newsInfoMap={},r.cityCode={"åäº¬å¸":{"åäº¬å¸":{}},"ä¸æµ·å¸":{"ä¸æµ·å¸":{}},"å¤©æ´¥å¸":{"å¤©æ´¥å¸":{}},"éåºå¸":{"éåºå¸":{}},"æ²³åç":{"ç³å®¶åºå¸":{},"åå±±å¸":{},"ç§¦çå²å¸":{},"é¯é¸å¸":{},"é¢å°å¸":{},"ä¿å®å¸":{},"å¼ å®¶å£å¸":{},"æ¿å¾·å¸":{},"æ²§å·å¸":{},"å»åå¸":{},"è¡¡æ°´å¸":{}},"å±±è¥¿ç":{"å¤ªåå¸":{},"å¤§åå¸":{},"é³æ³å¸":{},"é¿æ²»å¸":{},"æåå¸":{},"æå·å¸":{},"æä¸­å¸":{},"è¿åå¸":{},"å¿»å·å¸":{},"ä¸´æ±¾å¸":{},"åæ¢å¸":{}},"åèå¤":{"å¼åæµ©ç¹å¸":{},"åå¤´å¸":{},"ä¹æµ·å¸":{},"èµ¤å³°å¸":{},"éè¾½å¸":{},"éå°å¤æ¯å¸":{},"å¼ä¼¦è´å°å¸":{},"å·´å½¦æ·å°å¸":{},"ä¹å°å¯å¸å¸":{},"é¡æé­åç":{},"é¿æåç":{},"å´å®ç":{}},"æ±èç":{"åäº¬å¸":{},"æ é¡å¸":{},"å¾å·å¸":{},"å¸¸å·å¸":{},"èå·å¸":{},"åéå¸":{},"è¿äºæ¸¯å¸":{},"æ·®å®å¸":{},"çåå¸":{},"æ¬å·å¸":{},"éæ±å¸":{},"æ³°å·å¸":{},"å®¿è¿å¸":{}},"å®å¾½ç":{"åè¥å¸":{},"èæ¹å¸":{},"èå å¸":{},"æ·®åå¸":{},"é©¬éå±±å¸":{},"æ·®åå¸":{},"ééµå¸":{},"å®åºå¸":{},"é»å±±å¸":{},"æ»å·å¸":{},"éé³å¸":{},"å®¿å·å¸":{},"å·¢æ¹å¸":{},"å­å®å¸":{},"äº³å·å¸":{},"æ± å·å¸":{},"å®£åå¸":{}},"å±±ä¸ç":{"æµåå¸":{},"éå²å¸":{},"æ·åå¸":{},"æ£åºå¸":{},"ä¸è¥å¸":{},"æ½åå¸":{},"çå°å¸":{},"å¨æµ·å¸":{},"æµå®å¸":{},"æ³°å®å¸":{},"æ¥ç§å¸":{},"è±èå¸":{},"ä¸´æ²å¸":{},"å¾·å·å¸":{},"èåå¸":{},"æ»¨å·å¸":{},"èæ³½å¸":{}},"è¾½å®ç":{"æ²é³å¸":{},"å¤§è¿å¸":{},"éå±±å¸":{},"æé¡ºå¸":{},"æ¬æºªå¸":{},"ä¸¹ä¸å¸":{},"é¦å·å¸":{},"è¥å£å¸":{},"éæ°å¸":{},"è¾½é³å¸":{},"çé¦å¸":{},"éå²­å¸":{},"æé³å¸":{},"è«è¦å²å¸":{}},"åæç":{"é¿æ¥å¸":{},"åæå¸":{},"åå¹³å¸":{},"è¾½æºå¸":{},"éåå¸":{},"ç½å±±å¸":{},"æ¾åå¸":{},"ç½åå¸":{},"å»¶è¾¹å·":{}},"é»é¾æ±ç":{"åå°æ»¨å¸":{},"é½é½åå°å¸":{},"é¸¡è¥¿å¸":{},"é¹¤å²å¸":{},"åé¸­å±±å¸":{},"å¤§åºå¸":{},"ä¼æ¥å¸":{},"ç¡ä¸¹æ±å¸":{},"ä½³æ¨æ¯å¸":{},"ä¸å°æ²³å¸":{},"é»æ²³å¸":{},"ç»¥åå¸":{},"å¤§å´å®å²­":{}},"æµæ±ç":{"æ­å·å¸":{},"å®æ³¢å¸":{},"æ¸©å·å¸":{},"åå´å¸":{},"æ¹å·å¸":{},"ç»å´å¸":{},"éåå¸":{},"è¡¢å·å¸":{},"èå±±å¸":{},"å°å·å¸":{},"ä¸½æ°´å¸":{}},"æ±è¥¿ç":{"åæå¸":{},"æ¯å¾·éå¸":{},"èä¹¡å¸":{},"ä¹æ±å¸":{},"æ°ä½å¸":{},"é¹°æ½­å¸":{},"èµ£å·å¸":{},"åå®å¸":{},"å®æ¥å¸":{},"æå·å¸":{},"ä¸é¥¶å¸":{}},"ç¦å»ºç":{"ç¦å·å¸":{},"å¦é¨å¸":{},"èç°å¸":{},"ä¸æå¸":{},"æ³å·å¸":{},"æ¼³å·å¸":{},"åå¹³å¸":{},"é¾å²©å¸":{},"å®å¾·å¸":{}},"æ¹åç":{"æ­¦æ±å¸":{},"é»ç³å¸":{},"è¥æ¨å¸":{},"åå °å¸":{},"èå·å¸":{},"å®æå¸":{},"èé¨å¸":{},"éå·å¸":{},"å­æå¸":{},"é»åå¸":{},"å¸å®å¸":{},"éå·å¸":{},"æ©æ½å·":{},"ä»æ¡å¸":{},"å¤©é¨å¸":{},"æ½æ±å¸":{}},"æ¹åç":{"é¿æ²å¸":{},"æ ªæ´²å¸":{},"æ¹æ½­å¸":{},"è¡¡é³å¸":{},"éµé³å¸":{},"å²³é³å¸":{},"å¸¸å¾·å¸":{},"å¼ å®¶çå¸":{},"çé³å¸":{},"é´å·å¸":{},"æ°¸å·å¸":{},"æåå¸":{},"å¨åºå¸":{},"æ¹è¥¿å·":{}},"æ²³åç":{"éå·å¸":{},"å¼å°å¸":{},"æ´é³å¸":{},"å¹³é¡¶å±±å¸":{},"ç¦ä½å¸":{},"é¹¤å£å¸":{},"æ°ä¹¡å¸":{},"å®é³å¸":{},"æ¿®é³å¸":{},"è®¸æå¸":{},"æ¼¯æ²³å¸":{},"ä¸é¨å³¡å¸":{},"åé³å¸":{},"åä¸å¸":{},"ä¿¡é³å¸":{},"å¨å£å¸":{},"é©»é©¬åºå¸":{},"æµæºå¸":{}},"å¹¿ä¸ç":{"å¹¿å·å¸":{},"æ·±å³å¸":{},"ç æµ·å¸":{},"æ±å¤´å¸":{},"é¶å³å¸":{},"æ²³æºå¸":{},"æ¢å·å¸":{},"æ å·å¸":{},"æ±å°¾å¸":{},"ä¸èå¸":{},"ä¸­å±±å¸":{},"æ±é¨å¸":{},"ä½å±±å¸":{},"é³æ±å¸":{},"æ¹æ±å¸":{},"èåå¸":{},"èåºå¸":{},"æ¸è¿å¸":{},"æ½®å·å¸":{},"æ­é³å¸":{},"äºæµ®å¸":{}},"å¹¿è¥¿":{"åå®å¸":{},"æ³å·å¸":{},"æ¡æå¸":{},"æ¢§å·å¸":{},"åæµ·å¸":{},"é²åæ¸¯å¸":{},"é¦å·å¸":{},"è´µæ¸¯å¸":{},"çæå¸":{},"ç¾è²å¸":{},"è´ºå·å¸":{},"æ²³æ± å¸":{},"æ¥å®¾å¸":{},"å´å·¦å¸":{}},"æµ·åç":{"æµ·å£å¸":{},"ä¸äºå¸":{},"äºæå±±å¸":{},"ç¼æµ·å¸":{},"åå·å¸":{},"ææå¸":{},"ä¸å®å¸":{},"ä¸æ¹å¸":{},"æ¾è¿å¿":{},"å®å®å¿":{},"å±¯æå¿":{},"ä¸´é«å¿":{},"ç½æ²é»æèªæ²»å¿":{}},"åå·ç":{"æé½å¸":{},"èªè´¡å¸":{},"ææè±å¸":{},"æ³¸å·å¸":{},"å¾·é³å¸":{},"ç»µé³å¸":{},"å¹¿åå¸":{},"éå®å¸":{},"åæ±å¸":{},"ä¹å±±å¸":{},"ååå¸":{},"å®å®¾å¸":{},"å¹¿å®å¸":{},"è¾¾å·å¸":{},"çå±±å¸":{},"éå®å¸":{},"å·´ä¸­å¸":{},"èµé³å¸":{},"é¿åå·":{},"çå­å·":{},"åå±±å·":{}},"è´µå·ç":{"è´µé³å¸":{},"å­çæ°´å¸":{},"éµä¹å¸":{},"å®é¡ºå¸":{},"éä»":{},"æ¯è":{},"é»è¥¿åå·":{},"é»ä¸åå·":{},"é»åå·":{}},"äºåç":{"ææå¸":{},"æ²éå¸":{},"çæºªå¸":{},"ä¿å±±å¸":{},"æ­éå¸":{},"ä¸½æ±å¸":{},"æèå¸":{},"ä¸´æ²§å¸":{},"æå±±å·":{},"çº¢æ²³å·":{},"è¥¿åççº³å·":{},"æ¥éå·":{},"å¤§çå·":{},"å¾·å®å·":{},"ææ±å·":{},"è¿ªåºå·":{}},"è¥¿è":{"æè¨å¸":{},"é£æ²":{},"æé½":{},"å±±å":{},"æ¥åå":{},"é¿é":{},"æè":{}},"éè¥¿ç":{"è¥¿å®å¸":{},"éå·å¸":{},"å®é¸¡å¸":{},"å¸é³å¸":{},"æ¸­åå¸":{},"å»¶å®å¸":{},"æ±ä¸­å¸":{},"æ¦æå¸":{},"å®åº·å¸":{},"åæ´å¸":{}},"çèç":{"å°å·å¸":{},"éæå¸":{},"ç½é¶å¸":{},"å¤©æ°´å¸":{},"åå³ªå³å¸":{},"æ­¦å¨å¸":{},"å¼ æå¸":{},"å¹³åå¸":{},"éæ³å¸":{},"åºé³å¸":{},"å®è¥¿å¸":{},"éåå¸":{},"ä¸´å¤å·":{},"çåå·":{}},"å®å¤":{"é¶å·å¸":{},"ç³å´å±±å¸":{},"å´å¿ å¸":{},"åºåå¸":{},"ä¸­å«å¸":{}},"éæµ·ç":{"è¥¿å®å¸":{},"æµ·ä¸":{},"æµ·åå·":{},"é»åå·":{},"æµ·åå·":{},"ææ´å·":{},"çæ å·":{},"æµ·è¥¿å·":{}},"æ°ç":{"ä¹é²æ¨é½å¸":{},"åæçä¾å¸":{},"åé²çª":{},"åå¯":{},"åç°":{},"é¿åè":{},"åä»":{},"åå­åèæ¯å·":{},"å·´é³é­æ¥å·":{},"æåå·":{},"åå°å¡æå·":{},"ä¼çå·":{},"å¡å":{},"é¿åæ³°":{},"ç³æ²³å­å¸":{},"é¿æå°å¸":{}},"é¦æ¸¯":{"é¦æ¸¯":{}},"æ¾³é¨":{"æ¾³é¨":{}},"å°æ¹¾ç":{"å°å":{},"é«é":{},"å°ä¸­":{},"è±è²":{},"åºé":{},"åä¹":{},"éé¨":{},"è¿æ±":{},"èæ ":{},"åæ":{},"æ¾æ¹":{},"å±ä¸":{},"å°ä¸":{},"å°å":{},"æ¡å­":{},"æ°ç«¹":{},"å®å°":{},"äºæ":{},"å½°å":{}}},t.exports=r},{}],29:[function(e,t,n){var r=e("./switch"),o=e("./stock");t.exports=function(){r(),o()}},{"./stock":39,"./switch":41}],30:[function(e,t,n){var s,_,l,c;e=e("../lib/jsonp"),s=$("#match-info"),_=serverTime.getMonth()+1,l=serverTime.getDate(),c=serverTime.getHours(),e("//matchweb.sports.qq.com/matchUnion/cateColumns?from=pc",function(e,t){if(t&&t.data){for(var n=t.data,r=0,o=0;o<n.length;o++)for(var i=n[o].columns,a=0;a<i.length;a++)r+=parseInt(i[a].matchNum,10);s.find(".match-time").html(_+"æ"+l+"æ¥"),s.find(".match-txt").html(function(){for(var e=[10,12,14,18,24],t=["æ©ä¸å¥½","ä¸åå¥½","ä¸­åå¥½","ä¸åå¥½","æä¸å¥½"],n=0;n<e.length;n++)if(c<e[n])return t[n]}()+"ï¼ä»å¤©æ"+r+"åºç­é¨æ¯èµ")}})},{"../lib/jsonp":48}],31:[function(e,t,n){function o(e){if("number"==typeof e)return e<1e4?e:(e/1e4).toFixed(1)+"ä¸"}var r,i={get:function(e){e=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!==e?unescape(e[2]):null},clear:function(e,t,n){this.get(e)&&(document.cookie=e+"="+(t?"; path="+t:"; path=/")+(n?"; domain="+n:"")+";expires=Fri, 02-Jan-1970 00:00:00 GMT")}};function a(){return r.apply(this,arguments)}window.loginTypeName="QQ",window.login={isLogin:function(e){var t,n=i.get("open_access_token")||i.get("access_token"),r=i.get("open_appid")||i.get("appid"),o=i.get("open_openid")||i.get("openid");return i.get("access_token")&&i.get("appid")&&i.get("openid")&&(loginTypeName="wx"),(t=!!n&&!!r&&!!o)&&e&&e({accessToken:n,appid:r,openid:o}),t},getLoginUrl:function(e){return["https://shizi.qq.com/api/v1/user/login_qq_news_web?","type="+e+"&sourceUrl="].join("")},close:function(){$(".login_win_type .close").on("click",function(){$(".wapper").remove()})},getInfo:function(n){login.isLogin(function(t){$.ajax({url:"https://i.news.qq.com/i/getUserHomepageInfo?from_scene=103",method:"get",scriptCharset:"utf-8",xhrFields:{withCredentials:!0},crossDomain:!0}).done(function(e){n(e,t)}).fail(function(e){n("LoginError: get userInfo ajax fail.",e)})})},login:(r=function(){var e=['<div class="wapper"><div class="login_win_type">','<div class="tab"><span>ç»å½è¾è®¯ç½ï¼è·åæ´å¤ç²¾å½©åå®¹<span></div>','<span class="close"></span>','<div class="middle"><div class="page1"><p class="title">QQåå¾®ä¿¡æ¯ä¸¤ä¸ªç¬ç«å¸å·ï¼å¸å·ä¿¡æ¯ä¸äºé</p>','<p class="login_button QQ" logintype="3"><img src="//inews.gtimg.com/newsapp_bt/0/1205175056740_2789/0"><span>QQç»å½</span></p>','<p class="login_button weixin" logintype="4"><img src="//inews.gtimg.com/newsapp_bt/0/1205175113251_9213/0"><span>å¾®ä¿¡ç»å½</span></p>','</div><div class="page2"></div></div>','<div class="bottom"><p class="tick"><span class="sel"></span>ç»å½å³åæ <a href="https://new.qq.com/sv1/app/agreement_android.html" target="_blank">è¾è®¯æ°é»è½¯ä»¶è®¸å¯åè®®</a> å <a href="https://privacy.qq.com/document/priview/4bd0bd84be654afe8c1a545ea9b64ec8" target="_blank">éç§æ¡æ¬¾</a></p><p class="toast-tip-text">è¯·éè¯»å¹¶å¾éä¸æ¹çåè®®<span class="arrow-icon"></span></p><div>',"</div></div>"].join(""),r=($("body").append(e),!1);$(".login_button").each(function(e,n){$(n).on("click",function(){var e,t;r?(t=$(n).attr("logintype"),e=3===Number(t)?"qq":"wx",t=login.getLoginUrl(Number(t)),$(".login_win_type .page1").hide(),$(".login_win_type .page2").show().append('<iframe class="'+e+'" src="'+t+'" frameborder="0"></iframe>'),$(".login_win_type .bottom").hide()):$(".toast-tip-text").show()})}),$(".login_win_type .bottom .sel").on("click",function(){var e=$(".login_win_type .bottom .sel");r=e.hasClass("check")?(e.removeClass("check"),$(".login_button").css({cursor:"default"}),!1):(e.addClass("check"),$(".errorLogin").hide(),$(".toast-tip-text").hide(),$(".login_button").css({cursor:"pointer"}),!0)}),login.close()},a.toString=function(){return r.toString()},a),loginOut:function(){i.clear("open_access_token","/","qq.com"),i.clear("open_openid","/","qq.com"),i.clear("open_appid","/","qq.com"),i.clear("access_token","/","qq.com"),i.clear("openid","/","qq.com"),i.clear("appid","/","qq.com");var e=$("#top-login");e.find(".item").removeClass("item-hover"),e.find(".item-login .nick").html(""),e.find(".item-login .l-login").removeClass("islogin").attr("href","javascript:;").html("ç»å½"),$(".agreementlogin").addClass("agreementWrap"),$(".loginMod").removeClass("islogin"),window.registerCoralEvent&&window.registerCoralEvent.publicLogout()},init:function(){login.isLogin()&&login.getInfo(function(e){var t,n,r;e&&4e4===Number(e.ret)&&(login.login(),$(".login_win_type").append('<p class="errorLogin">è¯¥è´¦å·å·²è¢«å°ç¦ï¼è¯·æ´æ¢è´¦å·éæ°ç»å½</p>')),e&&0===Number(e.ret)&&($(".loginMod").addClass("islogin"),r=$("#top-login"),n=(t=e.userinfo).head_url&&0!==t.head_url.length?t.head_url.replace("http:",""):"//puui.qpic.cn/vupload/0/common_avatar.png/0",e=0<parseInt(e.vip,10)?'<span class="userVip"><img src="//mat1.gtimg.com/news/dc/images/Member.png" alt="å¤´å" /></span>':"",r.find(".item").addClass("item-hover"),r.find(".item-login .nick").html("ä½ å¥½ï¼"+t.nick),r.find(".item-login .l-login").addClass("islogin").attr("href","http://ilike.qq.com/").html("<img class='Face' src='"+n+"' id='userPic_s' alt='"+t.nick+"' /> "+e),$(".agreementlogin").removeClass("agreementWrap"),r=['<div class="islogin"><p class="userinfo"><img src="'+n+'" alt="å¤´å">'+t.nick+"</p>",'<div class="user_config">',"<span>ç²ä¸<b>"+o(t.fansnum)+"</b></span><i></i>","<span>å³æ³¨<b>"+o(t.follownum)+"</b></span><i></i>","<span>è·èµ<b>"+o(t.upnum)+"</b></span>","</div></div>"].join(""),$(".userInfo").html(r),window.QQUserInfo={nick:t.nick,userid:"QQ"===loginTypeName?i.get("open_appid"):i.get("appid"),head:n,logintype:"QQ"===loginTypeName?"qq_connect":"wx",access_token:"QQ"===loginTypeName?i.get("open_access_token"):i.get("access_token"),appid:"QQ"===loginTypeName?i.get("open_appid"):i.get("appid"),openid:"QQ"===loginTypeName?i.get("open_openid"):i.get("openid")})})}},login.init(),$("#login, .login-btn, .l-login").on("click",function(){login.isLogin()||login.login()})},{}],32:[function(e,t,n){var r,o;r="",(o=$(".nav-mod .nav-more")).hover(function(){o.addClass("active"),clearTimeout(r)},function(){r=setTimeout(function(){o.removeClass("active")},100)})},{}],33:[function(e,t,n){var o;e("./utils");function i(e,t){e.css({"text-indent":0}),e.find(".lunbo:eq("+t+")").fadeIn()}o="undefined"!=typeof localStorage,$(".yw-list li").each(function(e,n){$(n).children(".lunbo").each(function(e,t){if($(t).data("a")||!1)return $(n).addClass("newsCar"),!1})}),e=$(".newsCar"),$(".yw-list li:not(.newsCar)").children("a").show(),e.each(function(e,t){var n,r=$(t).children(".lunbo").length;o&&1<r&&((n=Number(localStorage.getItem("index-showtopnews-"+e)||0))<r?(i($(t),n),n+=1,localStorage.setItem("index-showtopnews-"+e,n)):(i($(t),0),localStorage.setItem("index-showtopnews-"+e,1)))})},{"./utils":42}],34:[function(e,t,n){function r(e,t){var t=$(t),n=t.attr("bosszone"),r=t.attr("bossexpo");n&&t.attr("bosszone",n+o),r&&t.attr("bossexpo",r+o)}var o,i,a,s,_;o="",i=$(".channel-num6 .bdwrap .bd"),a=$(".channel-num6 .col-1"),s=$(".channel-num6 .col-1>div[bosszone]"),_=$("#mod-recommend .bd ul"),i.each(r),a.each(r),s.each(r),_.each(r)},{}],35:[function(e,t,n){function r(){i.removeClass("prod-more-open")}var o,i;o=$("#m-product"),(i=$("#prod-more")).find(".prod-more-btn").on("click",function(){i.hasClass("prod-more-open")?r():i.addClass("prod-more-open")}),o.on("mouseleave",function(){i.hasClass("prod-more-open")&&r()})},{}],36:[function(e,t,n){t.exports=function(){function t(e){""!==e&&(window.reporter.reportEvent({pgid:"pg_index",eventName:"click",businessParams:{query:encodeURIComponent(e),dt_element_path:["em_search"]}}),window.open("//www.qq.com/search.htm?query="+encodeURIComponent(e)+"&page=0","_blank"))}$("#sougouTxt").bind("keypress",function(e){13===e.keyCode&&t($("#sougouTxt").val())}),$("#sougouTxt").attr("autocomplete","off"),$("#searchBtn").on("click",function(){t($("#sougouTxt").val())});$('input[type="text"]').on("input",function(){var e=$("#sougouTxt").val();$("#searchBtn").attr("dt-params","query="+encodeURIComponent(e)+"&dt_element_path=['em_search']")})}},{}],37:[function(e,t,n){$(function(){var e=void 0,t=void 0,n=void 0,r="",o="",i=serverTime.getTime();function a(e){if(e)return new Date(e.replace("T"," ").replace(/-/g,"/")).getTime()}window.apub_5bee24e6&&(e=window.apub_5bee24e6,t=e.smallskin,n=e.bigskin),window.apub_5d09e4c5&&(e=window.apub_5d09e4c5).skins&&0<e.skins.length&&e.skins.forEach(function(e){i>a(e.starttime)&&i<a(e.endtime)&&("å°ç®è¤"===e.type&&(t=e),"å¤§ç®è¤"===e.type)&&(n=e)}),t&&i>a(t.starttime)&&i<a(t.endtime)&&(r=(o='<style type="text/css">.qq-top .skin-min{width: 400px;}.qq-top .skin-min img{width: 100%;}.top-search {margin-left: 0;}@media screen and (max-width: 1279px) {.top-search input{width: 160px;}.qq-top .skin-min {width: 350px;height: 70px;}}</style>')+'<a href="'+t.url+'" target="_blank"><img src="'+t.img.replace("http:","")+'" title="'+t.title+'" ></a>',$("#small-skin").html(r)),n&&i>a(n.starttime)&&i<a(n.endtime)&&(o="<style>.qq-body-skin{background: url("+n.img.replace("http:","")+") no-repeat top center;}</style>",n.imgLogo&&(n.imgLogo=n.imgLogo.replace("http:","")),r=[o,n.url?'<a class="skin-link" target="_blank" title="'+n.title+'" href="'+n.url+'">'+(n.imgLogo?"<img src="+n.imgLogo+">":"")+"</a>":'<div class="skin-link">'+(n.imgLogo?"<img src="+n.imgLogo+">":"")+"</div>",'<a class="skin-close" id="skin-close" href="javascript:;"><img src="//mat1.gtimg.com/www/qq2018/imgs/skin/close-btn.png" alt="å³é­"></a>'].join(""),$("#big-skin").html(r),$("body").addClass("qq-body-skin"),$("#skin-close").on("click",function(){$("body").removeClass("qq-body-skin")}),n.bgcolor)&&""!==n.bgcolor&&$(".qq-body-skin").css("background-color",n.bgcolor),window.apub_5e857945&&window.apub_5e857945.skin&&apub_5e857945.skin.forEach(function(e){var t,n;"è¾è®¯ç½é¦é¡µ"==e.title&&(n=e.starttime,e=e.endtime,t=(new Date).getTime(),n)&&e&&t>new Date(n+"+08:00").getTime()&&t<new Date(e+"+08:00").getTime()&&($("body").addClass("garyBody"),$("head").append("<style>*{filter:gray; color:gray;}</style>"),-1===(n=navigator.userAgent.toLowerCase()).indexOf("msie 10.0")&&-1===n.indexOf("rv:11.0")||(document.getElementsByTagName("body")[0].className="iebrowser",$(".qq-videos").hide(),$(".top-logo a").html('<img width="100%" src="//mat1.gtimg.com/rain/apub2019/ad93535f743a.qq_logo_2x.png" alt="è¾è®¯ç½">'),setTimeout(function(){$("#NEW_QQCOM_N_Width1").html('<a href="//news.qq.com/mobile/index.htm" target="_blank" style="display:block;cursor:pointer;width:920px;height:75px;background-image:url(//mat1.gtimg.com/rain/apub2019/c251b7ddd4c9.920x75_www.png);background-size:920px 75px;background-position:50% 50%;"></a>'),$("#NEW_QQCOM_N_Width2").html('<a href="//news.qq.com/mobile/index.htm" target="_blank" style="display:block;cursor:pointer;width:920px;height:90px;background-image:url(//mat1.gtimg.com/rain/apub2019/7a3a1f781a08.1400x90_www.png);background-size:920px 90px;background-position:50% 50%;"></a>'),$("#NEW_QQCOM_N_Width3").html('<a href="//news.qq.com/mobile/index.htm" target="_blank" style="display:block;cursor:pointer;width:920px;height:90px;background-image:url(//mat1.gtimg.com/rain/apub2019/7a3a1f781a08.1400x90_www.png);background-size:920px 90px;background-position:50% 50%;"></a>'),$("#NEW_QQCOM_N_button2").html('<a href="http://users.qq.com" target="_blank" style="display:block;cursor:pointer;width:440px;height:90px;background-image:url(//mat1.gtimg.com/rain/apub2019/2c244e5c0f20.440x90_0.png);background-size:440px 90px;background-position:50% 50%;"></a>'),$("#NEW_QQCOM_N_button1").html('<a href="http://time.qq.com/?pgv_ref=ad" target="_blank" style="display:block;cursor:pointer;width:440px;height:90px;background-image:url(//mat1.gtimg.com/rain/apub2019/254d12b2bd7a.440x90_2.png);background-size:440px 90px;background-position:50% 50%;"></a>'),$("#NEW_QQCOM_N_Width4").html('<a href="https://news.qq.com/mobile/index.htm" target="_blank" style="display:block;cursor:pointer;width:1400px;height:90px;background-image:url(//mat1.gtimg.com/rain/apub2019/7a3a1f781a08.1400x90_www.png);background-size:1400px 90px;background-position:50% 50%;"></a>')},500)))})})},{}],38:[function(e,t,n){var l=2,s="",r=e("./config"),a={type:"sports",url:"//mat1.gtimg.com/apps/hpage2/hotmatchlist.json?from=sporthp",callback:function(e){var t=e.list,n={},r=a.live,o=a.playback;a.type=1;for(var i=0;i<t.length;i++)"100000"!==(n=t[i]).mid.split(":")[0]&&(n.playTime=n.startTime.split(" ")[1].substr(0,5),n.playDate=n.startTime.substr(5,5),2===n.matchPeriod?(o.push(n),o.length>l&&o.shift()):r.length>=l||(n.startTime.split(" ")[0]==s&&(n.isToday=!0),r.push(n)));d(a)},$title:$("#js_sportstitle"),$live:$("#js_sportslive"),$playback:$("#js_sportsplay"),live:[],playback:[]},_={type:"nba",url:"//mat1.gtimg.com/apps/hpage2/web_recent_5_day_match.json",callback:function(e){var n,r,o,i,a;n=e,r=0,o={},i=_.live,a=_.playback,n=e.data,_.type=2,Object.keys(n).forEach(function(e,t){for(r=0;r<n[e].length;r++)(o=n[e][r]).playTime=o.startTime.split(" ")[1].substr(0,5),o.playDate=o.startTime.substr(5,5),o.detailUrl="http://kbs.sports.qq.com/kbsweb/game.htm?mid="+o.mid,"2"===o.matchPeriod?(a.push(o),a.length>l&&a.shift()):i.length>=l||(o.startTime.split(" ")[0]===s&&(o.isToday=!0),i.push(o))}),d(_)},$title:$("#js_nbatitle"),$live:$("#js_nbalive"),$playback:$("#js_nbaplay"),live:[],playback:[]};function c(e){for(var t=""+(t=e),n=[],r=0;r<t.length;r++)n.push(['<i class="icon-num-',t[r],'"></i>'].join(""));return n.join("")}function o(){function e(e){return e=(e=parseInt(e,10))<10&&0<e?"0"+e:e}return[r.nowTimeYear,"-",e(r.nowTimeMonth),"-",e(r.nowTimeDay)].join("")}function u(e,t){return 0<e?t.join(""):'<li class="nullRace">ææ æ¯èµ</li>'}function d(e){for(var t=0,n=[],r=[],o={},i=e.live,a=e.playback,t=0;t<i.length;t++)o=i[t],n.push(['<li><a href="',o.detailUrl,'" target="_blank">','<span class="name over">',o.matchDesc,"</span>",'<span class="date over">',o.isToday?"ä»å¤©":o.playDate,"</span>",1===parseInt(o.matchPeriod,10)?'<span class="icon-live over">ç´æ­</span>':'<span class="time over">'+o.playTime+"</span>",(o.rightName?['<span class="team over left">',o.leftName,"</span>",'<span class="icon-vs over">vs</span>','<span class="team over right">',o.rightName,"</span>"]:['<span class="team over one">',o.leftName||o.title,"</span>"]).join(""),"</a></li>"].join(""));for(t=0;t<a.length;t++)o=a[t],r.push(['<li><a href="',o.detailUrl,'" target="_blank">','<span class="name over">',o.matchDesc,"</span>",'<span class="date over">',o.isToday?"ä»å¤©":o.playDate,"</span>",(o.rightName?['<span class="team over left">',o.leftName,"</span>",'<span class="goal over">',c(o.leftGoal),' <i class="icon-num--"></i> ',c(o.rightGoal),"</span>",'<span class="team over right">',o.rightName,"</span>"]:['<span class="team over oneback">',o.leftName,"</span>"]).join(""),"</a></li>"].join(""));switch(e.type){case 1:$("#js_sportslive").html(u(n.length,n)),$("#js_sportsplay").html(u(r.length,r));break;case 2:$("#js_nbalive").html(u(r.length,r)),$("#js_nbaplay").html(u(r.length,r))}var s=e.$title,_=s.find("a");i.length<l&&($(_[1]).addClass("active"),e.$live.addClass("undis"),e.$playback.removeClass("undis"),$(_[0]).remove(),s.addClass("hidesplit")),a.length<l&&($(_[1]).remove(),s.addClass("hidesplit"))}function i(e){$.ajax({url:e.url,type:"get",dataType:"jsonp"})}window.getCastData=function(e){(e&&0==e.code?_:a).callback(e)},t.exports=function(){s=o(),i(a),i(_)}},{"./config":28}],39:[function(e,t,n){e("../lib/md5");var o="//sqt.gtimg.cn/qt/",_=[{key:"sh000001",selector:"js_stocksh"},{key:"hkHSI",selector:"js_stockhs"},{key:"usDJI",selector:"js_stockdqs"},{key:"sh000847",selector:"js_stockten"}];function r(e){$.ajax({url:e,type:"get",dataType:"script",success:function(e){for(var t=0;t<_.length;t++){var n=_[t],r=window["v_s_"+n.key].split("~"),o=(s=a=i=o=void 0,n),i=r,a="",s=!1;i[3]=parseFloat(i[3],10).toFixed(2),i[4]=parseFloat(i[4],10).toFixed(2),i[5]=parseFloat(i[5],10).toFixed(2),i[4]<0&&(s=!0),a=['<span class="price">',i[3],"</span>",'<span class="float">',s?"":"+",i[4],"</span>",'<span class="percent">',s?"":"+",i[5],"%</span>"].join(""),i=$("#"+o.selector),s&&i.addClass("detail-down"),i.html(a)}}})}t.exports=function(){r(function(){for(var e,t="",n=["app=tengxuncaijing&q="],r=0;r<_.length;r++)e=_[r],n.push("s_"+e.key),r<_.length-1&&n.push(",");return n=n.join(""),t=$.md5(n),[o,n,"&sign=",t].join("")}())}},{"../lib/md5":50}],40:[function(e,t,n){var r=function(e){return'<div style="'+e+'">\t\t\t<div class="shell-content">\t\t\t\t<div class="shell-i cf" >\t\t\t\t\t<div class="shell-img grey" ></div>\t\t\t\t\t<p class="shell-text grey" ></p>\t\t\t\t\t<p class="shell-text grey" ></p>\t\t\t\t</div>\t\t\t\t<div class="shell-text grey" ></div>\t\t\t\t<div class="shell-text grey" ></div>\t\t\t\t<div class="shell-text grey" ></div>\t\t\t\t<div class="shell-text grey" ></div>\t\t\t\t<div class="shell-text grey" ></div>\t\t\t</div>\t\t<div>'},o=function(e){return'<div style="'+e+'" class="fl"><div class="shell-content">\t\t\t<div class="shell-i cf" >\t\t\t\t<div class="shell-img grey" ></div>\t\t\t\t\t<p class="shell-text grey" ></p>\t\t\t\t\t<p class="shell-text grey" ></p>\t\t\t\t</div>\t\t\t\t<div class="shell-text grey" ></div>\t\t\t\t<div class="shell-text grey" ></div>\t\t\t\t<div class="shell-text grey" ></div>\t\t\t\t<div class="shell-text grey" ></div>\t\t\t\t<div class="shell-text grey" ></div>\t\t\t</div>\t\t</div>\t\t<div style="'+e+'" class="fr">\t\t\t<div class="shell-content">\t\t\t\t<div class="shell-i cf" >\t\t\t\t\t<div class="shell-img grey" ></div>\t\t\t\t\t<p class="shell-text grey" ></p>\t\t\t\t\t<p class="shell-text grey" ></p>\t\t\t\t</div>\t\t\t\t<div class="shell-text grey" ></div>\t\t\t\t<div class="shell-text grey" ></div>\t\t\t\t<div class="shell-text grey" ></div>\t\t\t\t<div class="shell-text grey" ></div>\t\t\t\t<div class="shell-text grey" ></div>\t\t\t</div>\t\t<div>'},i=function(e){return'<div style="'+e+'"><div class="shell-content">\t\t<div class="shell-i cf" >\t\t\t<div class="shell-img grey" ></div>\t\t\t\t<p class="shell-text grey" ></p>\t\t\t\t<p class="shell-text grey" ></p>\t\t\t</div>\t\t\t<div class="shell-text grey" ></div>\t\t\t<div class="shell-text grey" ></div>\t\t\t<div class="shell-text grey" ></div>\t\t\t<div class="shell-text grey" ></div>\t\t\t<div class="shell-text grey" ></div>\t\t</div>\t</div>\t<div style="'+e+'">\t\t<div class="shell-content">\t\t\t<div class="shell-i cf" >\t\t\t\t<div class="shell-img grey" ></div>\t\t\t\t<p class="shell-text grey" ></p>\t\t\t\t<p class="shell-text grey" ></p>\t\t\t</div>\t\t\t<div class="shell-text grey" ></div>\t\t\t<div class="shell-text grey" ></div>\t\t\t<div class="shell-text grey" ></div>\t\t\t<div class="shell-text grey" ></div>\t\t\t<div class="shell-text grey" ></div>\t\t</div>\t</div>'};function a(e,t){$(e).html(t)}a(".structure-imgs",function(e){return'<div style="'+e+'"><div class="shell-title grey"></div>\t\t\t<div class="shell-content">\t\t\t\t<div class="shell-i" >\t\t\t\t\t<div class="shell-img grey" ></div>\t\t\t\t\t<div class="shell-text grey" ></div>\t\t\t\t</div>\t\t\t\t<div class="shell-i" >\t\t\t\t\t<div class="shell-img grey" ></div>\t\t\t\t\t<div class="shell-text grey" ></div>\t\t\t\t</div>\t\t\t\t<div class="shell-i" >\t\t\t\t\t<div class="shell-img grey" ></div>\t\t\t\t\t<div class="shell-text grey" ></div>\t\t\t\t</div>\t\t\t\t<div class="shell-i" >\t\t\t\t\t<div class="shell-img grey" ></div>\t\t\t\t\t<div class="shell-text grey" ></div>\t\t\t\t</div>\t\t\t\t<div class="shell-i" >\t\t\t\t\t<div class="shell-img grey" ></div>\t\t\t\t\t<div class="shell-text grey" ></div>\t\t\t\t</div>\t\t\t\t<div class="shell-i" >\t\t\t\t\t<div class="shell-img grey" ></div>\t\t\t\t\t<div class="shell-text grey" ></div>\t\t\t\t</div>\t\t\t</div>\t\t<div>'}("height:210px")),a(".structure-text",r("height:260px")),a(".structure-text-horizontally",o("width:49%;height:260px")),a(".structure-text-vertically",i("height:280px"))},{}],41:[function(e,t,n){var c=e("./utils").lazyload;t.exports=function(){for(var e={classAdd:"active",eventType:"hover",onSwitch:function(e){}},t=[{selector:"#js_sportstitle a"},{selector:"#js_nbatitle a"},{selector:"#js_title1 a"},{selector:"#js_title2 a"},{selector:"#js_title3 a"},{selector:"#js_histitle a"}],n=0;n<t.length;n++)$(t[n].selector).powerSwitch(e);for(var r,o=[{selector:"#picDir2 a",params:{classAdd:"disabled",animation:"translate",onSwitch:function(e){c(e)}}},{selector:"#picDir a",params:{classAdd:"disabled",animation:"translate",onSwitch:function(e){c(e)}}}],i=0;i<o.length;i++)r=o[i],$(r.selector).powerSwitch(r.params);for(var a,s={classAdd:"active",animation:"translate",onSwitch:function(e){}},_=[{selector:"#js_enthyh li"},{selector:"#js_sportshyh li"},{selector:"#js_nbahyh li"},{selector:"#js_stockhyh li"},{selector:"#js_techhyh li"},{selector:"#js_autohyh li"}],l=0;l<_.length;l++)$(_[l].selector).powerSwitch(s);$(".js_chyh").on("mouseenter",function(){$(this);$(this).find(".js_hyh").show()}),$(".js_chyh").on("mouseleave",function(){$(this);$(this).find(".js_hyh").hide()}),$(".js_hyh").on("click",function(){var e=$(this),t=e.find(".hpoint").length,n=e.find(".active").index();$(e.find(".hpoint")[(n+1)%t]).trigger("click")}),$("#js_refresh").on("click",function(){location.reload(!0)}),$("#js_gotop").on("click",function(){return window.scrollTo(0,0),!1}),a=$("#elevator"),$(window).scroll(function(){400<document.documentElement.scrollTop+document.body.scrollTop?a.show():a.hide()}),$("img[data-original]").lazyload()}},{"./utils":42}],42:[function(e,t,n){window.QQ={};try{QQ.Cookie={set:function(e,t,n,r,o){void 0===n&&new Date((new Date).getTime()+36e5),document.cookie=e+"="+escape(t)+(Oneexpires?"; expires="+Oneexpires.toGMTString():"")+(r?"; path="+r:"; path=/")+(o?";domain="+o:"")},get:function(e){e=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!==e?unescape(e[2]):null},clear:function(e,t,n){this.get(e)&&(document.cookie=e+"="+(t?"; path="+t:"; path=/")+(n?"; domain="+n:"")+";expires=Fri, 02-Jan-1970 00:00:00 GMT")}},QQ.localData={userData:null,name:location.hostname,isLocalStorage:"undefined"!=typeof localStorage,init:function(){if(!this.userData)try{this.userData=document.createElement("INPUT"),this.userData.type="hidden",this.userData.style.display="none",this.userData.addBehavior("#default#userData"),document.body.appendChild(this.userData);var e=new Date;e.setDate(e.getDate()+365),this.userData.expires=e.toUTCString()}catch(e){return!1}return!0},set:function(e,t){this.isLocalStorage?localStorage.setItem(e,t):this.init()&&(this.userData.load(this.name),this.userData.setAttribute(e,t),this.userData.save(this.name))},get:function(e){return this.isLocalStorage?localStorage.getItem(e):this.init()?(this.userData.load(this.name),this.userData.getAttribute(e)):null},remove:function(e){this.isLocalStorage?localStorage.removeItem(e):this.init()&&(this.userData.load(this.name),this.userData.removeAttribute(e),this.userData.save(this.name))}}}catch(e){}function o(e){var t,n;if(0!=e.length)return t=$(window).scrollTop(),n=e.offset().top,t=[t,t+$(window).height()],n=[n,n+e.height()],Math.max(t[0],n[0])<Math.min(t[1],n[1])}t.exports={inView:o,once:function(e,t){var n=!1;function r(){o(e)&&!n&&(t(),document.removeEventListener?window.removeEventListener("scroll",r):document.detachEvent("scroll",r),n=!0)}document.addEventListener?window.addEventListener("scroll",r):document.attachEvent("scroll",r),r()},Cookies:QQ.Cookie,lazyload:function(e,t){if(!e.data("pic-loaded")){for(var n=void 0,r=e.find(t||"[data-src]"),o=0,i=r.length;o<i;o++)(n=$(r[o])).data("src")&&n.attr("src",n.data("src"));e.data("pic-loaded",!0)}}}},{}],43:[function(e,t,n){var a,s,_=e("./videoWin");e("../lib/drag");a=[],$("#pop-player"),s=$("#pop-player2"),$(".click-layer").each(function(e,t){$(t).on("click",function(){var e=$(this).parents(".video-box"),t=e.find(".txt").html(),n=e.find(".mod-player").data("vid"),r=e.find(".mod-player").data("url");n?_.popWindowPlay(n,t,r,s,function(){for(var e=0;e<a.length;e++)a[e]&&a[e].destroy&&a[e].destroy(),$(".mod-player").hide();a=[]}):e.find(".txt")[0].click()})}),$(".video-box").each(function(r,o){$(this).find(".icon-cate").length;var i="";$(o).on("mouseenter",function(){var e=$(o).find(".mod-player"),t=e.attr("data-vid"),n=e.attr("id");if(clearTimeout(i),s.hasClass("show"))return!1;"rmss_1"===$(o).attr("bosszone")&&$(o).find(".txt").addClass("tit-show"),e.show(),setTimeout(function(){},500),a[r]?a[r].play():/^\d+$/.test(t)?a[r]=_.createLive(n,t):""!==t&&(a[r]=_.createVideo(n,t)),a[r]&&a[r].on("windowFullscreenChange",function(e){e&&clearTimeout(i)})}),$(o).on("mouseleave",function(){"rmss_1"===$(o).attr("bosszone")&&$(o).find(".txt").removeClass("tit-show"),i=setTimeout(function(){a[r]&&a[r].destroy&&a[r].destroy(),a=[],$(o).find(".mod-player").hide()},400)})})},{"../lib/drag":47,"./videoWin":44}],44:[function(e,t,n){var E,h=e("draggabilly"),r=e("../lib/jsonp"),o=e("@tencent/super-player").H5_PLAY_EVENT,i=e("@tencent/thumbplayer-plugin-watermark").WatermarkPlugin,a=($("#pop-player"),$("#pop-player2")),s=$("#min-player"),A=0,m=0,y="",g="";function _(e){function t(){var t=e.plugins[i.pluginName];setTimeout(function(){var e;t&&t.watermarks&&0<Object.keys(t.watermarks).length&&("27"!==(e=Object.keys(t.watermarks)[0])&&"28"!==e||t.clear())},0)}e.on(o.VIDEO_REQ_INFO_END,function(){t()}),e.on(o.VIDEO_PLAYING,function(){t()}),e.on(o.VIDEO_PAUSE,function(){t()}),e.on(o.VIDEO_SETLEVEL_END,function(){t()})}function l(e,t){var n,r=0,o=0,i="";e.on("VIDEO_PLAYING",function(){o=+new Date,r=1e3*e.duration}),e.on("PLAY_SESSION_START",function(){i="vod"===t?e.replayConfig.vid:e.replayConfig.cnlid,window.reporter.reportEvent({pgid:"pg_index",eventName:"ev_video_start",businessParams:{video_vid:i,article_id:"",article_type:""}})}),e.on("PLAY_SESSION_END",function(){n=+new Date-o,window.reporter.reportEvent({pgid:"pg_index",eventName:"ev_video_end",businessParams:{video_vid:i,article_id:"",article_type:"",play_duration:n,video_length:Math.round(r)}})})}function v(e,t,n){var n=n||!1,r=($("#"+e).empty(),new SuperPlayer({container:"#"+e,ctrlConfig:{comps:["PlayBtn","Fullscreen","Progress","Volume","TimeArea"]},type:"vod",useDRM:!0,adInitConfig:{playerData:{playerChid:2020}},businessConfig:{platform:"70901"}}));return r.play({vid:t},{videoReqInfoParam:{autoplay:!0,autoPlayInMute:!0,flashWmode:"transparent",flashvar:{clientbar:0},Onetriggerplay:n,width:"100%",height:"100%"}}),$(".pic .txp_btn_definition").hide(),$(".pic .txp_btn_playrate").hide(),$(".pic .txp_icon_fullscreen").hide(),r.volume?r.volume=0:r.on("ready",function(){r.volume=0}),_(r),l(r,"vod"),r}function b(e,t){$("#"+e).empty();var n=new SuperPlayer({container:"#"+e,type:"live",useDRM:!0,adInitConfig:{playerData:{playerChid:2020}},businessConfig:{platform:"70901"}});return n.play({cnlid:t,livepid:""},{videoReqInfoParam:{autoplay:!0,autoPlayInMute:!0,flashWmode:"transparent",flashvar:{clientbar:0},width:"100%",height:"100%"}}),n.volume?n.volume=0:n.on("ready",function(){n.volume=0}),_(n),l(n,"live"),n}function T(){a.hasClass("show")&&!a.hasClass("play-min")&&(a.removeClass("show"),A=(new Date).getTime())}document.addEventListener("enterpictureinpicture",function(){a.addClass("picinpic"),a.hasClass("show")&&a.attr({"data-pop":!0}).removeClass("show")},!1),document.addEventListener("leavepictureinpicture",function(){a.removeClass("picinpic"),a.attr("data-pop")&&a.removeAttr("data-pop").addClass("show")},!1);t.exports={createVideo:v,createLive:b,popWindowPlay:function(e,t,n,r,o){m=0,E=(new Date).getTime();var i,a,s,_=$(window).scrollTop(),l=r.find(".player-hd"),c=(r.find(".player-ft"),$(window).height()),u=$(window).width(),d=r.find(".inner"),p=d.width(),f=(d.height(),r.offset().top,r.height(),$("body").height()),l=($(document).height(),r.find(".close-btn").off("click"),r.addClass("show").removeClass("play-min").css({top:_+(c-r.height())/2}),d.attr({draggable:!0}),d.find(".hd-info").css({height:9*p/16-50}),setTimeout(function(){i=d.height(),d.css({left:(u-p)/2,top:(c-i)/2}),r.css({height:i}),new h("#pop-player2 .inner",{});$(window).on("scroll",function(){_=$(window).scrollTop(),a=r.offset().top,s=a+r.height();var e=parseInt(d.css("left"),10),t=parseInt(d.css("top"),10);(s<_||_<a-c)&&!r.hasClass("picinpic")?(r.hasClass("play-min")||(r.addClass("play-min"),d.find(".hd-info").css({height:9*d.width()/16-50}),d.css({top:t+(i-d.height()),left:e+(p-d.width())}),setTimeout(function(){parseInt(d.css("top"),10)>=f&&d.css({top:f-d.height()})},0)),0):r.hasClass("play-min")&&(d.css({top:t-(i-d.height()),left:e-(p-d.width())}),r.removeClass("play-min"),d.find(".hd-info").css({height:9*d.width()/16-50}),setTimeout(function(){parseInt(d.css("top"),10)<=0&&d.css({top:0})},0))})},0),$(".global").off("click",T),setTimeout(function(){$(".global").on("click",T)},500),l.find(".tit").html('<a href="'+n+'" target="_blank">'+t+"</a>"),r.find(".player-container").attr("id"));/^\d+$/.test(e)?(y&&y.destroy(),g=b(l,e),r.find(".player-ft").css({display:"none"})):y=v(l,e,!0),r.find(".close-btn").on("click",function(){r.removeClass("show"),r.find(".player-container").html(""),g&&g.destroy(),y&&y.destroy(),A=(new Date).getTime();Math.ceil((A-E)/1e3)}),window.playerpop=y,window.Livepop=g,o&&o()},dragWindowPlay:function(e,t,n){s.addClass("show"),s.find(".min-hd .tit").html(t),v("video-min",e),s.find(".close-btn").on("click",function(){s.removeClass("show")}),n&&n()},getRelateVideo:function(e,A,g){r("//node.video.qq.com/x/vlikecgi/related_rec?vid="+e+"&rec_num=12",function(e,t){if(t&&t.data&&t.data.recItemList){for(var n=t.data.recItemList,r="",o=0,i=n.length;o<i;o++){var a=n[o],s=a.unionInfo;r+='<li class="video-item" data-vid="'+a.itemId+'" data-idx="'+o+'"><div class="pic"><img src="'+s.pic_228_128+'" alt="'+s.title+'" /><i class="q-icons icon-play"></i></div><div class="txt">'+s.title+"</div></li>"}A.find(".player-list").html(r),u=(c=A).find(".btn-left"),d=c.find(".btn-right"),p=c.find(".scroll-mod"),f=c.find(".player-list"),t=(t=c.find(".video-item")).length*t.outerWidth(!0),E=t-p.width()+10,h=Math.ceil(t/p.width())-1,c.undelegate(".video-item","click"),c.undelegate(".btn-left","click"),c.undelegate(".btn-right","click"),f.css({left:0}),d.css({display:""}),c.delegate(".video-item","click",function(){var e=$(this).data("vid"),t=$(this).data("idx"),n=$(this).find(".txt").html();y.play({vid:e}),c.find(".player-hd .tit").html('<a href="https://v.qq.com/x/page/'+e+'.html" target="_blank">'+n+"</a>"),$(this).addClass("active").siblings(".video-item").removeClass("active")}),u.hide(),c.delegate(".btn-left","click",l),c.delegate(".btn-right","click",_),window.relPagePrev=l,window.relPageNext=_,g&&g()}function _(){m+=1,u.show(),h<m?(m=0,d.hide()):m===h?(d.hide(),f.animate({left:-E+"px"})):f.animate({left:-p.width()*m+"px"})}function l(){--m<=0&&u.hide(),d.show(),f.animate({left:-p.width()*m+"px"})}var c,u,d,p,f,E,h})}}},{"../lib/jsonp":48,"@tencent/super-player":1,"@tencent/thumbplayer-plugin-watermark":14,draggabilly:18}],45:[function(e,t,n){var r,o,i,_=e("../lib/jsonp"),e=e("./config"),a=e.cityCode,s=e.newsMap,l=e.newsInfoMap,c=$("#main-news"),u=$("#weatherMore"),d=$("#tab-news-01"),p=$("#tab-news-02"),f=$("#tab-news-03"),E=$("#weatherMoreProviceSelect"),h=$("#weatherMoreCitySelect"),A=$("#ipSetProvince"),g=$("#ipSetCity"),m=$("#m-weather"),y="";function v(e){return 0===e.length?"":e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\s/g,"&nbsp;").replace(/'/g,"&#39;").replace(/'/g,"&quot;")}function b(){var t=v(localStorage.getItem("customProvince")||""),n=v(localStorage.getItem("customCity")||""),e=v(localStorage.getItem("customNewsProvince")||"");T(t,n),e&&D(e),t&&n?I(t,n):$.ajax({url:"//r.inews.qq.com/api/ip2city?otype=jsonp&callback=callback",type:"get",dataType:"jsonp",contentType:"text/javascript;charset=utf-8",success:function(e){e&&""!==e.province&&(t=e.province,n=e.city||t),t&&n||(n=t="åäº¬å¸"),T(t,n)}})}function T(e,t){$("#weatherMoreCity, #ipWeather").text(t.replace(/å¸/,"")),I(e,t),D(e),C()}function C(){$("#weatherTemperature").html("æ´æ¢åå¸").css({marginLeft:"5px"}),$("#weatherMore").addClass("weatherMoreFlipped"),$("#weatherMoreReset").hide(),$("#weatherIcon").hide()}function I(i,a){var s="//mat1.gtimg.com/pingjs/ext2020/qqindex2018/dist/img";-1!==E.text().indexOf(i)&&(g.html(a),P(i)),(i||a)&&_("//wis.qq.com/weather/common?weather_type=observe|forecast_24h|air&source=pc&province="+encodeURIComponent(i)+"&city="+encodeURIComponent(a),function(e,t){if(t&&t.data){var t=t.data,n=t.observe||"",r=t.air||"",o=t.forecast_24h||"";if("{}"===JSON.stringify(r)||"{}"===JSON.stringify(n)||"{}"===JSON.stringify(o))return C(),!1;$("#weaher-info, #weatherMoreLink, #weatherMoreAirLink, #weatherMoreFuture").attr({href:"https://tianqi.qq.com/?province="+encodeURIComponent(i)+"&city="+encodeURIComponent(a)}),$("#weatherIcon").attr({style:"background-image:url("+s+"/weather/"+n.weather_code+".svg)"}),$("#weatherMoreCity, #ipWeather").text(a.replace(/å¸/,"")),$("#weatherMoreTxt").html(n.weather),$("#weatherMoreTem, #weatherTemperature").html(n.degree+"â"),r&&($("#weatherMoreAirTxt").html(r.aqi_name),$("#weatherMoreAirPmTxt").html(r["pm2.5"])),$("#weatherMoreFuture .weatherMoreFutureCon").each(function(e,t){var t=$(t),e=e+1,n=o[e].max_degree,r=o[e].min_degree,e=o[e].day_weather_code;t.find(".weatherMoreIcon").attr({style:"background-image:url("+s+"/weather/"+e+".svg)"}),t.find(".weatherMoreMath").html(n),t.find(".weatherMoreMathLow").html(r)})}})}function P(e){var n;e&&(A.html(e),a[e])&&(n=[],Object.keys(a[e]).forEach(function(e,t){n.push("<li><a href='javascript:void(0);'>"+e+"</a></li>")}),$("#weatherMoreCitySelectUl").html(n.join("")),g.html($(n[0]).text()))}function D(e){var t,n,r;s[e]&&l[e]?(t=e.replace(/ç|å¸/g,"")+"æ°é»",n=s[e].url,r=l[e],c.find(".hd .tit-line").eq(1).show(),c.find(".hd .tit").eq(2).show().html('<a href="'+n+'" target="_blank">'+t+"</a>"),r&&window.proName!==e&&(window.proName=e,$.ajax({url:r+"?t="+(new Date).getTime(),contentType:"text/javascript;charset=utf-8"}).done(function(e){f.html(v(e))}))):(c.find(".hd .tit").eq(2).hide(),c.find(".hd .tit-line").eq(1).hide(),c.find(".hd .tit").eq(1).removeClass("active"),c.find(".hd .tit").eq(0).addClass("active"),f.hide(),p.hide(),d.show())}m.on("mouseenter",function(){clearTimeout(y),m.addClass("active")}),m.on("mouseleave",function(){y=setTimeout(function(){m.removeClass("active")},500)}),c.find(".hd .tit").each(function(e,t){var n=$(t);n.on("mouseover",function(){n.siblings().removeClass("active"),n.addClass("active"),c.find(".bd .tab-news").hide().eq(e).show()})}),$("#weatherMoreSet").on("click",function(){u.addClass("weatherMoreFlipped")}),$("#weatherMoreReset").on("click",function(){u.removeClass("weatherMoreFlipped")}),b(),o=r="",A.on("click",function(){E.show()}),E.find("li").on("click",function(){P(r=$(this).text()),E.hide()}),g.on("click",function(){h.show()}),h.delegate("li","click",function(){o=$(this).text(),g.html(o),h.hide()}),(i=$("#weatherMoreNewsCheckbox")).bind("click",function(){i.hasClass("weatherMoreNewsYes")?i.removeClass("weatherMoreNewsYes"):i.addClass("weatherMoreNewsYes")}),$("#weatherMoreSubmit").on("click",function(){u.removeClass("weatherMoreFlipped"),r=A.text(),o=g.text(),localStorage.setItem("customProvince",r),localStorage.setItem("customCity",o),I(r,o),i.hasClass("weatherMoreNewsYes")&&(D(r),localStorage.setItem("customNewsProvince",r))}),$("#weatherMoreCancel").on("click",function(){u.removeClass("weatherMoreFlipped")}),$("#weatherMoreReset").on("click",function(){localStorage.removeItem("customProvince"),localStorage.removeItem("customCity"),b()})},{"../lib/jsonp":48,"./config":28}],46:[function(e,t,n){try{document.domain="qq.com"}catch(e){}function r(){$.each($(".layout"),function(e){var n,t,r=$(window).scrollTop(),o=$(window).height(),i=$(this),a=i.find(".index-dom-html");0===a.length||i.hasClass("loading")||-300<r+o-i.offset().top&&(r=a,n=i,$(n).addClass("loading"),t=[],r.each(function(e){t.push(_($(this).attr("id")))}),Promise.all(t.map(function(e){return e.catch(function(e){return e})})).then(function(e){$.each(e,function(e,t){"404"!==t&&0!==t?((e=$(n).find(".index-dom-html").eq(e)).html(t),"1"===e.attr("loadsport")&&l()):(1!==$(n).attr("loadtimes")?$(n).removeClass("loading"):$(n).hide(),$(n).attr("loadtimes",1))}),s()}))})}e("./common/structure"),window.Promise||(window.Promise=e("bluebird"));var o=e("js-cookie"),s=(e("./common/newsNum"),e("./common/search")(),e("./common/login2022"),e("./common/nav"),e("./common/skin"),e("./common/weather"),e("./common/adfocus"),e("./common/news-expo"),e("./common/hot-match"),e("./common/product"),e("./lib/powerSwitch"),e("./lib/lazyload"),e("./common/content")),_=function(e){return new Promise(function(t,n){$.ajax({url:"/ninja/"+e+".htm",type:"GET",contentType:"text/javascript;charset=utf-8",success:function(e){t(e)},error:function(e){n(e.status)}})})},l=e("./common/sports");function i(e){return(null===(e=document.cookie.match(new RegExp("(^|)"+e+"=([^;]*)(;|$)")))?"":unescape(e[2]))||""}$(window).scroll(function(){r()}),r(),a=1,u=(c=new Date).getTime(),c=c.getTime()-60*a*60*1e3;var a,c,u=new Date((a=u,a-=u=c,c=Math.random(),u+Math.round(c*a))).getTime();window.reporter=new window.UniversalReport({beacon:"0WEB0V0Y9T4HC7F8",publicParams:{chl_id:"index",pac_uid:i("pac_uid")||"2_"+u},accountInfo:{dt_qq_h5:i("qq_access_token")?i("qq_access_token"):"",dt_qqopenid_h5:i("qq_openid"),dt_mainlogin_h5:i("qq_access_token")?"qq":""}}),i("pac_uid")||o.set("pac_uid","2_"+u),e("./common/video")},{"./common/adfocus":27,"./common/content":29,"./common/hot-match":30,"./common/login2022":31,"./common/nav":32,"./common/news-expo":33,"./common/newsNum":34,"./common/product":35,"./common/search":36,"./common/skin":37,"./common/sports":38,"./common/structure":40,"./common/video":43,"./common/weather":45,"./lib/lazyload":49,"./lib/powerSwitch":51,bluebird:16,"js-cookie":21}],47:[function(e,t,n){t.exports=function(r,o){var e=$(r),i=parseInt(e.css("right"),10)||0,a=parseInt(e.css("bottom"),10)||0,s=0,_=0,l=void 0,c=void 0;r.addEventListener("dragstart",function(e){e.dataTransfer.dropEffect="move",s=e.clientX,_=e.clientY},!1),window.addEventListener("dragover",function(e){e.preventDefault();var t=r.getBoundingClientRect(),n=window.innerWidth-t.width,t=window.innerHeight-t.height;return l=i-(e.clientX-s),c=a-(e.clientY-_),o(l=n<(l=l<0?0:l)?n:l,c=t<(c=c<0?0:c)?t:c),!1},!0),window.addEventListener("dragend",function(e){return e.preventDefault(),i=l,a=c,!1},!1)}},{}],48:[function(e,t,n){var u=0;function d(){}t.exports=function(e,t,n){"function"==typeof t&&(n=t,t={});var r=(t=t||{}).prefix||"__jp",o=t.name||r+u++,r=t.param||"callback",i=null!=t.timeout?t.timeout:6e4,a=encodeURIComponent,s=document.getElementsByTagName("script")[0]||document.head,_=void 0,l=void 0;function c(){_.parentNode&&_.parentNode.removeChild(_),window[o]=d,l&&clearTimeout(l)}return i&&(l=setTimeout(function(){c(),n&&n(new Error("Timeout"))},i)),window[o]=function(e){c(),n&&n(null,e)},e=(e+=(~e.indexOf("?")?"&":"?")+r+"="+a(o)).replace("?&","?"),(_=document.createElement("script")).src=e,t.charset&&_.setAttribute("charset",t.charset),s.parentNode.insertBefore(_,s),function(){window[o]&&c()}}},{}],49:[function(e,t,n){var i,a;i=jQuery,a=i(window),i.fn.lazyload=function(e){var r=this,t=void 0,o={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:window,data_attribute:"original",skip_invisible:!1,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};function n(){var t=0;r.each(function(){var e=i(this);if((!o.skip_invisible||e.is(":visible"))&&!i.abovethetop(this,o)&&!i.leftofbegin(this,o))if(i.belowthefold(this,o)||i.rightoffold(this,o)){if(++t>o.failure_limit)return!1}else e.trigger("appear"),t=0})}return e&&(void 0!==e.failurelimit&&(e.failure_limit=e.failurelimit,delete e.failurelimit),void 0!==e.effectspeed&&(e.effect_speed=e.effectspeed,delete e.effectspeed),i.extend(o,e)),t=void 0===o.container||o.container===window?a:i(o.container),0===o.event.indexOf("scroll")&&t.bind(o.event,n),this.each(function(){var t=this,n=i(t);t.loaded=!1,void 0!==n.attr("src")&&!1!==n.attr("src")||n.is("img")&&n.attr("src",o.placeholder),n.one("appear",function(){var e;this.loaded||(o.appear&&(e=r.length,o.appear.call(t,e,o)),i("<img />").bind("load",function(){var e=n.attr("data-"+o.data_attribute),e=(n.hide(),n.is("img")?(n.attr("src",e),n.removeAttr("data-"+o.data_attribute)):n.css("background-image","url('"+e+"')"),n[o.effect](o.effect_speed),t.loaded=!0,i.grep(r,function(e){return!e.loaded}));r=i(e),o.load&&(e=r.length,o.load.call(t,e,o))}).attr("src",n.attr("data-"+o.data_attribute)))}),0!==o.event.indexOf("scroll")&&n.bind(o.event,function(){t.loaded||n.trigger("appear")})}),a.bind("resize",function(){n()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&a.bind("pageshow",function(e){e.originalEvent&&e.originalEvent.persisted&&r.each(function(){i(this).trigger("appear")})}),i(document).ready(function(){n()}),this},i.belowthefold=function(e,t){return(void 0===t.container||t.container===window?(window.innerHeight||a.height())+a.scrollTop():i(t.container).offset().top+i(t.container).height())<=i(e).offset().top-t.threshold},i.rightoffold=function(e,t){return(void 0===t.container||t.container===window?a.width()+a.scrollLeft():i(t.container).offset().left+i(t.container).width())<=i(e).offset().left-t.threshold},i.abovethetop=function(e,t){return(void 0===t.container||t.container===window?a.scrollTop():i(t.container).offset().top)>=i(e).offset().top+t.threshold+i(e).height()},i.leftofbegin=function(e,t){return(void 0===t.container||t.container===window?a.scrollLeft():i(t.container).offset().left)>=i(e).offset().left+t.threshold+i(e).width()},i.inviewport=function(e,t){return!(i.rightoffold(e,t)||i.leftofbegin(e,t)||i.belowthefold(e,t)||i.abovethetop(e,t))},i.extend(i.expr[":"],{"below-the-fold":function(e){return i.belowthefold(e,{threshold:0})},"above-the-top":function(e){return!i.belowthefold(e,{threshold:0})},"right-of-screen":function(e){return i.rightoffold(e,{threshold:0})},"left-of-screen":function(e){return!i.rightoffold(e,{threshold:0})},"in-viewport":function(e){return i.inviewport(e,{threshold:0})},"above-the-fold":function(e){return!i.belowthefold(e,{threshold:0})},"right-of-fold":function(e){return i.rightoffold(e,{threshold:0})},"left-of-fold":function(e){return!i.rightoffold(e,{threshold:0})}})},{}],50:[function(e,t,n){function s(e,t){return e<<t|e>>>32-t}function u(e,t){var n=2147483648&e,r=2147483648&t,o=(1073741823&e)+(1073741823&t);return(e=1073741824&e)&(t=1073741824&t)?2147483648^o^n^r:e|t?1073741824&o?3221225472^o^n^r:1073741824^o^n^r:o^n^r}function d(e,t,n,r,o,i,a){return e=u(e,u(u(t&n|~t&r,o),a)),u(s(e,i),t)}function p(e,t,n,r,o,i,a){return e=u(e,u(u(t&r|n&~r,o),a)),u(s(e,i),t)}function f(e,t,n,r,o,i,a){return e=u(e,u(u(t^n^r,o),a)),u(s(e,i),t)}function E(e,t,n,r,o,i,a){return e=u(e,u(u(n^(t|~r),o),a)),u(s(e,i),t)}function h(e){for(var t="",n="",r=void 0,r=0;r<=3;r++)t+=(n="0"+(e>>>8*r&255).toString(16)).substr(n.length-2,2);return t}jQuery.extend({md5:function(e){Array();for(var t,n,r,o,i=void 0,a=void 0,s=void 0,_=void 0,l=void 0,c=function(e){for(var t=void 0,n=e.length,r=n+8,r=16*(1+(r-r%64)/64),o=Array(r-1),i=0,a=0;a<n;)i=a%4*8,o[t=(a-a%4)/4]=o[t]|e.charCodeAt(a)<<i,a++;return o[t=(a-a%4)/4]=o[t]|128<<(i=a%4*8),o[r-2]=n<<3,o[r-1]=n>>>29,o}(e=function(e){e=e.replace(/\x0d\x0a/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):t=127<r&&r<2048?(t+=String.fromCharCode(r>>6|192))+String.fromCharCode(63&r|128):(t=(t+=String.fromCharCode(r>>12|224))+String.fromCharCode(r>>6&63|128))+String.fromCharCode(63&r|128)}return t}(e)),a=1732584193,s=4023233417,_=2562383102,l=271733878,i=0;i<c.length;i+=16)a=d(t=a,n=s,r=_,o=l,c[i+0],7,3614090360),l=d(l,a,s,_,c[i+1],12,3905402710),_=d(_,l,a,s,c[i+2],17,606105819),s=d(s,_,l,a,c[i+3],22,3250441966),a=d(a,s,_,l,c[i+4],7,4118548399),l=d(l,a,s,_,c[i+5],12,1200080426),_=d(_,l,a,s,c[i+6],17,2821735955),s=d(s,_,l,a,c[i+7],22,4249261313),a=d(a,s,_,l,c[i+8],7,1770035416),l=d(l,a,s,_,c[i+9],12,2336552879),_=d(_,l,a,s,c[i+10],17,4294925233),s=d(s,_,l,a,c[i+11],22,2304563134),a=d(a,s,_,l,c[i+12],7,1804603682),l=d(l,a,s,_,c[i+13],12,4254626195),_=d(_,l,a,s,c[i+14],17,2792965006),s=d(s,_,l,a,c[i+15],22,1236535329),a=p(a,s,_,l,c[i+1],5,4129170786),l=p(l,a,s,_,c[i+6],9,3225465664),_=p(_,l,a,s,c[i+11],14,643717713),s=p(s,_,l,a,c[i+0],20,3921069994),a=p(a,s,_,l,c[i+5],5,3593408605),l=p(l,a,s,_,c[i+10],9,38016083),_=p(_,l,a,s,c[i+15],14,3634488961),s=p(s,_,l,a,c[i+4],20,3889429448),a=p(a,s,_,l,c[i+9],5,568446438),l=p(l,a,s,_,c[i+14],9,3275163606),_=p(_,l,a,s,c[i+3],14,4107603335),s=p(s,_,l,a,c[i+8],20,1163531501),a=p(a,s,_,l,c[i+13],5,2850285829),l=p(l,a,s,_,c[i+2],9,4243563512),_=p(_,l,a,s,c[i+7],14,1735328473),s=p(s,_,l,a,c[i+12],20,2368359562),a=f(a,s,_,l,c[i+5],4,4294588738),l=f(l,a,s,_,c[i+8],11,2272392833),_=f(_,l,a,s,c[i+11],16,1839030562),s=f(s,_,l,a,c[i+14],23,4259657740),a=f(a,s,_,l,c[i+1],4,2763975236),l=f(l,a,s,_,c[i+4],11,1272893353),_=f(_,l,a,s,c[i+7],16,4139469664),s=f(s,_,l,a,c[i+10],23,3200236656),a=f(a,s,_,l,c[i+13],4,681279174),l=f(l,a,s,_,c[i+0],11,3936430074),_=f(_,l,a,s,c[i+3],16,3572445317),s=f(s,_,l,a,c[i+6],23,76029189),a=f(a,s,_,l,c[i+9],4,3654602809),l=f(l,a,s,_,c[i+12],11,3873151461),_=f(_,l,a,s,c[i+15],16,530742520),s=f(s,_,l,a,c[i+2],23,3299628645),a=E(a,s,_,l,c[i+0],6,4096336452),l=E(l,a,s,_,c[i+7],10,1126891415),_=E(_,l,a,s,c[i+14],15,2878612391),s=E(s,_,l,a,c[i+5],21,4237533241),a=E(a,s,_,l,c[i+12],6,1700485571),l=E(l,a,s,_,c[i+3],10,2399980690),_=E(_,l,a,s,c[i+10],15,4293915773),s=E(s,_,l,a,c[i+1],21,2240044497),a=E(a,s,_,l,c[i+8],6,1873313359),l=E(l,a,s,_,c[i+15],10,4264355552),_=E(_,l,a,s,c[i+6],15,2734768916),s=E(s,_,l,a,c[i+13],21,1309151649),a=E(a,s,_,l,c[i+4],6,4149444226),l=E(l,a,s,_,c[i+11],10,3174756917),_=E(_,l,a,s,c[i+2],15,718787259),s=E(s,_,l,a,c[i+9],21,3951481745),a=u(a,t),s=u(s,n),_=u(_,r),l=u(l,o);return(h(a)+h(s)+h(_)+h(l)).toLowerCase()}})},{}],51:[function(e,t,n){var T,C,p;window,T=jQuery,p="function"==typeof history.pushState,T.powerSwitch=function(e,t){T(e).powerSwitch(t)},T.extend(T.powerSwitch,{getRelative:function(e,o){var i,a;return 0==(e=T(e)).length?T():(a=!(i=[]),e.each(function(e,t){var n,r=T(this).attr(o.attribute)||(T(this).attr("href")||"").split("#")[1];r&&1!=i[r]?(n=T(),(n=!/^\w+$/.test(r)||0===(n=0===(n=T("#"+r)).length?T("."+r):n).length?T(r):n).each(function(e,t){i.push(t)}),i[r]=!0):1==i[r]&&(a=!0)}),e.data("isMoreToOne",a),T(i))},transition:function(e,t,n){t="transform "+t+"ms linear";0!=p&&(1==n?e.css("webkitTransition","none").css("transition","none").data("hasTransition",!1):e.data("hasTransition")||e.css({webkitTransition:"-webkit-"+t,webkitBackfaceVisibility:"hidden",transition:t,BackfaceVisibility:"hidden"}).data("hasTransition",!0))},translate:function(e,t,n){var r="translate"+t+"("+n+")";p?e.css("webkitTransform",r).css("transform",r):e.css("X"==t?{left:n}:{top:n})},animation:function(e,t,r){function n(e,t,n){parseInt(n)===n&&(n+="px"),p?(a.transition(e,r.duration,s),a.translate(e,t,n)):e[s?"css":"animate"]("X"==t?{left:n}:{top:n},r.duration)}var o,i=null,a=this,s="none"==r.animation;if(r.duration&&"none"!=r.animation&&(r.isAnimating=!0,o={slow:200,normal:400,fast:600}[r.duration]||r.duration,"sync"==r.direction&&(o=e&&t?800:e||t?400:0),setTimeout(function(){r.isAnimating=!1},o)),t&&t.length||e&&e.length)switch(1==r.toggle&&"translate"==r.animation&&(r.animation="none"),r.animation){case"translate":var _=e.data("index"),l=t.data("index"),c={vertical:"Y",horizontal:"X"};if(_!=C&&l!=C){var u,d=!0;if(r.prevOrNext)switch(r.prevOrNext.attr("data-type")){case"prev":d=!1;break;case"next":d=!0;break;default:d=_<l}u=100*(2*d-1),a.transition(t.show(),r.duration,!0),a.translate(t,c[r.direction],u+"%"),setTimeout(function(){n(e,c[r.direction],-1*u+"%"),n(t,c[r.direction],"0%")},17),r.prevOrNext=null}else e.hide(),t.show();break;case"slide":"sync"!=r.duration?(e&&e.slideUp(r.duration),t&&t.slideDown(r.duration)):e?e.slideUp("normal",function(){t&&t.slideDown()}):t&&t.slideDown();break;case"fade":"sync"!=r.duration?(e&&e.fadeOut(r.duration),t&&t.fadeIn(r.duration)):e?e.fadeOut("normal",function(){t&&t.fadeIn()}):t&&t.fadeIn();break;case"visibility":e&&e.css("visibility","hidden"),t&&t.css("visibility","visible");break;default:e&&e.hide(),t&&t.show()}else r.container&&r.container.length&&(o=r.container.data("position"),i=r.container.get(0),"vertical"==r.direction?i.scrollHeight-i.clientHeight>=Math.max(o.top,1)?"auto"==r.animation?r.container.animate({scrollTop:o.top}):r.container.scrollTop(o.top):n(r.container,"Y",-1*o.top):i.scrollWidth-i.clientWidth>=Math.max(o.left,1)?"auto"==r.animation?r.container.animate({scrollLeft:o.left}):r.container.scrollLeft(o.left):n(r.container,"X",-1*o.left))}}),T.fn.powerSwitch=function(e){var a,t,n,o,s,_,i,l,c,u,r,d,p,f={direction:"horizontal",eventType:"click",classAdd:"",classRemove:"",classPrefix:"",attribute:"data-rel",animation:"auto",duration:250,container:null,autoTime:0,number:"auto",hoverDelay:200,toggle:!1,onSwitch:T.noop},E=T.extend({},f,e||{}),h=(E.isAnimating=!1,T.each(["disabled","prev","play","pause","next"],function(e,t){var n=(t=T.trim(t)).slice(0,1).toUpperCase()+t.slice(1),r="class"+n,o=E.classPrefix.slice(-1);E[r]===C&&(E.classPrefix?/\-/g.test(E.classPrefix)?E[r]="-"==o?E.classPrefix+t:[E.classPrefix,t].join("-"):/_/g.test(E.classPrefix)?E[r]="_"==o?E.classPrefix+t:[E.classPrefix,t].join("_"):E[r]=E.classPrefix+n:E[r]=t)}),E.indexSelected||-1),A=parseInt(E.number)||1,g=null,m=null,y=T(),v=0,b=T(this);return(0!=b.length||null!=E.container&&0!=E.autoTime)&&(y=T.powerSwitch.getRelative(b,E),0!=(v=y.length))&&(-1==h&&0==E.toggle&&(E.classAdd?b.each(function(e,t){-1==h&&T(t).hasClass(E.classAdd)&&(h=e)}):y.each(function(e,t){-1==h&&("visibility"==E.animation?"hidden"!=T(t).css("visibility")&&(h=e):"none"!=T(t).css("display")&&(h=e))})),a=!1,t=T(),n=T(),o=T(),s=function(e){e<=0?t.addClass(E.classDisabled).removeAttr("title").attr("disabled","disabled"):t.removeClass(E.classDisabled).attr("title",t.data("title")).removeAttr("disabled"),1<(v-e)/A?n.removeClass(E.classDisabled).attr("title",n.data("title")).removeAttr("disabled"):n.addClass(E.classDisabled).removeAttr("title").attr("disabled","disabled")},1==b.eq(0).data("isMoreToOne")&&(a=!0,E.classDisabled?(t=b.eq(0),n=b.eq(1),t.data("title",t.attr("title")),n.data("title",n.attr("title")),s(h),h<=0&&E.container&&T(E.container).scrollLeft(0).scrollTop(0)):o=E.container?(y.clone().insertAfter(y.eq(v-1)),y=T.powerSwitch.getRelative(b,E),b.eq(1)):(t=b.eq(0),n=b.eq(1))),_=!1,1==b.length&&1<v&&(_=!0),i=function(e){var t,n,r,o,i;e!=h&&(t=y.slice(e,e+A),o=r=n=null,0==E.toggle?(1==a?(E.container?(i=t.position(),E.container=T(E.container),E.container.data("position",i),T.powerSwitch.animation(null,null,E),E.classDisabled&&s(e)):T.powerSwitch.animation(y.eq(h,h+A),t,E),E.onSwitch.call(this,t)):1==_?(T.powerSwitch.animation(null,t,E),E.onSwitch.call(this,t)):h!==e&&(r=b.eq(e),o=0<=h?(n=b.eq(h),y.eq(h,h+A)):(n=T(),T()),r.addClass(E.classAdd).removeClass(E.classRemove),n.addClass(E.classRemove).removeClass(E.classAdd),T.powerSwitch.animation(o,t,E),E.onSwitch.call(this,t,n,o)),h=e):(display="visibility"==E.animation&&"hidden"==t.css("visibility")||"visibility"!=E.animation&&"none"==t.css("display")?(T.powerSwitch.animation(null,t,E),!0):(T.powerSwitch.animation(t,null,E),!1),E.onSwitch.call(this,t,display)))},l=location.href.split("#")[1],b.each(function(n,r){T(r).data("index",n),1==a?T(r).bind("click",function(){var e=void 0,t=void 0;if(1==E.isAnimating)return!1;if(E.classDisabled){if(T(this).attr("disabled"))return!1;0==n?(e=h-A,e=Math.max(0,e)):1==n&&(e=h+A,e=Math.min(e,v-1)),i.call(this,e)}else o=(E.container&&A<v?(0==n?(e=h-A)<0&&(t=y.eq(h+v),T(E.container).data("position",t.position()),T.powerSwitch.animation(null,null,T.extend({},E,{animation:"none"})),e=h+v-A):1==n&&2*v-A<(e=h+A)&&(t=y.eq(h-v),T(E.container).data("position",t.position()),T.powerSwitch.animation(null,null,T.extend({},E,{animation:"none"})),e=h-v+A),i.call(this,e)):(n?c:u)(this),T(this));return(!r||!r.href)&&void 0}):1==_?T(r).bind("click",function(){var e=void 0;return 1!=E.isAnimating&&("auto"==E.number&&(A=v),T(this).attr("disabled")||(e=-1==h?0:h+A,i.call(this,e),v-1<=e&&T(this).addClass(E.classDisabled).attr("disabled","disabled").removeAttr("title")),!r||!r.href)&&void 0}):"click"==E.eventType?(T(r).bind("click",function(){return 1!=E.isAnimating&&(E.prevOrNext=T(this),i.call(this,n),this.id===T(this).attr(E.attribute)||!r||!r.href)&&void 0}),l&&r.href&&l==r.href.split("#")[1]&&T(r).trigger("click")):/^hover|mouseover$/.test(E.eventType)&&T(r).hover(function(){if(1==E.isAnimating)return!1;E.prevOrNext=T(this),clearTimeout(g),g=setTimeout(function(){i.call(r,n)},parseInt(E.hoverDelay)||0)},function(){clearTimeout(g)})}),y.each(function(e,t){T(t).data("index",e)}),c=function(e){var t=h+1;v<=t&&(t=0),i.call(e||b.get(t),t)},u=function(e){var t=h-1;t<0&&(t=v-1),i.call(e||b.get(t),t)},r=function(){o.trigger("click")},d=function e(){clearTimeout(m),1==e.flagAutoPlay&&(m=setTimeout(function(){(0==a?c:r)(),e()},E.autoTime))},0==_&&0==E.toggle&&0==a||1==a&&!E.classDisabled)&&(E.container&&0==a&&(p="",b.length&&T.each(["Prev","Pause","Next"],function(e,t){0==E.autoTime&&"Pause"==t||(p=p+'<a href="javascript:" class="'+E["class"+t]+'" data-type="'+t.toLowerCase()+'"></a>')}),E.container.append(p).delegate("a","click",function(){if(1!=E.isAnimating){var e=T(this).attr("data-type"),t=E["class"+e.slice(0,1).toUpperCase()+e.slice(1)];switch(e){case"prev":E.prevOrNext=T(this),u(),E.autoTime&&d();break;case"play":d.flagAutoPlay=!0,T(this).attr("data-type","pause").removeClass(t).addClass(E.classPause),d();break;case"pause":d.flagAutoPlay=!1,T(this).attr("data-type","play").removeClass(t).addClass(E.classPlay),d();break;case"next":E.prevOrNext=T(this),c(),E.autoTime&&d()}}return!1})),E.autoTime)&&(!1!==E.hoverStop&&(f=[b,y,E.container],(1==a||document.body.contains&&E.container&&E.container.get(0).contains(y.get(0)))&&(f=[b,E.container]),T.each(f,function(e,t){t&&t.hover(function(e){e.pageX===C&&"click"!=E.eventType||clearTimeout(m)},function(e){e.pageX===C&&"click"!=E.eventType||d()})})),d.flagAutoPlay=!0,d()),b}},{}]},{},[46]);/*------------Modifier: < V_HEHUANLV-MC2 > 2023-1-13 5:54:39 PM------------*/
//src_url:https://mat1.gtimg.com/qqcdn/qqindex2021/qqhome/js/qq_1d311770.js